!function(e){function t(t){for(var o,s,c=t[0],a=t[1],l=t[2],h=0,d=[];h<c.length;h++)s=c[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={3:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+e+".app.js"}(e);var a=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,n[1](a)}r[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vlocityresources/",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=a;i.push([108,2,4]),n()}({108:function(e,t,n){e.exports=n(182)},119:function(e,t){},121:function(e,t){},127:function(e,t){},129:function(e,t){},182:function(e,t,n){"use strict";n.r(t);n(109);var o=n(8);var r=[function(e,t,n){return".wrapper"+t+"{margin:20px;background-color:#fff}.vloc-container"+t+"{padding-top:10px}"}];function i(e,t,n,o){const{dc:r,f:i,h:s}=e;return[s("div",{classMap:{wrapper:!0},key:3},[s("div",{classMap:{"slds-box":!0},key:2},[t.view?s("div",{classMap:{"vloc-container":!0},key:1},i([r("vloc-view",t.view.component,{context:{lwc:{}},key:0},[])])):null])])]}var s=Object(o.registerTemplate)(i);i.stylesheets=[],r&&i.stylesheets.push.apply(i.stylesheets,r),i.stylesheetTokens={hostAttribute:"vloc-app-_app-host",shadowAttribute:"vloc-app-_app"};var c=n(107),a=n.n(c),l=n(39);class u extends o.LightningElement{constructor(){super(),this.router=new a.a(location.origin,!0),this.view=void 0,this.authUrl=void 0,this.authenticated=!1;const e=window.sessionStorage.getItem("sf.access-token"),t=window.sessionStorage.getItem("sf.refresh-token");e&&t?l.a.authorizeWithAccessToken(e,t).then(()=>{this.authenticated=!0,this.setup()}):this.setup()}setup(){this.router.on({"/view":async()=>{if(!this.authenticated)return void this.router.navigate("/auth");const{default:e}=await Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,217));this.setView(e)},"/auth":async()=>{if(this.authenticated)return void this.router.navigate("/view");const{default:e}=await Promise.all([n.e(0),n.e(7)]).then(n.bind(null,218));this.setView(e)},"/error":async()=>{const{default:e}=await Promise.all([n.e(1),n.e(5)]).then(n.bind(null,219));this.setView(e)},"/callback":async()=>{const e=this.getUrlParamValue("code");l.a.authorize(e).then(()=>{this.authenticated=!0,window.location.href=window.location.origin+window.location.pathname+"#/view"}).catch(()=>{this.router.navigate("/error"),this.authenticated=!1})}});const e=()=>{this.router.navigate("/auth")};this.router.notFound(e),this.router.on(e),this.router.resolve()}setView(e,t={}){this.view={component:e,props:t}}handleNavigateEvent(e){const{path:t}=e.detail;this.router.navigate(t)}getUrlParamValue(e){return new URL(window.location.href).searchParams.get(e)}logout(){l.a.logout().then(()=>{window.location.reload()})}}Object(o.registerDecorators)(u,{track:{view:1,authUrl:1,authenticated:1},fields:["router"]});var h=Object(o.registerComponent)(u,{tmpl:s});const d={"Service Worker":"serviceWorker"in navigator};Object.keys(d).some(e=>!d[e])?function(){const{outdated:e}=window;e.style.display="unset";let t="This browser doesn't support all the required features";t+="<ul>";for(const[e,n]of Object.entries(d))t+=`<li><b>${e}:<b> ${n?"✅":"❌"}</li>`;t+="</ul>",e.querySelector(".unsupported_message").innerHTML=t}():(customElements.define("vloc-app",Object(o.buildCustomElementConstructor)(h)),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js"),console.log("Service worker registered")}))},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(8),r=n(40),i=n.n(r);class s{constructor(){this.oauth2=void 0,this.connected=!1,this.connection=void 0,this.loginUrl="https://login.salesforce.com",this.redirectUri="http://localhost:4002/#/callback",this.clientId="3MVG9KsVczVNcM8zXPRcylx9bKVbNheyIO47ipzyKaQeL6k0zJ_ecMPYjOWKv1zEoANKx34jun5D90bZVbXYe",this.clientSecret="DC7CF72F1F2C359B2381DB7B139BC2049CF39A422F3EE0FAA845E6BF90BB8098",this.instanceUrl="https://agarcia-lwc-compiler-dev-ed.my.salesforce.com",this.proxyUrl="https://vloc-omniout-proxy-agarcia.herokuapp.com/proxy/",this.oauth2=new i.a.OAuth2({loginUrl:this.loginUrl,clientId:this.clientId,clientSecret:this.clientSecret,redirectUri:this.redirectUri,proxyUrl:this.proxyUrl})}get isConnected(){return this.connected}get authUrl(){return this.oauth2.getAuthorizationUrl({scope:"api id web refresh_token"})}get apex(){return this.connection?this.connection.apex:null}authorize(e){return new Promise((t,n)=>{this.connection=new i.a.Connection({oauth2:this.oauth2,loginUrl:this.loginUrl,proxyUrl:this.proxyUrl,logLevel:"DEBUG"}),this.connection.on("refresh",(function(e,t){window.sessionStorage.key("sf.access-token",e),console.log("refresh token")})),this.connection.authorize(e,async(e,o)=>{e?n(e):(this.connected=!0,window.sessionStorage.setItem("sf.access-token",this.connection.accessToken),window.sessionStorage.setItem("sf.refresh-token",this.connection.refreshToken),console.log("connection created"),t())})})}authorizeWithAccessToken(e,t){return new Promise((n,o)=>{this.connection=new i.a.Connection({loginUrl:this.loginUrl,oauth2:this.oauth2,accessToken:e,refreshToken:t,instanceUrl:this.instanceUrl,proxyUrl:this.proxyUrl,logLevel:"DEBUG"}),this.connection.on("refresh",(function(e,t){window.sessionStorage.key("sf.access-token",e),console.log("refresh token")})),n()})}logout(){return new Promise((e,t)=>{window.sessionStorage.removeItem("sf.access-token"),window.sessionStorage.removeItem("sf.refresh-token"),e()})}}Object(o.registerDecorators)(s,{fields:["oauth2","connected","connection","loginUrl","redirectUri","clientId","clientSecret","instanceUrl","proxyUrl"]});const c=new s}});