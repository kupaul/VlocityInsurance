/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const directives=new WeakMap(),directive=f=>{directives.set(f,!0);return f;},isDirective=o=>"function"===typeof o&&directives.has(o);var directive$1={directive:directive,isDirective:isDirective};/**
    * @license
    * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
    * This code may only be used under the BSD style license found at
    * http://polymer.github.io/LICENSE.txt
    * The complete set of authors may be found at
    * http://polymer.github.io/AUTHORS.txt
    * The complete set of contributors may be found at
    * http://polymer.github.io/CONTRIBUTORS.txt
    * Code distributed by Google as part of the polymer project is also
    * subject to an additional IP rights grant found at
    * http://polymer.github.io/PATENTS.txt
    */const isCEPolyfill=window.customElements!==void 0&&window.customElements.polyfillWrapFlushCallback!==void 0,reparentNodes=(container,start,end=null,before=null)=>{let node=start;while(node!==end){const n=node.nextSibling;container.insertBefore(node,before);node=n;}},removeNodes=(container,startNode,endNode=null)=>{let node=startNode;while(node!==endNode){const n=node.nextSibling;container.removeChild(node);node=n;}};/**
                                                                                                                                   * Reparents nodes, starting from `startNode` (inclusive) to `endNode`
                                                                                                                                   * (exclusive), into another container (could be the same container), before
                                                                                                                                   * `beforeNode`. If `beforeNode` is null, it appends the nodes to the
                                                                                                                                   * container.
                                                                                                                                   */var dom={isCEPolyfill:isCEPolyfill,reparentNodes:reparentNodes,removeNodes:removeNodes};/**
    * A sentinel value that signals that a value was handled by a directive and
    * should not be written to the DOM.
    */const noChange={};var part={noChange:noChange};/**
    * @license
    * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
    * This code may only be used under the BSD style license found at
    * http://polymer.github.io/LICENSE.txt
    * The complete set of authors may be found at
    * http://polymer.github.io/AUTHORS.txt
    * The complete set of contributors may be found at
    * http://polymer.github.io/CONTRIBUTORS.txt
    * Code distributed by Google as part of the polymer project is also
    * subject to an additional IP rights grant found at
    * http://polymer.github.io/PATENTS.txt
    */ /**
        * An expression marker with embedded unique key to avoid collision with
        * possible text in templates.
        */const marker=`{{lit-${(Math.random()+"").slice(2)}}}`,nodeMarker=`<!--${marker}-->`,markerRegex=new RegExp(`${marker}|${nodeMarker}`),rewritesStyleAttribute=(()=>{const el=document.createElement("div");el.setAttribute("style","{{bad value}}");return"{{bad value}}"!==el.getAttribute("style");})();/**
                                                                    * An expression marker used text-positions, not attribute positions,
                                                                    * in template.
                                                                    */ /**
       * An updateable Template that tracks the location of dynamic parts.
       */class Template{constructor(result,element){this.parts=[];this.element=element;let index=-1,partIndex=0;const nodesToRemove=[],_prepareTemplate=template=>{const content=template.content,walker=document.createTreeWalker(content,133/* NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT |
                                                            NodeFilter.SHOW_TEXT */,null,!1);// Edge needs all 4 parameters present; IE11 needs 3rd parameter to be
// null
// The actual previous node, accounting for removals: if a node is removed
// it will never be the previousNode.
let previousNode,currentNode;// Used to set previousNode at the top of the loop.
while(walker.nextNode()){index++;previousNode=currentNode;const node=currentNode=walker.currentNode;if(1===node.nodeType/* Node.ELEMENT_NODE */){if(node.hasAttributes()){const attributes=node.attributes;// Per
// https://developer.mozilla.org/en-US/docs/Web/API/NamedNodeMap,
// attributes are not guaranteed to be returned in document order.
// In particular, Edge/IE can return them out of order, so we cannot
// assume a correspondance between part index and attribute index.
let count=0;for(let i=0;i<attributes.length;i++){if(0<=attributes[i].value.indexOf(marker)){count++;}}while(0<count--){// Get the template literal section leading up to the first
// expression in this attribute
const stringForPart=result.strings[partIndex],name=lastAttributeNameRegex.exec(stringForPart)[2],attributeLookupName=rewritesStyleAttribute&&"style"===name?"style$":/^[a-zA-Z-]*$/.test(name)?name:name.toLowerCase(),attributeValue=node.getAttribute(attributeLookupName),strings=attributeValue.split(markerRegex);// Find the attribute name
this.parts.push({type:"attribute",index,name,strings});node.removeAttribute(attributeLookupName);partIndex+=strings.length-1;}}if("TEMPLATE"===node.tagName){_prepareTemplate(node);}}else if(3===node.nodeType/* Node.TEXT_NODE */){const nodeValue=node.nodeValue;if(0>nodeValue.indexOf(marker)){continue;}const parent=node.parentNode,strings=nodeValue.split(markerRegex),lastIndex=strings.length-1;// We have a part for each match found
partIndex+=lastIndex;// Generate a new text node for each literal section
// These nodes are also used as the markers for node parts
for(let i=0;i<lastIndex;i++){parent.insertBefore(""===strings[i]?createMarker():document.createTextNode(strings[i]),node);this.parts.push({type:"node",index:index++});}parent.insertBefore(""===strings[lastIndex]?createMarker():document.createTextNode(strings[lastIndex]),node);nodesToRemove.push(node);}else if(8===node.nodeType/* Node.COMMENT_NODE */){if(node.nodeValue===marker){const parent=node.parentNode,previousSibling=node.previousSibling;// Add a new marker node to be the startNode of the Part if any of
// the following are true:
//  * We don't have a previousSibling
//  * previousSibling is being removed (thus it's not the
//    `previousNode`)
//  * previousSibling is not a Text node
//
// TODO(justinfagnani): We should be able to use the previousNode
// here as the marker node and reduce the number of extra nodes we
// add to a template. See
// https://github.com/PolymerLabs/lit-html/issues/147
if(null===previousSibling||previousSibling!==previousNode||previousSibling.nodeType!==Node.TEXT_NODE){parent.insertBefore(createMarker(),node);}else{index--;}this.parts.push({type:"node",index:index++});nodesToRemove.push(node);// If we don't have a nextSibling add a marker node.
// We don't have to check if the next node is going to be removed,
// because that node will induce a new marker if so.
if(null===node.nextSibling){parent.insertBefore(createMarker(),node);}else{index--;}currentNode=previousNode;partIndex++;}else{let i=-1;while(-1!==(i=node.nodeValue.indexOf(marker,i+1))){// Comment node has a binding marker inside, make an inactive part
// The binding won't work, but subsequent bindings will
// TODO (justinfagnani): consider whether it's even worth it to
// make bindings in comments work
this.parts.push({type:"node",index:-1});}}}}};_prepareTemplate(element);// Remove text binding nodes after the walk to not disturb the TreeWalker
for(const n of nodesToRemove){n.parentNode.removeChild(n);}}}const isTemplatePartActive=part=>-1!==part.index,createMarker=()=>document.createComment(""),lastAttributeNameRegex=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;// Allows `document.createComment('')` to be renamed for a
// small manual size-savings.
var template={marker:marker,nodeMarker:nodeMarker,markerRegex:markerRegex,rewritesStyleAttribute:rewritesStyleAttribute,Template:Template,isTemplatePartActive:isTemplatePartActive,createMarker:createMarker,lastAttributeNameRegex:lastAttributeNameRegex};class TemplateInstance{constructor(template,processor,options){this._parts=[];this.template=template;this.processor=processor;this.options=options;}update(values){let i=0;for(const part of this._parts){if(part!==void 0){part.setValue(values[i]);}i++;}for(const part of this._parts){if(part!==void 0){part.commit();}}}_clone(){// When using the Custom Elements polyfill, clone the node, rather than
// importing it, to keep the fragment in the template's document. This
// leaves the fragment inert so custom elements won't upgrade and
// potentially modify their contents by creating a polyfilled ShadowRoot
// while we traverse the tree.
const fragment=isCEPolyfill?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),parts=this.template.parts;let partIndex=0,nodeIndex=0;const _prepareInstance=fragment=>{// Edge needs all 4 parameters present; IE11 needs 3rd parameter to be
// null
const walker=document.createTreeWalker(fragment,133/* NodeFilter.SHOW_{ELEMENT|COMMENT|TEXT} */,null,!1);let node=walker.nextNode();// Loop through all the nodes and parts of a template
while(partIndex<parts.length&&null!==node){const part=parts[partIndex];// Consecutive Parts may have the same node index, in the case of
// multiple bound attributes on an element. So each iteration we either
// increment the nodeIndex, if we aren't on a node with a part, or the
// partIndex if we are. By not incrementing the nodeIndex when we find a
// part, we allow for the next part to be associated with the current
// node if neccessasry.
if(!isTemplatePartActive(part)){this._parts.push(void 0);partIndex++;}else if(nodeIndex===part.index){if("node"===part.type){const part=this.processor.handleTextExpression(this.options);part.insertAfterNode(node);this._parts.push(part);}else{this._parts.push(...this.processor.handleAttributeExpressions(node,part.name,part.strings,this.options));}partIndex++;}else{nodeIndex++;if("TEMPLATE"===node.nodeName){_prepareInstance(node.content);}node=walker.nextNode();}}};_prepareInstance(fragment);if(isCEPolyfill){document.adoptNode(fragment);customElements.upgrade(fragment);}return fragment;}}var templateInstance={TemplateInstance:TemplateInstance};class TemplateResult{constructor(strings,values,type,processor){this.strings=strings;this.values=values;this.type=type;this.processor=processor;}/**
     * Returns a string of HTML used to create a `<template>` element.
     */getHTML(){const l=this.strings.length-1;let html="",isTextBinding=!0;for(let i=0;i<l;i++){const s=this.strings[i];html+=s;const close=s.lastIndexOf(">");// We're in a text position if the previous string closed its last tag, an
// attribute position if the string opened an unclosed tag, and unchanged
// if the string had no brackets at all:
//
// "...>...": text position. open === -1, close > -1
// "...<...": attribute position. open > -1
// "...": no change. open === -1, close === -1
isTextBinding=(-1<close||isTextBinding)&&-1===s.indexOf("<",close+1);if(!isTextBinding&&rewritesStyleAttribute){html=html.replace(lastAttributeNameRegex,(match,p1,p2,p3)=>{return"style"===p2?`${p1}style$${p3}`:match;});}html+=isTextBinding?nodeMarker:marker;}html+=this.strings[l];return html;}getTemplateElement(){const template=document.createElement("template");template.innerHTML=this.getHTML();return template;}}/**
   * A TemplateResult for SVG fragments.
   *
   * This class wraps HTMl in an `<svg>` tag in order to parse its contents in the
   * SVG namespace, then modifies the template to remove the `<svg>` tag so that
   * clones only container the original fragment.
   */class SVGTemplateResult extends TemplateResult{getHTML(){return`<svg>${super.getHTML()}</svg>`;}getTemplateElement(){const template=super.getTemplateElement(),content=template.content,svgElement=content.firstChild;content.removeChild(svgElement);reparentNodes(content,svgElement.firstChild);return template;}}var templateResult={TemplateResult:TemplateResult,SVGTemplateResult:SVGTemplateResult};const isPrimitive=value=>null===value||!("object"===typeof value||"function"===typeof value);/**
                                                                                                                    * Sets attribute values for AttributeParts, so that the value is only set once
                                                                                                                    * even if there are multiple parts for an attribute.
                                                                                                                    */class AttributeCommitter{constructor(element,name,strings){this.dirty=!0;this.element=element;this.name=name;this.strings=strings;this.parts=[];for(let i=0;i<strings.length-1;i++){this.parts[i]=this._createPart();}}/**
     * Creates a single part. Override this to create a differnt type of part.
     */_createPart(){return new AttributePart(this);}_getValue(){const strings=this.strings,l=strings.length-1;let text="";for(let i=0;i<l;i++){text+=strings[i];const part=this.parts[i];if(part!==void 0){const v=part.value;if(null!=v&&(Array.isArray(v)||"string"!==typeof v&&v[Symbol.iterator])){for(const t of v){text+="string"===typeof t?t:t+"";}}else{text+="string"===typeof v?v:v+"";}}}text+=strings[l];return text;}commit(){if(this.dirty){this.dirty=!1;this.element.setAttribute(this.name,this._getValue());}}}class AttributePart{constructor(comitter){this.value=void 0;this.committer=comitter;}setValue(value){if(value!==noChange&&(!isPrimitive(value)||value!==this.value)){this.value=value;// If the value is a not a directive, dirty the committer so that it'll
// call setAttribute. If the value is a directive, it'll dirty the
// committer if it calls setValue().
if(!isDirective(value)){this.committer.dirty=!0;}}}commit(){while(isDirective(this.value)){const directive=this.value;this.value=noChange;directive(this);}if(this.value===noChange){return;}this.committer.commit();}}class NodePart{constructor(options){this.value=void 0;this._pendingValue=void 0;this.options=options;}/**
     * Inserts this part into a container.
     *
     * This part must be empty, as its contents are not automatically moved.
     */appendInto(container){this.startNode=container.appendChild(createMarker());this.endNode=container.appendChild(createMarker());}/**
     * Inserts this part between `ref` and `ref`'s next sibling. Both `ref` and
     * its next sibling must be static, unchanging nodes such as those that appear
     * in a literal section of a template.
     *
     * This part must be empty, as its contents are not automatically moved.
     */insertAfterNode(ref){this.startNode=ref;this.endNode=ref.nextSibling;}/**
     * Appends this part into a parent part.
     *
     * This part must be empty, as its contents are not automatically moved.
     */appendIntoPart(part){part._insert(this.startNode=createMarker());part._insert(this.endNode=createMarker());}/**
     * Appends this part after `ref`
     *
     * This part must be empty, as its contents are not automatically moved.
     */insertAfterPart(ref){ref._insert(this.startNode=createMarker());this.endNode=ref.endNode;ref.endNode=this.startNode;}setValue(value){this._pendingValue=value;}commit(){while(isDirective(this._pendingValue)){const directive=this._pendingValue;this._pendingValue=noChange;directive(this);}const value=this._pendingValue;if(value===noChange){return;}if(isPrimitive(value)){if(value!==this.value){this._commitText(value);}}else if(value instanceof TemplateResult){this._commitTemplateResult(value);}else if(value instanceof Node){this._commitNode(value);}else if(Array.isArray(value)||value[Symbol.iterator]){this._commitIterable(value);}else if(value.then!==void 0){this._commitPromise(value);}else{// Fallback, will render the string representation
this._commitText(value);}}_insert(node){this.endNode.parentNode.insertBefore(node,this.endNode);}_commitNode(value){if(this.value===value){return;}this.clear();this._insert(value);this.value=value;}_commitText(value){const node=this.startNode.nextSibling;value=null==value?"":value;if(node===this.endNode.previousSibling&&node.nodeType===Node.TEXT_NODE){// If we only have a single text node between the markers, we can just
// set its value, rather than replacing it.
// TODO(justinfagnani): Can we just check if this.value is primitive?
node.textContent=value;}else{this._commitNode(document.createTextNode("string"===typeof value?value:value+""));}this.value=value;}_commitTemplateResult(value){const template=this.options.templateFactory(value);if(this.value&&this.value.template===template){this.value.update(value.values);}else{// Make sure we propagate the template processor from the TemplateResult
// so that we use its syntax extension, etc. The template factory comes
// from the render function options so that it can control template
// caching and preprocessing.
const instance=new TemplateInstance(template,value.processor,this.options),fragment=instance._clone();instance.update(value.values);this._commitNode(fragment);this.value=instance;}}_commitIterable(value){// For an Iterable, we create a new InstancePart per item, then set its
// value to the item. This is a little bit of overhead for every item in
// an Iterable, but it lets us recurse easily and efficiently update Arrays
// of TemplateResults that will be commonly returned from expressions like:
// array.map((i) => html`${i}`), by reusing existing TemplateInstances.
// If _value is an array, then the previous render was of an
// iterable and _value will contain the NodeParts from the previous
// render. If _value is not an array, clear this part and make a new
// array for NodeParts.
if(!Array.isArray(this.value)){this.value=[];this.clear();}// Lets us keep track of how many items we stamped so we can clear leftover
// items from a previous render
const itemParts=this.value;let partIndex=0,itemPart;for(const item of value){// Try to reuse an existing part
itemPart=itemParts[partIndex];// If no existing part, create a new one
if(itemPart===void 0){itemPart=new NodePart(this.options);itemParts.push(itemPart);if(0===partIndex){itemPart.appendIntoPart(this);}else{itemPart.insertAfterPart(itemParts[partIndex-1]);}}itemPart.setValue(item);itemPart.commit();partIndex++;}if(partIndex<itemParts.length){// Truncate the parts array so _value reflects the current state
itemParts.length=partIndex;this.clear(itemPart&&itemPart.endNode);}}_commitPromise(value){this.value=value;value.then(v=>{if(this.value===value){this.setValue(v);this.commit();}});}clear(startNode=this.startNode){removeNodes(this.startNode.parentNode,startNode.nextSibling,this.endNode);}}/**
   * Implements a boolean attribute, roughly as defined in the HTML
   * specification.
   *
   * If the value is truthy, then the attribute is present with a value of
   * ''. If the value is falsey, the attribute is removed.
   */class BooleanAttributePart{constructor(element,name,strings){this.value=void 0;this._pendingValue=void 0;if(2!==strings.length||""!==strings[0]||""!==strings[1]){throw new Error("Boolean attributes can only contain a single expression");}this.element=element;this.name=name;this.strings=strings;}setValue(value){this._pendingValue=value;}commit(){while(isDirective(this._pendingValue)){const directive=this._pendingValue;this._pendingValue=noChange;directive(this);}if(this._pendingValue===noChange){return;}const value=!!this._pendingValue;if(this.value!==value){if(value){this.element.setAttribute(this.name,"");}else{this.element.removeAttribute(this.name);}}this.value=value;this._pendingValue=noChange;}}/**
   * Sets attribute values for PropertyParts, so that the value is only set once
   * even if there are multiple parts for a property.
   *
   * If an expression controls the whole property value, then the value is simply
   * assigned to the property under control. If there are string literals or
   * multiple expressions, then the strings are expressions are interpolated into
   * a string first.
   */class PropertyCommitter extends AttributeCommitter{constructor(element,name,strings){super(element,name,strings);this.single=2===strings.length&&""===strings[0]&&""===strings[1];}_createPart(){return new PropertyPart(this);}_getValue(){if(this.single){return this.parts[0].value;}return super._getValue();}commit(){if(this.dirty){this.dirty=!1;this.element[this.name]=this._getValue();}}}class PropertyPart extends AttributePart{}// Detect event listener options support. If the `capture` property is read
// from the options object, then options are supported. If not, then the thrid
// argument to add/removeEventListener is interpreted as the boolean capture
// value so we should only pass the `capture` property.
let eventOptionsSupported=!1;try{const options={get capture(){eventOptionsSupported=!0;return!1;}};window.addEventListener("test",options,options);window.removeEventListener("test",options,options);}catch(_e){}class EventPart{constructor(element,eventName,eventContext){this.value=void 0;this._pendingValue=void 0;this.element=element;this.eventName=eventName;this.eventContext=eventContext;}setValue(value){this._pendingValue=value;}commit(){while(isDirective(this._pendingValue)){const directive=this._pendingValue;this._pendingValue=noChange;directive(this);}if(this._pendingValue===noChange){return;}const newListener=this._pendingValue,oldListener=this.value,shouldRemoveListener=null==newListener||null!=oldListener&&(newListener.capture!==oldListener.capture||newListener.once!==oldListener.once||newListener.passive!==oldListener.passive),shouldAddListener=null!=newListener&&(null==oldListener||shouldRemoveListener);if(shouldRemoveListener){this.element.removeEventListener(this.eventName,this,this._options);}this._options=getOptions(newListener);if(shouldAddListener){this.element.addEventListener(this.eventName,this,this._options);}this.value=newListener;this._pendingValue=noChange;}handleEvent(event){const listener="function"===typeof this.value?this.value:"function"===typeof this.value.handleEvent?this.value.handleEvent:()=>null;listener.call(this.eventContext||this.element,event);}}// We copy options because of the inconsistent behavior of browsers when reading
// the third argument of add/removeEventListener. IE11 doesn't support options
// at all. Chrome 41 only reads `capture` if the argument is an object.
const getOptions=o=>o&&(eventOptionsSupported?{capture:o.capture,passive:o.passive,once:o.once}:o.capture);var parts={isPrimitive:isPrimitive,AttributeCommitter:AttributeCommitter,AttributePart:AttributePart,NodePart:NodePart,BooleanAttributePart:BooleanAttributePart,PropertyCommitter:PropertyCommitter,PropertyPart:PropertyPart,EventPart:EventPart};class DefaultTemplateProcessor{/**
   * Create parts for an attribute-position binding, given the event, attribute
   * name, and string literals.
   *
   * @param element The element containing the binding
   * @param name  The attribute name
   * @param strings The string literals. There are always at least two strings,
   *   event for fully-controlled bindings with a single expression.
   */handleAttributeExpressions(element,name,strings,options){const prefix=name[0];if("."===prefix){const comitter=new PropertyCommitter(element,name.slice(1),strings);return comitter.parts;}if("@"===prefix){return[new EventPart(element,name.slice(1),options.eventContext)];}if("?"===prefix){return[new BooleanAttributePart(element,name.slice(1),strings)];}const comitter=new AttributeCommitter(element,name,strings);return comitter.parts;}/**
     * Create parts for a text-position binding.
     * @param templateFactory
     */handleTextExpression(options){return new NodePart(options);}}const defaultTemplateProcessor=new DefaultTemplateProcessor();var defaultTemplateProcessor$1={DefaultTemplateProcessor:DefaultTemplateProcessor,defaultTemplateProcessor:defaultTemplateProcessor};function templateFactory(result){let templateCache=templateCaches.get(result.type);if(templateCache===void 0){templateCache=new Map();templateCaches.set(result.type,templateCache);}let template=templateCache.get(result.strings);if(template===void 0){template=new Template(result,result.getTemplateElement());templateCache.set(result.strings,template);}return template;}// The first argument to JS template tags retain identity across multiple
// calls to a tag for the same literal, so we can cache work done per literal
// in a Map.
const templateCaches=new Map();var templateFactory$1={templateFactory:templateFactory,templateCaches:templateCaches};const parts$1=new WeakMap(),render=(result,container,options)=>{let part=parts$1.get(container);if(part===void 0){removeNodes(container,container.firstChild);parts$1.set(container,part=new NodePart(Object.assign({templateFactory},options)));part.appendInto(container);}part.setValue(result);part.commit();};/**
                                     * Renders a template to a container.
                                     *
                                     * To update a container with new values, reevaluate the template literal and
                                     * call `render` with the new result.
                                     *
                                     * @param result a TemplateResult created by evaluating a template tag like
                                     *     `html` or `svg`.
                                     * @param container A DOM parent to render to. The entire contents are either
                                     *     replaced, or efficiently updated if the same result type was previous
                                     *     rendered there.
                                     * @param options RenderOptions for the entire render tree rendered to this
                                     *     container. Render options must *not* change between renders to the same
                                     *     container, as those changes will not effect previously rendered DOM.
                                     */var render$1={parts:parts$1,render:render};/**
    * Interprets a template literal as an HTML template that can efficiently
    * render to and update a container.
    */const html=(strings,...values)=>new TemplateResult(strings,values,"html",defaultTemplateProcessor),svg=(strings,...values)=>new SVGTemplateResult(strings,values,"svg",defaultTemplateProcessor);/**
                                                                                                                    * Interprets a template literal as an SVG template that can efficiently
                                                                                                                    * render to and update a container.
                                                                                                                    */var litHtml={html:html,svg:svg,TemplateResult:TemplateResult,SVGTemplateResult:SVGTemplateResult,marker:marker,nodeMarker:nodeMarker,markerRegex:markerRegex,rewritesStyleAttribute:rewritesStyleAttribute,Template:Template,isTemplatePartActive:isTemplatePartActive,createMarker:createMarker,lastAttributeNameRegex:lastAttributeNameRegex,DefaultTemplateProcessor:DefaultTemplateProcessor,defaultTemplateProcessor:defaultTemplateProcessor,TemplateInstance:TemplateInstance,noChange:noChange,isPrimitive:isPrimitive,AttributeCommitter:AttributeCommitter,AttributePart:AttributePart,NodePart:NodePart,BooleanAttributePart:BooleanAttributePart,PropertyCommitter:PropertyCommitter,PropertyPart:PropertyPart,EventPart:EventPart,isCEPolyfill:isCEPolyfill,reparentNodes:reparentNodes,removeNodes:removeNodes,directive:directive,isDirective:isDirective,parts:parts$1,render:render,templateFactory:templateFactory,templateCaches:templateCaches};// TODO(kschaaf): Refactor into Part API?
const createAndInsertPart=(containerPart,beforePart)=>{const container=containerPart.startNode.parentNode,beforeNode=beforePart===void 0?containerPart.endNode:beforePart.startNode,startNode=container.insertBefore(createMarker(),beforeNode);container.insertBefore(createMarker(),beforeNode);const newPart=new NodePart(containerPart.options);newPart.insertAfterNode(startNode);return newPart;},updatePart=(part,value)=>{part.setValue(value);part.commit();return part;},insertPartBefore=(containerPart,part,ref)=>{const container=containerPart.startNode.parentNode,beforeNode=ref?ref.startNode:containerPart.endNode,endNode=part.endNode.nextSibling;if(endNode!==beforeNode){reparentNodes(container,part.startNode,endNode,beforeNode);}},removePart=part=>{removeNodes(part.startNode.parentNode,part.startNode,part.endNode.nextSibling);},generateMap=(list,start,end)=>{const map=new Map();for(let i=start;i<=end;i++){map.set(list[i],i);}return map;},partListCache=new WeakMap(),keyListCache=new WeakMap();function repeat(items,keyFnOrTemplate,template){let keyFn;if(2===arguments.length){template=keyFnOrTemplate;}else if(3===arguments.length){keyFn=keyFnOrTemplate;}return directive(containerPart=>{// Old part & key lists are retrieved from the last update (associated with
// the part for this instance of the directive)
const oldParts=partListCache.get(containerPart)||[],oldKeys=keyListCache.get(containerPart)||[],newParts=[],newValues=[],newKeys=[];let index=0;for(const item of items){newKeys[index]=keyFn?keyFn(item,index):index;newValues[index]=template(item,index);index++;}// Maps from key to index for current and previous update; these are
// generated lazily only when needed as a performance optimization, since
// they are only required for multiple non-contiguous changes in the list,
// which are less common.
let newKeyToIndexMap,oldKeyToIndexMap,oldHead=0,oldTail=oldParts.length-1,newHead=0,newTail=newValues.length-1;// Overview of O(n) reconciliation algorithm (general approach based on
// ideas found in ivi, vue, snabbdom, etc.):
//
// * We start with the list of old parts and new values (and arrays of
//   their respective keys), head/tail pointers into each, and we build
//   up the new list of parts by updating (and when needed, moving) old
//   parts or creating new ones. The initial scenario might look like this
//   (for brevity of the diagrams, the numbers in the array reflect keys
//   associated with the old parts or new values, although keys and
//   parts/values are actually stored in parallel arrays indexed using the
//   same head/tail pointers):
//
//      oldHead v                 v oldTail
//   oldKeys:  [0, 1, 2, 3, 4, 5, 6]
//   newParts: [ ,  ,  ,  ,  ,  ,  ]
//   newKeys:  [0, 2, 1, 4, 3, 7, 6] <- reflects the user's new item order
//      newHead ^                 ^ newTail
//
// * Iterate old & new lists from both sides, updating, swapping, or
//   removing parts at the head/tail locations until neither head nor tail
//   can move.
//
// * Example below: keys at head pointers match, so update old part 0 in-
//   place (no need to move it) and record part 0 in the `newParts` list.
//   The last thing we do is advance the `oldHead` and `newHead` pointers
//   (will be reflected in the next diagram).
//
//      oldHead v                 v oldTail
//   oldKeys:  [0, 1, 2, 3, 4, 5, 6]
//   newParts: [0,  ,  ,  ,  ,  ,  ] <- heads matched: update 0 and
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance both oldHead & newHead
//      newHead ^                 ^ newTail
//
// * Example below: head pointers don't match, but tail pointers do, so
//   update part 6 in place (no need to move it), and record part 6 in the
//   `newParts` list. Last, advance the `oldTail` and `oldHead` pointers.
//
//         oldHead v              v oldTail
//   oldKeys:  [0, 1, 2, 3, 4, 5, 6]
//   newParts: [0,  ,  ,  ,  ,  , 6] <- tails matched: update 6 and
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance both oldTail & newTail
//         newHead ^              ^ newTail
//
// * If neither head nor tail match; next check if one of the old head/tail
//   items was removed. We first need to generate the reverse map of new
//   keys to index (`newKeyToIndexMap`), which is done once lazily as a
//   performance optimization, since we only hit this case if multiple
//   non-contiguous changes were made. Note that for contiguous removal
//   anywhere in the list, the head and tails would advance from either end
//   and pass each other before we get to this case and removals would be
//   handled in the final while loop without needing to generate the map.
//
// * Example below: The key at `oldTail` was removed (no longer in the
//   `newKeyToIndexMap`), so remove that part from the DOM and advance just
//   the `oldTail` pointer.
//
//         oldHead v           v oldTail
//   oldKeys:  [0, 1, 2, 3, 4, 5, 6]
//   newParts: [0,  ,  ,  ,  ,  , 6] <- 5 not in new map; remove 5 and
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance oldTail
//         newHead ^           ^ newTail
//
// * Once head and tail cannot move, any mismatches are due to either new or
//   moved items; if a new key is in the previous "old key to old index"
//   map, move the old part to the new location, otherwise create and insert
//   a new part. Note that when moving an old part we null its position in
//   the oldParts array if it lies between the head and tail so we know to
//   skip it when the pointers get there.
//
// * Example below: neither head nor tail match, and neither were removed;
//   so find the `newHead` key in the `oldKeyToIndexMap`, and move that old
//   part's DOM into the next head position (before `oldParts[oldHead]`).
//   Last, null the part in the `oldPart` array since it was somewhere in
//   the remaining oldParts still to be scanned (between the head and tail
//   pointers) so that we know to skip that old part on future iterations.
//
//         oldHead v        v oldTail
//   oldKeys:  [0, 1, -, 3, 4, 5, 6]
//   newParts: [0, 2,  ,  ,  ,  , 6] <- stuck; update & move 2 into place
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]    and advance newHead
//         newHead ^           ^ newTail
//
// * Note that for moves/insertions like the one above, a part inserted at
//   the head pointer is inserted before the current `oldParts[oldHead]`,
//   and a part inserted at the tail pointer is inserted before
//   `newParts[newTail+1]`. The seeming asymmetry lies in the fact that new
//   parts are moved into place outside in, so to the right of the head
//   pointer are old parts, and to the right of the tail pointer are new
//   parts.
//
// * We always restart back from the top of the algorithm, allowing matching
//   and simple updates in place to continue...
//
// * Example below: the head pointers once again match, so simply update
//   part 1 and record it in the `newParts` array.  Last, advance both head
//   pointers.
//
//         oldHead v        v oldTail
//   oldKeys:  [0, 1, -, 3, 4, 5, 6]
//   newParts: [0, 2, 1,  ,  ,  , 6] <- heads matched; update 1 and
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]    advance both oldHead & newHead
//            newHead ^        ^ newTail
//
// * As mentioned above, items that were moved as a result of being stuck
//   (the final else clause in the code below) are marked with null, so we
//   always advance old pointers over these so we're comparing the next
//   actual old value on either end.
//
// * Example below: `oldHead` is null (already placed in newParts), so
//   advance `oldHead`.
//
//            oldHead v     v oldTail
//   oldKeys:  [0, 1, -, 3, 4, 5, 6] // old head already used; advance
//   newParts: [0, 2, 1,  ,  ,  , 6] // oldHead
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]
//               newHead ^     ^ newTail
//
// * Note it's not critical to mark old parts as null when they are moved
//   from head to tail or tail to head, since they will be outside the
//   pointer range and never visited again.
//
// * Example below: Here the old tail key matches the new head key, so
//   the part at the `oldTail` position and move its DOM to the new
//   head position (before `oldParts[oldHead]`). Last, advance `oldTail`
//   and `newHead` pointers.
//
//               oldHead v  v oldTail
//   oldKeys:  [0, 1, -, 3, 4, 5, 6]
//   newParts: [0, 2, 1, 4,  ,  , 6] <- old tail matches new head: update
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]   & move 4, advance oldTail & newHead
//               newHead ^     ^ newTail
//
// * Example below: Old and new head keys match, so update the old head
//   part in place, and advance the `oldHead` and `newHead` pointers.
//
//               oldHead v oldTail
//   oldKeys:  [0, 1, -, 3, 4, 5, 6]
//   newParts: [0, 2, 1, 4, 3,   ,6] <- heads match: update 3 and advance
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]    oldHead & newHead
//                  newHead ^  ^ newTail
//
// * Once the new or old pointers move past each other then all we have
//   left is additions (if old list exhausted) or removals (if new list
//   exhausted). Those are handled in the final while loops at the end.
//
// * Example below: `oldHead` exceeded `oldTail`, so we're done with the
//   main loop.  Create the remaining part and insert it at the new head
//   position, and the update is complete.
//
//                   (oldHead > oldTail)
//   oldKeys:  [0, 1, -, 3, 4, 5, 6]
//   newParts: [0, 2, 1, 4, 3, 7 ,6] <- create and insert 7
//   newKeys:  [0, 2, 1, 4, 3, 7, 6]
//                     newHead ^ newTail
//
// * Note that the order of the if/else clauses is not important to the
//   algorithm, as long as the null checks come first (to ensure we're
//   always working on valid old parts) and that the final else clause
//   comes last (since that's where the expensive moves occur). The
//   order of remaining clauses is is just a simple guess at which cases
//   will be most common.
//
// * TODO(kschaaf) Note, we could calculate the longest increasing
//   subsequence (LIS) of old items in new position, and only move those not
//   in the LIS set. However that costs O(nlogn) time and adds a bit more
//   code, and only helps make rare types of mutations require fewer moves.
//   The above handles removes, adds, reversal, swaps, and single moves of
//   contiguous items in linear time, in the minimum number of moves. As
//   the number of multiple moves where LIS might help approaches a random
//   shuffle, the LIS optimization becomes less helpful, so it seems not
//   worth the code at this point. Could reconsider if a compelling case
//   arises.
while(oldHead<=oldTail&&newHead<=newTail){if(null===oldParts[oldHead]){// `null` means old part at head has already been used below; skip
oldHead++;}else if(null===oldParts[oldTail]){// `null` means old part at tail has already been used below; skip
oldTail--;}else if(oldKeys[oldHead]===newKeys[newHead]){// Old head matches new head; update in place
newParts[newHead]=updatePart(oldParts[oldHead],newValues[newHead]);oldHead++;newHead++;}else if(oldKeys[oldTail]===newKeys[newTail]){// Old tail matches new tail; update in place
newParts[newTail]=updatePart(oldParts[oldTail],newValues[newTail]);oldTail--;newTail--;}else if(oldKeys[oldHead]===newKeys[newTail]){// Old head matches new tail; update and move to new tail
newParts[newTail]=updatePart(oldParts[oldHead],newValues[newTail]);insertPartBefore(containerPart,oldParts[oldHead],newParts[newTail+1]);oldHead++;newTail--;}else if(oldKeys[oldTail]===newKeys[newHead]){// Old tail matches new head; update and move to new head
newParts[newHead]=updatePart(oldParts[oldTail],newValues[newHead]);insertPartBefore(containerPart,oldParts[oldTail],oldParts[oldHead]);oldTail--;newHead++;}else{if(newKeyToIndexMap===void 0){// Lazily generate key-to-index maps, used for removals & moves below
newKeyToIndexMap=generateMap(newKeys,newHead,newTail);oldKeyToIndexMap=generateMap(oldKeys,oldHead,oldTail);}if(!newKeyToIndexMap.has(oldKeys[oldHead])){// Old head is no longer in new list; remove
removePart(oldParts[oldHead]);oldHead++;}else if(!newKeyToIndexMap.has(oldKeys[oldTail])){// Old tail is no longer in new list; remove
removePart(oldParts[oldTail]);oldTail--;}else{// Any mismatches at this point are due to additions or moves; see if
// we have an old part we can reuse and move into place
const oldIndex=oldKeyToIndexMap.get(newKeys[newHead]),oldPart=oldIndex!==void 0?oldParts[oldIndex]:null;if(null===oldPart){// No old part for this value; create a new one and insert it
const newPart=createAndInsertPart(containerPart,oldParts[oldHead]);updatePart(newPart,newValues[newHead]);newParts[newHead]=newPart;}else{// Reuse old part
newParts[newHead]=updatePart(oldPart,newValues[newHead]);insertPartBefore(containerPart,oldPart,oldParts[oldHead]);// This marks the old part as having been used, so that it will be
// skipped in the first two checks above
oldParts[oldIndex]=null;}newHead++;}}}// Add parts for any remaining new values
while(newHead<=newTail){// For all remaining additions, we insert before last new tail,
// since old pointers are no longer valid
const newPart=createAndInsertPart(containerPart,newParts[newTail+1]);updatePart(newPart,newValues[newHead]);newParts[newHead++]=newPart;}// Remove any remaining unused old parts
while(oldHead<=oldTail){const oldPart=oldParts[oldHead++];if(null!==oldPart){removePart(oldPart);}}// Save order of new parts for next round
partListCache.set(containerPart,newParts);keyListCache.set(containerPart,newKeys);});}var repeat$1={repeat:repeat};!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports;}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i});},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e];}.bind(null,n));return i;},s.n=function(t){var e=t&&t.__esModule?function(){return t.default;}:function(){return t;};return s.d(e,"a",e),e;},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e);},s.p="",s(s.s=5);}([function(t,e,s){"use strict";s.r(e);/**
           * @license
           * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
           * This code may only be used under the BSD style license found at
           * http://polymer.github.io/LICENSE.txt
           * The complete set of authors may be found at
           * http://polymer.github.io/AUTHORS.txt
           * The complete set of contributors may be found at
           * http://polymer.github.io/CONTRIBUTORS.txt
           * Code distributed by Google as part of the polymer project is also
           * subject to an additional IP rights grant found at
           * http://polymer.github.io/PATENTS.txt
           */const i=new WeakMap(),n=t=>(i.set(t,!0),t),r=t=>"function"==typeof t&&i.has(t),o=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,l=(t,e,s=null,i=null)=>{let n=e;for(;n!==s;){const e=n.nextSibling;t.insertBefore(n,i),n=e;}},a=(t,e,s=null)=>{let i=e;for(;i!==s;){const e=i.nextSibling;t.removeChild(i),i=e;}},c={},d=`{{lit-${(Math.random()+"").slice(2)}}}`,u=`\x3c!--${d}--\x3e`,h=new RegExp(`${d}|${u}`),p=(()=>{const t=document.createElement("div");return t.setAttribute("style","{{bad value}}"),"{{bad value}}"!==t.getAttribute("style");})();class m{constructor(t,e){this.parts=[],this.element=e;let s=-1,i=0;const n=[],r=e=>{const o=e.content,l=document.createTreeWalker(o,133,null,!1);let a,c;for(;l.nextNode();){s++,a=c;const e=c=l.currentNode;if(1===e.nodeType){if(e.hasAttributes()){const n=e.attributes;let r=0;for(let t=0;t<n.length;t++)0<=n[t].value.indexOf(d)&&r++;for(;0<r--;){const n=t.strings[i],r=v.exec(n)[2],o=p&&"style"===r?"style$":/^[a-zA-Z-]*$/.test(r)?r:r.toLowerCase(),l=e.getAttribute(o).split(h);this.parts.push({type:"attribute",index:s,name:r,strings:l}),e.removeAttribute(o),i+=l.length-1;}}"TEMPLATE"===e.tagName&&r(e);}else if(3===e.nodeType){const t=e.nodeValue;if(0>t.indexOf(d))continue;const r=e.parentNode,o=t.split(h),l=o.length-1;i+=l;for(let t=0;t<l;t++)r.insertBefore(""===o[t]?f():document.createTextNode(o[t]),e),this.parts.push({type:"node",index:s++});r.insertBefore(""===o[l]?f():document.createTextNode(o[l]),e),n.push(e);}else if(8===e.nodeType)if(e.nodeValue===d){const t=e.parentNode,r=e.previousSibling;null===r||r!==a||r.nodeType!==Node.TEXT_NODE?t.insertBefore(f(),e):s--,this.parts.push({type:"node",index:s++}),n.push(e),null===e.nextSibling?t.insertBefore(f(),e):s--,c=a,i++;}else{let t=-1;for(;-1!==(t=e.nodeValue.indexOf(d,t+1));)this.parts.push({type:"node",index:-1});}}};r(e);for(const t of n)t.parentNode.removeChild(t);}}const b=t=>-1!==t.index,f=()=>document.createComment(""),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;/**
                                                                                                                                                                           * @license
                                                                                                                                                                           * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                                                                                                                                                                           * This code may only be used under the BSD style license found at
                                                                                                                                                                           * http://polymer.github.io/LICENSE.txt
                                                                                                                                                                           * The complete set of authors may be found at
                                                                                                                                                                           * http://polymer.github.io/AUTHORS.txt
                                                                                                                                                                           * The complete set of contributors may be found at
                                                                                                                                                                           * http://polymer.github.io/CONTRIBUTORS.txt
                                                                                                                                                                           * Code distributed by Google as part of the polymer project is also
                                                                                                                                                                           * subject to an additional IP rights grant found at
                                                                                                                                                                           * http://polymer.github.io/PATENTS.txt
                                                                                                                                                                           */class g{constructor(t,e,s){this._parts=[],this.template=t,this.processor=e,this.options=s;}update(t){let e=0;for(const s of this._parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this._parts)void 0!==t&&t.commit();}_clone(){const t=o?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts;let s=0,i=0;const n=t=>{const r=document.createTreeWalker(t,133,null,!1);let o=r.nextNode();for(;s<e.length&&null!==o;){const t=e[s];if(b(t)){if(i===t.index){if("node"===t.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(o),this._parts.push(t);}else this._parts.push(...this.processor.handleAttributeExpressions(o,t.name,t.strings,this.options));s++;}else i++,"TEMPLATE"===o.nodeName&&n(o.content),o=r.nextNode();}else this._parts.push(void 0),s++;}};return n(t),o&&(document.adoptNode(t),customElements.upgrade(t)),t;}}/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */class _{constructor(t,e,s,i){this.strings=t,this.values=e,this.type=s,this.processor=i;}getHTML(){const t=this.strings.length-1;let e="",s=!0;for(let i=0;i<t;i++){const t=this.strings[i];e+=t;const n=t.lastIndexOf(">");s=(-1<n||s)&&-1===t.indexOf("<",n+1),!s&&p&&(e=e.replace(v,(t,e,s,i)=>"style"===s?`${e}style$${i}`:t)),e+=s?u:d;}return e+=this.strings[t],e;}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t;}}class y extends _{getHTML(){return`<svg>${super.getHTML()}</svg>`;}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,s=e.firstChild;return e.removeChild(s),l(e,s.firstChild),t;}}/**
     * @license
     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
     * This code may only be used under the BSD style license found at
     * http://polymer.github.io/LICENSE.txt
     * The complete set of authors may be found at
     * http://polymer.github.io/AUTHORS.txt
     * The complete set of contributors may be found at
     * http://polymer.github.io/CONTRIBUTORS.txt
     * Code distributed by Google as part of the polymer project is also
     * subject to an additional IP rights grant found at
     * http://polymer.github.io/PATENTS.txt
     */const x=t=>null===t||!("object"==typeof t||"function"==typeof t);class w{constructor(t,e,s){this.dirty=!0,this.element=t,this.name=e,this.strings=s,this.parts=[];for(let t=0;t<s.length-1;t++)this.parts[t]=this._createPart();}_createPart(){return new $(this);}_getValue(){const t=this.strings,e=t.length-1;let s="";for(let i=0;i<e;i++){s+=t[i];const e=this.parts[i];if(void 0!==e){const t=e.value;if(null!=t&&(Array.isArray(t)||"string"!=typeof t&&t[Symbol.iterator]))for(const e of t)s+="string"==typeof e?e:e+"";else s+="string"==typeof t?t:t+"";}}return s+=t[e],s;}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()));}}class ${constructor(t){this.value=void 0,this.committer=t;}setValue(t){t===c||x(t)&&t===this.value||(this.value=t,r(t)||(this.committer.dirty=!0));}commit(){for(;r(this.value);){const t=this.value;this.value=c,t(this);}this.value!==c&&this.committer.commit();}}class C{constructor(t){this.value=void 0,this._pendingValue=void 0,this.options=t;}appendInto(t){this.startNode=t.appendChild(f()),this.endNode=t.appendChild(f());}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling;}appendIntoPart(t){t._insert(this.startNode=f()),t._insert(this.endNode=f());}insertAfterPart(t){t._insert(this.startNode=f()),this.endNode=t.endNode,t.endNode=this.startNode;}setValue(t){this._pendingValue=t;}commit(){for(;r(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this);}const t=this._pendingValue;t!==c&&(x(t)?t!==this.value&&this._commitText(t):t instanceof _?this._commitTemplateResult(t):t instanceof Node?this._commitNode(t):Array.isArray(t)||t[Symbol.iterator]?this._commitIterable(t):void 0!==t.then?this._commitPromise(t):this._commitText(t));}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode);}_commitNode(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t);}_commitText(t){const e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._commitNode(document.createTextNode("string"==typeof t?t:t+"")),this.value=t;}_commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value&&this.value.template===e)this.value.update(t.values);else{const s=new g(e,t.processor,this.options),i=s._clone();s.update(t.values),this._commitNode(i),this.value=s;}}_commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,i=0;for(const n of t)s=e[i],void 0===s&&(s=new C(this.options),e.push(s),0===i?s.appendIntoPart(this):s.insertAfterPart(e[i-1])),s.setValue(n),s.commit(),i++;i<e.length&&(e.length=i,this.clear(s&&s.endNode));}_commitPromise(t){this.value=t,t.then(e=>{this.value===t&&(this.setValue(e),this.commit());});}clear(t=this.startNode){a(this.startNode.parentNode,t.nextSibling,this.endNode);}}class M{constructor(t,e,s){if(this.value=void 0,this._pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=s;}setValue(t){this._pendingValue=t;}commit(){for(;r(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this);}if(this._pendingValue===c)return;const t=!!this._pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=t,this._pendingValue=c;}}class E extends w{constructor(t,e,s){super(t,e,s),this.single=2===s.length&&""===s[0]&&""===s[1];}_createPart(){return new A(this);}_getValue(){return this.single?this.parts[0].value:super._getValue();}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue());}}class A extends ${}let k=!1;try{const t={get capture(){return k=!0,!1;}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t);}catch(t){}class T{constructor(t,e,s){this.value=void 0,this._pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=s;}setValue(t){this._pendingValue=t;}commit(){for(;r(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this);}if(this._pendingValue===c)return;const t=this._pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this,this._options),this._options=N(t),i&&this.element.addEventListener(this.eventName,this,this._options),this.value=t,this._pendingValue=c;}handleEvent(t){("function"==typeof this.value?this.value:"function"==typeof this.value.handleEvent?this.value.handleEvent:()=>null).call(this.eventContext||this.element,t);}}const N=t=>t&&(k?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);/**
                   * @license
                   * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                   * This code may only be used under the BSD style license found at
                   * http://polymer.github.io/LICENSE.txt
                   * The complete set of authors may be found at
                   * http://polymer.github.io/AUTHORS.txt
                   * The complete set of contributors may be found at
                   * http://polymer.github.io/CONTRIBUTORS.txt
                   * Code distributed by Google as part of the polymer project is also
                   * subject to an additional IP rights grant found at
                   * http://polymer.github.io/PATENTS.txt
                   */class O{handleAttributeExpressions(t,e,s,i){const n=e[0];if("."===n){return new E(t,e.slice(1),s).parts;}return"@"===n?[new T(t,e.slice(1),i.eventContext)]:"?"===n?[new M(t,e.slice(1),s)]:new w(t,e,s).parts;}handleTextExpression(t){return new C(t);}}const S=new O();/**
                      * @license
                      * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                      * This code may only be used under the BSD style license found at
                      * http://polymer.github.io/LICENSE.txt
                      * The complete set of authors may be found at
                      * http://polymer.github.io/AUTHORS.txt
                      * The complete set of contributors may be found at
                      * http://polymer.github.io/CONTRIBUTORS.txt
                      * Code distributed by Google as part of the polymer project is also
                      * subject to an additional IP rights grant found at
                      * http://polymer.github.io/PATENTS.txt
                      */function D(t){let e=P.get(t.type);void 0===e&&(e=new Map(),P.set(t.type,e));let s=e.get(t.strings);return void 0===s&&(s=new m(t,t.getTemplateElement()),e.set(t.strings,s)),s;}const P=new Map(),L=new WeakMap(),z=(t,e,s)=>{let i=L.get(e);void 0===i&&(a(e,e.firstChild),L.set(e,i=new C(Object.assign({templateFactory:D},s))),i.appendInto(e)),i.setValue(t),i.commit();};/**
      * @license
      * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
      * This code may only be used under the BSD style license found at
      * http://polymer.github.io/LICENSE.txt
      * The complete set of authors may be found at
      * http://polymer.github.io/AUTHORS.txt
      * The complete set of contributors may be found at
      * http://polymer.github.io/CONTRIBUTORS.txt
      * Code distributed by Google as part of the polymer project is also
      * subject to an additional IP rights grant found at
      * http://polymer.github.io/PATENTS.txt
      */s.d(e,"html",function(){return V;}),s.d(e,"svg",function(){return j;}),s.d(e,"TemplateResult",function(){return _;}),s.d(e,"SVGTemplateResult",function(){return y;}),s.d(e,"marker",function(){return d;}),s.d(e,"nodeMarker",function(){return u;}),s.d(e,"markerRegex",function(){return h;}),s.d(e,"rewritesStyleAttribute",function(){return p;}),s.d(e,"Template",function(){return m;}),s.d(e,"isTemplatePartActive",function(){return b;}),s.d(e,"createMarker",function(){return f;}),s.d(e,"lastAttributeNameRegex",function(){return v;}),s.d(e,"DefaultTemplateProcessor",function(){return O;}),s.d(e,"defaultTemplateProcessor",function(){return S;}),s.d(e,"TemplateInstance",function(){return g;}),s.d(e,"noChange",function(){return c;}),s.d(e,"isPrimitive",function(){return x;}),s.d(e,"AttributeCommitter",function(){return w;}),s.d(e,"AttributePart",function(){return $;}),s.d(e,"NodePart",function(){return C;}),s.d(e,"BooleanAttributePart",function(){return M;}),s.d(e,"PropertyCommitter",function(){return E;}),s.d(e,"PropertyPart",function(){return A;}),s.d(e,"EventPart",function(){return T;}),s.d(e,"isCEPolyfill",function(){return o;}),s.d(e,"reparentNodes",function(){return l;}),s.d(e,"removeNodes",function(){return a;}),s.d(e,"directive",function(){return n;}),s.d(e,"isDirective",function(){return r;}),s.d(e,"parts",function(){return L;}),s.d(e,"render",function(){return z;}),s.d(e,"templateFactory",function(){return D;}),s.d(e,"templateCaches",function(){return P;});/**
       * @license
       * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
       * This code may only be used under the BSD style license found at
       * http://polymer.github.io/LICENSE.txt
       * The complete set of authors may be found at
       * http://polymer.github.io/AUTHORS.txt
       * The complete set of contributors may be found at
       * http://polymer.github.io/CONTRIBUTORS.txt
       * Code distributed by Google as part of the polymer project is also
       * subject to an additional IP rights grant found at
       * http://polymer.github.io/PATENTS.txt
       */const V=(t,...e)=>new _(t,e,"html",S),j=(t,...e)=>new y(t,e,"svg",S);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s(2),s(3);class i extends HTMLElement{constructor(){super();}get label(){return this.getAttribute("label");}set label(t){this.setAttribute("label",t);}get theme(){return this.getAttribute("theme")||"slds";}set theme(t){this.setAttribute("theme",t);}get value(){return this.getAttribute("value");}set value(t){this.setAttribute("value",t);}get type(){return this.getAttribute("type");}set type(t){this.setAttribute("type",t);}get extraclass(){return this.getAttribute("extraclass");}set extraclass(t){this.setAttribute("extraclass",t);}get sortedby(){try{return JSON.parse(this.getAttribute("sortedby"));}catch(t){return{};}}set sortedby(t){this.setAttribute("sortedby","string"==typeof t?t:JSON.stringify(t));}get filteredby(){try{return JSON.parse(this.getAttribute("filteredby"));}catch(t){return{};}}set filteredby(t){this.setAttribute("filteredby","string"==typeof t?t:JSON.stringify(t));}get iconbaseurl(){return this.getAttribute("iconbaseurl")||"/_slds/icons/";}set iconbaseurl(t){this.setAttribute("iconbaseurl",t);}}e.BaseUIComponent=i;},function(t,e){/**
  @license @nocompile
  Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
  The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
  The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
  Code distributed by Google as part of the polymer project is also
  subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
  */(function(){"use strict";var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,s=window.Document.prototype.importNode,i=window.Document.prototype.prepend,n=window.Document.prototype.append,r=window.DocumentFragment.prototype.prepend,o=window.DocumentFragment.prototype.append,l=window.Node.prototype.cloneNode,a=window.Node.prototype.appendChild,c=window.Node.prototype.insertBefore,d=window.Node.prototype.removeChild,u=window.Node.prototype.replaceChild,h=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),p=window.Element.prototype.attachShadow,m=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),b=window.Element.prototype.getAttribute,f=window.Element.prototype.setAttribute,v=window.Element.prototype.removeAttribute,g=window.Element.prototype.getAttributeNS,_=window.Element.prototype.setAttributeNS,y=window.Element.prototype.removeAttributeNS,x=window.Element.prototype.insertAdjacentElement,w=window.Element.prototype.insertAdjacentHTML,$=window.Element.prototype.prepend,C=window.Element.prototype.append,M=window.Element.prototype.before,E=window.Element.prototype.after,A=window.Element.prototype.replaceWith,k=window.Element.prototype.remove,T=window.HTMLElement,N=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),O=window.HTMLElement.prototype.insertAdjacentElement,S=window.HTMLElement.prototype.insertAdjacentHTML,D=new Set();function P(t){var e=D.has(t);return t=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t),!e&&t;}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(t){return D.add(t);});var L=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function z(t){var e=t.isConnected;if(void 0!==e)return e;if(L(t))return!0;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document));}function V(t){var e=t.children;if(e)return Array.prototype.slice.call(e);for(e=[],t=t.firstChild;t;t=t.nextSibling)t.nodeType===Node.ELEMENT_NODE&&e.push(t);return e;}function j(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null;}function I(t,e,s){t[e]=s;}function F(t){var e=document;this.c=t,this.a=e,this.b=void 0,et(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}));}function H(t){t.b&&t.b.disconnect();}function B(){var t=this;this.b=this.a=void 0,this.c=new Promise(function(e){t.b=e,t.a&&e(t.a);});}function q(t){if(t.a)throw Error("Already resolved.");t.a=void 0,t.b&&t.b(void 0);}function U(t){this.f=new Map(),this.g=new Map(),this.l=new Map(),this.i=!1,this.b=t,this.j=new Map(),this.c=function(t){return t();},this.a=!1,this.h=[],this.m=t.f?new F(t):void 0;}function R(t,e){if(!P(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(J(t,e))throw Error("A custom element with name '"+e+"' has already been defined.");if(t.i)throw Error("A custom element is already being defined.");}function W(t,e,s){var i;t.i=!0;try{var n=function(t){var e=r[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e;},r=s.prototype;if(!(r instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var o=n("connectedCallback"),l=n("disconnectedCallback"),a=n("adoptedCallback"),c=(i=n("attributeChangedCallback"))&&s.observedAttributes||[];}catch(t){throw t;}finally{t.i=!1;}return s={localName:e,constructorFunction:s,connectedCallback:o,disconnectedCallback:l,adoptedCallback:a,attributeChangedCallback:i,observedAttributes:c,constructionStack:[]},t.g.set(e,s),t.l.set(s.constructorFunction,s),s;}function Y(t){if(!1!==t.a){t.a=!1;for(var e=[],s=t.h,i=new Map(),n=0;n<s.length;n++)i.set(s[n],[]);for(et(t.b,document,{upgrade:function(s){if(void 0===s.__CE_state){var n=s.localName,r=i.get(n);r?r.push(s):t.g.has(n)&&e.push(s);}}}),n=0;n<e.length;n++)st(t.b,e[n]);for(n=0;n<s.length;n++){for(var r=s[n],o=i.get(r),l=0;l<o.length;l++)st(t.b,o[l]);(r=t.j.get(r))&&q(r);}s.length=0;}}function J(t,e){var s=t.g.get(e);if(s)return s;if(s=t.f.get(e)){t.f.delete(e);try{return W(t,e,s());}catch(t){nt(t);}}}function G(){var t=at&&at.noDocumentConstructionObserver,e=at&&at.shadyDomFastWalk;this.b=[],this.c=[],this.a=!1,this.shadyDomFastWalk=e,this.f=!t;}function X(t,e,s,i){var n=window.ShadyDOM;if(t.shadyDomFastWalk&&n&&n.inUse){if(e.nodeType===Node.ELEMENT_NODE&&s(e),e.querySelectorAll)for(t=n.nativeMethods.querySelectorAll.call(e,"*"),e=0;e<t.length;e++)s(t[e]);}else!function t(e,s,i){for(var n=e;n;){if(n.nodeType===Node.ELEMENT_NODE){var r=n;s(r);var o=r.localName;if("link"===o&&"import"===r.getAttribute("rel")){if(n=r.import,void 0===i&&(i=new Set()),n instanceof Node&&!i.has(n))for(i.add(n),n=n.firstChild;n;n=n.nextSibling)t(n,s,i);n=j(e,r);continue;}if("template"===o){n=j(e,r);continue;}if(r=r.__CE_shadowRoot)for(r=r.firstChild;r;r=r.nextSibling)t(r,s,i);}n=n.firstChild?n.firstChild:j(e,n);}}(e,s,i);}function Z(t,e){t.a&&X(t,e,function(e){return K(t,e);});}function K(t,e){if(t.a&&!e.__CE_patched){e.__CE_patched=!0;for(var s=0;s<t.b.length;s++)t.b[s](e);for(s=0;s<t.c.length;s++)t.c[s](e);}}function Q(t,e){var s=[];for(X(t,e,function(t){return s.push(t);}),e=0;e<s.length;e++){var i=s[e];1===i.__CE_state?t.connectedCallback(i):st(t,i);}}function tt(t,e){var s=[];for(X(t,e,function(t){return s.push(t);}),e=0;e<s.length;e++){var i=s[e];1===i.__CE_state&&t.disconnectedCallback(i);}}function et(t,e,s){var i=(s=void 0===s?{}:s).s,n=s.upgrade||function(e){return st(t,e);},r=[];for(X(t,e,function(e){if(t.a&&K(t,e),"link"===e.localName&&"import"===e.getAttribute("rel")){var s=e.import;s instanceof Node&&(s.__CE_isImportDocument=!0,s.__CE_registry=document.__CE_registry),s&&"complete"===s.readyState?s.__CE_documentLoadHandled=!0:e.addEventListener("load",function(){var s=e.import;if(!s.__CE_documentLoadHandled){s.__CE_documentLoadHandled=!0;var r=new Set();i&&(i.forEach(function(t){return r.add(t);}),r.delete(s)),et(t,s,{s:r,upgrade:n});}});}else r.push(e);},i),e=0;e<r.length;e++)n(r[e]);}function st(t,e){try{var s=e.ownerDocument,i=s.__CE_registry,n=i&&(s.defaultView||s.__CE_isImportDocument)?J(i,e.localName):void 0;if(n&&void 0===e.__CE_state){n.constructionStack.push(e);try{try{if(new n.constructorFunction()!==e)throw Error("The custom element constructor did not produce the element being upgraded.");}finally{n.constructionStack.pop();}}catch(t){throw e.__CE_state=2,t;}if(e.__CE_state=1,e.__CE_definition=n,n.attributeChangedCallback&&e.hasAttributes()){var r=n.observedAttributes;for(n=0;n<r.length;n++){var o=r[n],l=e.getAttribute(o);null!==l&&t.attributeChangedCallback(e,o,null,l,null);}}z(e)&&t.connectedCallback(e);}}catch(t){nt(t);}}function it(s,i,n,r){var o=i.__CE_registry;if(o&&(null===r||"http://www.w3.org/1999/xhtml"===r)&&(o=J(o,n)))try{var l=new o.constructorFunction();if(void 0===l.__CE_state||void 0===l.__CE_definition)throw Error("Failed to construct '"+n+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==l.namespaceURI)throw Error("Failed to construct '"+n+"': The constructed element's namespace must be the HTML namespace.");if(l.hasAttributes())throw Error("Failed to construct '"+n+"': The constructed element must not have any attributes.");if(null!==l.firstChild)throw Error("Failed to construct '"+n+"': The constructed element must not have any children.");if(null!==l.parentNode)throw Error("Failed to construct '"+n+"': The constructed element must not have a parent node.");if(l.ownerDocument!==i)throw Error("Failed to construct '"+n+"': The constructed element's owner document is incorrect.");if(l.localName!==n)throw Error("Failed to construct '"+n+"': The constructed element's local name is incorrect.");return l;}catch(o){return nt(o),i=null===r?t.call(i,n):e.call(i,r,n),Object.setPrototypeOf(i,HTMLUnknownElement.prototype),i.__CE_state=2,i.__CE_definition=void 0,K(s,i),i;}return K(s,i=null===r?t.call(i,n):e.call(i,r,n)),i;}function nt(t){var e=t.message,s=t.sourceURL||t.fileName||"",i=t.line||t.lineNumber||0,n=t.column||t.columnNumber||0,r=void 0;void 0===ErrorEvent.prototype.initErrorEvent?r=new ErrorEvent("error",{cancelable:!0,message:e,filename:s,lineno:i,colno:n,error:t}):((r=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,e,s,i),r.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0;}});}),void 0===r.error&&Object.defineProperty(r,"error",{configurable:!0,enumerable:!0,get:function(){return t;}}),window.dispatchEvent(r),r.defaultPrevented||console.error(t);}F.prototype.f=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||H(this),e=0;e<t.length;e++)for(var s=t[e].addedNodes,i=0;i<s.length;i++)et(this.c,s[i]);},U.prototype.o=function(t,e){var s=this;if(!(e instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");R(this,t),this.f.set(t,e),this.h.push(t),this.a||(this.a=!0,this.c(function(){return Y(s);}));},U.prototype.define=function(t,e){var s=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");R(this,t),W(this,t,e),this.h.push(t),this.a||(this.a=!0,this.c(function(){return Y(s);}));},U.prototype.upgrade=function(t){et(this.b,t);},U.prototype.get=function(t){if(t=J(this,t))return t.constructorFunction;},U.prototype.whenDefined=function(t){if(!P(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.j.get(t);if(e)return e.c;e=new B(),this.j.set(t,e);var s=this.g.has(t)||this.f.has(t);return t=-1===this.h.indexOf(t),s&&t&&q(e),e.c;},U.prototype.polyfillWrapFlushCallback=function(t){this.m&&H(this.m);var e=this.c;this.c=function(s){return t(function(){return e(s);});};},window.CustomElementRegistry=U,U.prototype.define=U.prototype.define,U.prototype.upgrade=U.prototype.upgrade,U.prototype.get=U.prototype.get,U.prototype.whenDefined=U.prototype.whenDefined,U.prototype.polyfillDefineLazy=U.prototype.o,U.prototype.polyfillWrapFlushCallback=U.prototype.polyfillWrapFlushCallback,G.prototype.connectedCallback=function(t){var e=t.__CE_definition;if(e.connectedCallback)try{e.connectedCallback.call(t);}catch(t){nt(t);}},G.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;if(e.disconnectedCallback)try{e.disconnectedCallback.call(t);}catch(t){nt(t);}},G.prototype.attributeChangedCallback=function(t,e,s,i,n){var r=t.__CE_definition;if(r.attributeChangedCallback&&-1<r.observedAttributes.indexOf(e))try{r.attributeChangedCallback.call(t,e,s,i,n);}catch(t){nt(t);}};var rt=new function(){}();function ot(t,e,s){function i(e){return function(s){for(var i=[],n=0;n<arguments.length;++n)i[n]=arguments[n];n=[];for(var r=[],o=0,l;o<i.length;o++){l=i[o];if(l instanceof Element&&z(l)&&r.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)n.push(l);else n.push(l);}for(e.apply(this,i),i=0;i<r.length;i++)tt(t,r[i]);if(z(this))for(i=0;i<n.length;i++)(r=n[i])instanceof Element&&Q(t,r);};}void 0!==s.prepend&&I(e,"prepend",i(s.prepend)),void 0!==s.append&&I(e,"append",i(s.append));}function lt(t){function s(e,s){Object.defineProperty(e,"innerHTML",{enumerable:s.enumerable,configurable:!0,get:s.get,set:function(e){var i=this,n=void 0;if(z(this)&&(n=[],X(t,this,function(t){t!==i&&n.push(t);})),s.set.call(this,e),n)for(var r=0,o;r<n.length;r++){o=n[r];1===o.__CE_state&&t.disconnectedCallback(o);}return this.ownerDocument.__CE_registry?et(t,this):Z(t,this),e;}});}function i(e,s){I(e,"insertAdjacentElement",function(e,i){var n=z(i);return e=s.call(this,e,i),n&&tt(t,i),z(e)&&Q(t,i),e;});}function n(e,s){function i(e,s){for(var i=[];e!==s;e=e.nextSibling)i.push(e);for(s=0;s<i.length;s++)et(t,i[s]);}I(e,"insertAdjacentHTML",function(t,e){if("beforebegin"===(t=t.toLowerCase())){var n=this.previousSibling;s.call(this,t,e),i(n||this.parentNode.firstChild,this);}else if("afterbegin"===t)n=this.firstChild,s.call(this,t,e),i(this.firstChild,n);else if("beforeend"===t)n=this.lastChild,s.call(this,t,e),i(n||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+(t+"")+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");n=this.nextSibling,s.call(this,t,e),i(this.nextSibling,n);}});}p&&I(Element.prototype,"attachShadow",function(e){if(e=p.call(this,e),t.a&&!e.__CE_patched){e.__CE_patched=!0;for(var s=0;s<t.b.length;s++)t.b[s](e);}return this.__CE_shadowRoot=e;}),m&&m.get?s(Element.prototype,m):N&&N.get?s(HTMLElement.prototype,N):function(t,e){t.a=!0,t.c.push(e);}(t,function(t){s(t,{enumerable:!0,configurable:!0,get:function(){return l.call(this,!0).innerHTML;},set:function(t){var s="template"===this.localName,i=s?this.content:this,n=e.call(document,this.namespaceURI,this.localName);for(n.innerHTML=t;0<i.childNodes.length;)d.call(i,i.childNodes[0]);for(t=s?n.content:n;0<t.childNodes.length;)a.call(i,t.childNodes[0]);}});}),I(Element.prototype,"setAttribute",function(e,s){if(1!==this.__CE_state)return f.call(this,e,s);var i=b.call(this,e);f.call(this,e,s),s=b.call(this,e),t.attributeChangedCallback(this,e,i,s,null);}),I(Element.prototype,"setAttributeNS",function(e,s,i){if(1!==this.__CE_state)return _.call(this,e,s,i);var n=g.call(this,e,s);_.call(this,e,s,i),i=g.call(this,e,s),t.attributeChangedCallback(this,s,n,i,e);}),I(Element.prototype,"removeAttribute",function(e){if(1!==this.__CE_state)return v.call(this,e);var s=b.call(this,e);v.call(this,e),null!==s&&t.attributeChangedCallback(this,e,s,null,null);}),I(Element.prototype,"removeAttributeNS",function(e,s){if(1!==this.__CE_state)return y.call(this,e,s);var i=g.call(this,e,s);y.call(this,e,s);var n=g.call(this,e,s);i!==n&&t.attributeChangedCallback(this,s,i,n,e);}),O?i(HTMLElement.prototype,O):x&&i(Element.prototype,x),S?n(HTMLElement.prototype,S):w&&n(Element.prototype,w),ot(t,Element.prototype,{prepend:$,append:C}),function(t){function e(e){return function(s){for(var i=[],n=0;n<arguments.length;++n)i[n]=arguments[n];n=[];for(var r=[],o=0,l;o<i.length;o++){l=i[o];if(l instanceof Element&&z(l)&&r.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)n.push(l);else n.push(l);}for(e.apply(this,i),i=0;i<r.length;i++)tt(t,r[i]);if(z(this))for(i=0;i<n.length;i++)(r=n[i])instanceof Element&&Q(t,r);};}var s=Element.prototype;void 0!==M&&I(s,"before",e(M)),void 0!==E&&I(s,"after",e(E)),void 0!==A&&I(s,"replaceWith",function(e){for(var s=[],i=0;i<arguments.length;++i)s[i]=arguments[i];i=[];for(var n=[],r=0,o;r<s.length;r++){o=s[r];if(o instanceof Element&&z(o)&&n.push(o),o instanceof DocumentFragment)for(o=o.firstChild;o;o=o.nextSibling)i.push(o);else i.push(o);}for(r=z(this),A.apply(this,s),s=0;s<n.length;s++)tt(t,n[s]);if(r)for(tt(t,this),s=0;s<i.length;s++)(n=i[s])instanceof Element&&Q(t,n);}),void 0!==k&&I(s,"remove",function(){var e=z(this);k.call(this),e&&tt(t,this);});}(t);}var at=window.customElements;function ct(){var e=new G();!function(e){window.HTMLElement=function(){function s(){var s=this.constructor,i=document.__CE_registry.l.get(s);if(!i)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var n=i.constructionStack;if(0===n.length)return n=t.call(document,i.localName),Object.setPrototypeOf(n,s.prototype),n.__CE_state=1,n.__CE_definition=i,K(e,n),n;var r=n.length-1,o=n[r];if(o===rt)throw Error("Failed to construct '"+i.localName+"': This element was already constructed.");return n[r]=rt,Object.setPrototypeOf(o,s.prototype),K(e,o),o;}return s.prototype=T.prototype,Object.defineProperty(s.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:s}),s;}();}(e),function(t){I(Document.prototype,"createElement",function(e){return it(t,this,e,null);}),I(Document.prototype,"importNode",function(e,i){return e=s.call(this,e,!!i),this.__CE_registry?et(t,e):Z(t,e),e;}),I(Document.prototype,"createElementNS",function(e,s){return it(t,this,s,e);}),ot(t,Document.prototype,{prepend:i,append:n});}(e),ot(e,DocumentFragment.prototype,{prepend:r,append:o}),function(t){function e(e,s){Object.defineProperty(e,"textContent",{enumerable:s.enumerable,configurable:!0,get:s.get,set:function(e){if(this.nodeType===Node.TEXT_NODE)s.set.call(this,e);else{var i=void 0;if(this.firstChild){var n=this.childNodes,r=n.length;if(0<r&&z(this)){i=Array(r);for(var o=0;o<r;o++)i[o]=n[o];}}if(s.set.call(this,e),i)for(e=0;e<i.length;e++)tt(t,i[e]);}}});}I(Node.prototype,"insertBefore",function(e,s){if(e instanceof DocumentFragment){var i=V(e);if(e=c.call(this,e,s),z(this))for(s=0;s<i.length;s++)Q(t,i[s]);return e;}return i=e instanceof Element&&z(e),s=c.call(this,e,s),i&&tt(t,e),z(this)&&Q(t,e),s;}),I(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var s=V(e);if(e=a.call(this,e),z(this))for(var i=0;i<s.length;i++)Q(t,s[i]);return e;}return s=e instanceof Element&&z(e),i=a.call(this,e),s&&tt(t,e),z(this)&&Q(t,e),i;}),I(Node.prototype,"cloneNode",function(e){return e=l.call(this,!!e),this.ownerDocument.__CE_registry?et(t,e):Z(t,e),e;}),I(Node.prototype,"removeChild",function(e){var s=e instanceof Element&&z(e),i=d.call(this,e);return s&&tt(t,e),i;}),I(Node.prototype,"replaceChild",function(e,s){if(e instanceof DocumentFragment){var i=V(e);if(e=u.call(this,e,s),z(this))for(tt(t,s),s=0;s<i.length;s++)Q(t,i[s]);return e;}i=e instanceof Element&&z(e);var n=u.call(this,e,s),r=z(this);return r&&tt(t,s),i&&tt(t,e),r&&Q(t,e),n;}),h&&h.get?e(Node.prototype,h):function(t,e){t.a=!0,t.b.push(e);}(t,function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=this.firstChild;e;e=e.nextSibling)e.nodeType!==Node.COMMENT_NODE&&t.push(e.textContent);return t.join("");},set:function(t){for(;this.firstChild;)d.call(this,this.firstChild);null!=t&&""!==t&&a.call(this,document.createTextNode(t));}});});}(e),lt(e),e=new U(e),document.__CE_registry=e,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:e});}at&&!at.forcePolyfill&&"function"==typeof at.define&&"function"==typeof at.get||ct(),window.__CE_installPolyfill=ct;}).call(this);},function(t,e){!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports;}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i});},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e];}.bind(null,n));return i;},s.n=function(t){var e=t&&t.__esModule?function(){return t.default;}:function(){return t;};return s.d(e,"a",e),e;},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e);},s.p="",s(s.s=4);}([function(t,e,s){"use strict";s.r(e);/**
             * @license
             * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
             * This code may only be used under the BSD style license found at
             * http://polymer.github.io/LICENSE.txt
             * The complete set of authors may be found at
             * http://polymer.github.io/AUTHORS.txt
             * The complete set of contributors may be found at
             * http://polymer.github.io/CONTRIBUTORS.txt
             * Code distributed by Google as part of the polymer project is also
             * subject to an additional IP rights grant found at
             * http://polymer.github.io/PATENTS.txt
             */const i=new WeakMap(),n=t=>(i.set(t,!0),t),r=t=>"function"==typeof t&&i.has(t),o=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,l=(t,e,s=null,i=null)=>{let n=e;for(;n!==s;){const e=n.nextSibling;t.insertBefore(n,i),n=e;}},a=(t,e,s=null)=>{let i=e;for(;i!==s;){const e=i.nextSibling;t.removeChild(i),i=e;}},c={},d=`{{lit-${(Math.random()+"").slice(2)}}}`,u=`\x3c!--${d}--\x3e`,h=new RegExp(`${d}|${u}`),p=(()=>{const t=document.createElement("div");return t.setAttribute("style","{{bad value}}"),"{{bad value}}"!==t.getAttribute("style");})();class m{constructor(t,e){this.parts=[],this.element=e;let s=-1,i=0;const n=[],r=e=>{const o=e.content,l=document.createTreeWalker(o,133,null,!1);let a,c;for(;l.nextNode();){s++,a=c;const e=c=l.currentNode;if(1===e.nodeType){if(e.hasAttributes()){const n=e.attributes;let r=0;for(let t=0;t<n.length;t++)0<=n[t].value.indexOf(d)&&r++;for(;0<r--;){const n=t.strings[i],r=v.exec(n)[2],o=p&&"style"===r?"style$":/^[a-zA-Z-]*$/.test(r)?r:r.toLowerCase(),l=e.getAttribute(o).split(h);this.parts.push({type:"attribute",index:s,name:r,strings:l}),e.removeAttribute(o),i+=l.length-1;}}"TEMPLATE"===e.tagName&&r(e);}else if(3===e.nodeType){const t=e.nodeValue;if(0>t.indexOf(d))continue;const r=e.parentNode,o=t.split(h),l=o.length-1;i+=l;for(let t=0;t<l;t++)r.insertBefore(""===o[t]?f():document.createTextNode(o[t]),e),this.parts.push({type:"node",index:s++});r.insertBefore(""===o[l]?f():document.createTextNode(o[l]),e),n.push(e);}else if(8===e.nodeType)if(e.nodeValue===d){const t=e.parentNode,r=e.previousSibling;null===r||r!==a||r.nodeType!==Node.TEXT_NODE?t.insertBefore(f(),e):s--,this.parts.push({type:"node",index:s++}),n.push(e),null===e.nextSibling?t.insertBefore(f(),e):s--,c=a,i++;}else{let t=-1;for(;-1!==(t=e.nodeValue.indexOf(d,t+1));)this.parts.push({type:"node",index:-1});}}};r(e);for(const t of n)t.parentNode.removeChild(t);}}const b=t=>-1!==t.index,f=()=>document.createComment(""),v=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;/**
                                                                                                                                                                             * @license
                                                                                                                                                                             * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                                                                                                                                                                             * This code may only be used under the BSD style license found at
                                                                                                                                                                             * http://polymer.github.io/LICENSE.txt
                                                                                                                                                                             * The complete set of authors may be found at
                                                                                                                                                                             * http://polymer.github.io/AUTHORS.txt
                                                                                                                                                                             * The complete set of contributors may be found at
                                                                                                                                                                             * http://polymer.github.io/CONTRIBUTORS.txt
                                                                                                                                                                             * Code distributed by Google as part of the polymer project is also
                                                                                                                                                                             * subject to an additional IP rights grant found at
                                                                                                                                                                             * http://polymer.github.io/PATENTS.txt
                                                                                                                                                                             */class g{constructor(t,e,s){this._parts=[],this.template=t,this.processor=e,this.options=s;}update(t){let e=0;for(const s of this._parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this._parts)void 0!==t&&t.commit();}_clone(){const t=o?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=this.template.parts;let s=0,i=0;const n=t=>{const r=document.createTreeWalker(t,133,null,!1);let o=r.nextNode();for(;s<e.length&&null!==o;){const t=e[s];if(b(t)){if(i===t.index){if("node"===t.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(o),this._parts.push(t);}else this._parts.push(...this.processor.handleAttributeExpressions(o,t.name,t.strings,this.options));s++;}else i++,"TEMPLATE"===o.nodeName&&n(o.content),o=r.nextNode();}else this._parts.push(void 0),s++;}};return n(t),o&&(document.adoptNode(t),customElements.upgrade(t)),t;/**
                                                                                  * @license
                                                                                  * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                                                                                  * This code may only be used under the BSD style license found at
                                                                                  * http://polymer.github.io/LICENSE.txt
                                                                                  * The complete set of authors may be found at
                                                                                  * http://polymer.github.io/AUTHORS.txt
                                                                                  * The complete set of contributors may be found at
                                                                                  * http://polymer.github.io/CONTRIBUTORS.txt
                                                                                  * Code distributed by Google as part of the polymer project is also
                                                                                  * subject to an additional IP rights grant found at
                                                                                  * http://polymer.github.io/PATENTS.txt
                                                                                  */}}class _{constructor(t,e,s,i){this.strings=t,this.values=e,this.type=s,this.processor=i;}getHTML(){const t=this.strings.length-1;let e="",s=!0;for(let i=0;i<t;i++){const t=this.strings[i];e+=t;const n=t.lastIndexOf(">");s=(-1<n||s)&&-1===t.indexOf("<",n+1),!s&&p&&(e=e.replace(v,(t,e,s,i)=>"style"===s?`${e}style$${i}`:t)),e+=s?u:d;}return e+=this.strings[t],e;}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t;}}class y extends _{getHTML(){return`<svg>${super.getHTML()}</svg>`;}getTemplateElement(){const t=super.getTemplateElement(),e=t.content,s=e.firstChild;return e.removeChild(s),l(e,s.firstChild),t;/**
                                                         * @license
                                                         * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                                                         * This code may only be used under the BSD style license found at
                                                         * http://polymer.github.io/LICENSE.txt
                                                         * The complete set of authors may be found at
                                                         * http://polymer.github.io/AUTHORS.txt
                                                         * The complete set of contributors may be found at
                                                         * http://polymer.github.io/CONTRIBUTORS.txt
                                                         * Code distributed by Google as part of the polymer project is also
                                                         * subject to an additional IP rights grant found at
                                                         * http://polymer.github.io/PATENTS.txt
                                                         */}}const x=t=>null===t||!("object"==typeof t||"function"==typeof t);class w{constructor(t,e,s){this.dirty=!0,this.element=t,this.name=e,this.strings=s,this.parts=[];for(let t=0;t<s.length-1;t++)this.parts[t]=this._createPart();}_createPart(){return new $(this);}_getValue(){const t=this.strings,e=t.length-1;let s="";for(let i=0;i<e;i++){s+=t[i];const e=this.parts[i];if(void 0!==e){const t=e.value;if(null!=t&&(Array.isArray(t)||"string"!=typeof t&&t[Symbol.iterator]))for(const e of t)s+="string"==typeof e?e:e+"";else s+="string"==typeof t?t:t+"";}}return s+=t[e],s;}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()));}}class ${constructor(t){this.value=void 0,this.committer=t;}setValue(t){t===c||x(t)&&t===this.value||(this.value=t,r(t)||(this.committer.dirty=!0));}commit(){for(;r(this.value);){const t=this.value;this.value=c,t(this);}this.value!==c&&this.committer.commit();}}class C{constructor(t){this.value=void 0,this._pendingValue=void 0,this.options=t;}appendInto(t){this.startNode=t.appendChild(f()),this.endNode=t.appendChild(f());}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling;}appendIntoPart(t){t._insert(this.startNode=f()),t._insert(this.endNode=f());}insertAfterPart(t){t._insert(this.startNode=f()),this.endNode=t.endNode,t.endNode=this.startNode;}setValue(t){this._pendingValue=t;}commit(){for(;r(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this);}const t=this._pendingValue;t!==c&&(x(t)?t!==this.value&&this._commitText(t):t instanceof _?this._commitTemplateResult(t):t instanceof Node?this._commitNode(t):Array.isArray(t)||t[Symbol.iterator]?this._commitIterable(t):void 0!==t.then?this._commitPromise(t):this._commitText(t));}_insert(t){this.endNode.parentNode.insertBefore(t,this.endNode);}_commitNode(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t);}_commitText(t){const e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._commitNode(document.createTextNode("string"==typeof t?t:t+"")),this.value=t;}_commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value&&this.value.template===e)this.value.update(t.values);else{const s=new g(e,t.processor,this.options),i=s._clone();s.update(t.values),this._commitNode(i),this.value=s;}}_commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,i=0;for(const n of t)s=e[i],void 0===s&&(s=new C(this.options),e.push(s),0===i?s.appendIntoPart(this):s.insertAfterPart(e[i-1])),s.setValue(n),s.commit(),i++;i<e.length&&(e.length=i,this.clear(s&&s.endNode));}_commitPromise(t){this.value=t,t.then(e=>{this.value===t&&(this.setValue(e),this.commit());});}clear(t=this.startNode){a(this.startNode.parentNode,t.nextSibling,this.endNode);}}class M{constructor(t,e,s){if(this.value=void 0,this._pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=s;}setValue(t){this._pendingValue=t;}commit(){for(;r(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this);}if(this._pendingValue===c)return;const t=!!this._pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=t,this._pendingValue=c;}}class E extends w{constructor(t,e,s){super(t,e,s),this.single=2===s.length&&""===s[0]&&""===s[1];}_createPart(){return new A(this);}_getValue(){return this.single?this.parts[0].value:super._getValue();}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue());}}class A extends ${}let k=!1;try{const t={get capture(){return k=!0,!1;}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t);}catch(t){}class T{constructor(t,e,s){this.value=void 0,this._pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=s;}setValue(t){this._pendingValue=t;}commit(){for(;r(this._pendingValue);){const t=this._pendingValue;this._pendingValue=c,t(this);}if(this._pendingValue===c)return;const t=this._pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),i=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this,this._options),this._options=N(t),i&&this.element.addEventListener(this.eventName,this,this._options),this.value=t,this._pendingValue=c;}handleEvent(t){("function"==typeof this.value?this.value:"function"==typeof this.value.handleEvent?this.value.handleEvent:()=>null).call(this.eventContext||this.element,t);}}const N=t=>t&&(k?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);/**
                     * @license
                     * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                     * This code may only be used under the BSD style license found at
                     * http://polymer.github.io/LICENSE.txt
                     * The complete set of authors may be found at
                     * http://polymer.github.io/AUTHORS.txt
                     * The complete set of contributors may be found at
                     * http://polymer.github.io/CONTRIBUTORS.txt
                     * Code distributed by Google as part of the polymer project is also
                     * subject to an additional IP rights grant found at
                     * http://polymer.github.io/PATENTS.txt
                     */class O{handleAttributeExpressions(t,e,s,i){const n=e[0];return"."===n?new E(t,e.slice(1),s).parts:"@"===n?[new T(t,e.slice(1),i.eventContext)]:"?"===n?[new M(t,e.slice(1),s)]:new w(t,e,s).parts;}handleTextExpression(t){return new C(t);}}const S=new O();/**
                        * @license
                        * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                        * This code may only be used under the BSD style license found at
                        * http://polymer.github.io/LICENSE.txt
                        * The complete set of authors may be found at
                        * http://polymer.github.io/AUTHORS.txt
                        * The complete set of contributors may be found at
                        * http://polymer.github.io/CONTRIBUTORS.txt
                        * Code distributed by Google as part of the polymer project is also
                        * subject to an additional IP rights grant found at
                        * http://polymer.github.io/PATENTS.txt
                        */function D(t){let e=P.get(t.type);void 0===e&&(e=new Map(),P.set(t.type,e));let s=e.get(t.strings);return void 0===s&&(s=new m(t,t.getTemplateElement()),e.set(t.strings,s)),s;}const P=new Map(),L=new WeakMap(),z=(t,e,s)=>{let i=L.get(e);void 0===i&&(a(e,e.firstChild),L.set(e,i=new C(Object.assign({templateFactory:D},s))),i.appendInto(e)),i.setValue(t),i.commit();};/**
        * @license
        * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
        * This code may only be used under the BSD style license found at
        * http://polymer.github.io/LICENSE.txt
        * The complete set of authors may be found at
        * http://polymer.github.io/AUTHORS.txt
        * The complete set of contributors may be found at
        * http://polymer.github.io/CONTRIBUTORS.txt
        * Code distributed by Google as part of the polymer project is also
        * subject to an additional IP rights grant found at
        * http://polymer.github.io/PATENTS.txt
        */s.d(e,"html",function(){return V;}),s.d(e,"svg",function(){return j;}),s.d(e,"TemplateResult",function(){return _;}),s.d(e,"SVGTemplateResult",function(){return y;}),s.d(e,"marker",function(){return d;}),s.d(e,"nodeMarker",function(){return u;}),s.d(e,"markerRegex",function(){return h;}),s.d(e,"rewritesStyleAttribute",function(){return p;}),s.d(e,"Template",function(){return m;}),s.d(e,"isTemplatePartActive",function(){return b;}),s.d(e,"createMarker",function(){return f;}),s.d(e,"lastAttributeNameRegex",function(){return v;}),s.d(e,"DefaultTemplateProcessor",function(){return O;}),s.d(e,"defaultTemplateProcessor",function(){return S;}),s.d(e,"TemplateInstance",function(){return g;}),s.d(e,"noChange",function(){return c;}),s.d(e,"isPrimitive",function(){return x;}),s.d(e,"AttributeCommitter",function(){return w;}),s.d(e,"AttributePart",function(){return $;}),s.d(e,"NodePart",function(){return C;}),s.d(e,"BooleanAttributePart",function(){return M;}),s.d(e,"PropertyCommitter",function(){return E;}),s.d(e,"PropertyPart",function(){return A;}),s.d(e,"EventPart",function(){return T;}),s.d(e,"isCEPolyfill",function(){return o;}),s.d(e,"reparentNodes",function(){return l;}),s.d(e,"removeNodes",function(){return a;}),s.d(e,"directive",function(){return n;}),s.d(e,"isDirective",function(){return r;}),s.d(e,"parts",function(){return L;}),s.d(e,"render",function(){return z;}),s.d(e,"templateFactory",function(){return D;}),s.d(e,"templateCaches",function(){return P;});/**
         * @license
         * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
         * This code may only be used under the BSD style license found at
         * http://polymer.github.io/LICENSE.txt
         * The complete set of authors may be found at
         * http://polymer.github.io/AUTHORS.txt
         * The complete set of contributors may be found at
         * http://polymer.github.io/CONTRIBUTORS.txt
         * Code distributed by Google as part of the polymer project is also
         * subject to an additional IP rights grant found at
         * http://polymer.github.io/PATENTS.txt
         */const V=(t,...e)=>new _(t,e,"html",S),j=(t,...e)=>new y(t,e,"svg",S);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s(2);class i extends HTMLElement{constructor(){super(),this.onValueChange=new CustomEvent("onvaluechange",{bubbles:!0,detail:{value:()=>this.__getValue(),name:()=>this.name}});}get label(){return this.getAttribute("label");}set label(t){this.setAttribute("label",t);}get theme(){return this.getAttribute("theme")||"slds";}set theme(t){this.setAttribute("theme",t);}get freetext(){return this.getAttribute("freetext");}set freetext(t){this.setAttribute("freetext",t);}get dropdown(){return this.getAttribute("dropdown");}set dropdown(t){this.setAttribute("dropdown",t);}get inputField(){return this.getAttribute("input-field");}set inputField(t){this.setAttribute("input-field",t);}get value(){return this.getAttribute("value")?this.getAttribute("value"):"";}set value(t){this.setAttribute("value",t);}get type(){return this.getAttribute("type");}set type(t){this.setAttribute("type",t);}get disabled(){return!(!this.getAttribute("disabled")||"true"!==this.getAttribute("disabled").toLowerCase());}set disabled(t){this.setAttribute("disabled",t+"");}get extraclass(){return this.getAttribute("extraclass");}set extraclass(t){this.setAttribute("extraclass",t);}get required(){return!(!this.getAttribute("required")||"true"!==this.getAttribute("required").toLowerCase());}set required(t){this.setAttribute("required",t+"");}get readonly(){return!(!this.getAttribute("readonly")||"true"!==this.getAttribute("readonly").toLowerCase());}set readonly(t){this.setAttribute("readonly",t+"");}get static(){return!(!this.getAttribute("static")||"true"!==this.getAttribute("static").toLowerCase());}set static(t){this.setAttribute("static",t+"");}get placeholder(){return this.getAttribute("placeholder")?this.getAttribute("placeholder"):"";}set placeholder(t){this.setAttribute("placeholder",t);}get errormessage(){return this.getAttribute("errormessage");}set errormessage(t){this.setAttribute("errormessage",t);}get pretext(){return this.getAttribute("pretext");}set pretext(t){this.setAttribute("pretext",t);}get posttext(){return this.getAttribute("posttext");}set posttext(t){this.setAttribute("posttext",t);}get inlinehelp(){return this.getAttribute("inlinehelp");}set inlinehelp(t){this.setAttribute("inlinehelp",t);}get popoverhelp(){return this.getAttribute("popoverhelp");}set popoverhelp(t){this.setAttribute("popoverhelp",t);}get name(){return this.getAttribute("name");}set name(t){this.setAttribute("name",t);}get options(){try{return"string"==typeof this.getAttribute("options")?JSON.parse(this.getAttribute("options")):null;}catch(t){return null;}}set options(t){this.setAttribute("options",t);}__getValue(){return new Function("return `"+this.value+"`").call(this,this.value);}}e.BaseUIElement=i;},function(t,e){/**
    @license @nocompile
    Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
    This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
    The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
    The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
    Code distributed by Google as part of the polymer project is also
    subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
    */(function(){"use strict";var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,s=window.Document.prototype.importNode,i=window.Document.prototype.prepend,n=window.Document.prototype.append,r=window.DocumentFragment.prototype.prepend,o=window.DocumentFragment.prototype.append,l=window.Node.prototype.cloneNode,a=window.Node.prototype.appendChild,c=window.Node.prototype.insertBefore,d=window.Node.prototype.removeChild,u=window.Node.prototype.replaceChild,h=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),p=window.Element.prototype.attachShadow,m=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),b=window.Element.prototype.getAttribute,f=window.Element.prototype.setAttribute,v=window.Element.prototype.removeAttribute,g=window.Element.prototype.getAttributeNS,_=window.Element.prototype.setAttributeNS,y=window.Element.prototype.removeAttributeNS,x=window.Element.prototype.insertAdjacentElement,w=window.Element.prototype.insertAdjacentHTML,$=window.Element.prototype.prepend,C=window.Element.prototype.append,M=window.Element.prototype.before,E=window.Element.prototype.after,A=window.Element.prototype.replaceWith,k=window.Element.prototype.remove,T=window.HTMLElement,N=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),O=window.HTMLElement.prototype.insertAdjacentElement,S=window.HTMLElement.prototype.insertAdjacentHTML,D=new Set();function P(t){var e=D.has(t);return t=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t),!e&&t;}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(t){return D.add(t);});var L=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function z(t){var e=t.isConnected;if(void 0!==e)return e;if(L(t))return!0;for(;t&&!(t.__CE_isImportDocument||t instanceof Document);)t=t.parentNode||(window.ShadowRoot&&t instanceof ShadowRoot?t.host:void 0);return!(!t||!(t.__CE_isImportDocument||t instanceof Document));}function V(t){var e=t.children;if(e)return Array.prototype.slice.call(e);for(e=[],t=t.firstChild;t;t=t.nextSibling)t.nodeType===Node.ELEMENT_NODE&&e.push(t);return e;}function j(t,e){for(;e&&e!==t&&!e.nextSibling;)e=e.parentNode;return e&&e!==t?e.nextSibling:null;}function I(t,e,s){t[e]=s;}function F(t){var e=document;this.c=t,this.a=e,this.b=void 0,et(this.c,this.a),"loading"===this.a.readyState&&(this.b=new MutationObserver(this.f.bind(this)),this.b.observe(this.a,{childList:!0,subtree:!0}));}function H(t){t.b&&t.b.disconnect();}function B(){var t=this;this.b=this.a=void 0,this.c=new Promise(function(e){t.b=e,t.a&&e(t.a);});}function q(t){if(t.a)throw Error("Already resolved.");t.a=void 0,t.b&&t.b(void 0);}function U(t){this.f=new Map(),this.g=new Map(),this.l=new Map(),this.i=!1,this.b=t,this.j=new Map(),this.c=function(t){return t();},this.a=!1,this.h=[],this.m=t.f?new F(t):void 0;}function R(t,e){if(!P(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(J(t,e))throw Error("A custom element with name '"+e+"' has already been defined.");if(t.i)throw Error("A custom element is already being defined.");}function W(t,e,s){var i;t.i=!0;try{var n=function(t){var e=r[t];if(void 0!==e&&!(e instanceof Function))throw Error("The '"+t+"' callback must be a function.");return e;},r=s.prototype;if(!(r instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var o=n("connectedCallback"),l=n("disconnectedCallback"),a=n("adoptedCallback"),c=(i=n("attributeChangedCallback"))&&s.observedAttributes||[];}catch(t){throw t;}finally{t.i=!1;}return s={localName:e,constructorFunction:s,connectedCallback:o,disconnectedCallback:l,adoptedCallback:a,attributeChangedCallback:i,observedAttributes:c,constructionStack:[]},t.g.set(e,s),t.l.set(s.constructorFunction,s),s;}function Y(t){if(!1!==t.a){t.a=!1;for(var e=[],s=t.h,i=new Map(),n=0;n<s.length;n++)i.set(s[n],[]);for(et(t.b,document,{upgrade:function(s){if(void 0===s.__CE_state){var n=s.localName,r=i.get(n);r?r.push(s):t.g.has(n)&&e.push(s);}}}),n=0;n<e.length;n++)st(t.b,e[n]);for(n=0;n<s.length;n++){for(var r=s[n],o=i.get(r),l=0;l<o.length;l++)st(t.b,o[l]);(r=t.j.get(r))&&q(r);}s.length=0;}}function J(t,e){var s=t.g.get(e);if(s)return s;if(s=t.f.get(e)){t.f.delete(e);try{return W(t,e,s());}catch(t){nt(t);}}}function G(){var t=at&&at.noDocumentConstructionObserver,e=at&&at.shadyDomFastWalk;this.b=[],this.c=[],this.a=!1,this.shadyDomFastWalk=e,this.f=!t;}function X(t,e,s,i){var n=window.ShadyDOM;if(t.shadyDomFastWalk&&n&&n.inUse){if(e.nodeType===Node.ELEMENT_NODE&&s(e),e.querySelectorAll)for(t=n.nativeMethods.querySelectorAll.call(e,"*"),e=0;e<t.length;e++)s(t[e]);}else!function t(e,s,i){for(var n=e;n;){if(n.nodeType===Node.ELEMENT_NODE){var r=n;s(r);var o=r.localName;if("link"===o&&"import"===r.getAttribute("rel")){if(n=r.import,void 0===i&&(i=new Set()),n instanceof Node&&!i.has(n))for(i.add(n),n=n.firstChild;n;n=n.nextSibling)t(n,s,i);n=j(e,r);continue;}if("template"===o){n=j(e,r);continue;}if(r=r.__CE_shadowRoot)for(r=r.firstChild;r;r=r.nextSibling)t(r,s,i);}n=n.firstChild?n.firstChild:j(e,n);}}(e,s,i);}function Z(t,e){t.a&&X(t,e,function(e){return K(t,e);});}function K(t,e){if(t.a&&!e.__CE_patched){e.__CE_patched=!0;for(var s=0;s<t.b.length;s++)t.b[s](e);for(s=0;s<t.c.length;s++)t.c[s](e);}}function Q(t,e){var s=[];for(X(t,e,function(t){return s.push(t);}),e=0;e<s.length;e++){var i=s[e];1===i.__CE_state?t.connectedCallback(i):st(t,i);}}function tt(t,e){var s=[];for(X(t,e,function(t){return s.push(t);}),e=0;e<s.length;e++){var i=s[e];1===i.__CE_state&&t.disconnectedCallback(i);}}function et(t,e,s){var i=(s=void 0===s?{}:s).s,n=s.upgrade||function(e){return st(t,e);},r=[];for(X(t,e,function(e){if(t.a&&K(t,e),"link"===e.localName&&"import"===e.getAttribute("rel")){var s=e.import;s instanceof Node&&(s.__CE_isImportDocument=!0,s.__CE_registry=document.__CE_registry),s&&"complete"===s.readyState?s.__CE_documentLoadHandled=!0:e.addEventListener("load",function(){var s=e.import;if(!s.__CE_documentLoadHandled){s.__CE_documentLoadHandled=!0;var r=new Set();i&&(i.forEach(function(t){return r.add(t);}),r.delete(s)),et(t,s,{s:r,upgrade:n});}});}else r.push(e);},i),e=0;e<r.length;e++)n(r[e]);}function st(t,e){try{var s=e.ownerDocument,i=s.__CE_registry,n=i&&(s.defaultView||s.__CE_isImportDocument)?J(i,e.localName):void 0;if(n&&void 0===e.__CE_state){n.constructionStack.push(e);try{try{if(new n.constructorFunction()!==e)throw Error("The custom element constructor did not produce the element being upgraded.");}finally{n.constructionStack.pop();}}catch(t){throw e.__CE_state=2,t;}if(e.__CE_state=1,e.__CE_definition=n,n.attributeChangedCallback&&e.hasAttributes()){var r=n.observedAttributes;for(n=0;n<r.length;n++){var o=r[n],l=e.getAttribute(o);null!==l&&t.attributeChangedCallback(e,o,null,l,null);}}z(e)&&t.connectedCallback(e);}}catch(t){nt(t);}}function it(s,i,n,r){var o=i.__CE_registry;if(o&&(null===r||"http://www.w3.org/1999/xhtml"===r)&&(o=J(o,n)))try{var l=new o.constructorFunction();if(void 0===l.__CE_state||void 0===l.__CE_definition)throw Error("Failed to construct '"+n+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==l.namespaceURI)throw Error("Failed to construct '"+n+"': The constructed element's namespace must be the HTML namespace.");if(l.hasAttributes())throw Error("Failed to construct '"+n+"': The constructed element must not have any attributes.");if(null!==l.firstChild)throw Error("Failed to construct '"+n+"': The constructed element must not have any children.");if(null!==l.parentNode)throw Error("Failed to construct '"+n+"': The constructed element must not have a parent node.");if(l.ownerDocument!==i)throw Error("Failed to construct '"+n+"': The constructed element's owner document is incorrect.");if(l.localName!==n)throw Error("Failed to construct '"+n+"': The constructed element's local name is incorrect.");return l;}catch(o){return nt(o),i=null===r?t.call(i,n):e.call(i,r,n),Object.setPrototypeOf(i,HTMLUnknownElement.prototype),i.__CE_state=2,i.__CE_definition=void 0,K(s,i),i;}return K(s,i=null===r?t.call(i,n):e.call(i,r,n)),i;}function nt(t){var e=t.message,s=t.sourceURL||t.fileName||"",i=t.line||t.lineNumber||0,n=t.column||t.columnNumber||0,r=void 0;void 0===ErrorEvent.prototype.initErrorEvent?r=new ErrorEvent("error",{cancelable:!0,message:e,filename:s,lineno:i,colno:n,error:t}):((r=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,e,s,i),r.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0;}});}),void 0===r.error&&Object.defineProperty(r,"error",{configurable:!0,enumerable:!0,get:function(){return t;}}),window.dispatchEvent(r),r.defaultPrevented||console.error(t);}F.prototype.f=function(t){var e=this.a.readyState;for("interactive"!==e&&"complete"!==e||H(this),e=0;e<t.length;e++)for(var s=t[e].addedNodes,i=0;i<s.length;i++)et(this.c,s[i]);},U.prototype.o=function(t,e){var s=this;if(!(e instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");R(this,t),this.f.set(t,e),this.h.push(t),this.a||(this.a=!0,this.c(function(){return Y(s);}));},U.prototype.define=function(t,e){var s=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");R(this,t),W(this,t,e),this.h.push(t),this.a||(this.a=!0,this.c(function(){return Y(s);}));},U.prototype.upgrade=function(t){et(this.b,t);},U.prototype.get=function(t){if(t=J(this,t))return t.constructorFunction;},U.prototype.whenDefined=function(t){if(!P(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this.j.get(t);if(e)return e.c;e=new B(),this.j.set(t,e);var s=this.g.has(t)||this.f.has(t);return t=-1===this.h.indexOf(t),s&&t&&q(e),e.c;},U.prototype.polyfillWrapFlushCallback=function(t){this.m&&H(this.m);var e=this.c;this.c=function(s){return t(function(){return e(s);});};},window.CustomElementRegistry=U,U.prototype.define=U.prototype.define,U.prototype.upgrade=U.prototype.upgrade,U.prototype.get=U.prototype.get,U.prototype.whenDefined=U.prototype.whenDefined,U.prototype.polyfillDefineLazy=U.prototype.o,U.prototype.polyfillWrapFlushCallback=U.prototype.polyfillWrapFlushCallback,G.prototype.connectedCallback=function(t){var e=t.__CE_definition;if(e.connectedCallback)try{e.connectedCallback.call(t);}catch(t){nt(t);}},G.prototype.disconnectedCallback=function(t){var e=t.__CE_definition;if(e.disconnectedCallback)try{e.disconnectedCallback.call(t);}catch(t){nt(t);}},G.prototype.attributeChangedCallback=function(t,e,s,i,n){var r=t.__CE_definition;if(r.attributeChangedCallback&&-1<r.observedAttributes.indexOf(e))try{r.attributeChangedCallback.call(t,e,s,i,n);}catch(t){nt(t);}};var rt=new function(){}();function ot(t,e,s){function i(e){return function(s){for(var i=[],n=0;n<arguments.length;++n)i[n]=arguments[n];n=[];for(var r=[],o=0,l;o<i.length;o++){l=i[o];if(l instanceof Element&&z(l)&&r.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)n.push(l);else n.push(l);}for(e.apply(this,i),i=0;i<r.length;i++)tt(t,r[i]);if(z(this))for(i=0;i<n.length;i++)(r=n[i])instanceof Element&&Q(t,r);};}void 0!==s.prepend&&I(e,"prepend",i(s.prepend)),void 0!==s.append&&I(e,"append",i(s.append));}function lt(t){function s(e,s){Object.defineProperty(e,"innerHTML",{enumerable:s.enumerable,configurable:!0,get:s.get,set:function(e){var i=this,n=void 0;if(z(this)&&(n=[],X(t,this,function(t){t!==i&&n.push(t);})),s.set.call(this,e),n)for(var r=0,o;r<n.length;r++){o=n[r];1===o.__CE_state&&t.disconnectedCallback(o);}return this.ownerDocument.__CE_registry?et(t,this):Z(t,this),e;}});}function i(e,s){I(e,"insertAdjacentElement",function(e,i){var n=z(i);return e=s.call(this,e,i),n&&tt(t,i),z(e)&&Q(t,i),e;});}function n(e,s){function i(e,s){for(var i=[];e!==s;e=e.nextSibling)i.push(e);for(s=0;s<i.length;s++)et(t,i[s]);}I(e,"insertAdjacentHTML",function(t,e){if("beforebegin"===(t=t.toLowerCase())){var n=this.previousSibling;s.call(this,t,e),i(n||this.parentNode.firstChild,this);}else if("afterbegin"===t)n=this.firstChild,s.call(this,t,e),i(this.firstChild,n);else if("beforeend"===t)n=this.lastChild,s.call(this,t,e),i(n||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+(t+"")+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");n=this.nextSibling,s.call(this,t,e),i(this.nextSibling,n);}});}p&&I(Element.prototype,"attachShadow",function(e){if(e=p.call(this,e),t.a&&!e.__CE_patched){e.__CE_patched=!0;for(var s=0;s<t.b.length;s++)t.b[s](e);}return this.__CE_shadowRoot=e;}),m&&m.get?s(Element.prototype,m):N&&N.get?s(HTMLElement.prototype,N):function(t,e){t.a=!0,t.c.push(e);}(t,function(t){s(t,{enumerable:!0,configurable:!0,get:function(){return l.call(this,!0).innerHTML;},set:function(t){var s="template"===this.localName,i=s?this.content:this,n=e.call(document,this.namespaceURI,this.localName);for(n.innerHTML=t;0<i.childNodes.length;)d.call(i,i.childNodes[0]);for(t=s?n.content:n;0<t.childNodes.length;)a.call(i,t.childNodes[0]);}});}),I(Element.prototype,"setAttribute",function(e,s){if(1!==this.__CE_state)return f.call(this,e,s);var i=b.call(this,e);f.call(this,e,s),s=b.call(this,e),t.attributeChangedCallback(this,e,i,s,null);}),I(Element.prototype,"setAttributeNS",function(e,s,i){if(1!==this.__CE_state)return _.call(this,e,s,i);var n=g.call(this,e,s);_.call(this,e,s,i),i=g.call(this,e,s),t.attributeChangedCallback(this,s,n,i,e);}),I(Element.prototype,"removeAttribute",function(e){if(1!==this.__CE_state)return v.call(this,e);var s=b.call(this,e);v.call(this,e),null!==s&&t.attributeChangedCallback(this,e,s,null,null);}),I(Element.prototype,"removeAttributeNS",function(e,s){if(1!==this.__CE_state)return y.call(this,e,s);var i=g.call(this,e,s);y.call(this,e,s);var n=g.call(this,e,s);i!==n&&t.attributeChangedCallback(this,s,i,n,e);}),O?i(HTMLElement.prototype,O):x&&i(Element.prototype,x),S?n(HTMLElement.prototype,S):w&&n(Element.prototype,w),ot(t,Element.prototype,{prepend:$,append:C}),function(t){function e(e){return function(s){for(var i=[],n=0;n<arguments.length;++n)i[n]=arguments[n];n=[];for(var r=[],o=0,l;o<i.length;o++){l=i[o];if(l instanceof Element&&z(l)&&r.push(l),l instanceof DocumentFragment)for(l=l.firstChild;l;l=l.nextSibling)n.push(l);else n.push(l);}for(e.apply(this,i),i=0;i<r.length;i++)tt(t,r[i]);if(z(this))for(i=0;i<n.length;i++)(r=n[i])instanceof Element&&Q(t,r);};}var s=Element.prototype;void 0!==M&&I(s,"before",e(M)),void 0!==E&&I(s,"after",e(E)),void 0!==A&&I(s,"replaceWith",function(e){for(var s=[],i=0;i<arguments.length;++i)s[i]=arguments[i];i=[];for(var n=[],r=0,o;r<s.length;r++){o=s[r];if(o instanceof Element&&z(o)&&n.push(o),o instanceof DocumentFragment)for(o=o.firstChild;o;o=o.nextSibling)i.push(o);else i.push(o);}for(r=z(this),A.apply(this,s),s=0;s<n.length;s++)tt(t,n[s]);if(r)for(tt(t,this),s=0;s<i.length;s++)(n=i[s])instanceof Element&&Q(t,n);}),void 0!==k&&I(s,"remove",function(){var e=z(this);k.call(this),e&&tt(t,this);});}(t);}var at=window.customElements;function ct(){var e=new G();!function(e){window.HTMLElement=function(){function s(){var s=this.constructor,i=document.__CE_registry.l.get(s);if(!i)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var n=i.constructionStack;if(0===n.length)return n=t.call(document,i.localName),Object.setPrototypeOf(n,s.prototype),n.__CE_state=1,n.__CE_definition=i,K(e,n),n;var r=n.length-1,o=n[r];if(o===rt)throw Error("Failed to construct '"+i.localName+"': This element was already constructed.");return n[r]=rt,Object.setPrototypeOf(o,s.prototype),K(e,o),o;}return s.prototype=T.prototype,Object.defineProperty(s.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:s}),s;}();}(e),function(t){I(Document.prototype,"createElement",function(e){return it(t,this,e,null);}),I(Document.prototype,"importNode",function(e,i){return e=s.call(this,e,!!i),this.__CE_registry?et(t,e):Z(t,e),e;}),I(Document.prototype,"createElementNS",function(e,s){return it(t,this,s,e);}),ot(t,Document.prototype,{prepend:i,append:n});}(e),ot(e,DocumentFragment.prototype,{prepend:r,append:o}),function(t){function e(e,s){Object.defineProperty(e,"textContent",{enumerable:s.enumerable,configurable:!0,get:s.get,set:function(e){if(this.nodeType===Node.TEXT_NODE)s.set.call(this,e);else{var i=void 0;if(this.firstChild){var n=this.childNodes,r=n.length;if(0<r&&z(this)){i=Array(r);for(var o=0;o<r;o++)i[o]=n[o];}}if(s.set.call(this,e),i)for(e=0;e<i.length;e++)tt(t,i[e]);}}});}I(Node.prototype,"insertBefore",function(e,s){if(e instanceof DocumentFragment){var i=V(e);if(e=c.call(this,e,s),z(this))for(s=0;s<i.length;s++)Q(t,i[s]);return e;}return i=e instanceof Element&&z(e),s=c.call(this,e,s),i&&tt(t,e),z(this)&&Q(t,e),s;}),I(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var s=V(e);if(e=a.call(this,e),z(this))for(var i=0;i<s.length;i++)Q(t,s[i]);return e;}return s=e instanceof Element&&z(e),i=a.call(this,e),s&&tt(t,e),z(this)&&Q(t,e),i;}),I(Node.prototype,"cloneNode",function(e){return e=l.call(this,!!e),this.ownerDocument.__CE_registry?et(t,e):Z(t,e),e;}),I(Node.prototype,"removeChild",function(e){var s=e instanceof Element&&z(e),i=d.call(this,e);return s&&tt(t,e),i;}),I(Node.prototype,"replaceChild",function(e,s){if(e instanceof DocumentFragment){var i=V(e);if(e=u.call(this,e,s),z(this))for(tt(t,s),s=0;s<i.length;s++)Q(t,i[s]);return e;}i=e instanceof Element&&z(e);var n=u.call(this,e,s),r=z(this);return r&&tt(t,s),i&&tt(t,e),r&&Q(t,e),n;}),h&&h.get?e(Node.prototype,h):function(t,e){t.a=!0,t.b.push(e);}(t,function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=this.firstChild;e;e=e.nextSibling)e.nodeType!==Node.COMMENT_NODE&&t.push(e.textContent);return t.join("");},set:function(t){for(;this.firstChild;)d.call(this,this.firstChild);null!=t&&""!==t&&a.call(this,document.createTextNode(t));}});});}(e),lt(e),e=new U(e),document.__CE_registry=e,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:e});}at&&!at.forcePolyfill&&"function"==typeof at.define&&"function"==typeof at.get||ct(),window.__CE_installPolyfill=ct;}).call(this);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{get size(){return this.getAttribute("size")||"";}set size(t){this.setAttribute("size",t);}get icon(){return this.getAttribute("icon");}set icon(t){this.setAttribute("icon",t);}get baseurl(){return this.getAttribute("baseurl");}set baseurl(t){this.setAttribute("baseurl",t);}get parenttype(){return this.getAttribute("parenttype")||"";}set parenttype(t){this.setAttribute("parenttype",t);}static get observedAttributes(){return["extraclass","icon","size","sprite","baseurl"];}attributeChangedCallback(t,e,s){e!==s&&this.render();}constructor(){super(),this.root=this;}connectedCallback(){Promise.resolve().then(()=>s(10)(`./vlocity-icon.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}render(){this.template&&i.render(this.template(this),this.root);}}e.VlocityIcon=r,customElements.define("vlocity-icon",r);},function(t,e,s){s(5),s(9),s(16),s(20),s(24),s(28),s(3),s(32),t.exports=s(36);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{static get is(){return"vlocity-input";}get maxlength(){return this.getAttribute("maxlength");}set maxlength(t){this.setAttribute("maxlength",t);}get min(){return this.getAttribute("min");}set min(t){this.setAttribute("min",t);}get max(){return this.getAttribute("max");}set max(t){this.setAttribute("max",t);}get allownegative(){return this.getAttribute("allownegative");}set allownegative(t){this.setAttribute("allownegative",t);}get allowdecimal(){return this.getAttribute("allowdecimal");}set allowdecimal(t){this.setAttribute("allowdecimal",t);}static get observedAttributes(){return["label","disabled","required","readonly","static","popoverhelp","inlinehelp","posttext","pretext","errormessage","extraclass","theme","type","value","placeholder","maxlength","min","max","allownegative","allowdecimal"];}constructor(){super(),this.root=this;}attributeChangedCallback(t,e,s){if(e!==s){switch(t){case"value":const t=this.querySelector("input");t&&t.value!==this.getAttribute("value")&&(t.value=this.getAttribute("value"));}this.template&&this.render();}}connectedCallback(){Promise.resolve().then(()=>s(6)("./vlocity-input."+(this.theme?this.theme:"slds")+".tmpl.ts")).then(t=>{this.template=t.default,this.render();});}onChangeValue(t){let e=t.currentTarget.value;if("number"===t.target.type){const s=!this.allownegative||JSON.parse(this.allownegative),i=!this.allowdecimal||JSON.parse(this.allowdecimal);s||(e=0<=parseInt(e)?e:Math.abs(parseInt(e)),t.currentTarget.value=e),i||(e=Math.floor(parseInt(e)),t.currentTarget.value=e),this.min&&parseInt(e)<parseInt(this.min)?this.errormessage="Value should be above "+this.min:this.max&&parseInt(e)>parseInt(this.max)?this.errormessage="Value should be below "+this.max:this.errormessage="";}this.value=e,this.dispatchEvent(this.onValueChange);}render(){i.render(this.template(this),this.root);}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-input.nds.tmpl.ts":7,"./vlocity-input.slds.tmpl.ts":8};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=6;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return this.customStyle=i.html`<style>.nds-input-popover-holder .nds-popover{
                                    display: none;
                                }
                                .nds-input-popover-holder:hover .nds-popover{
                                    display: inherit;
                                }</style>`,this.popoverHelp=i.html`${this.customStyle}<div class="nds-form-element__icon nds-input-popover-holder">
                                <button aria-describedby="help" class="nds-button"><svg class="nds-icon nds-icon_x-small nds-icon-text-default" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="info" width="100%" height="100%"><path d="M12 .9C5.9.9.9 5.9.9 12s5 11.1 11.1 11.1 11.1-5 11.1-11.1S18.1.9 12 .9zm0 5.6c.8 0 1.4.6 1.4 1.4s-.6 1.4-1.4 1.4-1.4-.6-1.4-1.4.6-1.4 1.4-1.4zm2.3 9.7c0 .2-.2.4-.5.4h-3.6c-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5.2 0 .4-.2.4-.4v-1.9c0-.2-.2-.5-.4-.5-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5h2.7c.3 0 .5.2.5.5v3.7c0 .2.2.4.4.4.3 0 .5.2.5.5v.9z"></path></svg></button>
                                <div class="nds-popover nds-popover_tooltip nds-nubbin_bottom-left" id="help" role="tooltip" style="position: absolute;bottom: 35px;left: -15px;width: 20rem;">
                                    <div class="nds-popover__body nds-text-longform">
                                    <p>${t.popoverhelp}</p>
                                    </div>
                                </div>
                            </div>`,this.class="nds-form-element "+(t.extraclass?t.extraclass:"")+" "+(t.errormessage?"nds-has-error":""),this.innerClass="nds-form-element__control "+(t.pretext||t.posttext?"nds-input-has-fixed-addon":""),i.html`<div class=${this.class}>
                    ${t.label?i.html`<label class="nds-form-element__label">
                        ${t.required?i.html` <abbr class="nds-required" title="required">*</abbr>`:""}
                    ${t.label}</label>`:""}
                    ${t.popoverhelp?this.popoverHelp:""}
                    <div class=${this.innerClass}>
                        ${t.pretext?i.html`<span class="nds-form-element__addon">${t.pretext}</span>`:""}

                        ${t.static?i.html`<span class="nds-form-element__static">${t.value}</span>`:t.readonly?i.html`<input type=${t.type} readonly onkeyup="${e=>{t.onChangeValue(e);}}" .value=${t.value} class="nds-input" placeholder=${t.placeholder} />`:i.html`<input type=${t.type?t.type:"text"}
                            ?required="${t.required}"
                            ?disabled="${t.disabled}"
                            @input="${e=>{t.onChangeValue(e);}}" 
                            value=${t.value}
                            min=${t.min}   
                            max=${t.max} 
                            maxlength=${t.maxlength}
                            class="nds-input" placeholder=${t.placeholder} />`}
                        ${t.inlinehelp?i.html`<div class="nds-form-element__help">${t.inlinehelp}</div>`:""}
                        ${t.posttext?i.html`<span class="nds-form-element__addon">${t.posttext}</span>`:""}
                    </div>
                    ${t.errormessage?i.html`<div class="nds-form-element__help">${t.errormessage}</div>`:""}
              </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return this.customStyle=i.html`<style>.slds-input-popover-holder .slds-popover{
                                    display: none;
                                }
                                .slds-input-popover-holder:hover .slds-popover{
                                    display: inherit;
                                }</style>`,this.popoverHelp=i.html`${this.customStyle}<div class="slds-form-element__icon slds-input-popover-holder">
                                <button aria-describedby="help" class="slds-button"><svg class="slds-icon slds-icon_x-small slds-icon-text-default" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="info" width="100%" height="100%"><path d="M12 .9C5.9.9.9 5.9.9 12s5 11.1 11.1 11.1 11.1-5 11.1-11.1S18.1.9 12 .9zm0 5.6c.8 0 1.4.6 1.4 1.4s-.6 1.4-1.4 1.4-1.4-.6-1.4-1.4.6-1.4 1.4-1.4zm2.3 9.7c0 .2-.2.4-.5.4h-3.6c-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5.2 0 .4-.2.4-.4v-1.9c0-.2-.2-.5-.4-.5-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5h2.7c.3 0 .5.2.5.5v3.7c0 .2.2.4.4.4.3 0 .5.2.5.5v.9z"></path></svg></button>
                                <div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" id="help" role="tooltip" style="position: absolute;bottom: 35px;left: -15px;width: 20rem;">
                                    <div class="slds-popover__body slds-text-longform">
                                    <p>${t.popoverhelp}</p>
                                    </div>
                                </div>
                            </div>`,this.class="slds-form-element "+(t.extraclass?t.extraclass:"")+" "+(t.errormessage?"slds-has-error":""),this.innerClass="slds-form-element__control "+(t.pretext||t.posttext?"slds-input-has-fixed-addon":""),i.html`<div class=${this.class}>
                    ${t.label?i.html`<label class="slds-form-element__label">
                        ${t.required?i.html` <abbr class="slds-required" title="required">*</abbr>`:""}
                    ${t.label}</label>`:""}
                    ${t.popoverhelp?this.popoverHelp:""}
                    <div class=${this.innerClass}>
                        ${t.pretext?i.html`<span class="slds-form-element__addon">${t.pretext}</span>`:""}

                        ${t.static?i.html`<span class="slds-form-element__static">${t.value}</span>`:t.readonly?i.html`<input type=${t.type} readonly onkeyup="${e=>{t.onChangeValue(e);}}" .value=${t.value} class="slds-input" placeholder=${t.placeholder} />`:i.html`<input type=${t.type?t.type:"text"}
                            ?required="${t.required}"
                            ?disabled="${t.disabled}"
                            @input="${e=>{t.onChangeValue(e);}}"     
                            value=${t.value}
                            min=${t.min}   
                            max=${t.max} 
                            maxlength=${t.maxlength}
                            class="slds-input" placeholder=${t.placeholder} />`}
                        ${t.inlinehelp?i.html`<div class="slds-form-element__help">${t.inlinehelp}</div>`:""}
                        ${t.posttext?i.html`<span class="slds-form-element__addon">${t.posttext}</span>`:""}
                    </div>
                    ${t.errormessage?i.html`<div class="slds-form-element__help">${t.errormessage}</div>`:""}
              </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);s(3);class r extends n.BaseUIElement{static get is(){return"vlocity-button";}get type(){return this.getAttribute("type");}set type(t){this.setAttribute("type",t);}get styletype(){return this.getAttribute("styletype");}set styletype(t){this.setAttribute("styletype",t);}get icon(){return this.getAttribute("icon");}set icon(t){this.setAttribute("icon",t);}get iconsize(){return this.getAttribute("iconsize")||"small";}set iconsize(t){this.setAttribute("iconsize",t);}get iconbaseurl(){return this.getAttribute("iconbaseurl");}set iconbaseurl(t){this.setAttribute("iconbaseurl",t);}static get observedAttributes(){return["label","extraclass","disabled","styletype"];}attributeChangedCallback(t,e,s){e!==s&&this.render();}constructor(){super(),this.addEventListener("click",function(){this.clickaction&&this.clickaction.apply(this);}.bind(this));}connectedCallback(){Promise.resolve().then(()=>s(13)("./vlocity-button."+this.theme+".tmpl.ts")).then(t=>{this.template=t.default,this.render();});}render(){this.template&&i.render(this.template(this),this);}}customElements.define(r.is,r),e.default=r;},function(t,e,s){var i={"./vlocity-icon.nds.tmpl.ts":11,"./vlocity-icon.slds.tmpl.ts":12};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=10;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){this.getSvgUrl=()=>{let e="",s="/resources/newport/assets/icons/";return s=this.baseurl?this.baseurl:s,s+=t.icon?`${t.icon.split(":")[0]}-sprite/svg/symbols.svg#${t.icon.split(":")[1]}`:"",e=s,e;};let e=t.parenttype&&t.parenttype+"__",s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("class",`nds-${e}icon nds-${e}icon_${t.size} ${t.extraclass}`),s.setAttribute("aria-hidden",t.ariaHidden||"false"),s.innerHTML=`<use xlink:href="${this.getSvgUrl()}"></use>`,i.html`${s}`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){this.getSvgUrl=()=>{let e="",s="/resources/slds/assets/icons/";return s=this.baseurl?this.baseurl:s,s+=t.icon?`${t.icon.split(":")[0]}-sprite/svg/symbols.svg#${t.icon.split(":")[1]}`:"",e=s,e;};let e=t.parenttype&&t.parenttype+"__",s=document.createElementNS("http://www.w3.org/2000/svg","svg");return s.setAttribute("class",`slds-${e}icon slds-${e}icon_${t.size} ${t.extraclass}`),s.setAttribute("aria-hidden",t.ariaHidden||"false"),s.innerHTML=`<use xlink:href="${this.getSvgUrl()}"></use>`,i.html`${s}`;};},function(t,e,s){var i={"./vlocity-button.nds.tmpl.ts":14,"./vlocity-button.slds.tmpl.ts":15};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=13;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`<button type=${t.type?t.type:"button"} class=${"nds-button "+(t.styletype?"nds-button_"+t.styletype:"")+" "+(t.extraclass?t.extraclass:"")} ?disabled="${t.disabled}" >
    ${t.icon?i.html`<vlocity-icon label="NDS Input" icon=${t.icon} size=${t.iconsize} parenttype="button" baseurl="${t.iconbaseurl}"></vlocity-icon>`:""}
${t.label}</button>`;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`<button type=${t.type?t.type:"button"} class=${"slds-button"+(t.styletype?" slds-button_"+t.styletype:"")+" "+(t.extraclass?t.extraclass:"")} ?disabled="${t.disabled}" >
    ${t.icon?i.html`<vlocity-icon label="Slds Input" icon=${t.icon} size=${t.iconsize} parenttype="button" baseurl="${t.iconbaseurl}"></vlocity-icon>`:""}
${t.label}</button>`;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{get checked(){return!(!this.getAttribute("checked")||"true"!==this.getAttribute("checked").toLowerCase());}set checked(t){this.setAttribute("checked",t+"");}get stacked(){return!(!this.getAttribute("stacked")||"true"!==this.getAttribute("stacked").toLowerCase());}set stacked(t){this.setAttribute("stacked",t+"");}get errormessage(){return this.getAttribute("errormessage");}set errormessage(t){this.setAttribute("errormessage",t);}constructor(){super();}connectedCallback(){Promise.resolve().then(()=>s(17)("./vlocity-checkbox."+(this.theme?this.theme:"slds")+".tmpl.ts")).then(t=>{this.template=t.default,this.render();});}render(){i.render(this.template?this.template(this):i.html``,this);}static get observedAttributes(){return["checked","required","disabled","label","stacked","extraclass","value"];}attributeChangedCallback(t,e,s){if(e!==s){switch(t){case"required":s&&!this.checked&&(this.errormessage="");break;case"value":this.checked="true"===this.value;}this.render();}}onChangeValue(t){this.checked=t.currentTarget.checked,this.dispatchEvent(this.onValueChange);}__getValue(){return new Function("return "+this.checked).call(this,this.value);}}e.VlocityCheckbox=r,customElements.define("vlocity-checkbox",r);},function(t,e,s){var i={"./vlocity-checkbox.nds.tmpl.ts":18,"./vlocity-checkbox.slds.tmpl.ts":19};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=17;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){const e=Date.now(),s=t.required?i.html`<abbr class="nds-required" title="required">*</abbr>`:"";return i.html`<div class="nds-p-bottom_x-small">
                    <div class="nds-form-element">
                    <div class="nds-form-element__control">
                        <span class="nds-checkbox ${t.stacked?"nds-checkbox_stacked":""}">
                            ${s}
                            <input class="${t.extraclass?t.extraclass:""}"
                            type="checkbox" id=${e}
                            ?checked="${t.checked}"
                            ?disabled="${t.disabled}"
                            change="${e=>{t.onChangeValue(e);}}"/>
                            <label class="nds-checkbox__label" for="${e}">
                                <span class="nds-checkbox_faux"></span>
                                <span class="nds-form-element__label">${t.label}</span>
                            </label>
                        </span>
                    </div>
                    <div id="error${e}" hidden=${t.required&&!t.value} class="nds-form-element__help">${t.errormessage}</div>
                </div>
                </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){const e=Date.now(),s=t.required?i.html`<abbr class="slds-required" title="required">*</abbr>`:"";return i.html`<div class="slds-p-bottom_x-small">
                    <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <span class="slds-checkbox ${t.stacked?"slds-checkbox_stacked":""}">
                            ${s}
                            <input class="${t.extraclass?t.extraclass:""}"
                            type="checkbox" id=${e}
                            ?checked="${t.checked}"
                            ?disabled="${t.disabled}"
                            @change="${e=>{t.onChangeValue(e);}}"/>
                            <label class="slds-checkbox__label" for="${e}">
                                <span class="slds-checkbox_faux"></span>
                                <span class="slds-form-element__label">${t.label}</span>
                            </label>
                        </span>
                    </div>
                    <div id="error${e}" hidden=${t.required&&!t.value} class="slds-form-element__help">${t.errormessage}</div>
                </div>
                </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{static get is(){return"vlocity-radio-group";}get groupname(){return this.getAttribute("groupname");}set groupname(t){this.setAttribute("groupname",t);}constructor(){super();}connectedCallback(){Promise.resolve().then(()=>s(21)("./vlocity-radio-group."+this.theme+".tmpl.ts")).then(t=>{this.template=t.default,this.render();});}render(){i.render(this.template?this.template(this):i.html``,this);}static get observedAttributes(){return["value","label","extraclass","options","groupname","required","disabled"];}attributeChangedCallback(t,e,s){e!==s&&this.render();}onChangeValue(t){this.value=t.currentTarget.value,this.dispatchEvent(this.onValueChange);}}e.VlocityRadioGroup=r,customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-radio-group.nds.tmpl.ts":22,"./vlocity-radio-group.slds.tmpl.ts":23};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=21;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){let e=Date.now(),s=t.required?i.html`
        <abbr class="nds-required" title="required">*</abbr>
      `:"";return i.html`
    <div class="nds-p-around_x-small">
      <div class="nds-form-element">
        <legend class="nds-form-element__legend nds-form-element__label">
          ${s} ${t.label}
        </legend>
        <div class="nds-form-element__control">
          ${t.options.map((s,n)=>i.html`
              <span class="nds-radio">
                <input
                  type="radio"
                  class="${t.extraclass?t.extraclass:""}"
                  id="${s.id?s.id:`radio${e}${n}`}"
                  .value="${s.value}"
                  ?checked="${t.value===s.value}"
                  ?disabled="${t.disabled||s.disabled}"
                  @change="${e=>{t.onChangeValue(e);}}"
                  name="${t.groupname}"
                />
                <label
                  class="nds-radio__label"
                  for="${s.id?s.id:`radio${e}${n}`}"
                >
                  <span class="nds-radio_faux"></span>
                  <span class="nds-form-element__label">${s.label}</span>
                </label>
              </span>
            `)}
        </div>
      </div>
    </div>
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){let e=Date.now(),s=t.required?i.html`
        <abbr class="slds-required" title="required">*</abbr>
      `:"";return i.html`
    <div class="slds-p-around_x-small">
      <div class="slds-form-element">
        <legend class="slds-form-element__legend slds-form-element__label">
          ${s} ${t.label}
        </legend>
        <div class="slds-form-element__control">
          ${t.options.map((s,n)=>i.html`
              <span class="slds-radio">
                <input
                  type="radio"
                  class="${t.extraclass?t.extraclass:""}"
                  id="${s.id?s.id:`radio${e}${n}`}"
                  .value="${s.value}"
                  ?checked="${t.value===s.value}"
                  ?disabled="${t.disabled||s.disabled}"
                  @change="${e=>{t.onChangeValue(e);}}"
                  name="${t.groupname}"
                />
                <label
                  class="slds-radio__label"
                  for="${s.id?s.id:`radio${e}${n}`}"
                >
                  <span class="slds-radio_faux"></span>
                  <span class="slds-form-element__label">${s.label}</span>
                </label>
              </span>
            `)}
        </div>
      </div>
    </div>
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{static get is(){return"vlocity-typeahead";}constructor(){super();}connectedCallback(){Promise.resolve().then(()=>s(25)("./vlocity-typeahead."+(this.theme?this.theme:"slds")+".tmpl.ts")).then(t=>{this.template=t.default,this.render();});}render(){this.filteredOptions=this.filteredOptions?this.filteredOptions:this.options,i.render(this.template?this.template(this):i.html``,this);}static get observedAttributes(){return["value","label","extraclass","options","required","disabled","placeholder"];}attributeChangedCallback(t,e,s){e!==s&&this.render();}showLookup(t){this.isListVisible=!!t,this.render();}selectValue(t){this.value=t,this.dispatchEvent(this.onValueChange);}filterOptions(t){this.filteredOptions=this.options.filter(e=>e.label.toLowerCase().includes(t.target.value.toLowerCase())),this.render();}}e.VlocityTypeahead=r,customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-typeahead.nds.tmpl.ts":26,"./vlocity-typeahead.slds.tmpl.ts":27};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=25;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){let e=Date.now();return i.html`<div>
                    <div class="nds-form-element">
                    ${t.required?i.html`<abbr class="nds-required" title="required">*</abbr>`:""}
                    <label class="nds-form-element__label" for="typeahead-${e}">${t.label}</label>
                    <div class="nds-form-element__control">
                        <div class="nds-combobox_container">
                        <div class="nds-combobox nds-dropdown-trigger nds-dropdown-trigger_click ${t.isListVisible?"nds-is-open":""}" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                            <div class="nds-combobox__form-element nds-input-has-icon nds-input-has-icon_right" role="none">
                            <input type="text" class="nds-input nds-combobox__input" id="typeahead-${e}"
                                aria-autocomplete="list"
                                .value=${t.value}
                                aria-controls="typeaheadlist-${e}"
                                autocomplete="off" role="textbox"
                                placeholder=${t.placeholder}
                                ?disabled="${t.disabled}"
                                @input=${()=>t.filterOptions(event)}
                                @blur=${()=>t.showLookup(!1)}
                                @focus=${()=>t.showLookup(!0)}
                            />
                            </div>
                            ${0<t.filteredOptions.length?i.html`<div id="typeaheadlist-${e}" class="nds-dropdown nds-dropdown_length-with-icon-7 nds-dropdown_fluid" role="listbox">
                            <ul class="nds-listbox nds-listbox_vertical" role="presentation">
                            ${t.filteredOptions.map(e=>i.html`
                                <li role="presentation" class="nds-listbox__item" @mousedown=${()=>t.selectValue(e.value)}>
                                    <div class="nds-media nds-listbox__option nds-listbox__option_entity nds-listbox__option_has-meta" role="option">
                                    <span class="nds-media__body">
                                        <span class="nds-listbox__option-text nds-listbox__option-text_entity">${e.label}</span>
                                    </span>
                                    </div>
                                </li>
                            `)}
                            </ul>
                            </div>`:""}
                        </div>
                        </div>
                    </div>
                    </div>
                </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){let e=Date.now();return i.html`<div>
                    <div class="slds-form-element">
                    ${t.required?i.html`<abbr class="slds-required" title="required">*</abbr>`:""}
                    <label class="slds-form-element__label" for="typeahead-${e}">${t.label}</label>
                    <div class="slds-form-element__control">
                        <div class="slds-combobox_container">
                        <div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click ${t.isListVisible?"slds-is-open":""}" aria-expanded="false" aria-haspopup="listbox" role="combobox">
                            <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none">
                            <input type="text" class="slds-input slds-combobox__input" id="typeahead-${e}"
                                aria-autocomplete="list"
                                .value=${t.value}
                                aria-controls="typeaheadlist-${e}"
                                autocomplete="off" role="textbox"
                                placeholder=${t.placeholder}
                                ?disabled="${t.disabled}"
                                @input=${()=>t.filterOptions(event)}
                                @blur=${()=>t.showLookup(!1)}
                                @focus=${()=>t.showLookup(!0)}
                            />
                            </div>
                            ${0<t.filteredOptions.length?i.html`<div id="typeaheadlist-${e}" class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox">
                            <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                            ${t.filteredOptions.map(e=>i.html`
                                <li role="presentation" class="slds-listbox__item" @mousedown=${()=>t.selectValue(e.value)}>
                                    <div class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta" role="option">
                                    <span class="slds-media__body">
                                        <span class="slds-listbox__option-text slds-listbox__option-text_entity">${e.label}</span>
                                    </span>
                                    </div>
                                </li>
                            `)}
                            </ul>
                            </div>`:""}
                        </div>
                        </div>
                    </div>
                    </div>
                </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{constructor(){super(),this.searchText="",this.root=this,this.slots=this.getElementsByTagName("slot"),this.isFocused=!1,this.isSelected=!1;}static get is(){return"vlocity-combobox";}get options(){return this.getAttribute("options")?JSON.parse(this.getAttribute("options")):[];}set options(t){this.setAttribute("options",t);}get disabledefaultsort(){return this.hasAttribute("disabledefaultsort");}set disabledefaultsort(t){this.setAttribute("disabledefaultsort",t.toString());}get multiple(){return!(!this.getAttribute("multiple")||"true"!==this.getAttribute("multiple").toLowerCase());}set mutiple(t){this.setAttribute("multiple",t);}get searchable(){return!(!this.getAttribute("searchable")||"true"!==this.getAttribute("searchable").toLowerCase());}set searchable(t){this.setAttribute("searchable",t+"");}get iconbaseurl(){return this.getAttribute("iconbaseurl");}static get observedAttributes(){return["label","disabled","required","readonly","errormessage","extraclass","value","placeholder","options"];}attributeChangedCallback(t){switch(t){case"value":case"options":this.init();}this.template&&this.render();}connectedCallback(){Promise.resolve().then(()=>s(29)("./vlocity-combobox."+(this.theme?this.theme:"slds")+".tmpl.ts")).then(t=>{this.template=t.default,this.init(),this.render();});}init(){this.optionMap=[...this.options],this.isGrouped=!!(this.optionMap&&this.optionMap[0]&&this.optionMap[0].group);let t=0;-1<this.value.indexOf(",")?this.valueMap=this.value.split(","):this.valueMap=null,this.disabledefaultsort||this.optionMap.sort(function(t,e){return t.label<e.label?-1:t.label>e.label?1:0;}),this.optionMap.map(e=>{let s=!1;return this.valueMap?s=this.valueMap.some(t=>t===e.value):e.value===this.value&&(s=!0,this.selectedValue=e.label),e.index=t++,e.isSelected=s,e;});const e=this.optionMap.filter(function(t){return t.isSelected;});this.selectedValue=0>=e.length?"":1<e.length?e.length+" Options Selected":e[0].label,this.searchable&&this.multiple&&(this.selectedValue=""),this.isGrouped&&(this.isGroupedMap=this.optionMap.reduce((t,e,s,i,n=e.group)=>(console.log(s,i),(t[n]||(t[n]=[])).push(e),t),{}));}onFocusHandler(t){this.element=t.currentTarget,this.isFocused=!0,this.render();}onBlurHandler(t){this.isSelected?(this.element.focus(),this.isSelected=!1):(this.multiple&&this.searchable&&(t.currentTarget.value="",this.searchText=""),this.searchText&&(this.selectedValue||(t.currentTarget.value=""),this.searchText=""),this.isFocused=!1,this.render());}onInputChange(t){const e=t.currentTarget;this.searchText=e.value,this.dispatchEvent(this.onValueChange),this.render();}onSelectOption(t){const e=t.currentTarget.getAttribute("data-index");if(e){if(this.multiple){this.isSelected=!0,this.optionMap[e].isSelected=!this.optionMap[e].isSelected;const t=this.optionMap.filter(function(t){return t.isSelected;});this.searchable||(this.selectedValue=0>=t.length?"":t.length+" Options Selected"),this.value=t.map(t=>t.value).join(",");}else this.optionMap.map(t=>(t.isSelected=!1,t)),this.optionMap[e].isSelected=!this.optionMap[e].isSelected,this.selectedValue=this.optionMap[e].value,this.value=this.selectedValue;this.dispatchEvent(this.onValueChange),this.render();}else this.isSelected=!0;}render(){i.render(this.template(this),this.root);}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-combobox.nds.tmpl.ts":30,"./vlocity-combobox.slds.tmpl.ts":31};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=29;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return this.class="nds-form-element "+t.extraclass+(t.errormessage?" nds-has-error":""),this.checkIcon=i.html`<vlocity-icon theme="nds" icon="utility:check" extraclass="nds-icon-text-default nds-listbox__icon-selected" baseurl="${t.iconbaseurl}" size="x-small"></vlocity-icon>`,this.downArrow=i.html`<vlocity-icon theme="nds" icon="utility:down" extraclass="nds-icon-text-default" size="x-small" baseurl="${t.iconbaseurl}"></vlocity-icon>`,this.searchIcon=i.html`<vlocity-icon theme="nds" icon="utility:search" extraclass="nds-icon-text-default" size="x-small" baseurl="${t.iconbaseurl}"></vlocity-icon>`,this.closeIcon=i.html`<vlocity-icon theme="nds" icon="utility:close" extraclass="nds-icon-text-default" size="x-small" baseurl="${t.iconbaseurl}"></vlocity-icon>`,this.generateOption=e=>i.html`<li role="presentation" style="pointer-events: auto;" class="nds-listbox__item" data-index="${e.index}" @mousedown="${e=>{t.onSelectOption(e);}}">
                        <div class=${"nds-media nds-listbox__option nds-listbox__option_plain nds-media_small"+(e.isSelected?" nds-is-selected":"")} role="option">
                        <span class="nds-media__figure">
                            <span  aria-hidden="true">
                                ${this.checkIcon}
                            </span>
                        </span>
                        <span class="nds-media__body">
                            <span class="nds-truncate" title="Accounts"> ${e.label}</span>
                        </span>
                        </div>
                    </li>`,this.generateGroupedOption=e=>{const s=t.isGroupedMap[e].filter(e=>e.label.toLowerCase().includes(t.searchText.toLowerCase()));return i.html`<li role="presentation" class=${"nds-listbox__item"+(0>=s.length?" nds-hide":"")} @mousedown="${e=>{t.onSelectOption(e);}}">
                    <div  class="nds-media nds-listbox__option nds-listbox__option_plain nds-media_small" role="presentation">
                        <h3 class="nds-text-title_caps" role="presentation">${e}</h3>
                    </div>
                    </li> ${s.map(t=>this.generateOption(t))}`;},this.generateSelectedItems=()=>{const t=this.optionMap.filter(function(t){return t.isSelected;});return i.html`<div class=${"nds-listbox_selection-group"+(0>=t.length?" nds-hide":"")}>
            <ul class="nds-listbox nds-listbox_horizontal" role="listbox" aria-label="Selected Options:" aria-orientation="horizontal">
            ${t.map(t=>i.html`<li class="nds-listbox-item" role="presentation">
            <span class="nds-pill" role="option" tabindex="0" aria-selected="true">
                <span class="nds-pill__label" title="${t.label}">${t.label}</span>
                <span class="nds-icon_container nds-pill__remove" title="Remove">
                <span  aria-hidden="true">
                    ${this.closeIcon}
                </span>
                <span class="nds-assistive-text">Press delete or backspace to remove</span>
                </span>
            </span>
            </li>`)}
            </ul>
            </div>`;},this.generateFilterResults=()=>{const e=this.optionMap.filter(e=>e.label.toLowerCase().includes(t.searchText.toLowerCase()));return 0===e.length?[i.html`<li role="presentation" style="pointer-events: auto;" class="slds-listbox__item">
                    <span class="slds-media__body">
                        <span class="slds-truncate"> No records found. </span>
                    </span>
                </li>`]:e.map(t=>this.generateOption(t));},i.html`<div class=${this.class}>
              ${t.label?i.html`
                  <label class="nds-form-element__label" >
                  ${t.required?i.html` <abbr class="nds-required" title="required">*</abbr>`:""}
                  ${t.label}</label>
              `:""}

                <div class="nds-form-element__control">
                <div class="nds-combobox_container">
                    <div class=${"nds-combobox nds-dropdown-trigger nds-dropdown-trigger_click"+(t.isFocused?" nds-is-open":"")} aria-expanded="false" aria-haspopup="listbox" role="combobox">
                    <div class="nds-combobox__form-element nds-input-has-icon nds-input-has-icon_right" role="none">
                        ${t.searchable?i.html`<input type="text" ?disabled=${t.disabled} class="nds-input nds-combobox__input" .value=${t.selectedValue} @focus="${e=>{t.onFocusHandler(e);}}" @blur="${e=>{t.onBlurHandler(e);}}" @input="${e=>{t.onInputChange(e);}}"  aria-controls="listbox-id-1" autoComplete="off" role="textbox" placeholder="${t.placeholder}"  />`:i.html`<input type="text" ?disabled=${t.disabled} class="nds-input nds-combobox__input" .value=${t.selectedValue} @focus="${e=>{t.onFocusHanlder(e);}}" @blur="${e=>{t.onBlurHandler(e);}}"  aria-controls="listbox-id-1" autoComplete="off" role="textbox"  readonly="" placeholder="${t.placeholder}" />`}
                        <span class="nds-icon_container nds-icon-utility-down nds-input__icon nds-input__icon_right">
                        <span  aria-hidden="true">
                            ${t.searchable?this.searchIcon:this.downArrow}
                        </span>
                        </span>
                    </div>
                    <div id="listbox-id-1" class="nds-dropdown nds-dropdown_fluid" role="listbox">
                        <ul class="nds-listbox nds-listbox_vertical" role="presentation">
                            ${t.isGrouped?Object.keys(t.isGroupedMap).map(t=>this.generateGroupedOption(t)):this.generateFilterResults()}
                        </ul>
                    </div>
                    </div>
                </div>
                ${t.multiple&&t.searchable?this.generateSelectedItems():""}
                ${t.errormessage?i.html`<div class="nds-form-element__help">${t.errormessage}</div>`:""}
                </div>
            </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return this.class="slds-form-element "+t.extraclass+(t.errormessage?" slds-has-error":""),this.checkIcon=i.html`<vlocity-icon icon="utility:check" extraclass="slds-icon-text-default slds-listbox__icon-selected" baseurl="${t.iconbaseurl}" size="x-small"></vlocity-icon>`,this.downArrow=i.html`<vlocity-icon icon="utility:down" extraclass="slds-icon-text-default" size="x-small" baseurl="${t.iconbaseurl}"></vlocity-icon>`,this.searchIcon=i.html`<vlocity-icon icon="utility:search" extraclass="slds-icon-text-default" size="x-small" baseurl="${t.iconbaseurl}"></vlocity-icon>`,this.closeIcon=i.html`<vlocity-icon icon="utility:close" extraclass="slds-icon-text-default" size="x-small" baseurl="${t.iconbaseurl}"></vlocity-icon>`,this.generateOption=e=>i.html`<li role="presentation" style="pointer-events: auto;" class="slds-listbox__item" data-index="${e.index}" @mousedown="${e=>{t.onSelectOption(e);}}">
                        <div  class=${"slds-media slds-listbox__option slds-listbox__option_plain slds-media_small"+(e.isSelected?" slds-is-selected":"")} role="option">
                        <span class="slds-media__figure">
                            <span  aria-hidden="true">
                                ${this.checkIcon}
                            </span>
                        </span>
                        <span class="slds-media__body">
                            <span class="slds-truncate" title="Accounts"> ${e.label}</span>
                        </span>
                        </div>
                    </li>`,this.generateGroupedOption=e=>{const s=t.isGroupedMap[e].filter(e=>e.label.toLowerCase().includes(t.searchText.toLowerCase()));return i.html`<li role="presentation" class=${"slds-listbox__item"+(0>=s.length?" slds-hide":"")} @mousedown="${e=>{t.onSelectOption(e);}}">
                    <div  class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="presentation">
                        <h3 class="slds-text-title_caps" role="presentation">${e}</h3>
                    </div>
                    </li> ${s.map(t=>this.generateOption(t))}`;},this.generateSelectedItems=()=>{const t=this.optionMap.filter(function(t){return t.isSelected;});return i.html`<div class=${"slds-listbox_selection-group"+(0>=t.length?" slds-hide":"")}>
            <ul class="slds-listbox slds-listbox_horizontal" role="listbox" aria-label="Selected Options:" aria-orientation="horizontal">
            ${t.map(t=>i.html`<li class="slds-listbox-item" role="presentation">
            <span class="slds-pill" role="option" tabindex="0" aria-selected="true">
                <span class="slds-pill__label" title="${t.label}">${t.label}</span>
                <span class="slds-icon_container slds-pill__remove" title="Remove">
                <span  aria-hidden="true">
                    ${this.closeIcon}
                </span>
                <span class="slds-assistive-text">Press delete or backspace to remove</span>
                </span>
            </span>
            </li>`)}
            </ul>
            </div>`;},this.generateFilterResults=()=>{const e=this.optionMap.filter(e=>e.label.toLowerCase().includes(t.searchText.toLowerCase()));return 0===e.length?[i.html`<li role="presentation" style="pointer-events: auto;" class="slds-listbox__item">
                      <span class="slds-media__body">
                          <span class="slds-truncate"> No records found. </span>
                      </span>
                  </li>`]:e.map(t=>this.generateOption(t));},i.html`<div class=${this.class}>
                ${t.label?i.html`
                    <label class="slds-form-element__label" >
                    ${t.required?i.html` <abbr class="slds-required" title="required">*</abbr>`:""}
                    ${t.label}</label>

                `:""}

                <div class="slds-form-element__control">
                <div class="slds-combobox_container">
                    <div class=${"slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click"+(t.isFocused?" slds-is-open":"")} aria-expanded="false" aria-haspopup="listbox" role="combobox">
                    <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none">
                        ${t.searchable?i.html`<input type="text" ?disabled=${t.disabled} class="slds-input slds-combobox__input" .value=${t.selectedValue} @focus="${e=>{t.onFocusHandler(e);}}" @blur="${e=>{t.onBlurHandler(e);}}" @input="${e=>{t.onInputChange(e);}}"  aria-controls="listbox-id-1" autoComplete="off" role="textbox" placeholder="${t.placeholder}"  />`:i.html`<input type="text" ?disabled=${t.disabled} class="slds-input slds-combobox__input" .value=${t.selectedValue} @focus="${e=>{t.onFocusHandler(e);}}" @blur="${e=>{t.onBlurHandler(e);}}"  aria-controls="listbox-id-1" autoComplete="off" role="textbox"  readonly="" placeholder="${t.placeholder}" />`}
                        <span class="slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right">
                        <span  aria-hidden="true">
                            ${t.searchable?this.searchIcon:this.downArrow}
                        </span>
                        </span>
                    </div>
                    <div id="listbox-id-1" class="slds-dropdown slds-dropdown_fluid" role="listbox">
                        <ul class="slds-listbox slds-listbox_vertical" role="presentation">
                            ${t.isGrouped?Object.keys(t.isGroupedMap).map(t=>this.generateGroupedOption(t)):this.generateFilterResults()}
                        </ul>
                    </div>
                    </div>
                </div>
                ${t.multiple&&t.searchable?this.generateSelectedItems():""}
                ${t.errormessage?i.html`<div class="slds-form-element__help">${t.errormessage}</div>`:""}
                </div>
            </div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{constructor(){super(...arguments),this.translationsLabels=JSON.parse(this.translations),this.daysOfWeek=this.translationsLabels?this.translationsLabels.days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.datePickerShown=!1,this.hourList=[],this.minutesList=[],this.amPm="AM",this.hour=this.showAMPM?"12":"0",this.minutes="00",this.defaults={format:"MM/dd/yyyy",maxDate:new Date(new Date().getFullYear()+100,12,31),maxTime:"23:59",minDate:"01/01/1970",value:""},this.months=[{M:"1",MM:"01",MMM:"Jan",MMMM:"January"},{M:"2",MM:"02",MMM:"Feb",MMMM:"February"},{M:"3",MM:"03",MMM:"Mar",MMMM:"March"},{M:"4",MM:"04",MMM:"Apr",MMMM:"April"},{M:"5",MM:"05",MMM:"May",MMMM:"May"},{M:"6",MM:"06",MMM:"Jun",MMMM:"June"},{M:"7",MM:"07",MMM:"Jul",MMMM:"July"},{M:"8",MM:"08",MMM:"Aug",MMMM:"August"},{M:"9",MM:"09",MMM:"Sept",MMMM:"September"},{M:"10",MM:"10",MMM:"Oct",MMMM:"October"},{M:"11",MM:"11",MMM:"Nov",MMMM:"November"},{M:"12",MM:"12",MMM:"Dec",MMMM:"December"}];}static get is(){return"vlocity-datepicker";}get format(){return this.getAttribute("format");}set format(t){this.setAttribute("format",t);}get minDate(){return this.getAttribute("mindate");}set minDate(t){this.setAttribute("mindate",t);}get maxDate(){return this.getAttribute("maxdate");}set maxDate(t){this.setAttribute("maxdate",t);}set translations(t){this.setAttribute("translations",t);}get translations(){return this.getAttribute("translations");}set locale(t){this.setAttribute("locale",t);}get locale(){return this.getAttribute("locale");}get showAMPM(){return this.hasAttribute("showampm");}get showTimePicker(){return this.hasAttribute("showtimepicker");}get minuteOptions(){return this.hasAttribute("minuteoptions")?JSON.parse(this.getAttribute("minuteoptions")):null;}get tabIndex(){return+this.getAttribute("tabindex");}set tabIndex(t){this.setAttribute("tabIndex",t+"");}get timeZone(){return this.getAttribute("timezone");}set timeZone(t){this.setAttribute("timezone",t);}get disableInput(){return this.hasAttribute("disableinput");}get position(){const t=this.getAttribute("position");return"top"===t?"bottom":t||"left";}connectedCallback(){this.translationsLabels=JSON.parse(this.translations),this.daysOfWeek=this.translationsLabels?this.translationsLabels.days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.createMonths(),this.style.display="inline-block",this.setHourCycle(),this.initializeDate(),this.initializeDropdowns(),this.initializeDateTimeOptions(),Promise.resolve().then(()=>s(33)(`./vlocity-datepicker.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();}),this.setupClickOutside();}render(){this.template&&i.render(this.template(this),this);}setHourCycle(){if(this.locale&&this.timeZone){const t={timeZone:this.timeZone||"America/Los_Angeles",hour:"2-digit",year:"numeric",month:"2-digit",day:"2-digit",minute:"2-digit"};this.isH12=new Intl.DateTimeFormat(this.locale||"en-Us",t).resolvedOptions().hour12,this.hour=this.isH12?"12":"0",this.format=this.showTimePicker?this.isH12?"MMM dd, yyyy hh:mm 12h":"MMM dd, yyyy hh:mm":this.format;}else this.isH12=this.showAMPM;}createMonths(){if(this.translationsLabels){const t=this.translationsLabels.months;let e=0;for(const s of this.months)s.MMMM=t[e],e++;}}setDate(t){this.dateValue=t,this.value=this.formatDate()||"",this.inputString=this.value,this.dispatchChangeEvent(),this.validateDate(t);}validateDate(t){const e=new Date(this.minDate||this.defaults.minDate),s=new Date(this.maxDate||this.defaults.maxDate);this.inputString||this.value||!this.required?isNaN(t.getTime())&&this.inputString?this.errormessage=this.getAttribute("invaliddatemessage")||"Invalid Date":t.getTime()<e.getTime()||t.getTime()>s.getTime()?this.errormessage=this.getAttribute("dateoutofrangemessage")||"Date out of range":this.errormessage="":this.errormessage=this.getAttribute("requiredvalidationessage")||"This field is required";}selectHour(t){this.hour=t;let e=+t;this.isH12&&"PM"===this.amPm&&11>=e&&(e+=12),12===e&&this.isH12&&"AM"===this.amPm?this.dateValue.setHours(0):this.dateValue.setHours(e),this.value=this.formatDate(),this.render(),this.dispatchChangeEvent();}selectMinutes(t){this.minutes=t;const e=+t;this.dateValue.setMinutes(+e),this.value=this.formatDate(),this.render(),this.dispatchChangeEvent();}getDate(){return this.dateValue;}toggleDatepicker(){this.initializeDropdowns(),this.datePickerShown=!this.datePickerShown,this.render();}getMonthLabel(){return this.months[this.currentMonth].MMMM;}incrementMonth(){const t=new Date(this.maxDate||this.defaults.maxDate);this.currentMonth===t.getMonth()&&this.currentYear===t.getFullYear()||(11>this.currentMonth?this.currentMonth++:11===this.currentMonth&&(this.currentMonth=0,this.currentYear++),this.render());}decrementMonth(){const t=new Date(this.minDate||this.defaults.minDate);this.currentMonth===t.getMonth()&&this.currentYear===t.getFullYear()||(0<this.currentMonth?this.currentMonth--:0===this.currentMonth&&(this.currentMonth=11,this.currentYear--),this.render());}selectYear(t){this.currentYear=+t.target.value,this.currentMonth=0,this.render();}selectDate(t){const e=this.isInvalidDate()?0:this.dateValue.getHours(),s=this.isInvalidDate()?0:this.dateValue.getMinutes(),i=new Date(this.currentYear,this.currentMonth,t,e,s,0,0);this.setDate(i),this.showTimePicker?this.render():this.toggleDatepicker(),this.dispatchEvent(this.onValueChange);}selectToday(){const t=new Date(),e=new Date(this.minDate),s=new Date(this.maxDate);this.minDate&&t.getTime()<e.getTime()||this.maxDate&&t.getTime()>s.getTime()||(this.setDate(t),this.toggleDatepicker(),this.dispatchEvent(this.onValueChange));}selectAMPM(t){this.amPm=t,this.selectHour(this.hour);}getYearList(){const t=[],e=new Date(this.minDate||this.defaults.minDate).getFullYear(),s=new Date(this.maxDate||this.defaults.maxDate).getFullYear();if(e&&s&&e<=s)for(let i=e;i<=s;i++)t.push(i);return t;}getWeeksForDisplay(t,e){const s=[],i=new Date(this.minDate||this.defaults.minDate),n=new Date(this.maxDate||this.defaults.maxDate),r=new Date(e,t,1,0,0,0,0);if(0<r.getDay())for(;0!==r.getDay();)r.setDate(r.getDate()-1);for(let e=0;5>e;e++){s[e]=[];for(let o=0;7>o;o++)s[e].push({disabled:r.getMonth()!==t||r.getTime()<i.getTime()||r.getTime()>n.getTime(),label:r.getDate()}),r.setDate(r.getDate()+1);}return s;}isDateSelected(t){return this.dateValue&&this.dateValue.getDate()===t&&this.dateValue.getMonth()===this.currentMonth&&this.dateValue.getFullYear()===this.currentYear;}dateInputBlurred(t){this.setDate(new Date(t)),this.render(),this.dispatchBlurEvent();}datepickerBlurred(){this.dispatchBlurEvent();}handleTextInput(t){this.value=t,this.inputString=t,this.dispatchEvent(this.onValueChange);}isToday(t){const e=new Date();return e.getDate()===t&&e.getMonth()===this.currentMonth&&e.getFullYear()===this.currentYear;}close(){this.datePickerShown=!1,this.render();}static get observedAttributes(){return["value","format","mindate","maxdate","showtimepicker","showampm","translations","locale"];}attributeChangedCallback(t,e,s){switch(t){case"value":s!==e&&(e&&s&&e.length===s.length+1?this.value="":(this.setHourCycle(),this.initializeDate(),this.initializeDropdowns()),this.render());break;case"showtimepicker":case"showampm":case"showmindate":case"translations":case"locale":case"timezone":case"mindate":case"maxdate":s!==e&&(this.setHourCycle(),this.initializeDateTimeOptions(),this.initializeDropdowns(),this.render());}}__getValue(){return this.dateValue&&!isNaN(this.dateValue.getTime())?new Function("return \""+this.dateValue.toISOString()+"\"").call(this,this.dateValue.toISOString()):super.__getValue();}formatDate(){if(this.isInvalidDate())return;const t=this.format||this.defaults.format;let e=this.fillMonth(t,this.dateValue);return e=this.fillYear(e,this.dateValue),e=this.fillDate(e,this.dateValue),e=this.fillHours(e,this.dateValue),e=this.fillMinutes(e,this.dateValue),e=this.fillSeconds(e,this.dateValue),e=this.fillMeridiem(e,this.dateValue),e;}fillMonth(t,e){const s=this.months[e.getMonth()];return t.replace(/\b((M)\2\2\2)\b/g,s.MMMM).replace(/\b((M)\2\2)\b/g,s.MMM).replace(/\b((M)\2)\b/g,s.MM).replace(/\b(M)\b/g,s.M);}fillYear(t,e){return t.replace(/\b((y)\2\2\2)\b/g,e.getFullYear());}fillDate(t,e){return t.replace(/\b((d)\2)\b/g,9<e.getDate()?e.getDate():"0"+e.getDate()).replace(/\b((d))\b/g,e.getDate());}fillHours(t,e){const s=t.match(/\b((12h))\b/g);let i=e.getHours();return null!==s&&(0===i||12===i?i=12:i%=12),this.isH12&&(0!==i&&12!==i||(i=12)),t.replace(/\b((h)\2)\b/g,9<i?i:"0"+i).replace(/\b(h)\b/g,i);}fillMinutes(t,e){return t.replace(/\b((m)\2)\b/g,9<e.getMinutes()?e.getMinutes():"0"+e.getMinutes()).replace(/\b(m)\b/g,e.getMinutes());}fillSeconds(t,e){return t.replace(/\b((s)\2)\b/g,9<e.getSeconds()?e.getSeconds():"0"+e.getSeconds()).replace(/\b((s))\b/g,e.getSeconds());}fillMeridiem(t,e){return null!==t.match()?t.replace(/\b((12h))\b/g,11<e.getHours()?"PM":"AM"):t;}fillTimezone(t,e){const s=-1*e.getTimezoneOffset(),i=Math.floor(s/60),n=Math.floor(s%60);return t+` ${0<=s?"+":"-"}${10>i?"0"+i:i}:${10>n?"0"+n:n}`;}initializeDate(){this.value&&this.setDate(new Date(this.value));}initializeDropdowns(){if(this.value&&this.dateValue){this.dateValue=new Date(this.dateValue);const t=this.dateValue.getHours(),e=this.dateValue.getMinutes();this.currentMonth=this.dateValue.getMonth(),this.currentYear=this.dateValue.getFullYear(),0!==t?this.hour=12<t&&this.isH12?t-12+"":t+"":this.isH12&&(this.hour="12"),this.minutes=10>e?"0"+e:e+"",this.amPm=11<t?"PM":"AM";}else{const t=new Date();this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear();}}initializeDateTimeOptions(){this.hourList=[],this.minutesList=[];const t=this.isH12?1:0,e=this.isH12?12:23;for(let s=t;s<=e;s++)this.hourList.push(s+"");if(null!==this.minuteOptions)this.minutesList=this.minuteOptions;else for(let t=0;59>=t;t++)this.minutesList.push(10>t?"0"+t:t+"");}dispatchChangeEvent(){const t={date:this.getDate()};this.isInvalidDate()||(t.formattedDate=this.fillTimezone(this.value,this.getDate()),t.isoString=this.dateValue.toISOString()),this.dispatchEvent(new CustomEvent("vlocitydatepickerchanged",{detail:t}));}isInvalidDate(){return!this.dateValue||isNaN(this.dateValue.getTime());}setupClickOutside(){document.addEventListener("click",t=>{let e=t.target;do{if(e===this)return;e=e.parentNode;}while(e);this.datePickerShown=!1,this.render();});}dispatchBlurEvent(){const t={date:this.dateValue};this.isInvalidDate()||(t.formattedDate=this.fillTimezone(this.value,this.getDate()),t.isoString=this.dateValue.toISOString()),this.dispatchEvent(new CustomEvent("vlocitydatepickerblur",{detail:t}));}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-datepicker.nds.tmpl.ts":34,"./vlocity-datepicker.slds.tmpl.ts":35};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=33;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return i.html`
  <div @blur="${()=>t.datepickerBlurred()}">
    <div class="nds-form-element nds-dropdown-trigger nds-dropdown-trigger_click nds-is-open${t.errormessage?" nds-has-error":""}">
      ${t.label?i.html`<label class="nds-form-element__label">
      ${t.required?i.html`<abbr class="nds-required" title="required">*</abbr>`:""}
      ${t.label}
  </label>`:""}
      <div class="nds-form-element__control nds-input-has-icon nds-input-has-icon_right">
        <input
        tabindex=${t.tabIndex}
          placeholder=${t.placeholder||""}
          class="vlocity-datepicker-input nds-input ${t.showTimePicker?"red":"blue"}"
          @input="${e=>t.handleTextInput(e.target.value)}"
          @blur="${e=>t.dateInputBlurred(e.target.value)}"
          ?disabled="${t.disabled||t.disableInput}"
          .value=${t.value}>
          <button type="button" class="nds-button nds-button_icon nds-input__icon nds-input__icon_right"
            ?disabled = ${t.disabled} title="Select a date" @click=${()=>{t.disabled||t.disableInput||t.toggleDatepicker();}}>
            <svg class="nds-button__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="event" width="100%" height="100%" aria-hidden="true">
              <path d="M21.5 9.2h-19c-.3 0-.7.4-.7.7v11.3c0 1 .9 1.9 1.9 1.9h16.6c1 0 1.9-.9 1.9-1.9V9.9c0-.3-.4-.7-.7-.7zM8.8 19.4c0 .3-.2.4-.5.4H6.5c-.3 0-.5-.1-.5-.4v-1.9c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.9zm0-4.6c0 .2-.2.4-.5.4H6.5c-.3 0-.5-.2-.5-.4v-1.9c0-.3.2-.4.5-.4h1.8c.3 0 .5.1.5.4v1.9zm4.6 4.6c0 .3-.2.4-.5.4h-1.8c-.3 0-.5-.1-.5-.4v-1.9c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.9zm0-4.6c0 .2-.2.4-.5.4h-1.8c-.3 0-.5-.2-.5-.4v-1.9c0-.3.2-.4.5-.4h1.8c.3 0 .5.1.5.4v1.9zm4.6 4.6c0 .3-.2.4-.5.4h-1.8c-.3 0-.5-.1-.5-.4v-1.9c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.9zm0-4.6c0 .2-.2.4-.5.4h-1.8c-.3 0-.5-.2-.5-.4v-1.9c0-.3.2-.4.5-.4h1.8c.3 0 .5.1.5.4v1.9zm2.3-11.6H18v-.9c0-.7-.6-1.4-1.4-1.4-.7 0-1.4.6-1.4 1.4v.9H8.8v-.9c0-.7-.6-1.4-1.4-1.4C6.6.9 6 1.5 6 2.3v.9H3.7c-1 0-1.9.9-1.9 1.9v1.1c0 .4.4.7.7.7h19c.3 0 .7-.3.7-.7V5.1c0-1-.9-1.9-1.9-1.9z"></path>
            </svg>
            <span class="nds-assistive-text">Select a date</span>
          </button>
      </div>
      ${t.errormessage?i.html`<div class="nds-form-element__help">${t.errormessage}</div>`:""}

      ${t.datePickerShown?i.html`
        <div aria-hidden="false" aria-label="Date picker: ${t.getMonthLabel()}" class="nds-datepicker nds-dropdown nds-dropdown_${t.position}" role="dialog">
            <div class="nds-datepicker__filter nds-grid">
              <div class="nds-datepicker__filter_month nds-grid nds-grid_align-spread nds-grow">
                <div class="nds-align-middle">
                   <button type="button" class="nds-button nds-button_icon nds-button_icon-container" title="Previous Month" @click="${()=>{t.decrementMonth();}}">
                     <svg class="nds-button__icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="event" width="100%" height="100%" aria-hidden="true">
                        <path d="M17.5 3.8v16.4c0 .4-.6.8-1 .4l-9.8-8c-.3-.3-.3-.9 0-1.2l9.8-8c.4-.4 1-.1 1 .4z"></path>
                     </svg>
                     <span class="nds-assistive-text">Previous Month</span>
                   </button>

                </div>
                <h2 aria-atomic="true" aria-live="assertive" class="nds-align-middle" id="month">${t.getMonthLabel()}</h2>
                <div class="nds-align-middle">
                    <button type="button" class="nds-button nds-button_icon nds-button_icon-container" title="Next Month" @click="${()=>{t.incrementMonth();}}">
                      <svg class="nds-button__icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="event" width="100%" height="100%" aria-hidden="true">
                        <path d="M6.5 20.2V3.8c0-.4.6-.8 1-.4l9.8 8c.3.3.3.9 0 1.2l-9.8 8c-.4.4-1 .1-1-.4z"></path>
                      </svg>
                      <span class="nds-assistive-text">Next Month</span>
                    </button>
                  </div>
                </div>
                <div class="nds-shrink-none">
                    <label class="nds-assistive-text">Pick a Year</label>
                    <div class="nds-select_container">
                        <select class="nds-select" @change=${e=>t.selectYear(e)}>
                        ${t.getYearList().map(e=>i.html`<option value=${e} ?selected=${e===t.currentYear}>${e}</option>`)}
                        </select>
                    </div>
                </div>
            </div>

            <table class="nds-datepicker__month" role="grid">
                <thead>
                   <tr>
                      ${t.daysOfWeek.map(t=>i.html`
                        <th>${t}</th>
                      `)}

                   </tr>
                </thead>

                <tbody>
                   ${t.getWeeksForDisplay(t.currentMonth,t.currentYear).map(e=>i.html`
                        <tr>
                          ${e.map(e=>i.html`<td class="${e.disabled?"nds-disabled-text":""} ${t.isToday(e.label)?"nds-is-today":""} ${t.isDateSelected(e.label)&&!e.disabled?"nds-is-selected":""}"  @click=${()=>{e.disabled||t.selectDate(e.label);}}><span class="nds-day">${e.label}</span></td>`)}
                        </tr>
                     `)}
                </tbody>
            </table>
            <button type="button" class="nds-button nds-align_absolute-center nds-text-link" @click=${()=>t.selectToday()}>Today</button>

            ${t.showTimePicker&&t.getDate()?i.html`<div class="nds-grid nds-align_absolute-center nds-p-around_x-small">
            <div class="nds-form-element nds-p-around_xx-small nds-size_1-of-4 nds-m-top_x-small">
            <label class="nds-form-element__label">Hours</label>
            <div class="nds-form-element__control">
              <div class="nds-select_container">
                <select class="nds-select" @change="${e=>t.selectHour(e.target.value)}" value=${t.hour}>
                  ${t.hourList.map(e=>i.html`<option value=${e} ?selected=${e===t.hour}>${e}</option>`)}
                </select>
              </div>
            </div>

          </div>
          <div class="nds-form-element nds-p-around_xx-small nds-size_1-of-4 nds-m-top_x-small">
            <label class="nds-form-element__label">Minutes</label>
            <div class="nds-form-element__control">
              <div class="nds-select_container">
                <select class="nds-select" value=${t.minutes} @change="${e=>t.selectMinutes(e.target.value)}"  >
                  <label>Minutes</label>
                  ${t.minutesList.map(e=>i.html`<option value=${e} ?selected=${e===t.minutes}>${e}</option>`)}
                </select>
              </div>
            </div>

          </div>
          ${t.isH12?i.html`<div class="nds-form-element nds-p-around_xx-small nds-size_1-of-4 nds-m-top_x-small">
          <label class="nds-form-element__label">AM/PM</label>
          <div class="nds-form-element__control">
            <div class="nds-select_container">
              <select class="nds-select" @change="${e=>t.selectAMPM(e.target.value)}">
                  <option value="AM" ?selected=${"AM"===t.amPm}>AM</option>
                  <option value="PM" ?selected=${"PM"===t.amPm}>PM</option>
              </select>
            </div>
          </div>

        </div>`:""}
          <div class="nds-form-element nds-p-around_xx-small nds-size_1-of-4 nds-m-top_x-small">
            <label class="nds-form-element__label"></label>
            <div class="nds-form-element__control">
               <button type="button" class="nds-button nds-button_brand" @click=${()=>t.toggleDatepicker()}>Done</button>
            </div>
          </div>
      </div>`:""}
          </div>
        `:""}



    </div>
  </div>
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return i.html`
  <div @blur="${()=>t.datepickerBlurred()}">
    <div class="slds-form-element slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open${t.errormessage?" slds-has-error":""}">
      ${t.label?i.html`<label class="slds-form-element__label">
      ${t.required?i.html`<abbr class="slds-required" title="required">*</abbr>`:""}
      ${t.label}
  </label>`:""}
      <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right">
        <input
          tabindex=${t.tabIndex}
          placeholder=${t.placeholder||""}
          class="vlocity-datepicker-input slds-input ${t.showTimePicker?"red":"blue"}"
          @input="${e=>t.handleTextInput(e.target.value)}"
          @blur="${e=>t.dateInputBlurred(e.target.value)}"
          ?disabled="${t.disabled||t.disableInput}"
          .value=${t.value}>
          <button type="button" class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"
            ?disabled = ${t.disabled} title="Select a date" @click=${()=>{t.disabled||t.disableInput||t.toggleDatepicker();}}>
            <svg class="slds-button__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="event" width="100%" height="100%" aria-hidden="true">
              <path d="M21.5 9.2h-19c-.3 0-.7.4-.7.7v11.3c0 1 .9 1.9 1.9 1.9h16.6c1 0 1.9-.9 1.9-1.9V9.9c0-.3-.4-.7-.7-.7zM8.8 19.4c0 .3-.2.4-.5.4H6.5c-.3 0-.5-.1-.5-.4v-1.9c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.9zm0-4.6c0 .2-.2.4-.5.4H6.5c-.3 0-.5-.2-.5-.4v-1.9c0-.3.2-.4.5-.4h1.8c.3 0 .5.1.5.4v1.9zm4.6 4.6c0 .3-.2.4-.5.4h-1.8c-.3 0-.5-.1-.5-.4v-1.9c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.9zm0-4.6c0 .2-.2.4-.5.4h-1.8c-.3 0-.5-.2-.5-.4v-1.9c0-.3.2-.4.5-.4h1.8c.3 0 .5.1.5.4v1.9zm4.6 4.6c0 .3-.2.4-.5.4h-1.8c-.3 0-.5-.1-.5-.4v-1.9c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.9zm0-4.6c0 .2-.2.4-.5.4h-1.8c-.3 0-.5-.2-.5-.4v-1.9c0-.3.2-.4.5-.4h1.8c.3 0 .5.1.5.4v1.9zm2.3-11.6H18v-.9c0-.7-.6-1.4-1.4-1.4-.7 0-1.4.6-1.4 1.4v.9H8.8v-.9c0-.7-.6-1.4-1.4-1.4C6.6.9 6 1.5 6 2.3v.9H3.7c-1 0-1.9.9-1.9 1.9v1.1c0 .4.4.7.7.7h19c.3 0 .7-.3.7-.7V5.1c0-1-.9-1.9-1.9-1.9z"></path>
            </svg>
            <span class="slds-assistive-text">Select a date</span>
          </button>
      </div>
      ${t.errormessage?i.html`<div class="slds-form-element__help">${t.errormessage}</div>`:""}

      ${t.datePickerShown?i.html`
        <div aria-hidden="false" aria-label="Date picker: ${t.getMonthLabel()}" class="slds-datepicker slds-dropdown slds-dropdown_${t.position}" role="dialog">
            <div class="slds-datepicker__filter slds-grid">
              <div class="slds-datepicker__filter_month slds-grid slds-grid_align-spread slds-grow">
                <div class="slds-align-middle">
                   <button type="button" class="slds-button slds-button_icon slds-button_icon-container" title="Previous Month" @click="${()=>{t.decrementMonth();}}">
                     <svg class="slds-button__icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="event" width="100%" height="100%" aria-hidden="true">
                        <path d="M17.5 3.8v16.4c0 .4-.6.8-1 .4l-9.8-8c-.3-.3-.3-.9 0-1.2l9.8-8c.4-.4 1-.1 1 .4z"></path>
                     </svg>
                     <span class="slds-assistive-text">Previous Month</span>
                   </button>

                </div>
                <h2 aria-atomic="true" aria-live="assertive" class="slds-align-middle" id="month">${t.getMonthLabel()}</h2>
                <div class="slds-align-middle">
                    <button type="button" class="slds-button slds-button_icon slds-button_icon-container" title="Next Month" @click="${()=>{t.incrementMonth();}}">
                      <svg class="slds-button__icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="event" width="100%" height="100%" aria-hidden="true">
                        <path d="M6.5 20.2V3.8c0-.4.6-.8 1-.4l9.8 8c.3.3.3.9 0 1.2l-9.8 8c-.4.4-1 .1-1-.4z"></path>
                      </svg>
                      <span class="slds-assistive-text">Next Month</span>
                    </button>
                  </div>
                </div>
                <div class="slds-shrink-none">
                    <label class="slds-assistive-text">${t.translationsLabels?t.translationsLabels.pickAYear:"Pick a Year"}</label>
                    <div class="slds-select_container">
                        <select class="slds-select" @change=${e=>t.selectYear(e)}>
                        ${t.getYearList().map(e=>i.html`<option value=${e} ?selected=${e===t.currentYear}>${e}</option>`)}
                        </select>
                    </div>
                </div>
            </div>

            <table class="slds-datepicker__month" role="grid">
                <thead>
                   <tr>
                      ${t.daysOfWeek.map(t=>i.html`
                        <th>${t}</th>
                      `)}

                   </tr>
                </thead>

                <tbody>
                   ${t.getWeeksForDisplay(t.currentMonth,t.currentYear).map(e=>i.html`
                        <tr>
                          ${e.map(e=>i.html`<td class="${e.disabled?"slds-disabled-text":""} ${t.isToday(e.label)?"slds-is-today":""} ${t.isDateSelected(e.label)&&!e.disabled?"slds-is-selected":""}"  @click=${()=>{e.disabled||t.selectDate(e.label);}}><span class="slds-day">${e.label}</span></td>`)}
                        </tr>
                     `)}
                </tbody>
            </table>
            <button type="button" class="slds-button slds-align_absolute-center slds-text-link" @click=${()=>t.selectToday()}>${this.translationsLabels?this.translationsLabels.today:"Today"}</button>

            ${t.showTimePicker&&t.getDate()?i.html`<div class="slds-grid slds-align_absolute-center slds-p-around_x-small">
            <div class="slds-form-element slds-p-around_xx-small slds-size_1-of-4 slds-m-top_x-small">
            <label class="slds-form-element__label">${t.translationsLabels?t.translationsLabels.hours:"Hours"}</label>
            <div class="slds-form-element__control">
              <div class="slds-select_container">
                <select class="slds-select" @change="${e=>t.selectHour(e.target.value)}" value=${t.hour}>
                  ${t.hourList.map(e=>i.html`<option value=${e} ?selected=${e===t.hour}>${e}</option>`)}
                </select>
              </div>
            </div>

          </div>
          <div class="slds-form-element slds-p-around_xx-small slds-size_1-of-4 slds-m-top_x-small">
            <label class="slds-form-element__label">${t.translationsLabels?t.translationsLabels.minutes:"Minutes"}</label>
            <div class="slds-form-element__control">
              <div class="slds-select_container">
                <select class="slds-select" value=${t.minutes} @change="${e=>t.selectMinutes(e.target.value)}"  >
                  <label>${t.translationsLabels?t.translationsLabels.minutes:"Minutes"}</label>
                  ${t.minutesList.map(e=>i.html`<option value=${e} ?selected=${e===t.minutes}>${e}</option>`)}
                </select>
              </div>
            </div>

          </div>
          ${t.isH12?i.html`<div class="slds-form-element slds-p-around_xx-small slds-size_1-of-4 slds-m-top_x-small">
          <label class="slds-form-element__label">${t.translationsLabels?`${t.translationsLabels.aM}/${t.translationsLabels.pM}`:"AM/PM"}</label>
          <div class="slds-form-element__control">
            <div class="slds-select_container">
              <select class="slds-select" @change="${e=>t.selectAMPM(e.target.value)}">
                <option value="AM" ?selected=${"AM"===t.amPm}>${t.translationsLabels?t.translationsLabels.aM:"AM"}</option>
                <option value="PM" ?selected=${"PM"===t.amPm}>${t.translationsLabels?t.translationsLabels.pM:"PM"}</option>
              </select>
            </div>
          </div>
        </div>`:""}
          <div class="slds-form-element slds-p-around_xx-small slds-size_1-of-4 slds-m-top_x-small">
            <label class="slds-form-element__label"></label>
            <div class="slds-form-element__control">
               <button type="button" class="slds-button slds-button_brand" @click=${()=>t.toggleDatepicker()}>${t.translationsLabels?t.translationsLabels.done:"Done"}</button>
            </div>
          </div>
      </div>`:""}
          </div>
        `:""}
    </div>
  </div>
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIElement{static get is(){return"vlocity-textarea";}render(){i.render(this.template(this),this);}connectedCallback(){Promise.resolve().then(()=>s(37)("./vlocity-textarea."+(this.theme?this.theme:"slds")+".tmpl.ts")).then(t=>{this.template=t.default,this.render();});}validateRequired(){!this.required||this.value&&""!==this.value.trim()?""!==this.errormessage&&(this.errormessage="",this.render()):(this.errormessage=this.requiredErrorMessage,this.render());}textareaValueChangeHandler(t){this.value=t.target.value,this.dispatchEvent(this.onValueChange);}get rows(){return this.getAttribute("rows");}get cols(){return this.getAttribute("cols");}get requiredLabel(){return this.getAttribute("requiredlabel");}get requiredErrorMessage(){return this.getAttribute("requirederrormessage");}get noresize(){return this.hasAttribute("noresize");}static get observedAttributes(){return["value","required","label","noresize","rows","cols","theme","disabled","readonly","placeholder","helptext"];}attributeChangedCallback(t){switch(t){case"value":const t=this.querySelector("textarea");t&&t.value!==this.getAttribute("value")&&(t.value=this.getAttribute("value"));}this.template&&this.render();}}window.customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-textarea.nds.tmpl.ts":38,"./vlocity-textarea.slds.tmpl.ts":39};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=37;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`
  <style>
      .nds-input-popover-holder .nds-popover{
        display: none;
      }
    .nds-input-popover-holder:hover .nds-popover{
        display: inherit;
      }
  </style>
  <div class="nds-form-element ${t.extraclass||""}${t.errormessage?" nds-has-error":""}">
   ${t.label?i.html`
      ${t.required?i.html`<abbr class="nds-required"
          title="${t.requiredLabel||"Required"}">*</abbr>`:""}
      <label class="nds-form-element__label">${t.label}</label>
   `:""}

    ${t.popoverhelp?i.html`
    <div class="nds-form-element__icon nds-input-popover-holder">
      <button aria-describedby="help" class="nds-button"><svg class="nds-icon nds-icon_x-small nds-icon-text-default" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="info" width="100%" height="100%"><path d="M12 .9C5.9.9.9 5.9.9 12s5 11.1 11.1 11.1 11.1-5 11.1-11.1S18.1.9 12 .9zm0 5.6c.8 0 1.4.6 1.4 1.4s-.6 1.4-1.4 1.4-1.4-.6-1.4-1.4.6-1.4 1.4-1.4zm2.3 9.7c0 .2-.2.4-.5.4h-3.6c-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5.2 0 .4-.2.4-.4v-1.9c0-.2-.2-.5-.4-.5-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5h2.7c.3 0 .5.2.5.5v3.7c0 .2.2.4.4.4.3 0 .5.2.5.5v.9z"></path></svg></button>
      <div class="nds-popover nds-popover_tooltip nds-nubbin_bottom-left" id="help" role="tooltip" style="position: absolute;bottom: 35px;left: -15px;width: 20rem;">
          <div class="nds-popover__body nds-text-longform">
          <p>${t.popoverhelp}</p>
          </div>
      </div>
    </div>
    `:""}
    <div class="nds-form-element__control">
      <textarea
        class="nds-textarea"
        @input=${e=>{t.textareaValueChangeHandler(e),t.validateRequired();}}
        style="${t.noresize?"resize: none":""}"
        rows="${t.rows}"
        cols="${t.cols}"
        placeholder="${t.placeholder}"
        ?disabled=${t.disabled}
        ?readonly=${t.readonly} .value=${t.value||""}></textarea>
    </div>
    ${t.errormessage?i.html`<div class="nds-form-element__help">${t.errormessage}</div>`:""}

  </div>
  `;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`
  <style>
      .slds-input-popover-holder .slds-popover{
        display: none;
      }
    .slds-input-popover-holder:hover .slds-popover{
        display: inherit;
      }
  </style>
  <div class="slds-form-element ${t.extraclass||""}${t.errormessage?" slds-has-error":""}">
   ${t.label?i.html`
      ${t.required?i.html`<abbr class="slds-required"
          title="${t.requiredLabel||"Required"}">*</abbr>`:""}
      <label class="slds-form-element__label">${t.label}</label>
   `:""}

    ${t.popoverhelp?i.html`
    <div class="slds-form-element__icon slds-input-popover-holder">
      <button aria-describedby="help" class="slds-button"><svg class="slds-icon slds-icon_x-small slds-icon-text-default" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="info" width="100%" height="100%"><path d="M12 .9C5.9.9.9 5.9.9 12s5 11.1 11.1 11.1 11.1-5 11.1-11.1S18.1.9 12 .9zm0 5.6c.8 0 1.4.6 1.4 1.4s-.6 1.4-1.4 1.4-1.4-.6-1.4-1.4.6-1.4 1.4-1.4zm2.3 9.7c0 .2-.2.4-.5.4h-3.6c-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5.2 0 .4-.2.4-.4v-1.9c0-.2-.2-.5-.4-.5-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5h2.7c.3 0 .5.2.5.5v3.7c0 .2.2.4.4.4.3 0 .5.2.5.5v.9z"></path></svg></button>
      <div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" id="help" role="tooltip" style="position: absolute;bottom: 35px;left: -15px;width: 20rem;">
          <div class="slds-popover__body slds-text-longform">
          <p>${t.popoverhelp}</p>
          </div>
      </div>
    </div>
    `:""}
    <div class="slds-form-element__control">
      <textarea
        class="slds-textarea"
        @input=${e=>{t.textareaValueChangeHandler(e),t.validateRequired();}}
        style="${t.noresize?"resize: none":""}"
        rows="${t.rows}"
        cols="${t.cols}"
        placeholder="${t.placeholder}"
        ?disabled=${t.disabled}
        ?readonly=${t.readonly} .value=${t.value||""}></textarea>
    </div>
    ${t.errormessage?i.html`<div class="slds-form-element__help">${t.errormessage}</div>`:""}

  </div>
  `;}]);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(1);class n extends i.BaseUIComponent{constructor(){super();}setItems(t){this.items=[...t],this.render();}appendItem(t){this.items=[...this.items,t],this.render();}prependItem(t){this.items=[t,...this.items],this.render();}removeItem(t){this.items.splice(t,1),this.render();}sortBy(t,e){this.sortedby={fieldName:t,reverse:e||!1},this.render();}filterBy(t,e){this.filteredby={fieldName:t,fieldValue:e},this.render();}resetSort(){this.sortedby={},this.render();}resetFilter(){this.filteredby={},this.render();}dynamicSort(t,e,s){var i=s?function(e){return s(e[t]);}:function(e){return e[t];};return e=e?-1:1,function(t,s){return t=i(t),s=i(s),e*((t>s?1:-1)-(s>t?1:-1));};}}e.BaseCollection=n;},function(t,e,s){s(6),s(10),s(14),s(18),s(22),s(26),s(30),s(33),t.exports=s(37);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{constructor(){super(),this.POSITION={LEFT:"left",RIGHT:"right",CENTER:"center",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"};}static get is(){return"vlocity-toast";}get title(){return this.getAttribute("title");}set title(t){this.setAttribute("title",t);}get message(){return this.getAttribute("message");}set message(t){this.setAttribute("message",t);}get position(){return this.getAttribute("position")||"top-right";}set position(t){this.setAttribute("position",t);}get styletype(){return this.getAttribute("styletype")||"info";}set styletype(t){this.setAttribute("styletype",t);}get duration(){return this.getAttribute("duration");}set duration(t){this.setAttribute("duration",t);}connectedCallback(){Promise.resolve().then(()=>s(7)(`./vlocity-toast.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}render(){if(this.duration){const t=this;setTimeout(()=>{t.remove();},this.duration);}this.template&&i.render(i.html`${this.template(this)}`,this);}static get observedAttributes(){return["title","message","extraclass","position","styletype"];}remove(){this&&this.parentElement&&this.parentElement.removeChild(this);}hide(){this.style.display="none";}show(){this.style.display="block";}attributeChangedCallback(t,e,s){e!==s&&this.render();}setPosition(t){this.position=t;}}e.VlocityToast=r,customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-toast.nds.tmpl.ts":8,"./vlocity-toast.slds.tmpl.ts":9};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=7;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>{const e=function(t){return /^(left|center)$/.test(t)?"nds-text-align_"+t:"nds-text-align_right";}(t.position),s=function(t){return /^(success|warning|error)$/.test(t)?"nds-theme_"+t:"nds-theme_info";}(t.styletype);return i.html`
    <div class="via-nds">
      <div
        class="nds-notify_container nds-is-relative ${e||""} ${t.extraclass?t.extraclass:""}"
      >
        <div class="nds-notify nds-notify_toast ${s}" role="alert">
          <span class="nds-assistive-text">${t.styletype}</span>

          <span
            class="nds-icon_container nds-m-right_small nds-align-top"
            title=${t.message}
          >
            ${(e=>i.html`
      <vlocity-icon
        label=""
        icon="utility:${e}"
        size="small"
        baseurl="${t.iconbaseurl}"
      ></vlocity-icon>
    `)(t.styletype)}
          </span>
          ${t.title&&""!==t.title?i.html`
                <div class="nds-notify__content">
                  <h2 class="nds-text-heading_small ">${t.title}</h2>
                  <p>${t.message}</p>
                </div>
              `:i.html`
                <div class="nds-notify__content">
                  <h2 class="nds-text-heading_small ">${t.message}</h2>
                </div>
              `}

          <button
            class="nds-button nds-button_icon nds-notify__close nds-button_icon-inverse"
            title="Close"
            @click=${()=>{t.remove();}}
          >
            <svg
              class="nds-button__icon nds-button__icon_large"
              aria-hidden="true"
            >
              <use xmlns:xlink="http://www.w3.org/1999/xlink" />
              <svg viewBox="0 0 24 24" id="close" width="100%" height="100%">
                <path
                  d="M14.3 11.7l6-6c.3-.3.3-.7 0-1l-.9-1c-.3-.2-.7-.2-1 0l-6 6.1c-.2.2-.5.2-.7 0l-6-6.1c-.3-.3-.7-.3-1 0l-1 1c-.2.2-.2.7 0 .9l6.1 6.1c.2.2.2.4 0 .6l-6.1 6.1c-.3.3-.3.7 0 1l1 1c.2.2.7.2.9 0l6.1-6.1c.2-.2.4-.2.6 0l6.1 6.1c.2.2.7.2.9 0l1-1c.3-.3.3-.7 0-1l-6-6c-.2-.2-.2-.5 0-.7z"
                ></path>
              </svg>
            </svg>
            <span class="nds-assistive-text">Close</span>
          </button>
        </div>
      </div>
    </div>
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>{const e=function(t){return /^(left|center)$/.test(t)?"slds-text-align_"+t:"slds-text-align_right";}(t.position),s=function(t){return /^(success|warning|error)$/.test(t)?"slds-theme_"+t:"slds-theme_info";}(t.styletype);return i.html`
    <div class="via-slds">
      <div
        class="slds-notify_container slds-is-relative ${e||""} ${t.extraclass?t.extraclass:""}"
      >
        <div class="slds-notify slds-notify_toast ${s}" role="alert">
          <span class="slds-assistive-text">${t.styletype}</span>

          <span
            class="slds-icon_container slds-m-right_small slds-align-top"
            title=${t.message}
          >
            ${(e=>i.html`
      <vlocity-icon
        label=""
        icon="utility:${e}"
        size="small"
        baseurl="${t.iconbaseurl}"
      ></vlocity-icon>
    `)(t.styletype)}
          </span>
          ${t.title&&""!==t.title?i.html`
                <div class="slds-notify__content">
                  <h2 class="slds-text-heading_small ">${t.title}</h2>
                  <p>${t.message}</p>
                </div>
              `:i.html`
                <div class="slds-notify__content">
                  <h2 class="slds-text-heading_small ">${t.message}</h2>
                </div>
              `}

          <button
            class="slds-button slds-button_icon slds-notify__close slds-button_icon-inverse"
            title="Close"
            @click=${()=>{t.remove();}}
          >
            <svg
              class="slds-button__icon slds-button__icon_large"
              aria-hidden="true"
            >
              <use xmlns:xlink="http://www.w3.org/1999/xlink" />
              <svg viewBox="0 0 24 24" id="close" width="100%" height="100%">
                <path
                  d="M14.3 11.7l6-6c.3-.3.3-.7 0-1l-.9-1c-.3-.2-.7-.2-1 0l-6 6.1c-.2.2-.5.2-.7 0l-6-6.1c-.3-.3-.7-.3-1 0l-1 1c-.2.2-.2.7 0 .9l6.1 6.1c.2.2.2.4 0 .6l-6.1 6.1c-.3.3-.3.7 0 1l1 1c.2.2.7.2.9 0l6.1-6.1c.2-.2.4-.2.6 0l6.1 6.1c.2.2.7.2.9 0l1-1c.3-.3.3-.7 0-1l-6-6c-.2-.2-.2-.5 0-.7z"
                ></path>
              </svg>
            </svg>
            <span class="slds-assistive-text">Close</span>
          </button>
        </div>
      </div>
    </div>
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{constructor(){super(),this.slots=[],this.slots=this.getElementsByTagName("slot");}static get is(){return"vlocity-modal";}get title(){return this.getAttribute("title");}set title(t){this.setAttribute("title",t);}get size(){return this.getAttribute("size");}set size(t){this.setAttribute("size",t);}get height(){return this.getAttribute("height");}set height(t){this.setAttribute("height",t);}get hideheader(){return!(!this.getAttribute("hideheader")||"true"!==this.getAttribute("hideheader").toLowerCase());}set hideheader(t){this.setAttribute("hideheader",t+"");}get hidefooter(){return!(!this.getAttribute("hidefooter")||"true"!==this.getAttribute("hidefooter").toLowerCase());}set hidefooter(t){this.setAttribute("hidefooter",t+"");}connectedCallback(){Promise.resolve().then(()=>s(11)(`./vlocity-modal.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}render(){this.template&&i.render(this.template(this),this);}static get observedAttributes(){return["title","height","size","hideheader","hidefooter"];}remove(){this&&this.parentElement&&this.parentElement.removeChild(this);}hide(){this&&(this.style.display="none");}show(){this&&(this.style.display="block");}attributeChangedCallback(t,e,s){e!==s&&this.render();}setHeaderContent(t){this.slots&&(this.slots.header.innerHTML=t);}setBodyContent(t){this.slots&&(this.slots.content.innerHTML=t);}setFooterContent(t){this.slots&&(this.slots.footer.innerHTML=t);}}e.VlocityModal=r,customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-modal.nds.tmpl.ts":12,"./vlocity-modal.slds.tmpl.ts":13};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=11;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="nds-modal nds-fade-in-open ${t.size?"nds-modal_"+t.size:""}">
                <div class="nds-modal__container ${t.extraclass?t.extraclass:""}">
                    <header class="nds-modal__header ${t.hideheader?"nds-modal__header_empty":""}">
                    <vlocity-button theme="nds" styleType="" label="" @click=${()=>{t.remove();}} icon="utility:close" iconsize="large" title="Close" extraclass="nds-modal__close nds-button_icon-inverse"></vlocity-button>

                    ${t.hideheader?"":i.html`<h2 id="modal-heading-01" class="nds-text-heading_medium nds-hyphenate">${t.title}</h2>
                    ${t.slots.header?t.slots.header:i.html`<slot name="header"></slot>`}`}
                    </header>
                    <div class="nds-modal__content nds-p-around_medium" style="height: ${t.height?t.height:"calc(100vh - 160px)"}";>
                    ${t.slots.content?t.slots.content:i.html`<slot name="content"></slot>`}
                    </div>
                    ${t.hidefooter?"":i.html`<footer class="nds-modal__footer">
                    ${t.slots.footer?t.slots.footer:i.html`<slot name="footer"></slot>`}
                    </footer>`}
                </div>
                </section>
                <div class="nds-backdrop nds-backdrop_open"></div>`;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open ${t.size?"slds-modal_"+t.size:""}">
                <div class="slds-modal__container ${t.extraclass?t.extraclass:""}">
                    <header class="slds-modal__header ${t.hideheader?"slds-modal__header_empty":""}">
                    <vlocity-button styleType="" label="" @click=${()=>{t.remove();}} icon="utility:close" iconsize="large" title="Close" extraclass="slds-modal__close slds-button_icon-inverse"></vlocity-button>

                    ${t.hideheader?"":i.html`<h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">${t.title}</h2>
                    ${t.slots.header?t.slots.header:i.html`<slot name="header"></slot>`}`}
                    </header>
                    <div class="slds-modal__content slds-p-around_medium" style="height: ${t.height?t.height:"calc(100vh - 160px)"}";>
                    ${t.slots.content?t.slots.content:i.html`<slot name="content"></slot>`}
                    </div>
                    ${t.hidefooter?"":i.html`<footer class="slds-modal__footer">
                    ${t.slots.footer?t.slots.footer:i.html`<slot name="footer"></slot>`}
                    </footer>`}
                </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>`;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(4);class r extends n.BaseCollection{static get is(){return"vlocity-list";}constructor(){super(),this.root=this;const t=this.getElementsByTagName("slot");this.slots=[...t];}connectedCallback(){Promise.resolve().then(()=>s(15)(`./vlocity-list.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}render(){this.template&&i.render(this.template(this),this.root);}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-list.slds.tmpl.ts":16};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=15;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(17);e.default=function(t){let e=t.items;return t.filteredby&&t.filteredby.fieldName&&(e=e.filter(e=>e[t.filteredby.fieldName].toLowerCase().includes(t.filteredby.fieldValue))),t.sortedby&&t.sortedby.fieldName&&(e=e.sort(this.dynamicSort(t.sortedby.fieldName,t.sortedby.reverse,void 0))),i.html`${e&&n.repeat(e,void 0,(e,s)=>{const n=t.slots[0];return new Function("item","index","html","return html`"+n.innerHTML+"`;").call(this,e,s,i.html);})}`;};},function(t,e,s){"use strict";s.r(e),s.d(e,"repeat",function(){return u;});var i=s(0);/**
                 * @license
                 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
                 * This code may only be used under the BSD style license found at
                 * http://polymer.github.io/LICENSE.txt
                 * The complete set of authors may be found at
                 * http://polymer.github.io/AUTHORS.txt
                 * The complete set of contributors may be found at
                 * http://polymer.github.io/CONTRIBUTORS.txt
                 * Code distributed by Google as part of the polymer project is also
                 * subject to an additional IP rights grant found at
                 * http://polymer.github.io/PATENTS.txt
                 */const n=(t,e)=>{const s=t.startNode.parentNode,n=void 0===e?t.endNode:e.startNode,r=s.insertBefore(Object(i.createMarker)(),n);s.insertBefore(Object(i.createMarker)(),n);const o=new i.NodePart(t.options);return o.insertAfterNode(r),o;},r=(t,e)=>(t.setValue(e),t.commit(),t),o=(t,e,s)=>{const n=t.startNode.parentNode,r=s?s.startNode:t.endNode,o=e.endNode.nextSibling;o!==r&&Object(i.reparentNodes)(n,e.startNode,o,r);},l=t=>{Object(i.removeNodes)(t.startNode.parentNode,t.startNode,t.endNode.nextSibling);},a=(t,e,s)=>{const i=new Map();for(let n=e;n<=s;n++)i.set(t[n],n);return i;},c=new WeakMap(),d=new WeakMap();function u(t,e,s){let u;return 2===arguments.length?s=e:3===arguments.length&&(u=e),Object(i.directive)(e=>{const i=c.get(e)||[],h=d.get(e)||[],p=[],m=[],b=[];let f,v,g=0;for(const e of t)b[g]=u?u(e,g):g,m[g]=s(e,g),g++;let _=0,y=i.length-1,x=0,w=m.length-1;for(;_<=y&&x<=w;)if(null===i[_])_++;else if(null===i[y])y--;else if(h[_]===b[x])p[x]=r(i[_],m[x]),_++,x++;else if(h[y]===b[w])p[w]=r(i[y],m[w]),y--,w--;else if(h[_]===b[w])p[w]=r(i[_],m[w]),o(e,i[_],p[w+1]),_++,w--;else if(h[y]===b[x])p[x]=r(i[y],m[x]),o(e,i[y],i[_]),y--,x++;else if(void 0===f&&(f=a(b,x,w),v=a(h,_,y)),f.has(h[_])){if(f.has(h[y])){const t=v.get(b[x]),s=void 0!==t?i[t]:null;if(null===s){const t=n(e,i[_]);r(t,m[x]),p[x]=t;}else p[x]=r(s,m[x]),o(e,s,i[_]),i[t]=null;x++;}else l(i[y]),y--;}else l(i[_]),_++;for(;x<=w;){const t=n(e,p[w+1]);r(t,m[x]),p[x++]=t;}for(;_<=y;){const t=i[_++];null!==t&&l(t);}c.set(e,p),d.set(e,b);});}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{static get is(){return"vlocity-form";}get layout(){return this.getAttribute("layout")||"stacked";}set layout(t){this.setAttribute("layout",t);}get method(){return this.getAttribute("method")||"get";}set method(t){this.setAttribute("method",t);}get action(){return this.getAttribute("action")||"#";}set action(t){this.setAttribute("action",t);}get model(){try{return"string"==typeof this.getAttribute("model")?JSON.parse(this.getAttribute("model")):this.getAttribute("model")||{};}catch(t){return{};}}set model(t){this.setAttribute("model",t);}static get observedAttributes(){return["layout","model"];}constructor(){super();const t=this;Array.from(this.children).forEach(e=>{e.addEventListener("onvaluechange",e=>{const s=e.detail.name(),i=t.model;i[s]=e.detail.value(),t.model=JSON.stringify(i);});});const e=this.children;this.content=[...e];}attributeChangedCallback(t,e,s){e!==s&&this.render();}connectedCallback(){Promise.resolve().then(()=>s(19)(`./vlocity-form.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}getContent(){const t=this;return this.content.forEach(e=>{const s=t&&t.model&&t.model[e.name];e.value=s||"";}),this.content;}render(){this.template&&i.render(this.template(this),this);}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-form.nds.tmpl.ts":20,"./vlocity-form.slds.tmpl.ts":21};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=19;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`<form action=${t.action} method=${t.method}><div class="nds-form nds-form_${t.layout}">
                ${i.html`${t.getContent.call(t)}`}
                </form>`;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>i.html`<form action=${t.action} method=${t.method}><div class="slds-form slds-form_${t.layout}">
                ${i.html`${t.getContent.call(t)}`}
                </form>`;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{static get is(){return"vlocity-tabs";}get selectedindex(){return parseInt(this.getAttribute("selectedindex"),10)||0;}set selectedindex(t){this.setAttribute("selectedindex",t.toString());}get variant(){return this.getAttribute("variant");}set variant(t){this.setAttribute("variant",t);}get lazyLoad(){return this.hasAttribute("lazyLoad");}set lazyLoad(t){this.setAttribute("lazyload",t+"");}static get observedAttributes(){return["selectedindex"];}constructor(){super(),this.root=this,this.tabsElement=this.getElementsByTagName("vlocity-tab"),this.tabs=[...this.tabsElement],this.tabs=this.tabs.filter(t=>{const e=t.getElementsByTagName("slot");return t.slots=[...e],t.parentNode===this;});}createTab(t,e,s){const i=document.createElement("vlocity-tab"),n=document.createElement("slot");n.name="title",n.innerHTML=t;const r=document.createElement("slot");return r.name="content",r.innerHTML=e,i.slots=[],i.slots.push(n),i.slots.push(r),this.tabs.push(i),this.render(),this.selectedindex=s?this.tabs.length-1:this.selectedindex,this;}removeTab(t,e){return this.tabs.splice(t,1),this.selectedindex=e||0,this.render(),this;}setTabTitle(t,e){return this.tabs[t].title=e,this.render(),this;}setTabContent(t,e){return this.tabs[t].innerHTML=e,this.render(),this;}getHighlightedTabIndex(){return this.selectedindex;}attributeChangedCallback(t,e,s){e!==s&&this.render();}connectedCallback(){Promise.resolve().then(()=>s(23)(`./vlocity-tabs.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}onTabClick(t){const e=t.currentTarget.getAttribute("data-index");this.selectedindex=parseInt(e,10),this.render();}render(){this.template&&i.render(this.template(this),this.root);}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-tabs.nds.tmpl.ts":24,"./vlocity-tabs.slds.tmpl.ts":25};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=23;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>(this.variant=t.variant?t.variant:"default",this.generateTabTitle=(e,s)=>{const n=e.slots.find(t=>"title"===t.getAttribute("name"));return i.html`
      <li
        class=${("vertical"===this.variant?"nds-vertical-tabs__nav-item":"nds-tabs_"+this.variant+"__item")+(t.selectedindex===s?" nds-is-active":"")}
        role="presentation"
        data-index=${s}
        @click="${e=>{t.onTabClick(e);}}"
      >
        <a
          class=${"vertical"===this.variant?"nds-vertical-tabs__link":"nds-tabs_"+this.variant+"__link"}
          href="javascript:void(0);"
          role="tab"
          tabindex="${s}"
          aria-selected="true"
          >${n}</a
        >
      </li>
    `;},this.generateTabContent=(e,s)=>{if(t.lazyLoad)return this.generateLazyLoadedContent(e,s);const n=e.slots.find(t=>"content"===t.getAttribute("name"));return i.html`
      ${e.id?i.html`
            <div
              id=${e.id}
              class=${("vertical"===this.variant?"nds-vertical-tabs__content":"nds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" nds-show":" nds-hide")}
              role="tabpanel"
            >
              ${n}
            </div>
          `:i.html`
            <div
              class=${("vertical"===this.variant?"nds-vertical-tabs__content":"nds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" nds-show":" nds-hide")}
              role="tabpanel"
            >
              ${n}
            </div>
          `}
    `;},this.generateLazyLoadedContent=(e,s)=>{const n=e.slots.find(t=>"content"===t.getAttribute("name"));return e.visited||t.selectedindex===s?(e.visited=!0,i.html`
        ${e.id?i.html`
              <div
                id=${e.id}
                class=${("vertical"===this.variant?"nds-vertical-tabs__content":"nds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" nds-show":" nds-hide")}
                role="tabpanel"
              >
                ${n.querySelector("template").content}
              </div>
            `:i.html`
              <div
                class=${("vertical"===this.variant?"nds-vertical-tabs__content":"nds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" nds-show":" nds-hide")}
                role="tabpanel"
              >
                ${n.querySelector("template").content}
              </div>
            `}
      `):i.html``;},i.html`
    <div
      class=${("vertical"===this.variant?"nds-vertical-tabs":"nds-tabs_"+this.variant)+" "+t.extraclass}
    >
      <ul
        class=${"vertical"===this.variant?"nds-vertical-tabs__nav":"nds-tabs_"+this.variant+"__nav"}
        role="tablist"
      >
        ${t.tabs.map((t,e)=>this.generateTabTitle(t,e))}
      </ul>
      ${t.tabs.map((t,e)=>this.generateTabContent(t,e))}
    </div>
  `);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>(this.variant=t.variant?t.variant:"default",this.generateTabTitle=(e,s)=>{const n=e.slots.find(t=>"title"===t.getAttribute("name"));return i.html`
      <li
        class=${("vertical"===this.variant?"slds-vertical-tabs__nav-item":"slds-tabs_"+this.variant+"__item")+(t.selectedindex===s?" slds-is-active":"")}
        role="presentation"
        data-index=${s}
        @click="${e=>{t.onTabClick(e);}}"
      >
        <a
          class=${"vertical"===this.variant?"slds-vertical-tabs__link":"slds-tabs_"+this.variant+"__link"}
          href="javascript:void(0);"
          role="tab"
          tabindex="${s}"
          aria-selected="true"
          >${n}</a
        >
      </li>
    `;},this.generateTabContent=(e,s)=>{if(t.lazyLoad)return this.generateLazyLoadedContent(e,s);const n=e.slots.find(t=>"content"===t.getAttribute("name"));return i.html`
      ${e.id?i.html`
            <div
              id=${e.id}
              class=${("vertical"===this.variant?"slds-vertical-tabs__content":"slds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" slds-show":" slds-hide")}
              role="tabpanel"
            >
              ${n}
            </div>
          `:i.html`
            <div
              class=${("vertical"===this.variant?"slds-vertical-tabs__content":"slds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" slds-show":" slds-hide")}
              role="tabpanel"
            >
              ${n}
            </div>
          `}
    `;},this.generateLazyLoadedContent=(e,s)=>{const n=e.slots.find(t=>"content"===t.getAttribute("name"));return e.visited||t.selectedindex===s?(e.visited=!0,i.html`
        ${e.id?i.html`
              <div
                id=${e.id}
                class=${("vertical"===this.variant?"slds-vertical-tabs__content":"slds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" slds-show":" slds-hide")}
                role="tabpanel"
              >
                ${n.querySelector("template").content}
              </div>
            `:i.html`
              <div
                class=${("vertical"===this.variant?"slds-vertical-tabs__content":"slds-tabs_"+this.variant+"__content")+(t.selectedindex===s?" slds-show":" slds-hide")}
                role="tabpanel"
              >
                ${n.querySelector("template").content}
              </div>
            `}
      `):i.html``;},i.html`
    <div
      class=${("vertical"===this.variant?"slds-vertical-tabs":"slds-tabs_"+this.variant)+" "+t.extraclass}
    >
      <ul
        class=${"vertical"===this.variant?"slds-vertical-tabs__nav":"slds-tabs_"+this.variant+"__nav"}
        role="tablist"
      >
        ${t.tabs.map((t,e)=>this.generateTabTitle(t,e))}
      </ul>
      ${t.tabs.map((t,e)=>this.generateTabContent(t,e))}
    </div>
  `);},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(4);class r extends n.BaseCollection{constructor(){super(),this.columns={},this.pageNumber=0,this.root=this;const t=this.getElementsByTagName("vlocity-data-column");this.columns=[...t];}static get is(){return"vlocity-data-table";}get sortable(){return!(!this.getAttribute("sortable")||"true"!==this.getAttribute("sortable").toLowerCase());}set sortable(t){this.setAttribute("sortable",t.toString());}get pagesize(){return this.getAttribute("pagesize")?parseInt(this.getAttribute("pagesize")):0;}set iscallbackonsort(t){this.setAttribute("iscallbackonsort",t.toString());}get iscallbackonsort(){return"true"===this.getAttribute("iscallbackonsort");}set pagesize(t){this.setAttribute("pagesize",t.toString());}connectedCallback(){Promise.resolve().then(()=>s(27)("./vlocity-data-table."+(this.theme?this.theme:"slds")+".tmpl.ts")).then(t=>{this.template=t.default,this.render(),this.registerSelectAllEvents();});}render(){this.template&&i.render(this.template(this),this.root),this.dispatchEvent(new CustomEvent("vlocityDataTableRendered"));}static get observedAttributes(){return["sortable","extraclass","pagesize"];}onSortByField(t){const e=t.currentTarget,s=e.getAttribute("data-field"),i="true"===e.getAttribute("data-reverse");e.setAttribute("data-reverse",!i),this.iscallbackonsort?(this.sortedby={fieldName:s,reverse:i||!1},this.dispatchEvent(new CustomEvent("onDataTableSort",{detail:this.sortedby}))):this.sortBy(s,i);}registerSelectAllEvents(){const t=this.querySelector(".vlocity-select-all-checkbox");t&&t.addEventListener("onvaluechange",t=>{this.dispatchEvent(new CustomEvent("onDataTableSelectAllChange",{detail:t.target.checked}));});}attributeChangedCallback(t,e,s){e!==s&&this.render();}}e.VlocityDataTable=r,customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-data-table.nds.tmpl.ts":28,"./vlocity-data-table.slds.tmpl.ts":29};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=27;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){this.itemsArray=t.items?[...t.items]:[],this.downArrow=i.html`
    <vlocity-icon
      icon="utility:arrowdown"
      theme="nds"
      extraclass="nds-icon-text-default nds-is-sortable__icon"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `,this.upArrow=i.html`
    <vlocity-icon
      icon="utility:arrowup"
      theme="nds"
      extraclass="nds-icon-text-default nds-is-sortable__icon"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `,this.leftChevron=i.html`
    <vlocity-icon
      icon="utility:chevronleft"
      theme="nds"
      extraclass="nds-icon-text-default"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `,this.rightChevron=i.html`
    <vlocity-icon
      icon="utility:chevronright"
      theme="nds"
      extraclass="nds-icon-text-default"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `;let e=0;return this.pageChanged=!!this.pageChanged&&this.pageChanged,t.filteredby&&t.filteredby.fieldName&&(t.filteredby.fieldValue&&!this.pageChanged&&this.setPageNumber(0),this.itemsArray=this.itemsArray.filter(e=>{if(0===t.filteredby.fieldName.length){const s=Object.keys(e).map(t=>t);for(const i of s)if("string"==typeof e[i]&&e[i].toLowerCase().includes(t.filteredby.fieldValue))return!0;return!1;}for(const s of t.filteredby.fieldName)return"string"==typeof e[s]&&e[s].toLowerCase().includes(t.filteredby.fieldValue);}),this.pageChanged=!1),!this.iscallbackonsort&&t.sortedby&&t.sortedby.fieldName&&(this.itemsArray=this.itemsArray.sort(this.dynamicSort(t.sortedby.fieldName,t.sortedby.reverse,void 0))),this.pagesize&&0!==this.pagesize&&(e=Math.floor(this.itemsArray?this.itemsArray.length/this.pagesize:0),e=0<this.itemsArray.length%this.pagesize?e+1:e),this.generateClass=()=>{const e={table:"",headerth:""};return e.table=`nds-table nds-max-medium-table_stacked-horizontal ${t.sortable?"nds-table_resizable-cols":""} ${t.extraclass?t.extraclass:""}`,e.headerth=`nds-cell-shrink ${t.sortable?"nds-is-sortable":""}`,e;},this.generateHeader=()=>i.html`
    <style>
      .vlocity-select-all-checkbox{
        display: inline-block;
        padding: 0.25rem 0.5rem;
      }
    </style>
      <thead>
        <tr class="nds-text-title_caps">
          ${t.columns.map((e,s)=>i.html`
              <th
                class=${this.generatedClass.headerth+" "+e.getAttribute("extraclass")}
                scope="col"
              >
                ${t.sortable&&e.hasAttribute("sort")?i.html`
                      <a
                        class="nds-th__action nds-text-link_reset"
                        data-reverse="false"
                        data-field=${e.getAttribute("sort")}
                        @click="${e=>{t.onSortByField(e);}}"
                        href="javascript:void(0);"
                        role="button"
                        tabindex="-1"
                      >
                        ${this.hasAttribute("selectallenabled")&&0===s?i.html`
                        <vlocity-checkbox
                          checked="${"true"===e.getAttribute("selectallchecked")}"
                          class="vlocity-select-all-checkbox">
                        </vlocity-checkbox>`:""}
                        <span class="nds-assistive-text">Sort by: </span>
                        <span
                          class="nds-truncate"
                          title="${e.getAttribute("name")}"
                          >${e.getAttribute("name")}</span
                        >
                        <div class="nds-icon_container">
                          <span class="" aria-hidden="true">
                            ${this.sortedby&&this.sortedby.fieldName===e.getAttribute("sort")&&!this.sortedby.reverse?this.upArrow:this.downArrow}
                          </span>
                        </div>
                      </a>
                    `:i.html`
                      ${this.hasAttribute("selectallenabled")&&0===s?i.html`
                      <vlocity-checkbox
                        checked="${"true"===e.getAttribute("selectallchecked")}"
                        class="vlocity-select-all-checkbox">
                      </vlocity-checkbox>`:""}
                      <span
                        class="nds-truncate"
                        title="${e.getAttribute("name")}"
                        >${e.getAttribute("name")}</span
                      >
                    `}
              </th>
            `)}
        </tr>
      </thead>
    `,this.onChangePage=t=>{const e=this.pageNumber+t;this.pageNumber=0>e?0:e*this.pagesize>=this.itemsArray.length?this.pageNumber:this.pageNumber+t,this.pageChanged=!0,this.render();},this.setPageNumber=t=>{this.pageChanged=!0,this.pageNumber=t;},this.getPageNumbers=()=>{const s=[],i=t.pageNumber,n=e;let r=Math.min(n+0-3,Math.max(0,i-1));const o=r+3;for(;r<o;)s.push(parseInt(`${r++}`,10));return s;},this.onSetPage=e=>{t.pageNumber=parseInt(e),this.render();},this.generatePageButton=()=>{const s=e===t.pageNumber+1,n=this.getPageNumbers();return i.html`
      <div class="nds-button-group" role="group">
        <button
          class="nds-button nds-button_neutral"
          ?disabled=${0===t.pageNumber}
          @click="${()=>{this.onChangePage(-1);}}"
        >
          <span aria-hidden="true">
            ${this.leftChevron}
          </span>
        </button>
        ${n.map(s=>{const n=parseInt(s)>e;return 0>s?"":i.html`
            <button
              class=${"nds-button "+(s===t.pageNumber?"nds-button_brand":"nds-button_neutral")}
              ?disabled=${n}
              @click="${()=>{this.onSetPage(`${s}`);}}"
            >
              ${parseInt(s)+1}
            </button>
          `;})}
        <button
          class="nds-button nds-button_neutral"
          ?disabled=${s}
          @click="${()=>{this.onChangePage(1);}}"
        >
          <span aria-hidden="true">
            ${this.rightChevron}
          </span>
        </button>
      </div>
    `;},this.generateBody=()=>i.html`
      <tbody>
        ${t.pagesize?this.getPaginatedArray().map((e,s)=>i.html`
                <tr class="nds-hint-parent">
                  ${t.columns.map(t=>i.html`
                      <td
                        class=${t.getAttribute("extraclass")}
                        data-label=${t.getAttribute("name")}
                      >
                        <div class="nds-truncate">
                          ${this.interpolate(t,e,s)}
                        </div>
                      </td>
                    `)}
                </tr>
              `):this.itemsArray&&this.itemsArray.map((e,s)=>i.html`
                <tr class="nds-hint-parent">
                  ${t.columns.map(t=>i.html`
                      <td
                        class=${t.getAttribute("extraclass")}
                        data-label=${t.getAttribute("name")}
                      >
                        <div class="nds-truncate">
                          ${this.interpolate(t,e,s)}
                        </div>
                      </td>
                    `)}
                </tr>
              `)}
      </tbody>
    `,this.interpolate=(t,e,s)=>new Function("item","index","html","return html`"+t.innerHTML+"`;").call(this,e,s,i.html),this.getPaginatedArray=()=>this.itemsArray.slice(t.pageNumber*t.pagesize,(t.pageNumber+1)*t.pagesize),this.generatedClass=this.generateClass(),i.html`
    <table class=${this.generatedClass.table}>
      ${this.generateHeader()} ${this.generateBody()}
    </table>
    ${t.pagesize?i.html`
          <div class="nds-grid nds-p-around_small">
            <div class="nds-col">
              Showing
              ${t.pageNumber*t.pagesize+1+" to "+((t.pageNumber+1)*t.pagesize>this.itemsArray.length?this.itemsArray.length:(t.pageNumber+1)*t.pagesize)}
              of ${this.itemsArray.length} entries
            </div>
            <div class="nds-col nds-text-align_right">
              ${this.generatePageButton()}
            </div>
          </div>
        `:""}
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){this.itemsArray=t.items?[...t.items]:[],this.downArrow=i.html`
    <vlocity-icon
      icon="utility:arrowdown"
      extraclass="slds-icon-text-default slds-is-sortable__icon"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `,this.upArrow=i.html`
    <vlocity-icon
      icon="utility:arrowup"
      extraclass="slds-icon-text-default slds-is-sortable__icon"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `,this.leftChevron=i.html`
    <vlocity-icon
      icon="utility:chevronleft"
      extraclass="slds-icon-text-default"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `,this.rightChevron=i.html`
    <vlocity-icon
      icon="utility:chevronright"
      extraclass="slds-icon-text-default"
      size="x-small"
      baseurl="${t.iconbaseurl}"
    ></vlocity-icon>
  `;let e=0;return this.pageChanged=!!this.pageChanged&&this.pageChanged,t.filteredby&&t.filteredby.fieldName&&(t.filteredby.fieldValue&&!this.pageChanged&&this.setPageNumber(0),this.itemsArray=this.itemsArray.filter(e=>{if(0===t.filteredby.fieldName.length){const s=Object.keys(e).map(t=>t);for(const i of s)if("string"==typeof e[i]&&e[i].toLowerCase().includes(t.filteredby.fieldValue))return!0;return!1;}for(const s of t.filteredby.fieldName)return"string"==typeof e[s]&&e[s].toLowerCase().includes(t.filteredby.fieldValue);}),this.pageChanged=!1),!this.iscallbackonsort&&t.sortedby&&t.sortedby.fieldName&&(this.itemsArray=this.itemsArray.sort(this.dynamicSort(t.sortedby.fieldName,t.sortedby.reverse,void 0))),this.pagesize&&0!==this.pagesize&&(e=Math.floor(this.itemsArray?this.itemsArray.length/this.pagesize:0),e=0<this.itemsArray.length%this.pagesize?e+1:e),this.generateClass=()=>{const e={table:"",headerth:""};return e.table=`slds-table slds-max-medium-table_stacked-horizontal ${t.sortable?"slds-table_resizable-cols":""} ${t.extraclass?t.extraclass:""}`,e.headerth=`slds-cell-shrink ${t.sortable?"slds-is-sortable":""}`,e;},this.generateHeader=()=>i.html`
      <style>
        .vlocity-select-all-checkbox{
          display: inline-block;
          padding: 0.25rem 0.5rem;
        }
      </style>
      <thead>
        <tr class="slds-text-title_caps">
          ${t.columns.map((e,s)=>i.html`
              <th
                class=${this.generatedClass.headerth+" "+e.getAttribute("extraclass")}
                scope="col"
              >
                ${t.sortable&&e.hasAttribute("sort")?i.html`
                      <a
                        class="slds-th__action slds-text-link_reset"
                        data-reverse="false"
                        data-field=${e.getAttribute("sort")}
                        @click="${e=>{t.onSortByField(e);}}"
                        href="javascript:void(0);"
                        role="button"
                        tabindex="-1"
                      >
                      ${this.hasAttribute("selectallenabled")&&0===s?i.html`
                        <vlocity-checkbox
                          checked="${"true"===e.getAttribute("selectallchecked")}"
                          class="vlocity-select-all-checkbox">
                        </vlocity-checkbox>`:""}
                        <span class="slds-assistive-text">Sort by: </span>
                        <span
                          class="slds-truncate"
                          title="${e.getAttribute("name")}"
                          >${e.getAttribute("name")}</span
                        >
                        <div class="slds-icon_container">
                          <span class="" aria-hidden="true">
                            ${this.sortedby&&this.sortedby.fieldName===e.getAttribute("sort")&&!this.sortedby.reverse?this.upArrow:this.downArrow}
                          </span>
                        </div>
                      </a>
                    `:i.html`
                      ${this.hasAttribute("selectallenabled")&&0===s?i.html`
                        <vlocity-checkbox
                          checked="${"true"===e.getAttribute("selectallchecked")}"
                          class="vlocity-select-all-checkbox">
                        </vlocity-checkbox>`:""}
                      <span
                        class="slds-truncate"
                        title="${e.getAttribute("name")}"
                        >${e.getAttribute("name")}</span
                      >
                    `}
              </th>
            `)}
        </tr>
      </thead>
    `,this.onChangePage=t=>{const e=this.pageNumber+t;this.pageNumber=0>e?0:e*this.pagesize>=this.itemsArray.length?this.pageNumber:this.pageNumber+t,this.pageChanged=!0,this.render();},this.setPageNumber=t=>{this.pageChanged=!0,this.pageNumber=t;},this.getPageNumbers=()=>{const s=[],i=t.pageNumber,n=e;let r=Math.min(n+0-3,Math.max(0,i-1));const o=r+3;for(;r<o;)s.push(parseInt(`${r++}`,10));return s;},this.onSetPage=e=>{t.pageNumber=parseInt(e,10),this.render();},this.generatePageButton=()=>{const s=e===t.pageNumber+1,n=this.getPageNumbers();return i.html`
      <div class="slds-button-group" role="group">
        <button
          class="slds-button slds-button_neutral"
          ?disabled=${0===t.pageNumber}
          @click="${()=>{this.onChangePage(-1);}}"
        >
          <span aria-hidden="true">
            ${this.leftChevron}
          </span>
        </button>
        ${n.map(s=>{const n=parseInt(s,10)>e;return 0>s?"":i.html`
            <button
              class=${"slds-button "+(s===t.pageNumber?"slds-button_brand":"slds-button_neutral")}
              ?disabled=${n}
              @click="${()=>{this.onSetPage(`${s}`);}}"
            >
              ${parseInt(s,10)+1}
            </button>
          `;})}
        <button
          class="slds-button slds-button_neutral"
          ?disabled=${s}
          @click="${()=>{this.onChangePage(1);}}"
        >
          <span aria-hidden="true">
            ${this.rightChevron}
          </span>
        </button>
      </div>
    `;},this.generateBody=()=>i.html`
      <tbody>
        ${t.pagesize?this.getPaginatedArray().map((e,s)=>i.html`
                <tr class="slds-hint-parent">
                  ${t.columns.map(t=>i.html`
                      <td
                        class=${t.getAttribute("extraclass")}
                        data-label=${t.getAttribute("name")}
                      >
                        <div class="slds-truncate">
                          ${this.interpolate(t,e,s)}
                        </div>
                      </td>
                    `)}
                </tr>
              `):this.itemsArray&&this.itemsArray.map((e,s)=>i.html`
                <tr class="slds-hint-parent">
                  ${t.columns.map(t=>i.html`
                      <td
                        class=${t.getAttribute("extraclass")}
                        data-label=${t.getAttribute("name")}
                      >
                        <div class="slds-truncate">
                          ${this.interpolate(t,e,s)}
                        </div>
                      </td>
                    `)}
                </tr>
              `)}
      </tbody>
    `,this.interpolate=(t,e,s)=>new Function("item","index","html","return html`"+t.innerHTML+"`;").call(this,e,s,i.html),this.getPaginatedArray=()=>this.itemsArray.slice(t.pageNumber*t.pagesize,(t.pageNumber+1)*t.pagesize),this.generatedClass=this.generateClass(),i.html`
    <table class=${this.generatedClass.table}>
      ${this.generateHeader()} ${this.generateBody()}
    </table>
    ${t.pagesize?i.html`
          <div class="slds-grid slds-p-around_small">
            <div class="slds-col">
              Showing
              ${t.pageNumber*t.pagesize+1+" to "+((t.pageNumber+1)*t.pagesize>this.itemsArray.length?this.itemsArray.length:(t.pageNumber+1)*t.pagesize)}
              of ${this.itemsArray.length} entries
            </div>
            <div class="slds-col slds-text-align_right">
              ${this.generatePageButton()}
            </div>
          </div>
        `:""}
  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{constructor(){super(),this.currentIndex=0,this.timer=null,this.isPaused=!1,this.setTimer=()=>{this.clearTimer(),this.isPaused=!1,this.render(),this.timer=window.setInterval(()=>{this.currentIndex>=this.items.length-1&&(this.currentIndex=-1),this.currentIndex++,this.render();},this.interval);},this.move=t=>{this.currentIndex=this.currentIndex+t,this.render();},this.toggleTimer=()=>{this.isPaused?this.setTimer():this.clearTimer();},this.clearTimer=()=>{this.timer&&window.clearInterval(this.timer),this.timer=null,this.isPaused=!0,this.render();},this.setIndex=t=>{this.currentIndex=t,this.clearTimer(),this.render();},this.root=this,!this.timer&&this.interval&&this.setTimer();}static get is(){return"vlocity-carousel";}get mode(){return this.getAttribute("mode")||"dots";}set mode(t){this.setAttribute("mode",t);}get interval(){return this.getAttribute("interval");}set interval(t){this.setAttribute("interval",t);}get thumbnaillimit(){return this.getAttribute("thumbnaillimit");}set thumbnaillimit(t){this.setAttribute("thumbnaillimit",t);}get arrow(){return!(!this.getAttribute("arrow")||"true"!==this.getAttribute("arrow").toLowerCase());}set arrow(t){this.setAttribute("arrow",t+"");}get extraclass(){return this.getAttribute("extraclass");}get islanguageRTL(){return"true"===this.getAttribute("islanguageRTL");}static get observedAttributes(){return["mode","thumbnaillimit","interval","arrow"];}attributeChangedCallback(t,e,s){e!==s&&this.render();}connectedCallback(){const t=this.getElementsByTagName("carousel-item");this.items=[...t],Promise.resolve().then(()=>s(31)(`./vlocity-carousel.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}render(){this.template&&i.render(this.template(this),this.root);}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-carousel.slds.tmpl.ts":32};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=31;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return this.playIcon=i.html`<vlocity-icon icon="utility:play" size="x-small" extraclass="slds-icon-text-default slds-button__icon" baseurl="${this.iconbaseurl}"></vlocity-icon>`,this.pauseIcon=i.html`<vlocity-icon icon="utility:pause" size="x-small" extraclass="slds-icon-text-default slds-button__icon" baseurl="${this.iconbaseurl}"></vlocity-icon>`,this.leftArrow=i.html`<vlocity-icon icon="utility:chevronleft"  size="small" extraclass="slds-icon-text-default slds-button__icon" baseurl="${this.iconbaseurl}"></vlocity-icon>`,this.rightArrow=i.html`<vlocity-icon icon="utility:chevronright" size="small" extraclass="slds-icon-text-default slds-button__icon" baseurl="${this.iconbaseurl}"></vlocity-icon>`,this.customStyles=i.html`
<style>
  .preview-thumbnail {
    cursor:pointer;
    position:relative;
  }
  .preview-thumbnail:before{
      position: absolute;
      content:" ";
      top:0;
      left:0;
      width:98%;
      height:100%;
      z-index:0;
      background: rgba(0, 0, 0, 0.15);
    }
    .preview-thumbnail.preview-active:before{
      position: absolute;
      content:" ";
      display:none;
    }
    .via-slds .slds-button.custom-arrow{
      position: absolute;
      top: 50%;
      z-index: 99999;
      box-shadow: none;
      cursor:pointer;
    }
    .custom-arrow-right{
      right:0px;
    }
    .custom-arrow-left{
      left:0px;
    }
  </style>
`,this.generateContent=()=>i.html`<div class="slds-is-relative">
    ${t.arrow?this.arrowControl():""}
    <div class="slds-carousel__panels" style=${t.islanguageRTL?`transform:translateX(${100*t.currentIndex}%)`:`transform:translateX(-${100*t.currentIndex}%)`}>

      ${t.items.map((t,e)=>i.html`<div id="content-id-${e}" class="slds-carousel__panel" role="tabpanel" aria-hidden="true" aria-labelledby="indicator-id-${e}">
          ${this.interpolate(t,{},e)}
      </div>`)}
  </div></div>`,this.interpolate=(t,e,s)=>new Function("item","index","html","return html`"+t.innerHTML+"`;").call(this,e,s,i.html),this.generateSelector=()=>i.html`<ul class="slds-carousel__indicators" role="tablist">
    ${t.items.map((e,s)=>i.html`<li class="slds-carousel__indicator" role="presentation">
        <a id="indicator-id-${s}" class="slds-carousel__indicator-action ${t.currentIndex===s?"slds-is-active":""}"  href="javascript:void(0);" @click="${()=>{t.setIndex(s);}}" role="tab" tabindex="0" aria-selected="true" aria-controls="content-id-${s}" title="${e.getAttribute("title")}">
        <span class="slds-assistive-text">${e.getAttribute("title")}</span>
        </a>
        </li>`)}
</ul>`,this.generatePreview=()=>i.html`<div class="slds-grid slds-m-horizontal_medium slds-scrollable_x slds-p-bottom_small  ${parseInt(t.thumbnaillimit,10)>t.items.length?"slds-grid_align-center":""}" >
    ${t.items.map((e,s)=>i.html`<div href="javascript:void(0)"  class="slds-col preview-thumbnail ${t.currentIndex===s?"preview-active":""} ${t.thumbnaillimit?"slds-size_1-of-"+t.thumbnaillimit:"slds-size_1-of-"+this.items.length}" @click="${()=>{t.setIndex(s);}}">
        <img src="${e.getAttribute("thumbnail")}" class="slds-p-horizontal_xx-small" />
    </div>
    </div>`)}
</ul>`,this.timerControl=i.html`<span class="slds-carousel__autoplay slds-m-bottom_x-small">
          <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small" @click="${()=>{t.toggleTimer();}}" aria-pressed="false" title="Stop auto-play">
            <span class="" aria-hidden="true">
              ${t.isPaused?this.playIcon:this.pauseIcon}
            </span>
            <span class="slds-assistive-text">Stop auto-play</span>
          </button>
          </span>`,this.arrowControl=()=>{const e=t.currentIndex>=t.items.length-1;return i.html`<button ?disabled=${0===t.currentIndex}  class="slds-button slds-button_icon custom-arrow custom-arrow-left" @click="${()=>{t.move(-1);}}" >${this.leftArrow}</button>
  <button ?disabled=${e}  class="slds-button slds-button_icon custom-arrow custom-arrow-right" @click="${()=>{t.move(1);}}" >${this.rightArrow}</button>`;},i.html`${this.customStyles}
<div class="slds-carousel ${t.extraclass?t.extraclass:""}">
  <div class="slds-carousel__stage">
      ${t.interval?this.timerControl:""}

          ${this.generateContent()}

      ${"dots"===t.mode?this.generateSelector():this.generatePreview()}
  </div>
</div>`;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{constructor(){super(),this.keyDownEventHandler=t=>{"Escape"===t.key&&this.isShown&&(this.rejectPromise(),this.hide());};}static get is(){return"vlocity-prompt";}static get observedAttributes(){return["title","helpText","confirmText","cancelText"];}get titleText(){return this.getAttribute("titleText")||"Confirmation";}set titleText(t){this.setAttribute("titleText",t);}get helpText(){return this.getAttribute("helpText");}set helpText(t){this.setAttribute("helpText",t);}get confirmText(){return this.getAttribute("confirmText")||"Okay";}set confirmText(t){this.setAttribute("confirmText",t);}get cancelText(){return this.getAttribute("cancelText");}set cancelText(t){this.setAttribute("cancelText",t);}get headerTheme(){return this.getAttribute("headerTheme")||"error";}set headerTheme(t){this.setAttribute("headerTheme",t);}connectedCallback(){Promise.resolve().then(()=>s(34)(`./vlocity-prompt.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render();});}confirm(){this.resolvePromise(),this.hide();}cancel(){this.rejectPromise(),this.hide();}show(){if(!this.isShown)return this.isShown=!0,this.createPromise(),this.render(),this.attachKeyDownEvent(),this.result;}createPromise(){this.result=new Promise((t,e)=>{this.resolvePromise=t,this.rejectPromise=e;});}hide(){this.isShown&&(this.isShown=!1,this.removeKeyDownEvent(),this.render());}render(){this.template&&i.render(this.template(this),this);}attachKeyDownEvent(){document.addEventListener("keydown",this.keyDownEventHandler);}removeKeyDownEvent(){document.removeEventListener("keydown",this.keyDownEventHandler);}attributeChangedCallback(t,e,s){t&&e!==s&&this.render();}}customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-prompt.nds.tmpl.ts":35,"./vlocity-prompt.slds.tmpl.ts":36};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=34;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return i.html`
    ${t.isShown?i.html`
        <div class="nds-backdrop nds-backdrop_open" style="opacity: 0.8;"></div>
        <div class="nds-modal nds-fade-in-open nds-modal_prompt">
            <div class="nds-modal__container">
                <header class="nds-modal__header nds-theme_${t.headerTheme}">
                    <button class="nds-button nds-button_icon nds-modal__close nds-button_icon-inverse" title="Close" @click="${()=>{t.cancel();}}">
                        <vlocity-icon label="close" icon="utility:close" size="small" class="nds-m-around_medium" extraclass="" baseurl="/_nds/icons/"></vlocity-icon>
                    </button>
                    <h1 class="nds-text-heading_medium">${t.titleText}</h1>
                </header>
                ${t.helpText?i.html`<div class="nds-modal__content nds-text-align_center nds-text-heading_small nds-p-around_medium">${t.helpText}</div>`:""}
                <footer class="nds-modal__footer nds-theme_default">
                    <button class="nds-button nds-button_neutral" @click="${()=>{t.confirm();}}">${t.confirmText}</button>
                    ${t.cancelText?i.html`<button class="nds-button nds-button_neutral" @click="${()=>{t.cancel();}}">${t.cancelText}</button>`:""}
                </footer>
            </div>
        </div>
    `:""}
    `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=function(t){return i.html`
    ${t.isShown?i.html`
        <div class="slds-backdrop slds-backdrop_open" style="opacity: 0.8;"></div>
        <div class="slds-modal slds-fade-in-open slds-modal_prompt">
            <div class="slds-modal__container">
                <header class="slds-modal__header slds-theme_${t.headerTheme}">
                    <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" @click="${()=>{t.cancel();}}">
                        <vlocity-icon label="close" icon="utility:close" size="small" class="slds-m-around_medium" extraclass="" baseurl="/_slds/icons/"></vlocity-icon>
                    </button>
                    <h1 class="slds-text-heading_medium">${t.titleText}</h1>
                </header>
                ${t.helpText?i.html`<div class="slds-modal__content slds-text-align_center slds-text-heading_small slds-p-around_medium">${t.helpText}</div>`:""}
                <footer class="slds-modal__footer slds-theme_default">
                    <button class="slds-button slds-button_neutral" @click="${()=>{t.confirm();}}">${t.confirmText}</button>
                    ${t.cancelText?i.html`<button class="slds-button slds-button_neutral" @click="${()=>{t.cancel();}}">${t.cancelText}</button>`:""}
                </footer>
            </div>
        </div>
    `:""}
    `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(1);class r extends n.BaseUIComponent{constructor(){super(...arguments),this.popoverShown=!1;}static get is(){return"vlocity-tooltip";}get linkText(){return this.getAttribute("linktext");}get tooltipType(){return this.getAttribute("tooltiptype")||"base";}get iconBaseUrl(){return this.getAttribute("iconbaseurl")||"/assets/icons/";}get icon(){return this.getAttribute("icon")||"utility:sprite";}get iconSize(){return this.getAttribute("iconsize")||"x-small";}get iconClass(){return this.getAttribute("iconclass")||this.theme+"-icon-text-default";}get buttonText(){return this.getAttribute("buttontext");}get buttonType(){return this.getAttribute("buttontype")||"neutral";}get nubbinPosition(){return this.getAttribute("nubbinPosition")||"bottom-left";}get isLanguageRTL(){return this.getAttribute("islanguagertl");}connectedCallback(){Promise.resolve().then(()=>s(38)(`./vlocity-tooltip.${this.theme}.tmpl.ts`)).then(t=>{this.template=t.default,this.render(),this.setUpMouseEvents();});}render(){this.template&&i.render(this.template(this),this);}setUpMouseEvents(){this.addEventListener("mouseenter",t=>{this.showPopover(t);}),this.addEventListener("mouseleave",()=>{this.hidePopover();});}showPopover(t){const e=this.querySelector(`.${this.theme}-popover`);if(e){const s=t.target.getBoundingClientRect();e.style.display="block",this.setYPosition(s,e),this.setXPosition(s,e);}}hidePopover(){const t=this.querySelector(`.${this.theme}-popover`);t&&(t.style.display="none");}attributeChangedCallback(){this.render();}setXPosition(t,e){const s=this.nubbinPosition,i=e.getBoundingClientRect();"top-left"===s||"bottom-left"===s?"true"===this.isLanguageRTL?e.style.left=t.left-i.width+24+t.width/2+"px":e.style.left=t.left-24+t.width/2+"px":"top-right"===s||"bottom-right"===s?e.style.left=t.left-i.width+24+t.width/2+"px":"left"===s?e.style.left=t.left+t.width+12+"px":"right"===s?e.style.left=t.left-i.width-12+"px":"top"!==s&&"bottom"!==s||(e.style.left=t.left-i.width/2+t.width/2+"px");}setYPosition(t,e){const s=this.nubbinPosition,i=e.getBoundingClientRect();"bottom-left"===s||"bottom-right"===s||"bottom"===s?e.style.top=t.top-i.height-8+"px":"top-left"===s||"top-right"===s||"top"===s?e.style.top=t.top+t.height+8+"px":"left"!==s&&"right"!==s||(e.style.top=t.top-i.height/2+t.height/2+"px");}static get observedAttributes(){return["value","tooltiptype","icon","nubbinposition","buttontype","buttontext","linktext","iconclass","tooltiptype","iconsize","islanguagertl"];}}e.VlocityTooltip=r,window.customElements.define(r.is,r);},function(t,e,s){var i={"./vlocity-tooltip.nds.tmpl.ts":39,"./vlocity-tooltip.slds.tmpl.ts":40};function n(t){var e=r(t);return s(e);}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e;}return i[t];}n.keys=function(){return Object.keys(i);},n.resolve=r,t.exports=n,n.id=38;},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>{let e;switch(t.tooltipType){case"base":e=i.html`
    <span>
      <a href="javascript:void(0)">
        ${t.linkText}
      </a>
    </span>
    `;break;case"iconlink":e=i.html`
        <a href="javascript:void(0)">
        <span class="nds-icon_container nds-icon-utility-info">
          <vlocity-icon baseurl="${t.iconBaseUrl}"
            icon="${t.icon}"
            size="${t.iconSize}"
            extraclass="${t.iconClass}"></vlocity-icon>
        </span>
      </a>
      `;break;case"buttonicon":e=i.html`
      <vlocity-button
        theme="${t.theme}"
        type="button"
        iconbaseurl="${t.iconBaseUrl}"
        icon="${t.icon}"
        iconsize="${t.iconSize}"
        extraclass="${t.iconClass}">
      </vlocity-button>
        `;break;case"button":e=i.html`
      <vlocity-button
        theme="${t.theme}"
        styletype="${t.buttonType}"
        type="button"
        label="${t.buttonText}">
      </vlocity-button>
        `;}return i.html`
    <div class="nds-popover nds-popover_tooltip nds-nubbin_${t.nubbinPosition}" role="tooltip" style="position: fixed; display: none; white-space: normal;">
      <div class="nds-popover__body"
      @mouseenter=${()=>t.hidePopover()}>
        ${t.value}
      </div>
   </div>
   ${e}

  `;};},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0);e.default=t=>{let e;switch(t.tooltipType){case"base":e=i.html`
    <span>
      <a href="javascript:void(0)">
        ${t.linkText}</a>
    </span>
    `;break;case"iconlink":e=i.html`
        <a href="javascript:void(0)">
        <span class="slds-icon_container slds-icon-utility-info">
          <vlocity-icon baseurl="${t.iconBaseUrl}"
            icon="${t.icon}"
            size="${t.iconSize}"
            extraclass="${t.iconClass}"></vlocity-icon>
        </span></a>
      `;break;case"buttonicon":e=i.html`
        <vlocity-button
            theme="${t.theme}"
            type="button"
            iconbaseurl="${t.iconBaseUrl}"
            icon="${t.icon}"
            iconsize="${t.iconSize}"
            extraclass="${t.iconClass}">
        </vlocity-button>
        `;break;case"button":e=i.html`
        <vlocity-button
            theme="${t.theme}"
            styletype="${t.buttonType}"
            type="button"
            label="${t.buttonText}">
        </vlocity-button>
        `;}return i.html`
    <div class="slds-popover slds-popover_tooltip slds-nubbin_${t.nubbinPosition}" role="tooltip" style="position: fixed; display: none; white-space: normal;">
      <div class="slds-popover__body"
        @mouseenter=${()=>t.hidePopover()}>
        ${t.value}
      </div>
   </div>
   ${e}

  `;};}]);/**
      * Stores config variables used across the app..
      */class VlocityPCConfig{set namespacePrefix(value){this._namespacePrefix=value;}get namespacePrefix(){return this._namespacePrefix;}set sfInstanceUrl(value){this._sfInstanceUrl=value;}get sfInstanceUrl(){return this._sfInstanceUrl;}set sessionId(value){return this._sessionId=value;}get sessionId(){return this._sessionId;}get userLocale(){return this._userLocale;}set userLocale(value){this._userLocale=value;this._userLocaleInBcp47Format=value.replace("_","-");}get timeZone(){return this._timeZone;}set timeZone(value){this._timeZone=value;}get userLocaleInBcp47Format(){return this._userLocaleInBcp47Format;}get isLanguageRTL(){return this._isLanguageRTL;}set isLanguageRTL(value){this._isLanguageRTL=value;}get timeZoneOffset(){return this._timeZoneOffset;}set timeZoneOffset(value){this._timeZoneOffset=value;}get datasource(){return this._datasource;}set datasource(value){this._datasource=value;}get sfContentInstanceUrl(){return this._sfContentInstanceUrl;}set sfContentInstanceUrl(value){this._sfContentInstanceUrl=value;}}var vlocityPcConfig=new VlocityPCConfig(),vlocityPcConfig$1={default:vlocityPcConfig};class VlocityPCUtils{static openToast(title,message,type){var elem=document.createElement("vlocity-toast");elem.setAttribute("title",title);elem.setAttribute("message",message);elem.setAttribute("position",elem.POSITION.TOP+"-"+elem.POSITION.RIGHT);elem.setAttribute("duration","5000");elem.setAttribute("styletype",type);document.getElementById("vpcToastContainer").appendChild(elem);}static showSpinner(){setTimeout(()=>{const spinner=document.querySelector(".vpc-spinner");if(spinner&&spinner.classList){spinner.classList.remove("slds-hide");}});}static hideSpinner(){const spinner=document.querySelector(".vpc-spinner");if(spinner&&spinner.classList){spinner.classList.add("slds-hide");}}static getUploadDataForFiles(files,description,folderId){if(!files||0===files.length){throw new Error("No Files to process");}let uploadData={allOrNone:!1,records:[]};files.forEach(file=>{uploadData.records.push({attributes:{type:"Document",binaryPartName:file.name,binaryPartNameAlias:"Body"},Description:description,FolderId:folderId,Name:file.name,Type:file.name.split(".").pop()});});return uploadData;}static getTotalFileSize(files){if(!files||0===files.length){throw new Error("No Files to process");}let totalSize=0;files.forEach(file=>{totalSize+=file.size;});return totalSize/1024/1024;}/**
     * Deep compares two object and returns a boolean value
     * @param {object} initial - initial object
     * @param {object} final - final object
     * @returns {boolean} true if both the objects are equal, if not returns false
     */static isStateEqual(initial,final){if(initial instanceof Object&&final instanceof Object){let equality=!0;for(let propName in final){equality=VlocityPCUtils.isStateEqual(initial[propName],final[propName]);if(!equality){return!1;}}return!0;}else{return initial&&final?initial==final:!!initial==!!final;}}/**
     * Format a date. No time component will be return.
     * @param {string} dateStringToFormat date string must be in the format: "2019-05-01T00:00:00.000+0000"
     * @param {string} dateStyle - short, medium, long, full. Default is short.
     * @param {string} language - language to be used to format dates. Default is user lang from salesforce. e.g. "en-US"
     */static formatDate(dateStringToFormat,dateStyle="short",language=vlocityPcConfig.userLocaleInBcp47Format,timeZone=vlocityPcConfig.timeZone){if(!dateStringToFormat){return"";}const myDate=new Date(dateStringToFormat),dateFormatOptions={dateStyle:dateStyle,timeZone:timeZone},dateFormatter=new Intl.DateTimeFormat(language,dateFormatOptions);return dateFormatter.format(myDate);}/**
     * Format a date range. This is usually used in Availability column in table. No time component will be return.
     * @param {string} startDateStringToFormat date string must be in the UTC format: "2019-05-01T00:00:00.000+0000"
     * @param {string} endDateStringToFormat date string must be in the UTC format: "2019-05-01T00:00:00.000+0000"
     * @param {string} dateStyle - short, medium, long, full. Default is short.
     * @param {string} language - language to be used to format dates. Default is user lang from salesforce. e.g. "en-US"
     */static formatDateRange(startDateStringToFormat,endDateStringToFormat,dateStyle="short",language=vlocityPcConfig.userLocaleInBcp47Format,timeZone=vlocityPcConfig.timeZone){if(!startDateStringToFormat&&!endDateStringToFormat){return"";}const dateFormatOptions={dateStyle:dateStyle,timeZone:timeZone},dateFormatter=new Intl.DateTimeFormat(language,dateFormatOptions),translations=VlocitySDK.translation.getInstance();if(startDateStringToFormat&&endDateStringToFormat){const myStartDate=new Date(startDateStringToFormat),myEndDate=new Date(endDateStringToFormat),formattedStartDate=dateFormatter.format(myStartDate),formattedEndDate=dateFormatter.format(myEndDate);return VlocityPCUtils.formatTokenizedCustomLabels(translations.translate("PCAvailabilityDateRange"),formattedStartDate,formattedEndDate);}if(startDateStringToFormat){const myStartDate=new Date(startDateStringToFormat),formattedStartDate=dateFormatter.format(myStartDate);return VlocityPCUtils.formatTokenizedCustomLabels(translations.translate("PCStartingOnDateValue"),formattedStartDate);}if(endDateStringToFormat){const myEndDate=new Date(endDateStringToFormat),formattedEndDate=dateFormatter.format(myEndDate);return VlocityPCUtils.formatTokenizedCustomLabels(translations.translate("PCUntilDateValue"),formattedEndDate);}// should never be here
return"";}/**
     * Substitute tokenized custom label.
     * @param {string} customLabel to be substituted.
     * @param  {...any} formattingArguments any number of arguments to substitute.
     * @returns substituted custom label.
     * @sample
     * {0} - {1}    : 1/2/2019 - 1/10/2019
     * {0} {1} {2}  : 100 USD Monthly
     */static formatTokenizedCustomLabels(customLabel,...formattingArguments){if("string"!==typeof customLabel)throw new Error("'stringToFormat' must be a String");return customLabel.replace(/{(\d+)}/gm,(match,index)=>formattingArguments[index]===void 0?"":`${formattingArguments[index]}`);}/**
     * This method adds or removes class to or from elements using either querySelector or querySelectorAll.
     *
     * @param {Array<string>} elements - the classNames of the elements to apply changes to.
     * @param {string} classToAddOrRemove - the class to apply or remove.
     * @param {string} addOrRemove - the flag what determines if the class will be added or removed.
     * @param {string} selectorType - the get type for elements, if omitted it defaults to
     *                                "getElementsByClassName". This parameter is optional.
     * @param {this} context - the component's this.
     */static addOrRemoveClassQuerySelector(elements,classToAddOrRemove,addOrRemove,selectorType,context){elements.forEach(cls=>{const elementsByClass=context[selectorType](cls);if("querySelector"===selectorType){elementsByClass.classList[addOrRemove](classToAddOrRemove);}else{for(let element=0;element<elementsByClass.length;element++){elementsByClass[element].classList[addOrRemove](classToAddOrRemove);}}});}static getLabels(labelList,language,sobjectNames){const translationSDK=VlocitySDK.translation.getInstance(),fetchTranslationsInput=translationSDK.createFetchTranslationsInput();fetchTranslationsInput.textToTranslate=labelList;fetchTranslationsInput.language=language;fetchTranslationsInput.sobjectNames=sobjectNames;return translationSDK.fetchTranslations(fetchTranslationsInput);}static getDatePickerLabelList(){const translations=VlocitySDK.translation.getInstance();return{days:[`${translations.translate("PCSunday")}`,`${translations.translate("PCMonday")}`,`${translations.translate("PCTuesday")}`,`${translations.translate("PCWednesday")}`,`${translations.translate("PCThursday")}`,`${translations.translate("PCFriday")}`,`${translations.translate("PCSaturday")}`],months:[`${translations.translate("PCJan")}`,`${translations.translate("PCFeb")}`,`${translations.translate("PCMar")}`,`${translations.translate("PCApr")}`,`${translations.translate("PCMay")}`,`${translations.translate("PCJun")}`,`${translations.translate("PCJul")}`,`${translations.translate("PCAug")}`,`${translations.translate("PCSep")}`,`${translations.translate("PCOct")}`,`${translations.translate("PCNov")}`,`${translations.translate("PCDec")}`],today:translations.translate("PCToday"),hours:translations.translate("PCHours"),minutes:translations.translate("PCMinutes"),aM:translations.translate("PCAm"),pM:translations.translate("PCPm"),done:translations.translate("Done"),pickAYear:translations.translate("PCPickAYear")};}static getCustomFieldName(fieldName){return vlocityPcConfig.namespacePrefix?`${vlocityPcConfig.namespacePrefix}${fieldName}__c`:`${fieldName}__c`;}static getCustomFieldNames(fieldNames){const customFieldNames=[];if(!fieldNames||1>fieldNames.length){return;}fieldNames.forEach(fieldName=>{customFieldNames.push(VlocityPCUtils.getCustomFieldName(fieldName));});return customFieldNames;}/**
     * Creates a map of field name and picklist values from describe object
     * @param {Object} input - response of the describe object API
     * @returns {Object} - map of field name and picklist values
     */static getPicklistFromDescribeObject(input){const picklistValues={};input.fields.filter(field=>"picklist"===field.type).forEach(field=>{picklistValues[field.name]=field.picklistValues;});return picklistValues;}static processRemoteActionResponse(responses,successMessage){let successShown=!1;responses.forEach(response=>{if("INVOKE-200"===response.errorCode&&!successShown){VlocityPCUtils.openToast("Success",successMessage||"Changes were Saved","success");successShown=!0;}else{VlocityPCUtils.openToast("Error",`${response.errorCode} - ${response.error}`,"error");}});}static getErrorMessages(responses){const failures=responses.filter(response=>{if(response&&response.errorCode&&"INVOKE-200"!==response.errorCode){return!0;}else{return!1;}});if(0<failures.length){let errorMessages="";failures.forEach(failure=>{errorMessages=errorMessages+failure.error+"\r\n";});return errorMessages;}else{return"";}}/**
     * Creates a deep copy of an array.
     * @param {Array} array - this array can be deeply nested.
     * @return {Array} newObject - the copy of the given array.
     */static deepArrayCopy(array){const newObject=Array.isArray(array)?[]:{};for(let key in array){const item=array[key];newObject[key]="object"===typeof item?VlocityPCUtils.deepArrayCopy(item):item;}return newObject;}static getErrorMessagesFromErrorsArray(errors){if(errors&&0<errors.length){let errorMessages=errors.reduce((errorMsg,error)=>{return errorMsg+error.message+"\r\n";},"");return errorMessages;}else{return"";}}static getErrorFromSuccessResponse(responses){if(responses&&0<responses.length){let errorMessages=responses.reduce((failureMsg,response)=>{return!response.success?failureMsg+VlocityPCUtils.getErrorMessagesFromErrorsArray(response.errors)+"\r\n":failureMsg;},"");return errorMessages;}else{return"";}}static getContentTypeFromMimeType(type){const mimeType=type?type.slice(0,type.indexOf("/")):"";switch(mimeType){case"image":return"Image";case"video":return"Video";default:return"File";}}static debounce(fn,milliseconds,context){let timeout;return function(){if(timeout){clearTimeout(timeout);}timeout=setTimeout(()=>{fn.apply(context,arguments);},milliseconds);};}static isSafariBrowser(){return 0<=navigator.userAgent.search("Safari")&&0>navigator.userAgent.search("Chrome");}static isAbsoluteUrl(url){//Reg expession to check if url pattern is "string://", if true that means url is absoulte.
const reg=/^(http|https):\/\//i;return reg.test(url);}static toastSuccess(successMessage){VlocityPCUtils.openToast(VlocitySDK.translation.getInstance().translate("PCToastSuccessTitle"),successMessage||VlocitySDK.translation.getInstance().translate("PCToastSuccessMessage"),"success");}static toastError(error){VlocityPCUtils.openToast(VlocitySDK.translation.getInstance().translate("PCToastErrorTitle"),error.message||error,"error");}static toastWarning(warningMessage){VlocityPCUtils.openToast(VlocitySDK.translation.getInstance().translate("PCWarningTitle"),warningMessage,"warning");}/**
     * Fix for safari issue. Closes the combobox when the user selects a value.
     * @param {HTMLElement} ele - the element that will be checked to determine
     *                            if it's a combobox element. If so, the combo
     *                            will either open or close.
     */static dropdownRegulator(ele){if(ele.nodeName&&"VLOCITY-COMBOBOX"===ele.nodeName){ele.querySelector(".slds-dropdown-trigger").classList.remove("slds-is-open");}if(ele.classList.contains("slds-combobox__input")&&null===ele.getAttribute("disabled")){ele.parentElement.parentElement.classList.add("slds-is-open");}}/**
     * Fix for safari issue. Sets up handlers for keyup and mousedown.
     * @param {HTMLElement} context - this reference
     */static setComboboxHandlers(context){context.addEventListener("keyup",e=>{VlocityPCUtils.dropdownRegulator(e.target);});context.addEventListener("mousedown",e=>{VlocityPCUtils.dropdownRegulator(e.target);});}/**
     * Only checking for valid year,
     * since days and months validation is handled by the component itself
     */static validateYearInDate(val){const dateVal=new Date(val);return 1970<=dateVal.getFullYear();}static processResponseForErrorMessages(response){let errorMessages="";if(response&&response.messages&&response.messages.length){errorMessages=response.messages.reduce((errorMsg,error)=>{return"INVOKE-200"!==error.messageId?errorMsg+error.message+"\r\n":errorMsg;},"");}else if(response&&"INVOKE-200"!==response.errorCode){errorMessages=response.error;}return errorMessages;}/**
     * Format a date.
     * @return {Date} returns Javscript Date Object
     * @param {string} dateStringToFormat Javscript supported date string
     * @param {string} language - language to be used to format dates. Default is user lang from salesforce. e.g. "en-US"
     * @param {number} timeZone - TimeZone to be used to format date. TimeZone of SalesForce logged in user.
     * @param {string} type - date or datetime
     */static getFormattedDateObject(dateStringToFormat,type,language=vlocityPcConfig.userLocaleInBcp47Format,timeZone=vlocityPcConfig.timeZone){const myDate=new Date(dateStringToFormat);if(isNaN(myDate.getTime())){return dateStringToFormat;}if("date"===type){return myDate;}const dateFormatOptions={timeZone:timeZone,hour:"2-digit",year:"numeric",month:"2-digit",day:"2-digit",minute:"2-digit"},dateFormatter=new Intl.DateTimeFormat(language,dateFormatOptions),isH12=dateFormatter.resolvedOptions().hour12,dateParts=dateFormatter.formatToParts(myDate);let formatDateParts={};dateParts.forEach(obj=>{formatDateParts[obj.type]=obj.value;});const year=formatDateParts.year?parseInt(formatDateParts.year):0,month=formatDateParts.month?parseInt(formatDateParts.month):0,day=formatDateParts.day?parseInt(formatDateParts.day):1,dayPeriod=formatDateParts.dayPeriod?formatDateParts.dayPeriod.toLowerCase():null;let hour=formatDateParts.hour?parseInt(formatDateParts.hour):0;if(isH12&&dayPeriod){if("pm"==dayPeriod&&12!==hour){hour=hour+12;}if("am"==dayPeriod&&12===hour){hour=0;}}const minute=formatDateParts.minute?parseInt(formatDateParts.minute):0;return new Date(year,month-1,day,hour,minute,0,0);}/**
     * @return {string} milliseconds converted to hh:mm formate and returned
     * @param {string} milliseconds milliseconds to convert to hours and minutues
     */static getMilliSecondsToHours(milliseconds){let h,m;h=Math.floor(milliseconds/1e3/60/60);m=Math.floor(60*(milliseconds/1e3/60/60-h));return`${VlocityPCUtils.appendZero(h)}:${VlocityPCUtils.appendZero(m)}`;}/**
     * @return {Date} UTC time stamp (in milliseconds) will be retuned
     * @param {string} dateInput any javascript supported date string
     */static getUTCString(dateInput,type){if(!dateInput){return;}let year,month,dateOfMonth,hours,minutes;const date=new Date(dateInput);year=date.getFullYear();month=VlocityPCUtils.appendZero(date.getMonth()+1);dateOfMonth=VlocityPCUtils.appendZero(date.getDate());if("date"===type){hours="00";minutes="00";}else{hours=VlocityPCUtils.appendZero(date.getHours());minutes=VlocityPCUtils.appendZero(date.getMinutes());}const timeZoneOffset=isNaN(vlocityPcConfig.timeZoneOffset)?date.getTimezoneOffset():vlocityPcConfig.timeZoneOffset,positiveOffset=0<timeZoneOffset?timeZoneOffset:-1*timeZoneOffset,offset=VlocityPCUtils.getMilliSecondsToHours(positiveOffset),dateTime=`${year}-${month}-${dateOfMonth}T${hours}:${minutes}:00.000${0<timeZoneOffset?"+":"-"}${offset}`;return dateTime;}static appendZero(input){return 10>input?`0${input}`:input;}static getUTCTimeStamp(dateInput,type){if(!dateInput){return null;}const utcString=VlocityPCUtils.getUTCString(dateInput,type);return Date.parse(utcString);}static getAttributeDateTime(dateInput,type){let UTCString=VlocityPCUtils.getUTCString(dateInput,type);if("date"===type){UTCString=UTCString&&UTCString.length?UTCString.slice(0,UTCString.indexOf("T")):null;}return UTCString;}}var vlocityPcUtils={VlocityPCUtils:VlocityPCUtils};class VlocityPCDropzone extends HTMLElement{constructor(){super();}connectedCallback(){setTimeout(()=>{const slots=this.querySelectorAll("slot");this.slots=[...slots];this.render();this._makeDroppable();this.componentMounted=!0;});}get accepts(){this._accepts=this._accepts||this.getAttribute("accepts").split(",").map(item=>item.trim());return this._accepts;}isAcceptedType(dataType){return 0<=this.accepts.indexOf(dataType);}template(){const dropzoneContent=document.createElement("div");dropzoneContent.innerHTML=this.slots[0]?this.slots[0].innerHTML:"";return html`
      <style>
        .vpc-dropzone {
          padding: 5px;
        }
        .vpc-dropzone__active {
          background-color: var(--vpc-active-dropzone-color);
        }
        .vpc-dropzone__no-pointer-events * {
          pointer-events: none;
        }
      </style>
      <div class="vpc-dropzone ${this.getAttribute("extraclass")||""}">
        ${dropzoneContent}
      </div>
    `;}_makeDroppable(){const dropZone=this.querySelector(".vpc-dropzone"),dragActiveClass=this.getAttribute("dragactiveclass")||"vpc-dropzone__active";dropZone.addEventListener("dragover",event=>this.cancelEvent(event));dropZone.addEventListener("drop",event=>{const eventDataType=event.dataTransfer.types[0];if(this.isAcceptedType(eventDataType.toLowerCase())&&!this.hasAttribute("disabled")){this.cancelEvent(event);dropZone.classList.remove(dragActiveClass);dropZone.classList.remove("vpc-dropzone__no-pointer-events");if(0<event.dataTransfer.files.length){this.dispatchEvent(new CustomEvent("vpcDropzoneFilesDropped",{detail:event.dataTransfer.files}));}else{this.dispatchEvent(new CustomEvent("vpcDropzoneItemDropped",{detail:event.dataTransfer.getData(event.dataTransfer.types[0].toLowerCase())}));}}});dropZone.addEventListener("dragenter",event=>{if(this.isAcceptedType(event.dataTransfer.types[0].toLowerCase())&&!this.hasAttribute("disabled")){const dragActiveClass=this.getAttribute("dragactiveclass")||"vpc-dropzone__active";if(!dropZone.classList.contains(dragActiveClass)){//Dropzone Not active, so lets make it active
dropZone.classList.add(dragActiveClass);dropZone.classList.add("vpc-dropzone__no-pointer-events");}}},!1);dropZone.addEventListener("dragleave",event=>{const dragActiveClass=this.getAttribute("dragactiveclass")||"vpc-dropzone__active";if(event.target.classList.contains("vpc-dropzone")){dropZone.classList.remove("vpc-dropzone__no-pointer-events");dropZone.classList.remove(dragActiveClass);}});}render(){render(this.template(),this);}cancelEvent(event){if(event.stopPropagation){event.stopPropagation();}if(event.preventDefault){event.preventDefault();}}static get observedAttributes(){return["disabled","extraclass"];}attributeChangedCallback(name,oldValue,newValue){if(!name||oldValue===newValue||!this.componentMounted){return;}this.render();}static get is(){return"vlocity-pc-dropzone";}}window.customElements.define(VlocityPCDropzone.is,VlocityPCDropzone);/**
                                                                        * A basic pub-sub mechanism for sibling component communication.
                                                                        */ /**
                                                                            * Registers a callback for an event
                                                                            * @param {string} eventName - Name of the event to listen for.
                                                                            * @param {object} callbackobj - Contains callback function.
                                                                            */const register=(eventName,callbackobj)=>{VlocitySDK.productconsole.getInstance().register(eventName,callbackobj);},unregister=(eventName,callbackobj)=>{VlocitySDK.productconsole.getInstance().unregister(eventName,callbackobj);},fire=(eventName,action,payload,timeout)=>{VlocitySDK.productconsole.getInstance().fire(eventName,action,payload,timeout);};/**
    * Unregisters a callback for an event
    * @param {string} eventName - Name of the event to unregister from.
    * @param {object} callbackobj - Contains callback function.
    */var pubsub={register,unregister,fire},vlocityPcPubsubUtils={default:pubsub};class VlocityPCDoneCancel extends HTMLElement{static get is(){return"vlocity-pc-done-cancel";}template(){return html`
      <style>
        .vpc-done-cancel {
          position: fixed;
          z-index: 2;
          bottom: 0;
          width: 100%;
          padding: 10px;
          background-color: var(--vpc-secondary-bg-color);
        }
      </style>
      <div class="vpc-done-cancel slds-border_top">
        <vlocity-button
          styletype="brand"
          label="${this.translationSdk.translate("Done")}"
          @click="${()=>{this.done();}}"
          extraclass="slds-m-right_small"
        >
        </vlocity-button>
        <vlocity-button
          styletype="neutral"
          label="${this.translationSdk.translate("Cancel")}"
          @click="${()=>{this.cancel();}}"
        >
        </vlocity-button>
      </div>
    `;}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.render();}render(){render(this.template(),this);}done(){pubsub.fire("ondone","done");}cancel(){pubsub.fire("oncancel","cancel");}}window.customElements.define(VlocityPCDoneCancel.is,VlocityPCDoneCancel);class VlocityPCAttachmentForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-attachment-form";}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();this.isUrlSelected=!0;this.getFieldsAndValues().then(()=>{this.render();this.setupFieldValueChangeEvent();});this.registerEvents();}registerEvents(){this.doneAndCancelHandler={done:this.saveAttachment.bind(this),cancel:this.cancelAttachmentUpsert.bind(this)};pubsub.register("ondone",this.doneAndCancelHandler);pubsub.register("oncancel",this.doneAndCancelHandler);}disconnectedCallback(){pubsub.unregister("ondone",this.doneAndCancelHandler);pubsub.unregister("oncancel",this.doneAndCancelHandler);}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-attachment-remove {
          cursor: pointer;
        }
        .vpc-file-input-element {
          height: 30px;
          width: 100px;
        }
        .vpc-attachment-form-file-upload-link {
          color: var(--vpc-primary-color);
        }
        .vpc-attachment-form-file-upload-wrap {
          border: 1px dotted var(--vpc-primary-color);
          margin-left: 5px;
          margin-right: 5px;
        }
        .vpc-attachment-form-heading {
          font-size: 17px;
          text-transform: uppercase;
        }
        .vpc-attachments-dropzone__active {
          border: 2px dashed var(--vpc-primary-color);
        }
        .vpc-attachment-form-file-upload-wrap .vpc-attachment-upload-icon {
          fill: #969492;
        }
        .vpc-attachment-form .vpc-character-limit-message {
          font-size: 12px;
        }
        .vpc-character-limit-message div {
          display: inline;
          position: relative;
          top: 1px;
        }
        .via-slds
          .vpc-attachment-form
          vlocity-radio-group
          .slds-form-element
          .slds-radio {
          display: inline-block;
        }
        .via-slds
          .vpc-attachment-form
          vlocity-radio-group
          .slds-p-around_x-small {
          padding: 0;
        }
        .vpc-dropzone-error {
          border: 1px solid #c23934;
          box-shadow: #c23934 0 0 0 1px inset;
        }
        .vpc-attachment-required {
          font-size: 12px;
          color: #706e6b;
          margin-bottom: 5px;
        }
      </style>
      <div class="vpc-attachment-form slds-p-around_large">
        <div
          class="slds-text-title_bold slds-m-bottom_small vpc-attachment-form-heading"
        >
          ${this.attachmentModel.Id?html`
                <strong
                  >${this.translationSdk.translate("PCEditAttachmentFormHeading")}</strong
                >
              `:html`
                <strong
                  >${this.translationSdk.translate("PCAddAttachment")}</strong
                >
              `}
        </div>
        <vlocity-form model="${JSON.stringify(this.attachmentModel)}">
          <vlocity-input
            name="Name"
            label="${this.translationSdk.translate("PCAttachmentName")}"
            value="${this.attachmentModel.Name||""}"
            required="true"
            extraclass="slds-m-bottom_xx-small"
            maxlength="80"
          >
          </vlocity-input>
          <div class="vpc-character-limit-message slds-m-bottom_medium">
            <vlocity-tooltip
              tooltiptype="iconlink"
              icon="utility:info"
              iconsize="xx-small"
              iconbaseurl="/_slds/icons/"
              value="${this.translationSdk.translate("PCDisplayNameCharacterLimit")}"
            >
            </vlocity-tooltip>
            <div>
              ${this.translationSdk.translate("PCDisplayNameCharacterLimit")}
            </div>
          </div>

          <vlocity-textarea
            name="${VlocityPCUtils.getCustomFieldName("Description")}"
            label="${this.translationSdk.translate("Description")}"
            value="${this.attachmentModel[VlocityPCUtils.getCustomFieldName("Description")]||""}"
            extraclass="slds-m-bottom_medium"
          >
          </vlocity-textarea>

          <div>
            ${this.pickListValues?html`
                  <vlocity-combobox
                    name="${VlocityPCUtils.getCustomFieldName("ContentType")}"
                    label="${this.translationSdk.translate("ContentType")}"
                    options="${JSON.stringify(this.pickListValues[VlocityPCUtils.getCustomFieldName("ContentType")])}"
                    value="${this.attachmentModel[VlocityPCUtils.getCustomFieldName("ContentType")]||""}"
                    required="true"
                    iconbaseurl="/_slds/icons/"
                    extraclass="slds-m-bottom_medium"
                  >
                  </vlocity-combobox>
                `:""}
          </div>
          <div class="slds-m-bottom_xx-small">
            ${this.hideIsDefaultImage?"":html`
                  <vlocity-checkbox
                    label="${this.translationSdk.translate("PCAttachmentIsDefault")}"
                    name="${VlocityPCUtils.getCustomFieldName("IsDefaultImage")}"
                    checked="${this.attachmentModel[VlocityPCUtils.getCustomFieldName("IsDefaultImage")]}"
                    value="${this.attachmentModel[VlocityPCUtils.getCustomFieldName("IsDefaultImage")]}"
                    extraclass="slds-m-bottom_medium"
                  >
                  </vlocity-checkbox>
                `}
          </div>
          <div class="slds-m-bottom_small">
            <vlocity-radio-group
              value="${this.isUrlSelected?"url":"fileupload"}"
              options="${JSON.stringify([{label:`${this.translationSdk.translate("URL")}`,value:"url",id:"attachmenturl"},{label:`${this.translationSdk.translate("PCAttachmentFormFileUploadButton")} ${this.translationSdk.translate("CPQOr")} ${this.translationSdk.translate("PCAttachmentDropFiles")}`,value:"fileupload",id:"attachmentupload"}])}"
            >
            </vlocity-radio-group>
          </div>
          <div>
            ${this.isUrlSelected?html`
                  <vlocity-textarea
                    name="${VlocityPCUtils.getCustomFieldName("UrlLong")}"
                    label="${this.translationSdk.translate("URL")}"
                    value="${this.attachmentModel[VlocityPCUtils.getCustomFieldName("UrlLong")]||""}"
                    extraclass="slds-m-bottom_small"
                    required="${this.isUrlSelected}"
                    requiredErrorMessage=""
                  >
                  </vlocity-textarea>
                  <div class="slds-has-error">
                    ${this.urlValidationError?html`
                          <div
                            class="slds-m-bottom_small slds-form-element__help"
                          >
                            ${this.urlValidationError}
                          </div>
                        `:""}
                  </div>
                `:""}
          </div>
        </vlocity-form>
        ${this.isUrlSelected?"":html`
              <abbr
                class="slds-required"
                title="${this.translationSdk.translate("Required")}"
                >*
              </abbr>
              <span class="vpc-attachment-required"
                >${this.translationSdk.translate("RequiredField")}
              </span>
              <vlocity-pc-dropzone
                accepts="files"
                dragactiveclass="vpc-attachments-dropzone__active"
                extraclass="slds-align_absolute-center vpc-attachment-form-file-upload-wrap slds-p-around_x-small slds-m-bottom_medium"
              >
                <slot>
                  <vlocity-icon
                    label="Upload"
                    baseurl="/_slds/icons/"
                    icon="utility:upload"
                    size="xx-small"
                    extraclass="vpc-attachment-upload-icon"
                  >
                  </vlocity-icon>
                  <span class="slds-text-body_small slds-p-left_xx-small"
                    >${this.translationSdk.translate("PCAttachmentFormDropFileText")},&nbsp;${this.translationSdk.translate("CPQOr")}</span
                  >
                  <vlocity-pc-file-input
                    label="${this.translationSdk.translate("PCAttachmentFormFileUploadButton")}"
                    description="Product Console File Upload"
                    limit="1"
                    maxsizeinmb="${this.getAttribute("maxfilesizeinmb")}"
                    buttonclass="slds-m-bottom_x-small vpc-attachment-form-file-upload-link slds-text-body_small"
                    class="vpc-attachment-form-file-upload"
                    extraclass="vpc-file-input-element"
                    maxfilenamesize="40"
                  >
                  </vlocity-pc-file-input>
                  <span
                    class="slds-text-body_small slds-text-color_inverse-weak slds-p-left_xx-small"
                    >(${this.translationSdk.translate("Max")}
                    ${this.getAttribute("maxfilesizeinmb")}MB,
                    ${this.translationSdk.translate("PCAttachmentMaxFileName")})
                  </span>
                </slot>
              </vlocity-pc-dropzone>
              ${0<this.uploadedFilesData.files.length?html`
                    <div class="slds-m-bottom_medium">
                      ${repeat(this.uploadedFilesData.files,file=>file.name,(file,index)=>html`
                          <span>${file.name}</span>
                          <vlocity-icon
                            label="Remove"
                            baseurl="/_slds/icons/"
                            icon="utility:close"
                            size="xx-small"
                            extraclass="slds-icon-text-default"
                            @click="${()=>{this.removeFile(index);}}"
                            class="vpc-attachment-remove"
                          >
                          </vlocity-icon>
                        `)}
                    </div>
                  `:""}
            `}
        <vlocity-input
          name="${VlocityPCUtils.getCustomFieldName("SequenceNumber")}"
          allownegative="false"
          allowdecimal="false"
          value="${this.attachmentModel[VlocityPCUtils.getCustomFieldName("SequenceNumber")]}"
          label="${this.translationSdk.translate("SequenceNumber")}"
          type="number"
          class="via-slds"
          extraclass="slds-m-bottom_medium"
        >
        </vlocity-input>
        <br />
      </div>
      <vlocity-pc-done-cancel></vlocity-pc-done-cancel>
    `;}setFolderId(){const folderName=this.getAttribute("foldername")||"ProductConsole";let fileInput=this.querySelector("vlocity-pc-file-input");if(this.folderId){fileInput.setAttribute("folderid",this.folderId);}else{this.sdk.getFolderByName(folderName).then(result=>{if(fileInput){this.folderId=result.records[0].Id;fileInput.setAttribute("folderid",result.records[0].Id);}});}}setupFileDropEvents(){let dropzone=this.querySelector("vlocity-pc-dropzone");if(dropzone){dropzone.addEventListener("vpcDropzoneFilesDropped",event=>{const fileInput=this.querySelector("vlocity-pc-file-input");fileInput.processFileList(event.detail);});}}async getFieldsAndValues(){const input=this.sdk.createGetObjectPicklistsInput();input.objectName=VlocityPCUtils.getCustomFieldName("VlocityAttachment");return await this.sdk.getObjectPicklistsByName(input).then(response=>{this.pickListValues=response.result;}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}upsertAttachment(attachmentId){this.uploadedFilesData={files:[],formData:null};this.attachmentModel=this.attachmentModel?this.attachmentModel:{};if(attachmentId){if(attachmentId!==this.attachmentModel.Id){this.getAttachmentDetails(attachmentId);}}else{this.attachmentModel={};this.hideIsDefaultImage=!0;if(this.pickListValues){this.render();}}}dispatchAttachmentFormEvent(eventTitle,details){this.dispatchEvent(new CustomEvent(eventTitle,{detail:details}));}getAttachmentDetails(attachmentId){VlocityPCUtils.showSpinner();const getVlocityAttachmentDetailsInput=this.sdk.createGetVlocityAttachmentDetailsInput();getVlocityAttachmentDetailsInput.attachmentId=attachmentId;this.sdk.getVlocityAttachmentDetails(getVlocityAttachmentDetailsInput).then(response=>{this.attachmentModel=response;this.selectedContentType=response[VlocityPCUtils.getCustomFieldName("ContentType")];if(this.attachmentModel[VlocityPCUtils.getCustomFieldName("AttachmentId")]){this.isUrlSelected=!1;this.getAttachedDocumentDetails();}this.render();this.checkContentType(this.attachmentModel[VlocityPCUtils.getCustomFieldName("ContentType")]);}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCDetailsError"));}).finally(()=>{VlocityPCUtils.hideSpinner();});}getAttachedDocumentDetails(){const documentId=this.attachmentModel[VlocityPCUtils.getCustomFieldName("AttachmentId")];this.sdk.getSalesForceDocumentDetails(documentId).then(response=>{this.uploadedFilesData.files=[{name:response.Name,oldDocument:!0,type:response.ContentType}];this.render();this.setupFileDropEvents();setTimeout(()=>{this.setupFileEvents();this.setFolderId();});});}isContentTypeMatchUploadedFile(){const uploadedFileType=VlocityPCUtils.getContentTypeFromMimeType(this.uploadedFilesData.files[0].type);return uploadedFileType===this.selectedContentType;}saveAttachment(){if(this.validForm()){if(this.attachmentModel.Id){this.updateAttachmentDetails();}else{const createAttachmentInput=this.sdk.createCreateVlocityAttachmentsInput();createAttachmentInput.productId=this.getAttribute("productid");createAttachmentInput.records=this.mapAttachmentFormAttributes();if(!this.isUrlSelected&&0<this.uploadedFilesData.files.length){const isContentTypeMatchUploadedFile=this.isContentTypeMatchUploadedFile();if(isContentTypeMatchUploadedFile){VlocityPCUtils.showSpinner();this.createSalesForceDocument(createAttachmentInput);}else{this.toastError(this.translationSdk.translate("PCAttachmentContentTypeMatchingError"),this.translationSdk.translate("PCToastErrorTitle"));}}else{VlocityPCUtils.showSpinner();this.createVlocityAttachment(createAttachmentInput);}}}}validForm(){const isNameValid=this.validateName(),isContentTypeValid=this.validateContentType(),isUrlValid=this.validateUrlOrFileUpload();return isNameValid&&isContentTypeValid&&isUrlValid;}validateName(){const nameInput=this.querySelector(`vlocity-input[name='Name']`);if(!nameInput.value){this.setErrorClass(nameInput.querySelector(".slds-form-element"),!0);return!1;}else{this.setErrorClass(nameInput.querySelector(".slds-form-element"),!1);return!0;}}validateContentType(){const contentTypeInput=this.querySelector(`vlocity-combobox[name='${VlocityPCUtils.getCustomFieldName("ContentType")}']`);if(!contentTypeInput.value){this.setErrorClass(contentTypeInput.querySelector(".slds-form-element"),!0);return!1;}else{this.setErrorClass(contentTypeInput.querySelector(".slds-form-element"),!1);return!0;}}validateUrlOrFileUpload(){const urlInput=this.querySelector(`vlocity-textarea[name='${VlocityPCUtils.getCustomFieldName("UrlLong")}']`),fileUploadInput=this.querySelector(".vpc-dropzone");let valid=!0;if(this.isUrlSelected){if(!urlInput.value||this.urlValidationError&&this.urlValidationError.length){this.setErrorClass(urlInput.querySelector(".slds-form-element"),!0);valid=!1;}else{this.setErrorClass(urlInput.querySelector(".slds-form-element"),!1);}}else{if(!this.uploadedFilesData.files.length){fileUploadInput.classList.add("vpc-dropzone-error");valid=!1;}else{fileUploadInput.classList.remove("vpc-dropzone-error");valid=!0;}}return valid;}setErrorClass(context,isError){if(isError){context.classList.add("slds-has-error");}else{context.classList.remove("slds-has-error");}}mapAttachmentFormAttributes(){const formModel=this.querySelector("vlocity-form").model,isDefaultCheckbox=this.querySelector("vlocity-checkbox[name=\""+VlocityPCUtils.getCustomFieldName("IsDefaultImage")+"\"]")?this.querySelector("vlocity-checkbox[name=\""+VlocityPCUtils.getCustomFieldName("IsDefaultImage")+"\"]").querySelector("input"):null;formModel[VlocityPCUtils.getCustomFieldName("IsDefaultImage")]="Image"===formModel[VlocityPCUtils.getCustomFieldName("ContentType")]&&isDefaultCheckbox?isDefaultCheckbox.checked:!1;formModel[VlocityPCUtils.getCustomFieldName("ContentType")]=0<this.uploadedFilesData.files.length?VlocityPCUtils.getContentTypeFromMimeType(this.uploadedFilesData.files[0].type):formModel[VlocityPCUtils.getCustomFieldName("ContentType")];const sequenceNumber=this.querySelector("vlocity-input[name=\""+VlocityPCUtils.getCustomFieldName("SequenceNumber")+"\"]");if(sequenceNumber){const sequenceValue=parseInt(sequenceNumber.value);formModel[VlocityPCUtils.getCustomFieldName("SequenceNumber")]=!isNaN(sequenceValue)?sequenceValue:null;}let records=[formModel];return records;}cancelAttachmentUpsert(){this.dispatchAttachmentFormEvent("onAttachmentUpsertCancel");}updateAttachmentDetails(){const updateVlocityAttachmentInput=this.sdk.createCreateVlocityAttachmentsInput();updateVlocityAttachmentInput.productId=this.getAttribute("productid");const records=this.mapAttachmentFormAttributes();updateVlocityAttachmentInput.records=records;if(!this.isUrlSelected&&0<this.uploadedFilesData.files.length){const isContentTypeMatchUploadedFile=this.isContentTypeMatchUploadedFile();if(isContentTypeMatchUploadedFile){VlocityPCUtils.showSpinner();if(this.uploadedFilesData.files[0].oldDocument){updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("UrlLong")]=`/servlet/servlet.FileDownload?file=${updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("AttachmentId")]}`;this.updateAttachment(updateVlocityAttachmentInput);}else{if(this.attachmentModel[VlocityPCUtils.getCustomFieldName("AttachmentId")]){//delete the salesforce document record and create a new one
this.deleteSalesForceDocument(updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("AttachmentId")]);}//upload the document to salesforce and link the id to AttachmentId
this.createSalesForceDocument(updateVlocityAttachmentInput);}}else{this.toastError(this.translationSdk.translate("PCAttachmentContentTypeMatchingError"),this.translationSdk.translate("PCToastErrorTitle"));}}else{VlocityPCUtils.showSpinner();//ulink the attachmentId from vlocity attachment if attachment had a document linked, delete the document
if(updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("AttachmentId")]){this.deleteSalesForceDocument(updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("AttachmentId")]);}updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("AttachmentId")]=null;this.updateAttachment(updateVlocityAttachmentInput);}}updateSalesforceDocument(updateVlocityAttachmentInput){let formData=new FormData();const file=this.uploadedFilesData.files[0],uploadData={Name:file.name,Type:file.name.split(".").pop()},blob=new Blob([JSON.stringify(uploadData)],{type:"application/json"});formData.append("entity_content",blob,"");formData.append("Body",file,file.name);const updateInput={FormData:formData,documentId:this.attachmentModel[VlocityPCUtils.getCustomFieldName("AttachmentId")]};this.sdk.updateSalesforceDocument(updateInput).then(()=>{updateVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("UrlLong")]=`/servlet/servlet.FileDownload?file=${this.attachmentModel[VlocityPCUtils.getCustomFieldName("AttachmentId")]}`;this.updateAttachment(updateVlocityAttachmentInput);}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentUpdateError"));VlocityPCUtils.hideSpinner();});}createSalesForceDocument(upsertVlocityAttachmentInput){this.uploadToSalesforce(this.uploadedFilesData.formData).then(records=>{const documentCreateError=VlocityPCUtils.getErrorFromSuccessResponse(records);if(""!==documentCreateError){VlocityPCUtils.hideSpinner();this.toastError(documentCreateError,this.translationSdk.translate("PCToastErrorTitle"));}else{upsertVlocityAttachmentInput.records[0].id=records[0].id;upsertVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("AttachmentId")]=records[0].id;upsertVlocityAttachmentInput.records[0][VlocityPCUtils.getCustomFieldName("UrlLong")]=`/servlet/servlet.FileDownload?file=${records[0].id}`;if(this.attachmentModel.Id){this.updateAttachment(upsertVlocityAttachmentInput);}else{this.createVlocityAttachment(upsertVlocityAttachmentInput);}}}).catch(error=>{VlocityPCUtils.hideSpinner();const errorMessage=this.attachmentModel.Id?this.translationSdk.translate("PCAttachmentUpdateError"):this.translationSdk.translate("PCAttachmentCreateError");this.processErrorResponse(error.errorJson,errorMessage);});}updateAttachment(input){this.sdk.updateVlocityAttachment(input).then(()=>{this.toastSuccess(this.translationSdk.translate("PCAttachmentUpdateSuccess"),this.translationSdk.translate("PCToastSuccessTitle"));this.dispatchAttachmentFormEvent("onAttachmentUpsert",input.records[0]);}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentUpdateError"));}).finally(()=>{VlocityPCUtils.hideSpinner();});}deleteSalesForceDocument(documentId){this.sdk.deleteSalesforceSobjectRecords(documentId);}processErrorResponse(error,fallbackMsg){const errorMessages=VlocityPCUtils.getErrorMessagesFromErrorsArray(error),errorMsg=""!==errorMessages?errorMessages:fallbackMsg;this.toastError(errorMsg,this.translationSdk.translate("PCToastErrorTitle"));}processSuccessResponse(response){const vlocityAttachmentCreateError=VlocityPCUtils.getErrorFromSuccessResponse(response);if(""!==vlocityAttachmentCreateError){this.toastError(vlocityAttachmentCreateError,this.translationSdk.translate("PCToastErrorTitle"));}else{this.toastSuccess(this.translationSdk.translate("PCAttachmentCreateSuccess"),this.translationSdk.translate("PCToastSuccessTitle"));this.dispatchAttachmentFormEvent("onAttachmentUpsert");}}createVlocityAttachment(createAttachmentInput){this.sdk.createVlocityAttachments(createAttachmentInput).then(response=>{this.processSuccessResponse(response);}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentCreateError"));}).finally(()=>{VlocityPCUtils.hideSpinner();});}setupFileEvents(){const fileInput=this.getElementsByClassName("vpc-attachment-form-file-upload");if(0<fileInput.length){fileInput[0].addEventListener("vpcfilesuploaded",event=>{this.uploadedFilesData.files=[];this.render();setTimeout(()=>{this.uploadedFilesData.files.push(event.detail.fileList[0]);this.uploadedFilesData.formData=event.detail.formData;this.validateUrlOrFileUpload();this.render();});});fileInput[0].addEventListener("vpcfileuploaderror",event=>{VlocityPCUtils.openToast("Error",event.detail,"error");});}}setupFieldValueChangeEvent(){const nameInput=this.querySelector("vlocity-input[name=\"Name\"]"),contentTypeInput=this.querySelector("vlocity-combobox[name=\""+VlocityPCUtils.getCustomFieldName("ContentType")+"\"]");this.setupRadioGroupEvent();this.setUpUrlInputEvent();if(contentTypeInput){contentTypeInput.addEventListener("onvaluechange",event=>{setTimeout(()=>{this.selectedContentType=event.detail.value();this.attachmentModel[VlocityPCUtils.getCustomFieldName("ContentType")]=this.selectedContentType;this.checkContentType(event.detail.value());this.validateContentType();});});}nameInput.addEventListener("onvaluechange",event=>{this.attachmentModel.Name=event.detail.value();this.validateName();this.render();});}setupRadioGroupEvent(){const radioGroup=this.querySelector("vlocity-radio-group");radioGroup.addEventListener("onvaluechange",event=>{this.isUrlSelected="url"===event.detail.value();this.render();if(!this.isUrlSelected){this.setupFileDropEvents();setTimeout(()=>{this.setupFileEvents();this.setFolderId();});}else{setTimeout(()=>{this.setUpUrlInputEvent();});}});}setUpUrlInputEvent(){const urlInput=this.querySelector("vlocity-textarea[name=\""+VlocityPCUtils.getCustomFieldName("UrlLong")+"\"]");if(urlInput){urlInput.addEventListener("onvaluechange",event=>{const urlValue=event.detail.value();this.attachmentModel[VlocityPCUtils.getCustomFieldName("UrlLong")]=urlValue;this.urlValidationError=this.validateUrl(urlValue);this.validateUrlOrFileUpload();this.render();});}}validateUrl(urlValue){const regEx=/^(?:(http|https)?:\/\/)|^(\/)?[\w-\/]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/;return 0<urlValue.length&&!regEx.test(urlValue)?this.translationSdk.translate("PCAttachmentUrlValidation"):"";}checkContentType(contentType){this.hideIsDefaultImage="Image"!==contentType;this.render();}uploadToSalesforce(formData){let documentUploadPromise=new Promise((resolve,reject)=>{this.sdk.uploadToSalesforce(formData).then(records=>{resolve(records);}).catch(error=>{reject(error);});});return documentUploadPromise;}removeFile(index){this.uploadedFilesData.files.splice(index,1);const fileInput=this.querySelector(".vpc-attachment-form-file-upload");fileInput.resetFileInput();if(this.attachmentModel[VlocityPCUtils.getCustomFieldName("AttachmentId")]){this.attachmentModel[VlocityPCUtils.getCustomFieldName("UrlLong")]=null;}this.render();this.validateUrlOrFileUpload();}toastError(message,header){VlocityPCUtils.openToast(header,message,"error");}toastSuccess(message,header){VlocityPCUtils.openToast(header,message,"success");}}customElements.define(VlocityPCAttachmentForm.is,VlocityPCAttachmentForm);class VlcoityPcAttachmentsPreview extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-attachments-preview";}get noModal(){return this.hasAttribute("nomodal");}render(){render(this.template(),this);}template(){const attachmentPreview=document.createElement("div");if(this.noModal){attachmentPreview.innerHTML=`
      <div class="vpc-attachment-preview-content">
        <vlocity-carousel arrow="${this.attachments&&1<this.attachments.length||!1}" iconbaseurl="/_slds/icons/" extraclass="slds-align_absolute-center" islanguageRTL="${vlocityPcConfig.isLanguageRTL}">
        </vlocity-carousel>
      </div>`;}else{attachmentPreview.innerHTML=`
    <div class="slds-backdrop slds-backdrop_open" style="opacity: 0.8;">
    </div>
    <div class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">
          <div class="slds-is-relative vpc-attachment-preview-modal-header">
            <vlocity-button label=""
              id="vpcAttachmentPreviewClose"
              icon="utility:close"
              iconsize="large"
              title="Close"
              iconbaseurl="/_slds/icons/"
              extraclass="slds-modal__close slds-button_icon-inverse">
            </vlocity-button>
            <div class="slds-clearfix">
              <div class="slds-float_right">
                <vlocity-button
                  id="vpc-attachments-download-button"
                  label="${this.translationSdk.translate("Download")}"
                  styletype="neutral"
                  icon="utility:download"
                  iconsize="xx-small"
                  iconbaseurl="/_slds/icons/"
                  >
                </vlocity-button>
              </div>
            </div>
          </div>
          <div class="slds-modal__content slds-text-align_center slds-text-heading_small slds-p-around_medium vpc-attachment-preview-content">
            <vlocity-carousel arrow="${this.attachments&&1<this.attachments.length||!1}" iconbaseurl="/_slds/icons/" extraclass="slds-align_absolute-center" islanguageRTL="${vlocityPcConfig.isLanguageRTL}">
            </vlocity-carousel>
          </div>
        </div>
    </div>`;}// appending carousel-item to vlocity-carousel --- starts
const vlocityCarousel=attachmentPreview.querySelector("vlocity-carousel");this.attachments.forEach(attachment=>{const attachmentUrl=attachment[VlocityPCUtils.getCustomFieldName("UrlLong")],image=`
        <div class="slds-align_absolute-center">
          <img class="vpc-attachment-preview-image vpc-attachment-preview-media" src="${attachmentUrl}" id="${attachment.Id}">
        </div>`,audio=`
        <audio src="${attachmentUrl}" controls>
          Your browser does not support the
          <code>audio</code> element.
        </audio>`,video=`
        <video width="100%" height="300" src="${attachmentUrl}" controls class="vpc-attachment-preview-media" id="${attachment.Id}">
          Your browser does not support the
          <code>video</code> element.
        </video>`,contentType=attachment[VlocityPCUtils.getCustomFieldName("ContentType")],contentTypeElement=attachment.disablePreviewAndDownload?`<div class="vpc-attachments-no-preview">${this.translationSdk.translate("PCAttachmentNoPreviewException")}</div>`:attachment.isPreviewError?`<div class="vpc-attachments-no-preview slds-align_absolute-center">${this.translationSdk.translate("PCAttachmentsPreviewError")}</div>`:"Video"===contentType?video:"Audio"===contentType?audio:"Image"===contentType?image:`<div class="vpc-attachments-no-preview">${this.translationSdk.translate("PCAttachmentNoPreview")}</div>`,carouselItem=document.createElement("carousel-item");carouselItem.setAttribute("title",attachment.Name);carouselItem.setAttribute("id",attachment.Id);carouselItem.innerHTML=`
        <a href="javascript:void(0);" class="slds-text-link_reset vpc-attachment-preview-item">
            <div class="vpc-attachments-carousel-preview" id="${attachment.Id}">
                ${attachment[VlocityPCUtils.getCustomFieldName("UrlLong")]?contentTypeElement:""}
            </div>
            <div class="slds-carousel__content">
              <h2 class="slds-carousel__content-title">${attachment.Name}</h2>
            </div>
        </a>`;vlocityCarousel.appendChild(carouselItem);// appending carousel-item to vlocity-carousel --- ends
//To show the selected attachment in carousel.
vlocityCarousel.currentIndex=this.initialIndex;});//click event for close button.
if(!this.noModal){const closeButton=attachmentPreview.querySelector("#vpcAttachmentPreviewClose");closeButton.addEventListener("click",event=>{this.hidePreview();});const downloadButton=attachmentPreview.querySelector("#vpc-attachments-download-button");downloadButton.addEventListener("click",event=>{this.downloadAttachment();});}return html`
      <style>
        .vpc-attachment-preview-modal-header {
          padding: 0.5rem;
          background-color: var(--vpc-secondary-bg-color);
          border-bottom: 1px solid var(--vpc-secondary-border-color);
        }
        .vpc-attachment-preview-item .slds-carousel__content {
          height: auto;
        }
        .vpc-attachment-preview-content .slds-carousel__panel {
          height: 350px;
        }
        .vpc-attachment-preview-item .vpc-attachment-preview-image {
          max-height: 300px;
        }
        .vpc-attachments-no-preview {
          padding-top: 30%;
        }
        .vpc-attachments-carousel-preview {
          height: 85%;
        }
      </style>
      <div class="vpc-attachment-preview">
        ${this.isShown?attachmentPreview:""}
      </div>
    `;}showPreview(attachments,index){this.isShown=!0;this.attachments=attachments;this.initialIndex=parseInt(index);this.render();this.setupErrorEvents();}hidePreview(){this.isShown=!1;this.render();}downloadAttachment(){const vlocityCarousel=this.querySelector("vlocity-carousel"),attachment=this.attachments[parseInt(vlocityCarousel.currentIndex)];if(!attachment.disablePreviewAndDownload){let a=document.createElement("a");a.href=attachment.downloadUrl;a.download=attachment.Name;a.target="_blank";document.body.appendChild(a);a.click();document.body.removeChild(a);}}setupErrorEvents(){const mediaElements=this.querySelectorAll(".vpc-attachment-preview-media");if(mediaElements&&0<mediaElements.length){mediaElements.forEach(media=>{media.addEventListener("error",event=>{const id=event.currentTarget.id,selectedAttachment=this.attachments.filter(item=>{return item.Id==id;});selectedAttachment[0].isPreviewError=!0;this.render();});});}}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();}}customElements.define(VlcoityPcAttachmentsPreview.is,VlcoityPcAttachmentsPreview);class VlocityPCPagination extends HTMLElement{constructor(){super();}connectedCallback(){this.componentMounted=!0;this.translationSdk=VlocitySDK.translation.getInstance();this.render();}static get is(){return"vlocity-pc-pagination";}template(){this.totalsize=this.getAttribute("totalsize")?parseInt(this.getAttribute("totalsize")):0;this.pagesize=this.getAttribute("pagesize")?parseInt(this.getAttribute("pagesize")):1;this.currentpage=this.getAttribute("currentpage")?parseInt(this.getAttribute("currentpage")):1;this.maxpages=this.getAttribute("maxpages")?parseInt(this.getAttribute("maxpages")):Math.ceil(this.totalsize/this.pagesize);const paginate=this.paginate();return html`
      <style>
        .vpc-pagination .vpc-pagination-button-disabled[disabled] {
          cursor: not-allowed;
        }
        .vpc-pagination .vpc-disabled-button-icon {
          fill: var(--vpc-secondary-border-color);
        }
      </style>
      <div class="slds-clearfix slds-is-relative vpc-pagination">
        <div class="slds-float_left">
          ${this.totalsize>this.pagesize?html`
                ${this.translationSdk.translate("Showing")}
                ${(this.currentpage-1)*this.pagesize+1}
                ${this.translationSdk.translate("to")}
                ${this.currentpage*this.pagesize>this.totalsize?this.totalsize:this.currentpage*this.pagesize}
                ${this.translationSdk.translate("of")} ${this.totalsize}
                ${this.translationSdk.translate("Entries")}
              `:html`
                ${this.translationSdk.translate("Showing")}
                ${this.translationSdk.translate("PCAll")}
                ${1<this.totalsize?this.totalsize:""}
                ${this.translationSdk.translate("Entries")}
              `}
        </div>
        ${this.totalsize>this.pagesize?html`
              <div class="slds-float_right">
                <div class="slds-button-group" role="group">
                  <button
                    class="slds-button slds-button_neutral ${1===this.currentpage?"vpc-pagination-button-disabled":""}"
                    ?disabled=${1===this.currentpage}
                    @click="${()=>{this.onChangePage(this.currentpage-1);}}"
                    type="button"
                  >
                    <span aria-hidden="true">
                      <vlocity-icon
                        icon="utility:chevronleft"
                        extraclass="${1===this.currentpage?"vpc-disabled-button-icon":"slds-icon-text-default"}"
                        size="x-small"
                        baseurl="/_slds/icons/"
                      >
                      </vlocity-icon>
                    </span>
                  </button>
                  ${repeat(paginate.pages,page=>page,page=>html`
                      <button
                        class="slds-button ${page===this.currentpage?"slds-button_brand":"slds-button_neutral"}"
                        type="button"
                        @click="${()=>{this.onChangePage(page);}}"
                      >
                        ${page}
                      </button>
                    `)}
                  <button
                    class="slds-button slds-button_neutral ${this.currentpage===this.totalPages?"vpc-pagination-button-disabled":""}"
                    ?disabled=${this.currentpage===this.totalPages}
                    @click="${()=>{this.onChangePage(this.currentpage+1);}}"
                    type="button"
                  >
                    <span aria-hidden="true">
                      <vlocity-icon
                        icon="utility:chevronright"
                        extraclass="${this.currentpage===this.totalPages?"vpc-disabled-button-icon":"slds-icon-text-default"}"
                        size="x-small"
                        baseurl="/_slds/icons/"
                      >
                      </vlocity-icon>
                    </span>
                  </button>
                </div>
              </div>
            `:""}
      </div>
    `;}paginate(){// calculate total pages
this.totalPages=Math.ceil(this.totalsize/this.pagesize);// ensure current page isn't out of range
if(1>this.currentpage){this.currentpage=1;}else if(this.currentpage>this.totalPages){this.currentpage=this.totalPages;}let startPage,endPage;if(this.totalPages<=this.maxpages){// total pages less than max so show all pages
startPage=1;endPage=this.totalPages;}else{// total pages more than max so calculate start and end pages
let maxPagesBeforeCurrentPage=Math.floor(this.maxpages/2),maxPagesAfterCurrentPage=Math.ceil(this.maxpages/2)-1;if(this.currentpage<=maxPagesBeforeCurrentPage){// current page near the start
startPage=1;endPage=this.maxpages;}else if(this.currentpage+maxPagesAfterCurrentPage>=this.totalPages){// current page near the end
startPage=this.totalPages-this.maxpages+1;endPage=this.totalPages;}else{// current page somewhere in the middle
startPage=this.currentpage-maxPagesBeforeCurrentPage;endPage=this.currentpage+maxPagesAfterCurrentPage;}}// calculate start and end item indexes
let startIndex=(this.currentpage-1)*this.pagesize,endIndex=Math.min(startIndex+this.pagesize-1,this.totalsize-1),pages=Array.from(Array(endPage+1-startPage).keys()).map(i=>startPage+i);// return object with all pager properties required by the view
return{startPage:startPage,endPage:endPage,startIndex:startIndex,endIndex:endIndex,pages:pages};}render(){render(this.template(),this);}static get observedAttributes(){return["totalsize","currentpage","pagesize","maxpages"];}attributeChangedCallback(name,oldValue,newValue){if(oldValue===newValue||!this.componentMounted){return;}this.render();}onChangePage(pageNumber){this.currentpage=pageNumber;this.dispatchEvent(new CustomEvent("onchangepage",{detail:this.currentpage}));this.render();}}window.customElements.define(VlocityPCPagination.is,VlocityPCPagination);class VlocityPCSearch extends HTMLElement{render(){render(this.template(),this);}static get is(){return"vlocity-pc-search";}connectedCallback(){this.searchPlaceholder=this.getAttribute("searchplaceholder");this.searchString=this.getAttribute("searchstring");this.render();this.componentMounted=!0;}template(){return html`
      <style>
        .via-slds .slds-input.vpc-search-input {
          width: 300px;
        }
      </style>
      <div class="vpc-quick-add-search">
        <div class="slds-form-element">
          <div
            class="slds-form-element__control slds-input-has-icon ${vlocityPcConfig.isLanguageRTL?"slds-input-has-icon_right":"slds-input-has-icon_left"}"
          >
            <vlocity-icon
              baseurl="/_slds/icons/"
              icon="utility:search"
              size="x-small"
              title="${this.searchPlaceholder}"
              extraclass="slds-input__icon ${vlocityPcConfig.isLanguageRTL?"slds-input__icon_right":"slds-input__icon_left"}"
            ></vlocity-icon>
            <input
              type="text"
              @input="${evt=>this.handleSearchInput(evt)}"
              class="slds-input"
              value="${this.searchString}"
              placeholder="${this.searchPlaceholder}"
            />
          </div>
        </div>
      </div>
    `;}handleSearchInput(event){pubsub.fire("vpcsearchstringchanged","onSearch",{searchString:event.target.value});}}window.customElements.define(VlocityPCSearch.is,VlocityPCSearch);class VlocityPCAttachmentList extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-attachment-list";}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();this.listConfig={totalCount:null,limit:10,offset:0,maxPages:10,currentPage:1,sortBy:null,sortOrder:null};this.selectedAttachments=[];this.getAttachments();this.searchAttachmentsDebounced=VlocityPCUtils.debounce(this.getAttachments,600,this);pubsub.register("vpcsearchstringchanged",{onSearch:this.filterAttachmentList.bind(this)});}disconnectedCallback(){pubsub.unregister("vpcsearchstringchanged",{onSearch:this.filterAttachmentList.bind(this)});}filterAttachmentList(searchDetails){this.searchString=searchDetails.searchString;this.listConfig.currentPage=1;this.listConfig.offset=0;this.searchAttachmentsDebounced();}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-cursor-pointer {
          cursor: pointer;
        }
        .vpc-attachments-empty-exception {
          height: 80vh;
        }
        .vpc-attachmets-list-table .slds-table_bordered {
          border: none;
        }
        .vpc-attachmets-list-table {
          overflow: auto;
          border: 1px solid var(--vpc-primary-border-color);
        }
        .vpc-cursor-not-allowed {
          cursor: not-allowed;
        }
        .vpc-attachment-select-icon .vpc-selection-checkbox {
          display: inline-block;
        }
        .vpc-attachments-header-grid {
          display: grid;
          grid-template-columns: 6fr 6fr;
          grid-column-gap: 10px;
        }
        .vpc-selected-attachment {
          background-color: var(--vpc-primary-border-color);
        }
        .vpc-search-attachments input {
          width: 250px;
        }
        .vpc-display-inline {
          display: inline-block;
        }
        .vlocity-select-all-checkbox .slds-p-bottom_x-small {
          padding-bottom: 0;
        }
      </style>
      <div class="slds-m-bottom_medium">
        <vlocity-pc-attachment-uploadbox
          productid="${this.getAttribute("productid")}"
          foldername="${this.getAttribute("foldername")}"
          maxfilesizeinmb="${this.getAttribute("maxfilesizeinmb")}"
        >
        </vlocity-pc-attachment-uploadbox>
      </div>
      <div class="slds-m-bottom_medium slds-clearfix">
        <div class="slds-float_right">
          <div
            class="slds-form-element slds-m-bottom_x-small vpc-display-inline"
          >
            <div class="slds-form-element__control">
              <div class="slds-checkbox">
                <input
                  type="checkbox"
                  name="isSelected"
                  id="defaultImageFilter"
                  ?checked="${this.isDefaultImageFilterChecked}"
                  @change="${()=>{this.onDefaultImageFilter();}}"
                />
                <label class="slds-checkbox__label" for="defaultImageFilter">
                  <span class="slds-checkbox_faux"></span>
                  <span class="slds-form-element__label"
                    >${this.translationSdk.translate("PCDefaultImageFilter")}</span
                  >
                </label>
              </div>
            </div>
          </div>
          <vlocity-pc-search
            searchplaceholder="${this.translationSdk.translate("Search")}"
            searchstring="${this.searchString?this.searchString:""}"
            class="vpc-search-attachments slds-m-right_medium vpc-display-inline"
          >
          </vlocity-pc-search>
          <vlocity-button
            styletype="neutral"
            label="${this.translationSdk.translate("PCDeleteSelectedAttachment")}"
            disabled="${!this.enableDeleteSelectedButton||!this.attachments.length}"
            @click="${()=>{this.showMultipleAttachmentConfirm();}}"
            class="slds-m-right_medium"
          >
          </vlocity-button>
          <vlocity-button
            styletype="neutral"
            label="${this.translationSdk.translate("NewAttachment")}"
            @click="${()=>{this.onAddAttachment();}}"
          >
          </vlocity-button>
        </div>
      </div>
      ${this.attachments.length?html`
            <div class="vpc-attachmets-list-table">
              <vlocity-data-table
                extraclass="slds-table_bordered"
                sortable="true"
                iconbaseurl="/_slds/icons/"
                iscallbackonsort="true"
                selectallenabled
                selectallchecked="${this.allSelected&&0<this.attachments.length}"
              >
                <vlocity-data-column extraclass="vpc-attachment-actions-header">
                  <span class="vpc-cursor-pointer vpc-attachment-select-icon">
                    <div class="vpc-selection-checkbox slds-form-element">
                      <div class="slds-form-element__control">
                        <div class="slds-checkbox">
                          <input
                            type="checkbox"
                            name="vpc-attachment-select-checkbox"
                            id="checkbox-\${item.Id}"
                            value="\${item.Id}"
                            ?checked="\${item.isSelected?true:false}"
                          />
                          <label
                            class="slds-checkbox__label"
                            for="checkbox-\${item.Id}"
                          >
                            <span class="slds-checkbox_faux"></span>
                          </label>
                        </div>
                      </div>
                    </div>
                  </span>
                  \${item.disablePreviewAndDownload?html \`
                  <span class="slds-p-around_xxx-small vpc-cursor-not-allowed">
                    <vlocity-icon
                      label="Preview"
                      baseurl="/_slds/icons/"
                      icon="utility:preview"
                      size="xx-small"
                      extraclass="slds-icon-text-default"
                    >
                    </vlocity-icon>
                  </span>
                  <span class="slds-p-around_xxx-small vpc-cursor-not-allowed">
                    <vlocity-icon
                      label="Preview"
                      baseurl="/_slds/icons/"
                      icon="utility:download"
                      size="xx-small"
                      extraclass="slds-icon-text-default"
                    >
                    </vlocity-icon>
                  </span>
                  \` : html \`
                  <span
                    class="slds-p-around_xxx-small vpc-cursor-pointer vpc-attachment-preview-icon"
                    id="\${index}"
                  >
                    <vlocity-tooltip
                      tooltiptype="buttonicon"
                      iconbaseurl="/_slds/icons/"
                      nubbinposition="top"
                      icon="utility:preview"
                      iconclass="slds-icon-text-default"
                      iconsize="xx-small"
                      value="${this.translationSdk.translate("Preview")}"
                    >
                    </vlocity-tooltip>
                  </span>
                  <a
                    class="slds-p-around_xxx-small vpc-cursor-pointer"
                    href="\${item.downloadUrl}"
                    download="\${item.Name}"
                    target="_blank"
                  >
                    <vlocity-tooltip
                      tooltiptype="buttonicon"
                      iconbaseurl="/_slds/icons/"
                      nubbinposition="top"
                      icon="utility:download"
                      iconclass="slds-icon-text-default"
                      iconsize="xx-small"
                      value="${this.translationSdk.translate("Download")}"
                    >
                    </vlocity-tooltip>
                  </a>
                  \` }
                  <span
                    class="slds-p-around_xxx-small vpc-cursor-pointer vpc-attachment-edit"
                    id="\${item.Id}"
                  >
                    <vlocity-tooltip
                      tooltiptype="buttonicon"
                      iconbaseurl="/_slds/icons/"
                      nubbinposition="top"
                      icon="utility:edit"
                      iconclass="slds-icon-text-default"
                      iconsize="xx-small"
                      value="${this.translationSdk.translate("Edit")}"
                    >
                    </vlocity-tooltip>
                  </span>
                  <span
                    class="slds-p-around_xxx-small vpc-cursor-pointer vpc-attachment-delete"
                    id="\${item.Id}"
                  >
                    <vlocity-tooltip
                      tooltiptype="buttonicon"
                      iconbaseurl="/_slds/icons/"
                      nubbinposition="top"
                      icon="utility:delete"
                      iconclass="slds-icon-text-default"
                      iconsize="xx-small"
                      value="${this.translationSdk.translate("Delete")}"
                    >
                    </vlocity-tooltip>
                  </span>
                </vlocity-data-column>
                <vlocity-data-column
                  name="${this.translationSdk.translate("Name")}"
                  sort="Name"
                >
                  <div>\${item.Name ? item.Name : "NA"}</div>
                </vlocity-data-column>
                <vlocity-data-column
                  name="${this.translationSdk.translate("URL")}"
                >
                  \${item["${VlocityPCUtils.getCustomFieldName("UrlLong")}"] ?
                  item["${VlocityPCUtils.getCustomFieldName("UrlLong")}"] :
                  "NA"}
                </vlocity-data-column>
                <vlocity-data-column
                  name="${this.translationSdk.translate("PCAttachmentIsDefault")}"
                  sort="${VlocityPCUtils.getCustomFieldName("IsDefaultImage")}"
                >
                  \${item["${VlocityPCUtils.getCustomFieldName("IsDefaultImage")}"]
                  ? "Yes" : "No"}
                </vlocity-data-column>
                <vlocity-data-column
                  name="${this.translationSdk.translate("ContentType")}"
                  sort="${VlocityPCUtils.getCustomFieldName("ContentType")}"
                >
                  \${item["${VlocityPCUtils.getCustomFieldName("ContentType")}"]
                  ? item["${VlocityPCUtils.getCustomFieldName("ContentType")}"]
                  : "NA"}
                </vlocity-data-column>
                <vlocity-data-column
                  name="${this.translationSdk.translate("CreatedDate")}"
                  sort="CreatedDate"
                >
                  \${new
                  Date(item["CreatedDate"].slice(0,item["CreatedDate"].indexOf("+"))+"Z").toLocaleString()}
                </vlocity-data-column>
              </vlocity-data-table>
            </div>
            <vlocity-pc-attachments-preview></vlocity-pc-attachments-preview>
          `:html`
            <div
              class="vpc-attachments-empty-exception slds-align_absolute-center"
            >
              ${this.translationSdk.translate("NoRecordsToDisplay")}
            </div>
          `}
      ${0<this.listConfig.totalCount?html`
            <div class="slds-m-top_small">
              <vlocity-pc-pagination
                totalsize="${this.listConfig.totalCount}"
                currentpage="${this.listConfig.currentPage}"
                pagesize="${this.listConfig.limit}"
                maxpages="${this.listConfig.maxPages}"
              >
              </vlocity-pc-pagination>
            </div>
          `:""}
      <vlocity-prompt
        id="deleteAttachmentConfirmation"
        titletext="${this.translationSdk.translate("Delete")}"
        canceltext="${this.translationSdk.translate("Cancel")}"
        confirmtext="${this.translationSdk.translate("Delete")}"
      ></vlocity-prompt>
    `;}/**
     * Fetches list of VlocityAttachment objects for a given product id.
     */getAttachments(){VlocityPCUtils.showSpinner();const input=this.sdk.createGetVlocityAttachmentsInput();input.productId=this.getAttribute("productid");input.sortObject.sortBy=this.listConfig.sortBy;input.sortObject.sortOrder=this.listConfig.sortOrder;input.limit=this.listConfig.limit;input.offset=this.listConfig.offset;input.searchString=this.searchString;input.isDefault=this.isDefaultImageFilterChecked;this.sdk.getVlocityAttachmentsRemoteAction(input).then(response=>{if("INVOKE-200"!==response.errorCode){this.toastError(response.error,this.translationSdk.translate("PCToastErrorTitle"));}else{this.attachments=response.result&&response.result.attachments&&response.result.attachments.length?response.result.attachments:[];if(this.attachments&&!this.attachments.length){this.allSelected=!1;}this.listConfig.totalCount=response.result.totalCount;this.setAttachmentDownloadUrl();this.render();this.setupAttachmentUploadBoxEvent();this.setSelectedAttachments();if(this.querySelector("vlocity-data-table")){this.querySelector("vlocity-data-table").setItems(this.attachments);}this.setupTableEvents();this.setupPaginationEvents();VlocityPCUtils.hideSpinner();}}).catch(error=>{this.processErrorResponse(error.errorJson,error.message);}).finally(()=>{VlocityPCUtils.hideSpinner();});}setupPaginationEvents(){const pagination=this.querySelector("vlocity-pc-pagination");if(pagination){const isListening=pagination.hasAttribute("isListening");if(!isListening){pagination.setAttribute("isListening",!0);pagination.addEventListener("onchangepage",event=>this.onChangePage(event.detail));}}}setSelectedAttachments(){if(this.selectedAttachments.length){if(this.allSelected){this.selectOrDeselectAllAttachments();}else{this.selectedAttachments.forEach(selectedAttachment=>{const attachmentRecord=this.attachments.find(attachment=>attachment.Id===selectedAttachment.Id);if(attachmentRecord){attachmentRecord.isSelected=!0;}});}}}setAttachmentDownloadUrl(){if(this.attachments&&this.attachments.length){this.attachments.forEach(attachment=>{const isAbsoluteUrl=VlocityPCUtils.isAbsoluteUrl(attachment[VlocityPCUtils.getCustomFieldName("UrlLong")]);attachment.disablePreviewAndDownload=!isAbsoluteUrl&&VlocityPCUtils.isSafariBrowser()&&"Video"===attachment[VlocityPCUtils.getCustomFieldName("ContentType")];attachment.downloadUrl=isAbsoluteUrl?attachment[VlocityPCUtils.getCustomFieldName("UrlLong")]:vlocityPcConfig.sfContentInstanceUrl+attachment[VlocityPCUtils.getCustomFieldName("UrlLong")];});}}setupTableEvents(){const vlocityDataTable=this.querySelector("vlocity-data-table");if(vlocityDataTable){vlocityDataTable.addEventListener("vlocityDataTableRendered",()=>{setTimeout(()=>{this.setUpAttachmentActions();this.setSelectAllCheckbox(this.allSelected);},0);});const isListening=vlocityDataTable.hasAttribute("isListening");if(!isListening){vlocityDataTable.setAttribute("isListening",!0);vlocityDataTable.addEventListener("onDataTableSort",event=>{this.listConfig.sortBy=event.detail.fieldName;this.listConfig.sortOrder=event.detail.reverse?"DESC":"ASC";if(1!==this.listConfig.currentPage){this.resetSelectAll();}this.listConfig.currentPage=1;this.listConfig.offset=0;this.getAttachments();});vlocityDataTable.addEventListener("onDataTableSelectAllChange",event=>{this.allSelected=event.detail;this.selectOrDeselectAllAttachments();this.render();});}}}resetSelectAll(){this.allSelected=!1;this.enableDeleteSelectedButton=!1;this.selectedAttachments=[];}setUpAttachmentActions(){this.setupEditEvents();this.setupDeleteEvents();this.setupPreviewEvents();this.setupSelectionEvents();}setupEditEvents(){const attachmentEditIcons=this.querySelectorAll(".vpc-attachment-edit");attachmentEditIcons.forEach(attachmentEdit=>{const isListening=attachmentEdit.hasAttribute("isListening");if(!isListening){attachmentEdit.setAttribute("isListening",!0);attachmentEdit.addEventListener("click",eve=>{const attachmentId=eve.currentTarget.id;this.dispatchEvent(new CustomEvent("onEditAttachment",{detail:{attachmentId:attachmentId}}));});}});}setupDeleteEvents(){const attachmentDeleteIcons=this.querySelectorAll(".vpc-attachment-delete");attachmentDeleteIcons.forEach(attachmentDelete=>{const isListening=attachmentDelete.hasAttribute("isListening");if(!isListening){attachmentDelete.setAttribute("isListening",!0);attachmentDelete.addEventListener("click",eve=>{const attachmentId=eve.currentTarget.id,selectedAttachment=this.attachments.find(attachment=>attachment.Id===attachmentId),documentId=selectedAttachment[VlocityPCUtils.getCustomFieldName("AttachmentId")],deleteConfirmText=this.translationSdk.translate("PCConfirmMessage");this.deleteAttachmentConfirm(attachmentId,documentId,deleteConfirmText);});}});}setupPreviewEvents(){const attachmentPreviewIcons=this.querySelectorAll(".vpc-attachment-preview-icon");attachmentPreviewIcons.forEach(attachmentPreview=>{const isListening=attachmentPreview.hasAttribute("isListening");if(!isListening){attachmentPreview.setAttribute("isListening",!0);attachmentPreview.addEventListener("click",eve=>{const attachmentPreview=this.querySelector("vlocity-pc-attachments-preview"),index=eve.currentTarget.id,vlocityDataTable=this.querySelector("vlocity-data-table");let attachments=this.attachments;if(vlocityDataTable.sortedby&&vlocityDataTable.sortedby.fieldName){attachments=vlocityDataTable.itemsArray;}attachmentPreview.showPreview(attachments,index);});}});}setupSelectionEvents(){const attachmentSelectIcons=this.querySelectorAll(".vpc-attachment-select-icon");attachmentSelectIcons.forEach(attachmentSelectIcon=>{const isListening=attachmentSelectIcon.hasAttribute("isListening");if(!isListening){attachmentSelectIcon.setAttribute("isListening",!0);attachmentSelectIcon.querySelector("input[name='vpc-attachment-select-checkbox']").addEventListener("change",event=>{const selectedAttachment=this.attachments.find(attachment=>attachment.Id===event.target.value);selectedAttachment.isSelected=event.target.checked;if(selectedAttachment.isSelected){this.selectedAttachments.push({Id:selectedAttachment.Id,documentId:selectedAttachment[VlocityPCUtils.getCustomFieldName("AttachmentId")]});}else{this.selectedAttachments=this.selectedAttachments.filter(attachment=>attachment.Id!==selectedAttachment.Id);}this.enableDeleteSelectedButton=0<this.selectedAttachments.length;this.setSelectAllCheckbox(this.selectedAttachments.length===this.attachments.length);this.render();});}});}selectOrDeselectAllAttachments(){this.selectedAttachments=[];this.attachments.forEach(attachment=>{attachment.isSelected=this.allSelected;if(this.querySelector(`input[id='checkbox-${attachment.Id}']`)){this.querySelector(`input[id='checkbox-${attachment.Id}']`).checked=attachment.isSelected;}if(attachment.isSelected){this.selectedAttachments.push({Id:attachment.Id,documentId:attachment[VlocityPCUtils.getCustomFieldName("AttachmentId")]});}});this.enableDeleteSelectedButton=0<this.selectedAttachments.length;}setSelectAllCheckbox(value){const selectAllCheckbox=this.querySelector(".vlocity-select-all-checkbox");if(selectAllCheckbox){selectAllCheckbox.querySelector("input").checked=value;this.allSelected=value;this.render();}}showMultipleAttachmentConfirm(){const deleteConfirmText=this.translationSdk.translate("PCDeleteConfirmHelpTextMultiple");let attachmentIds=null,documentIds=null;this.selectedAttachments.forEach(attachment=>{attachmentIds=attachmentIds?attachmentIds+","+attachment.Id:attachment.Id;documentIds=attachment.documentId?documentIds?documentIds+","+attachment.documentId:attachment.documentId:documentIds;});this.deleteAttachmentConfirm(attachmentIds,documentIds,deleteConfirmText);}reloadAttachments(){this.attachments=[];this.getAttachments();}updateAttachmentRecord(updatedRecord,selectedAttachmentId){const selectedAttachment=this.attachments.find(attachment=>attachment.Id===selectedAttachmentId);if(!this.listConfig.sortBy&&selectedAttachment[VlocityPCUtils.getCustomFieldName("SequenceNumber")]!==updatedRecord[VlocityPCUtils.getCustomFieldName("SequenceNumber")]){this.reloadAttachments();}else{if(updatedRecord[VlocityPCUtils.getCustomFieldName("IsDefaultImage")]){const defaultImage=this.attachments.find(attachment=>!0===attachment[VlocityPCUtils.getCustomFieldName("IsDefaultImage")]);if(defaultImage&&selectedAttachment.Id!==defaultImage.Id){defaultImage[VlocityPCUtils.getCustomFieldName("IsDefaultImage")]=!1;}}const fieldNames=["Name",...VlocityPCUtils.getCustomFieldNames(["AttachmentId","ContentType","Description","IsDefaultImage","SequenceNumber","UrlLong"])];fieldNames.forEach(field=>{selectedAttachment[field]=updatedRecord[field];});this.setAttachmentDownloadUrl();this.querySelector("vlocity-data-table").setItems(this.attachments);this.render();}}onAddAttachment(){this.dispatchEvent(new CustomEvent("onAddAttachment"));}deleteAttachmentConfirm(attachmentIds,documentIds,deleteConfirmText){const attachmentDeleteConfirm=this.querySelector("#deleteAttachmentConfirmation");attachmentDeleteConfirm.setAttribute("helptext",deleteConfirmText);attachmentDeleteConfirm.show().then(()=>{VlocityPCUtils.showSpinner();this.deleteVlocityAttachments(attachmentIds,documentIds);});}deleteVlocityAttachments(attachmentId,documentId){this.sdk.deleteSalesforceSobjectRecords(attachmentId).then(result=>{const deleteError=VlocityPCUtils.getErrorFromSuccessResponse(result);if(""!==deleteError){VlocityPCUtils.hideSpinner();this.toastError(deleteError,this.translationSdk.translate("PCToastErrorTitle"));}else{if(documentId){this.deleteSalesForceDocuments(documentId,attachmentId);}else{VlocityPCUtils.hideSpinner();this.toastSuccess(this.translationSdk.translate("PCAttachmentMultipleDeleteSuccess"),this.translationSdk.translate("PCToastSuccessTitle"));this.setOffsetOnDelete();this.reloadAttachments();this.resetSelectedAttachments(attachmentId);this.dispatchDeleteSuccessEvent(attachmentId);}}}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentMultipleDeleteError"));});}deleteSalesForceDocuments(documentId,attachmentId){this.sdk.deleteSalesforceSobjectRecords(documentId).then(()=>{this.toastSuccess(this.translationSdk.translate("PCAttachmentMultipleDeleteSuccess"),this.translationSdk.translate("PCToastSuccessTitle"));this.setOffsetOnDelete();this.reloadAttachments();this.resetSelectedAttachments(attachmentId);this.dispatchDeleteSuccessEvent(attachmentId);}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentMultipleDeleteError"));}).finally(()=>{VlocityPCUtils.hideSpinner();});}setOffsetOnDelete(){const pagination=this.querySelector("vlocity-pc-pagination");if((this.selectedAttachments.length===this.attachments.length||1===this.attachments.length)&&pagination.totalPages===this.listConfig.currentPage){this.listConfig.offset=0<this.listConfig.offset-this.listConfig.limit?this.listConfig.offset-this.listConfig.limit:0;}}resetSelectedAttachments(attachmentIds){if(this.selectedAttachments&&this.selectedAttachments.length){this.selectedAttachments=this.selectedAttachments.filter(attachment=>-1===attachmentIds.indexOf(attachment.Id));}this.enableDeleteSelectedButton=0<this.selectedAttachments.length;this.allSelected=this.allSelected&&this.selectedAttachments.length;}dispatchDeleteSuccessEvent(attachmentIds){this.dispatchEvent(new CustomEvent("onDeleteSuccess",{detail:attachmentIds}));}onDefaultImageFilter(){this.isDefaultImageFilterChecked=!this.isDefaultImageFilterChecked;if(this.isDefaultImageFilterChecked){this.listConfig.currentPage=1;this.listConfig.offset=0;}this.getAttachments();}setupAttachmentUploadBoxEvent(){const uploadbox=this.querySelector("vlocity-pc-attachment-uploadbox"),isListening=uploadbox.hasAttribute("isListening");if(!isListening){uploadbox.setAttribute("isListening",!0);uploadbox.addEventListener("vpcAttachmentsUploaded",()=>{this.reloadAttachments();});}}onChangePage(currentPage){if(this.listConfig.currentPage!==currentPage){this.resetSelectAll();this.listConfig.currentPage=currentPage;this.listConfig.offset=(currentPage-1)*this.listConfig.limit;this.getAttachments();}}processErrorResponse(error,fallbackMsg){const errorMessages=VlocityPCUtils.getErrorMessagesFromErrorsArray(error),errorMsg=""!==errorMessages?errorMessages:fallbackMsg;this.toastError(errorMsg,this.translationSdk.translate("PCToastErrorTitle"));}toastError(message,header){VlocityPCUtils.openToast(header,message,"error");}toastSuccess(message,header){VlocityPCUtils.openToast(header,message,"success");}}customElements.define(VlocityPCAttachmentList.is,VlocityPCAttachmentList);class VlocityPCFileInput extends HTMLElement{static get is(){return"vlocity-pc-file-input";}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.render();}render(){render(this.template(),this);}template(){const acceptStr=this.getAttribute("accept")||"";return html`
      <style>
        .vpc-file-input-wrapper {
          position: relative;
          display: inline-block;
        }

        .vpc-file-input-wrapper input[type="file"] {
          font-size: 30px;
          position: absolute;
          top: 0;
          left: 0;
          opacity: 0;
        }
        .vpc-file-input-cursor-pointer {
          cursor: pointer;
        }
        .vpc-file-input-no-cursor {
          cursor: not-allowed;
        }
      </style>
      <div class="vpc-file-input-wrapper">
        <label
          class="vpc-file-input-button ${this.getAttribute("buttonclass")||"slds-button slds-button_neutral"}"
        >
          ${this.getAttribute("label")||"Chose Files"}
        </label>
        ${this.getAttribute("multiple")?html`
              <input
                type="file"
                class="${this.getAttribute("extraclass")} ${this.hasAttribute("disabled")?"vpc-file-input-no-cursor":"vpc-file-input-cursor-pointer"}"
                ?disabled="${this.hasAttribute("disabled")}"
                multiple
                accept="${acceptStr}"
                @change="${event=>{this.handleFilesUploaded(event);}}"
              />
            `:html`
              <input
                type="file"
                class="${this.getAttribute("extraclass")} ${this.hasAttribute("disabled")?"vpc-file-input-no-cursor":"vpc-file-input-cursor-pointer"}"
                ?disabled="${this.hasAttribute("disabled")}"
                accept="${acceptStr}"
                @change="${event=>{this.handleFilesUploaded(event);}}"
              />
            `}
      </div>
    `;}handleFilesUploaded(event){if(event.target&&event.target.files){this.processFileList(event.target.files);}}/**
     * Disptaches the filesUploaded if the files are valid. Creates the FormData object as required by Salesforce bulk upload RestAPI
     * @param fileList - List of files either from <input type="file"> or from drop event's dataTransfer.files object.
     */processFileList(fileList){let formData=new FormData(),files=[...fileList];if(!this.isUploadValid(files)){event.target.value="";return;}let uploadData=VlocityPCUtils.getUploadDataForFiles(files,this.getAttribute("description"),this.getAttribute("folderid"));const blob=new Blob([JSON.stringify(uploadData)],{type:"application/json"});formData.append("collection",blob," ");files.forEach(file=>{formData.append(file.name,file);});this.dispatchEvent(new CustomEvent("vpcfilesuploaded",{detail:{formData:formData,fileList:files}}));}/**
     * Validates the uploaded files against the specified limits on number and size.
     * @param {*} files - List of files being uploaded.
     */isUploadValid(files){const maxFiles=this.getAttribute("limit"),maxSizeInMb=this.getAttribute("maxsizeinmb"),totalFileSizeInMb=this.getAttribute("maxtotalsizeinmb"),fileNameMaxLength=this.getAttribute("maxfilenamesize")?parseInt(this.getAttribute("maxfilenamesize")):null;if(maxFiles&&files.length>maxFiles){this.dispatchEvent(new CustomEvent("vpcfileuploaderror",{detail:`${this.translationSdk.translate("PCFileUploadMaxFilesError")} : ${maxFiles}`}));return!1;}if(maxSizeInMb){let inValid=files.some(file=>{return file.size/1024/1024>maxSizeInMb;});if(inValid){this.dispatchEvent(new CustomEvent("vpcfileuploaderror",{detail:`${this.translationSdk.translate("PCFileUploadMaxFileSizeError")} 
              ${maxSizeInMb} MB`}));return!1;}}if(totalFileSizeInMb&&VlocityPCUtils.getTotalFileSize(files)>totalFileSizeInMb){this.dispatchEvent(new CustomEvent("vpcfileuploaderror",{detail:`${this.translationSdk.translate("PCFileUploadTotalFileSizeError")} ${totalFileSizeInMb} MB`}));return!1;}if(fileNameMaxLength&&!isNaN(fileNameMaxLength)){let inValid=files.some(file=>{return 40<file.name.length;});if(inValid){this.dispatchEvent(new CustomEvent("vpcfileuploaderror",{detail:`${this.translationSdk.translate("PCFileUploadFileNameSizeError")} ${fileNameMaxLength}`}));return!1;}}return!0;}/**
     * Clears the file input.
     */resetFileInput(){const fileInput=this.querySelector("input[type='file']");if(fileInput){fileInput.value="";}}static get observedAttributes(){return["disabled"];}attributeChangedCallback(name,oldValue,newValue){if(!name||oldValue===newValue){return;}this.render();}}window.customElements.define(VlocityPCFileInput.is,VlocityPCFileInput);class VlocityPcAttachmentUploadbox extends HTMLElement{static get is(){return"vlocity-pc-attachment-uploadbox";}constructor(){super();}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();this.render();this.setupFileDropEvents();setTimeout(()=>{this.setupFileUploadEvents();this.setFolderId();});}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-attachments-upload-box {
          border: 1px dotted var(--vpc-primary-color);
          display: inline-block;
          width: 100%;
          text-align: center;
        }
        .vpc-file-input-element {
          height: 30px;
          width: 107px;
        }
        .vpc-attachments-dropzone__active {
          border: 2px dashed var(--vpc-primary-color);
        }
        .vpc-attachments-upload-box .vpc-attachments-info-icon {
          fill: var(--vpc-icon-light);
        }
        .vpc-attachment-drop-zone {
          background: var(--vpc-secondary-bg-color);
        }
      </style>
      <div class="vpc-attachments-upload-box">
        <vlocity-pc-dropzone
          accepts="files"
          dragactiveclass="vpc-attachments-dropzone__active"
          extraclass="vpc-attachment-drop-zone"
        >
          <slot>
            <vlocity-pc-file-input
              label="${this.translationSdk.translate("PCAttachmentFormFileUploadButton")}"
              description="Product Console File Upload"
              maxsizeinmb="${this.getAttribute("maxfilesizeinmb")}"
              multiple="true"
              extraclass="vpc-file-input-element"
              maxfilenamesize="40"
            >
            </vlocity-pc-file-input>
            <span
              >${this.translationSdk.translate("CPQOr")}&nbsp;${this.translationSdk.translate("PCAttachmentDropFiles")}
            </span>
            <vlocity-tooltip
              tooltiptype="iconlink"
              iconbaseurl="/_slds/icons/"
              nubbinposition="top"
              icon="utility:info"
              iconclass="vpc-attachments-info-icon"
              iconsize="xx-small"
              value="${this.translationSdk.translate("PCAttachmentMaxFileSizeMsg")} : ${this.getAttribute("maxfilesizeinmb")}MB
    
${this.translationSdk.translate("PCAttachmentMaxFileName")}"
            ></vlocity-tooltip>
          </slot>
        </vlocity-pc-dropzone>
      </div>
    `;}setFolderId(){const folderName=this.getAttribute("foldername")||"ProductConsole",fileInput=this.querySelector("vlocity-pc-file-input");this.sdk.getFolderByName(folderName).then(result=>{fileInput.setAttribute("folderid",result.records[0].Id);});}setupFileUploadEvents(){const fileInputs=this.querySelectorAll("vlocity-pc-file-input");if(0<fileInputs.length){fileInputs.forEach(fileInput=>{fileInput.addEventListener("vpcfilesuploaded",event=>{this.handleFilesUploadedEvent(event);});fileInput.addEventListener("vpcfileuploaderror",event=>{VlocityPCUtils.openToast("Error",event.detail,"error");});});}}handleFilesUploadedEvent(event){VlocityPCUtils.showSpinner();this.sdk.uploadToSalesforce(event.detail.formData).then(records=>{return records;}).then(records=>{const documentCreateError=VlocityPCUtils.getErrorFromSuccessResponse(records);if(""!==documentCreateError){this.toastError(documentCreateError,this.translationSdk.translate("PCToastErrorTitle"));}else{const createAttachmentsInput=this.sdk.createCreateVlocityAttachmentsInput();createAttachmentsInput.productId=this.getAttribute("productid");records.forEach((record,index)=>{record[VlocityPCUtils.getCustomFieldName("ContentType")]=VlocityPCUtils.getContentTypeFromMimeType(event.detail.fileList[index].type);record[VlocityPCUtils.getCustomFieldName("AttachmentId")]=record.id;});createAttachmentsInput.records=records;this.sdk.createVlocityAttachments(createAttachmentsInput).then(response=>{this.processSuccessResponse(response);this.dispatchUploadEvent("vpcAttachmentsUploaded");event.target.resetFileInput();}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentUploadError"));});}}).catch(error=>{this.processErrorResponse(error.errorJson,this.translationSdk.translate("PCAttachmentUploadError"));event.target.resetFileInput();}).finally(()=>{VlocityPCUtils.hideSpinner();});}processErrorResponse(error,fallbackMsg){const errorMessages=VlocityPCUtils.getErrorMessagesFromErrorsArray(error),errorMsg=""!==errorMessages?errorMessages:fallbackMsg;this.toastError(errorMsg,this.translationSdk.translate("PCToastErrorTitle"));}processSuccessResponse(response){const vlocityAttachmentCreateError=VlocityPCUtils.getErrorFromSuccessResponse(response);if(""!==vlocityAttachmentCreateError){this.toastError(vlocityAttachmentCreateError,this.translationSdk.translate("PCToastErrorTitle"));}else{this.toastSuccess(this.translationSdk.translate("PCAttachmentUploadSuccess"),this.translationSdk.translate("PCToastSuccessTitle"));}}setupFileDropEvents(){let dropzone=this.querySelector("vlocity-pc-dropzone");dropzone.addEventListener("vpcDropzoneFilesDropped",event=>{const fileInput=this.querySelector("vlocity-pc-file-input");fileInput.processFileList(event.detail);});}dispatchUploadEvent(eventName,details){this.dispatchEvent(new CustomEvent(eventName,{detail:details}));}toastError(message,header){VlocityPCUtils.openToast(header,message,"error");}toastSuccess(message,header){VlocityPCUtils.openToast(header,message,"success");}}customElements.define(VlocityPcAttachmentUploadbox.is,VlocityPcAttachmentUploadbox);var vlocityPcAttachmentUploadbox={VlocityPcAttachmentUploadbox:VlocityPcAttachmentUploadbox};const VlocityPCAttachmentLables=["Cancel","Save","PCAddAttachment","NewAttachment","PCAttachmentName","Description","ContentType","PCAttachmentFormFileUploadButton","URL","PCAttachmentIsDefault","Channel","PCAttachmentUpdateSuccess","PCAttachmentUpdateError","PCAttachmentCreateError","PCAttachmentCreateSuccess","PCToastSuccessTitle","PCToastErrorTitle","PCEditAttachmentFormHeading","PCDetailsError","PCAttachmentUploadSuccess","PCAttachmentUploadError","PCAttachmentDropFiles","CPQOr","NoRecordsToDisplay","PCAttachmentMaxFileSizeMsg","Max","PCConfirmMessage","PCAttachmentMultipleDeleteSuccess","PCAttachmentMultipleDeleteError","Delete","PCAttachmentFormDropFileText","SequenceNumber","PCAttachmentContentTypeMatchingError","PCAttachmentNoPreview","Preview","Edit","Name","CreatedDate","PCFileUploadMaxFilesError","PCFileUploadMaxFileSizeError","PCFileUploadTotalFileSizeError","PCFileUploadFileNameSizeError","Download","PCAttachmentNoPreviewException","PCDisplayNameCharacterLimit","PCAttachmentUrlValidation","PCAttachmentsPreviewError","PCDeleteConfirmHelpTextMultiple","PCDeleteSelectedAttachment","PCDefaultImageFilter","Entries","Showing","to","of","PCAll","Search","PCAttachmentMaxFileName","Required","RequiredField"];var vlocityPcAttachments_labels={VlocityPCAttachmentLables:VlocityPCAttachmentLables};class VlocityPCAttachments extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-attachments";}connectedCallback(){this.maxFileSizeInMb=5;this.showAttachmentsPage=!0;VlocityPCUtils.getLabels(VlocityPCAttachmentLables,vlocityPcConfig.userLocale).then(()=>{this.translationSdk=VlocitySDK.translation.getInstance();this.render();this.setupAttachmentListEvents();this.setupDisableDefaultDropEvents();});}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-attachments {
          min-height: 550px;
          background-color: var(--vpc-primary-bg-color);
        }
        .vpc-grid-layout {
          display: grid;
          grid-template-columns: 70% 30%;
        }

        .vpc-attachment-from-contanier {
          background-color: var(--vpc-secondary-bg-color);
        }
      </style>
      ${this.showAttachmentsPage?html`
            <div
              class="vpc-attachments slds-border_top slds-border_bottom slds-border_left slds-border_right ${this.showAttachmentForm?"vpc-grid-layout":""}"
            >
              <div class="vpc-attachment-list-container slds-p-around_large">
                <vlocity-pc-attachment-list
                  productid="${this.getAttribute("productId")}"
                  maxfilesizeinmb="${this.maxFileSizeInMb}"
                  foldername="${this.getAttribute("foldername")}"
                ></vlocity-pc-attachment-list>
              </div>
              ${this.showAttachmentForm?html`
                    <div class="vpc-attachment-from-contanier slds-border_left">
                      ${this.showForm?html`
                            <vlocity-pc-attachment-form
                              productid="${this.getAttribute("productId")}"
                              foldername="${this.getAttribute("foldername")}"
                              maxfilesizeinmb="${this.maxFileSizeInMb}"
                            ></vlocity-pc-attachment-form>
                          `:""}
                    </div>
                  `:""}
            </div>
          `:""}
    `;}setupDisableDefaultDropEvents(){this.addEventListener("dragover",event=>{event.preventDefault();});this.addEventListener("drop",event=>{event.preventDefault();});}setupAttachmentListEvents(){this.setupShowAttachmentFormEvents();this.setupAttachmentDeleteEvents();}setupShowAttachmentFormEvents(){const attachmentList=document.querySelector("vlocity-pc-attachment-list");attachmentList.addEventListener("onAddAttachment",()=>{this.showAddAttachmentForm();});attachmentList.addEventListener("onEditAttachment",event=>{this.showAddAttachmentForm(event.detail.attachmentId);});}setupAttachmentDeleteEvents(){const attachmentList=document.querySelector("vlocity-pc-attachment-list");attachmentList.addEventListener("onDeleteSuccess",event=>{if(this.selectedAttachmentId&&-1!==event.detail.indexOf(this.selectedAttachmentId)){this.showAttachmentForm=!1;this.render();}});}showAddAttachmentForm(attachmentId){this.selectedAttachmentId=attachmentId;this.showForm=!1;this.render();setTimeout(()=>{this.showAttachmentForm=!0;this.showForm=!0;this.render();this.setupAttachmentFormEvents();const attachmentForm=this.querySelector("vlocity-pc-attachment-form");attachmentForm.upsertAttachment(attachmentId);});}setupAttachmentFormEvents(){const attachmentForm=this.querySelector("vlocity-pc-attachment-form");attachmentForm.addEventListener("onAttachmentUpsert",event=>{if(this.selectedAttachmentId){this.updateAttachmentRecord(event.detail);}else{this.reloadAttachments();}this.showAttachmentForm=!1;this.render();});attachmentForm.addEventListener("onAttachmentUpsertCancel",()=>{this.showAttachmentForm=!1;this.render();});}reloadAttachments(){const attachmentsList=this.querySelector("vlocity-pc-attachment-list");attachmentsList.reloadAttachments();}updateAttachmentRecord(updatedAttachment){const attachmentsList=this.querySelector("vlocity-pc-attachment-list");attachmentsList.updateAttachmentRecord(updatedAttachment,this.selectedAttachmentId);}reloadAttachmentsTab(){this.showAttachmentsPage=!1;this.showForm=!1;this.showAttachmentForm=!1;this.render();setTimeout(()=>{this.showAttachmentsPage=!0;this.render();this.setupAttachmentListEvents();this.setupDisableDefaultDropEvents();});}}customElements.define(VlocityPCAttachments.is,VlocityPCAttachments);const VlocityPCAttributesLables=["Save","PCToastSuccessMessage","PCToastSuccessTitle","PCToastErrorTitle","PCApplicableObjects"];var vlocityPcAttributesLabels={VlocityPCAttributesLables:VlocityPCAttributesLables};class VlocityPCApplicableObjects extends HTMLElement{static get is(){return"vlocity-pc-applicable-objects";}template(){return html`
      <style>
        .vpc-attr-applicable-objects {
          display: grid;
          grid-template-columns: 48% 48%;
          grid-column-gap: 10px;
          border-top: 1px solid var(--vpc-primary-border-color);
        }
        .vpc-attr-applicable-objects .slds-form-element__label {
          font-size: 13px;
        }
        .via-slds .vpc-vf-page-heading {
          font-weight: 700;
        }
      </style>
      <div class="slds-m-bottom_x-small">
        <h2 class="vpc-vf-page-heading">
          ${this.translationSdk.translate("PCApplicableObjects")}
        </h2>
      </div>
      <div class="vpc-attr-applicable-objects slds-p-around_small">
        <div>
          ${repeat(this.allObjects.slice(0,Math.ceil(this.allObjects.length/2)),object=>object,object=>html`
              <div class="slds-form-element slds-m-bottom_x-small">
                <div class="slds-form-element__control">
                  <div class="slds-checkbox">
                    <input
                      type="checkbox"
                      name="isSelected"
                      id="selection${object.Id}"
                      ?checked="${object.isSelected}"
                      @change="${()=>{this.onSelection(object);}}"
                    />
                    <label
                      class="slds-checkbox__label"
                      for="selection${object.Id}"
                    >
                      <span class="slds-checkbox_faux"></span>
                      <span class="slds-form-element__label"
                        >${this.translationSdk.translate(object[VlocityPCUtils.getCustomFieldName("ObjectApiName")])||object.Name}</span
                      >
                    </label>
                  </div>
                </div>
              </div>
            `)}
        </div>
        <div>
          ${repeat(this.allObjects.slice(Math.ceil(this.allObjects.length/2)),object=>object,object=>html`
              <div class="slds-form-element slds-m-bottom_x-small">
                <div class="slds-form-element__control">
                  <div class="slds-checkbox">
                    <input
                      type="checkbox"
                      name="isSelected"
                      id="selection${object.Id}"
                      ?checked="${object.isSelected}"
                      @change="${()=>{this.onSelection(object);}}"
                    />
                    <label
                      class="slds-checkbox__label"
                      for="selection${object.Id}"
                    >
                      <span class="slds-checkbox_faux"></span>
                      <span class="slds-form-element__label"
                        >${this.translationSdk.translate(object[VlocityPCUtils.getCustomFieldName("ObjectApiName")])||object.Name}</span
                      >
                    </label>
                  </div>
                </div>
              </div>
            `)}
        </div>
      </div>
      <div class="slds-clearfix slds-p-around_small">
        <div class="slds-float_right slds-m-top_small">
          <vlocity-button
            styletype="brand"
            label="${this.translationSdk.translate("Save")}"
            @click="${()=>{this.saveApplicableObjects();}}"
          >
          </vlocity-button>
        </div>
      </div>
    `;}connectedCallback(){this.sdk=VlocitySDK.productconsole.getInstance();this.vlocityAttributesSdk=this.sdk.getVlocityAttributesSdk();this.translationSdk=VlocitySDK.translation.getInstance();VlocityPCUtils.getLabels(VlocityPCAttributesLables,vlocityPcConfig.userLocale).then(()=>{this.getApplicableObjects();this.changedObjects={newApplicableObjectClasses:[],newNonApplicableObjectClasses:[]};});}render(){render(this.template(),this);}getApplicableObjects(){VlocityPCUtils.showSpinner();const attributeId=this.getAttribute("attributeid");this.vlocityAttributesSdk.getObjects(attributeId).then(objects=>{this.allObjects=objects.allObjects;this.appliedObjects=objects.appliedObjects;this.getSobjectNameTranslations();VlocityPCUtils.hideSpinner();});}getSobjectNameTranslations(){const sobjectNames=this.allObjects.map(object=>{return object[VlocityPCUtils.getCustomFieldName("ObjectApiName")];});VlocityPCUtils.getLabels(VlocityPCAttributesLables,vlocityPcConfig.userLocale,sobjectNames).then(()=>{this.render();}).catch(()=>{this.render();});}saveApplicableObjects(){VlocityPCUtils.showSpinner();this.mapApplicableObjects();const input=this.vlocityAttributesSdk.createUpdateApplicableObjectsInput();input.attributeId=this.getAttribute("attributeId");input.newNonApplicableObjectClasses=this.changedObjects.newNonApplicableObjectClasses;input.newApplicableObjectClasses=this.changedObjects.newApplicableObjectClasses;this.vlocityAttributesSdk.saveApplicableObjects(input).then(()=>{VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCToastSuccessMessage"));}).catch(error=>{VlocityPCUtils.toastError(error);this.getApplicableObjects();}).finally(()=>{VlocityPCUtils.hideSpinner();});}mapApplicableObjects(){this.changedObjects={newApplicableObjectClasses:[],newNonApplicableObjectClasses:[]};this.allObjects.forEach(object=>{const appliedObject=this.appliedObjects.find(appliedObject=>appliedObject.Id===object.Id);if(appliedObject){if(!object.isSelected){this.changedObjects.newNonApplicableObjectClasses.push(object.Id);}}else{if(object.isSelected){this.changedObjects.newApplicableObjectClasses.push(object.Id);}}});}onSelection(selectedObject){selectedObject.isSelected=!selectedObject.isSelected;}disconnectedCallback(){}}window.customElements.define(VlocityPCApplicableObjects.is,VlocityPCApplicableObjects);class VlocityPCTableService{/**
   * Constructs the date string for pricing tab tables.
   * @param {Array<Array<string>>} columnData - data for the column for which the dates are being requested.
   * @return {string} dateString - the formatted date.
   */static getDateString(columnData){const startDateFieldName=VlocityPCUtils.getCustomFieldName("EffectiveFromDate"),endDateFieldName=VlocityPCUtils.getCustomFieldName("EffectiveUntilDate"),sDate=columnData[startDateFieldName]?columnData[startDateFieldName].value:null,eDate=columnData[endDateFieldName]?columnData[endDateFieldName].value:null;try{return VlocityPCUtils.formatDateRange(sDate,eDate);}catch(err){console.log("VlocityPCTableService.getDateString() : ",err);}}static getAmountString(promoOfferType){const namespacePrefix=vlocityPcConfig.namespacePrefix,loyaltyCode=promoOfferType[`${namespacePrefix}LoyaltyCode__c`],currencyCode=promoOfferType[`${namespacePrefix}CurrencyCode__c`],frequency=promoOfferType[`${namespacePrefix}RecurringFrequency__c`],loyaltyAmount=promoOfferType[`${namespacePrefix}LoyaltyAmount__c`],adjustmentMethod=promoOfferType[`${namespacePrefix}AdjustmentMethod__c`],amountField=promoOfferType[`${namespacePrefix}Amount__c`]||promoOfferType[`${namespacePrefix}AdjustmentValue__c`],chargeMeasurementName=promoOfferType.ChargeMeasurementName;let amountValue,codeValue;const frequencyVal=frequency&&"One time"!==frequency.value?frequency.value:"";let amountDisplay;if(loyaltyAmount&&loyaltyCode){amountValue=loyaltyAmount.value;codeValue=loyaltyCode.value;}else{amountValue=amountField.value;codeValue=adjustmentMethod&&"Percent"===adjustmentMethod.value?"%":currencyCode?currencyCode.value:"";}const translations=VlocitySDK.translation.getInstance();if(chargeMeasurementName){// Display amount with UoM
amountDisplay=VlocityPCUtils.formatTokenizedCustomLabels(translations.translate("PCAmountDisplayWithUOM"),amountValue,codeValue,frequencyVal,chargeMeasurementName.value);}else{// Display amount without UoM
amountDisplay=VlocityPCUtils.formatTokenizedCustomLabels(translations.translate("PCAmountDisplayWithoutUOM"),amountValue,codeValue,frequencyVal);}return amountDisplay;}static loadContextRules(context){// Loads all of the context rules on to the table
setTimeout(()=>{const dropZoneTds=context.querySelectorAll(".vpc-dropzone-container"),translations=VlocitySDK.translation.getInstance();for(let dropZoneTd of dropZoneTds){const dropZoneEle=dropZoneTd.querySelector(".vpc-dropzone"),container=dropZoneEle&&dropZoneEle.children[0];if(container){container.innerText="";container.classList.add("vpc-pill-container");}const item=JSON.parse(dropZoneEle.parentElement.getAttribute("ruleSets"));if(!item.records){dropZoneEle.innerHTML=`<div><p class="vpc-dropzone-text">${translations.translate("PCDropRulesHere")}</p></div>`;continue;}VlocityPCTableService.rulesAggregator(item,dropZoneEle,container,dropZoneTd,context);}},0);}static rulesAggregator(item,dropZoneEle,container,dropZoneTd,context){const translations=VlocitySDK.translation.getInstance(),counterPill=document.createElement("div");counterPill.innerText=`+`;counterPill.classList.add("vpc-table-pill");for(let rule of item.records){const pill=document.createElement("div"),pillText=document.createElement("p"),pillActions=document.createElement("div");pillText.innerText=rule.Name;pillActions.classList.add("vpc-pill-actions");pillActions.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="vpc-entry-action-button" viewBox="0 0 24 24" id="delete">
      <path d="M21 4.6h-5.8V2.8c0-1-.8-1.9-1.8-1.9h-2.8c-1 0-1.8.9-1.8 1.9v1.8H3c-.4 0-.7.3-.7.7v1.4c0 .4.3.7.7.7h18c.4 0 .7-.3.7-.7V5.3c0-.4-.3-.7-.7-.7zM10.6 3.2c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.4h-2.8V3.2zm8.6 6H4.8c-.3 0-.6.4-.6.7v10.9c0 1.3 1 2.3 2.3 2.3h11c1.3 0 2.3-1 2.3-2.3V9.9c0-.3-.3-.7-.6-.7zm-8.6 10.2c0 .3-.2.4-.4.4h-1c-.2 0-.4-.1-.4-.4v-6.5c0-.3.2-.4.4-.4h1c.2 0 .4.1.4.4v6.5zm4.6 0c0 .3-.2.4-.4.4h-1c-.2 0-.4-.1-.4-.4v-6.5c0-.3.2-.4.4-.4h1c.2 0 .4.1.4.4v6.5z"></path>
    </svg><div class="vpc-spinner-container">
    <div
      role="status"
      class="slds-spinner slds-spinner_small slds-hide slds-spinner_brand slds-align_absolute-center"
    >
      <span class="slds-assistive-text">Loading</span>
      <div class="slds-spinner__dot-a"></div>
      <div class="slds-spinner__dot-b"></div>
    </div>
  </div>`;pillActions.setAttribute("id",rule.Id);pill.appendChild(pillText);pill.appendChild(pillActions);pill.classList.add("vpc-table-pill");pill.querySelector(".vpc-entry-action-button").addEventListener("click",()=>{VlocityPCTableService.deleteContextRule(!1,{id:rule.Id},context);});container.appendChild(pill);dropZoneEle.classList.add("vpc-dropzone-populated");if(1<item.records.length){counterPill.addEventListener("click",e=>{VlocityPCTableService.loadAllContextRules(item.records,container,context);dropZoneEle.classList.add("vpc-dropzone-populated","vpc-wrap-rules");});container.appendChild(counterPill);counterPill.innerText=`+ ${item.records.length-1} ${translations.translate("CPQMore")}`;break;}}}static loadAllContextRules(rules,ruleContainer,context){ruleContainer.innerText="";if(!rules){return;}for(let rule of rules){const pill=document.createElement("div"),pillText=document.createElement("p"),pillActions=document.createElement("div");pillText.innerText=rule.Name;pillActions.classList.add("vpc-pill-actions");pillActions.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" class="vpc-entry-action-button" viewBox="0 0 24 24" id="delete">
      <path d="M21 4.6h-5.8V2.8c0-1-.8-1.9-1.8-1.9h-2.8c-1 0-1.8.9-1.8 1.9v1.8H3c-.4 0-.7.3-.7.7v1.4c0 .4.3.7.7.7h18c.4 0 .7-.3.7-.7V5.3c0-.4-.3-.7-.7-.7zM10.6 3.2c0-.2.2-.4.5-.4h1.8c.3 0 .5.2.5.4v1.4h-2.8V3.2zm8.6 6H4.8c-.3 0-.6.4-.6.7v10.9c0 1.3 1 2.3 2.3 2.3h11c1.3 0 2.3-1 2.3-2.3V9.9c0-.3-.3-.7-.6-.7zm-8.6 10.2c0 .3-.2.4-.4.4h-1c-.2 0-.4-.1-.4-.4v-6.5c0-.3.2-.4.4-.4h1c.2 0 .4.1.4.4v6.5zm4.6 0c0 .3-.2.4-.4.4h-1c-.2 0-.4-.1-.4-.4v-6.5c0-.3.2-.4.4-.4h1c.2 0 .4.1.4.4v6.5z"></path>
    </svg><div class="vpc-spinner-container">
    <div
      role="status"
      class="slds-spinner slds-spinner_small slds-hide slds-spinner_brand slds-align_absolute-center"
    >
      <span class="slds-assistive-text">Loading</span>
      <div class="slds-spinner__dot-a"></div>
      <div class="slds-spinner__dot-b"></div>
    </div>
  </div>`;pillActions.setAttribute("id",rule.Id);pill.appendChild(pillText);pill.appendChild(pillActions);pill.querySelector(".vpc-entry-action-button").addEventListener("click",()=>{VlocityPCTableService.deleteContextRule(!1,{id:rule.Id},context);});pill.classList.add("vpc-table-pill");ruleContainer.appendChild(pill);}}static deleteContextRule(isFormDelete,eventData,context){if(isFormDelete){VlocityPCTableService.contextRuleFormBasedDeletion(eventData,context);}else{VlocityPCTableService.contextRuleTableBasedDeletion(eventData,context);}}static contextRuleTableBasedDeletion(eventData,context){const pillActions=context.querySelectorAll(".vpc-pill-actions"),isTableBased=!0;for(let actionContainer of pillActions){if(actionContainer.id===eventData.id){actionContainer.classList.add("vpc-pill-actions-wait-state");actionContainer.querySelector(".slds-spinner").classList.remove("slds-hide");this.runContextRuleDeletion(eventData,context,isTableBased);break;}}}static contextRuleFormBasedDeletion(eventData,context){const records=context.records;let ruleFound=!1;for(let record of records){const rules=record.Rules.records||[];for(let rule of rules){if(rule.Id===eventData.id){VlocityPCTableService.runContextRuleDeletion(eventData,context);ruleFound=!0;break;}}if(ruleFound){break;}}}static runContextRuleDeletion(eventData,context,isTableBased){context.productConsole.deleteContextRule(VlocityPCTableService.getDeleteContextRuleInput(eventData.id,context)).then(response=>{if("adjustmentContext"!==context.getAttribute("context")||"overrideContext"!==context.getAttribute("context")){context.refreshTableData();}if(isTableBased){pubsub.fire("vpccontextruledeleted","result",{id:eventData.id});}});}static getDeleteContextRuleInput(id,context){return context.productConsole.createDeleteContextRuleInput(id);}static setPricingVariablesForEditMode(priceListEntryToEdit,context){const namespacePrefix=vlocityPcConfig.namespacePrefix;context.pricingElementId=priceListEntryToEdit[`${namespacePrefix}PricingElementId__c`].value;context.pricingVariableId=priceListEntryToEdit[`${namespacePrefix}PricingVariableId__c`].value;context.priceListId=priceListEntryToEdit[`${namespacePrefix}PriceListId__c`].value;}static showFilterSection(addOrRemove,context){const filterSection=context.querySelector(".vpc-filter-section");if(filterSection.classList.contains("vpc-hide-side-bar-item")===addOrRemove){filterSection.classList[addOrRemove?"remove":"add"]("vpc-hide-side-bar-item");context.querySelector(".vpc-quick-add-button").classList[addOrRemove?"remove":"add"]("vpc-hide-side-bar-item");context.querySelector(".vpc-table-button-wrapper").classList[addOrRemove?"remove":"add"]("vpc-empty-table-mode");}if(context.pagination.classList.contains("vpc-hide-side-bar-item")===addOrRemove){context.pagination.classList[addOrRemove?"remove":"add"]("vpc-hide-side-bar-item");}VlocityPCTableService.showTable(context,addOrRemove);}static refreshRules(context){const dropZonesTds=context.querySelectorAll(".vpc-dropzone-container");for(let dropZonesTd of dropZonesTds){setTimeout(()=>{dropZonesTd.querySelector(".vpc-dropzone").classList.remove("vpc-dropzone-populated");const dropZoneText=dropZonesTd.children[0];if(dropZoneText){dropZoneText.classList.remove("vpc-hide-side-bar-item");}},0);}}static isRuleAssinged(dropZone,newRuleName){const ruleSets=JSON.parse(dropZone.getAttribute("ruleSets")),rules=ruleSets.totalSize?ruleSets.records:[];for(let rule of rules){if(rule.Name===newRuleName){return!0;}}return!1;}static initDropZone(context,tableContext){const dropZones=context.querySelectorAll("vlocity-pc-dropzone");context.contextRuleWaitState=!1;dropZones.forEach(dropZone=>{dropZone.addEventListener("vpcDropzoneItemDropped",e=>{const dropZoneEle=e.target.querySelector(".vpc-dropzone"),item=JSON.parse(e.detail);if("promotions"===item.type&&"promotion"===tableContext){dropZoneEle.classList.remove("vpc-drop-zone-eligible");context.existingPromotion=item.Id;context.createPromotionItem(item);return;}if("rules"===item.type){dropZoneEle.classList.remove("vpc-drop-zone-eligible");VlocityPCTableService.addContextRuleToTable(dropZone,item,context);}});});}static addContextRuleToTable(dropZone,item,context){if(!VlocityPCTableService.isRuleAssinged(dropZone,item.Name)&&!context.contextRuleWaitState){context.contextRuleWaitState=!0;VlocityPCTableService.addContextRule({id:item.Id,priceListEntryId:dropZone.getAttribute("priceListEntryId")},context);}}static makeContainerDraggable(context){// Initializes all of the dropzones and makes the dropzone container draggable
const containers=context.querySelectorAll(".vpc-dropzone-container");containers.forEach(container=>{container.setAttribute("draggable",!0);container.addEventListener("dragenter",e=>{const dropZoneEle=container.querySelector(".vpc-dropzone");dropZoneEle.classList.add("vpc-drop-zone-eligible");});});containers.forEach(container=>{container.addEventListener("dragleave",e=>{const dropZoneEle=container.querySelector(".vpc-dropzone");dropZoneEle.classList.remove("vpc-drop-zone-eligible");});});}static addContextRule(ruleSetObject,context){context.productConsole.addContextRuleSetToPriceListEntry(VlocityPCTableService.getContextRuleInput(ruleSetObject,context)).then(response=>{context.refreshTableData();});}static getContextRuleInput(ruleSetObject,context){return context.productConsole.createContextRuleSetInput({objectId:ruleSetObject.priceListEntryId,ruleId:ruleSetObject.id});}static setCreateButtonWaitState(actionsContainer){// Show spinner in the button
const actionButtons=actionsContainer.querySelectorAll(".vpc-entry-action-button");for(let actionButton of actionButtons){actionButton.classList.add("vpc-hide-side-bar-item");}const spinner=actionsContainer.querySelector(".vpc-spinner-container");spinner.classList.add("vpc-entry-actions-wait-state");spinner.querySelector(".slds-spinner").classList.remove("slds-hide");}static deleteConfirmationHandler(e,eventData){pubsub.fire("vpcpricingdeleteconfirmation","deleteConfirm",{deleteConfirm:{event:e,eventData:eventData}});this.deleteHandlerObj={deleteConfirm:VlocityPCTableService.deleteHandler.bind(VlocityPCTableService)};pubsub.register("vpcpricingdelete",this.deleteHandlerObj);}static deleteHandler(details){const context=details.eventDetails.eventData.context;context.productConsole.deletePriceListEntry(VlocityPCTableService.getDeletePriceListEntryInput(details.eventDetails.eventData)).then(()=>{const eventData=details.eventDetails.eventData;pubsub.fire("vpcrecorddeleted","result",{priceListEntryId:eventData.priceListEntryId});if(!eventData.type){if(1===context.records.length){context.initializeComponent();}else{context.refreshTableData();}pubsub.fire("vpccheckifdeletedrecordineditform","result",{priceListEntryId:eventData.priceListEntryId});}VlocityPCUtils.openToast(`${context.translations.translate("PCToastSuccessTitle")}`,`${VlocityPCTableService.getPriceType(context,eventData.type)} "${eventData.name}" ${context.translations.translate("PCWasDeleted")}`,"success");}).finally(()=>{pubsub.unregister("vpcpricingdelete",this.deleteHandlerObj);});}static getPriceType(context,type){const pleType=context.getAttribute("context")||type;switch(pleType){case"adjustmentContext":return`${context.translations.translate("CPQAdjustment")}`;case"overrideContext":return`${context.translations.translate("CPQAdjustmentOverride")}`;case"priceContext":return`${context.translations.translate("PCPriceListEntry")}`;case"costContext":return`${context.translations.translate("PCCostListEntry")}`;default:return`${context.translations.translate("PCEntry")}`;}}static getDeletePriceListEntryInput(eventData){// The input to include as a parameter in the deletePriceListEntry function
return eventData.context.productConsole.createDeletePriceListEntryInput(eventData.priceListEntryId);}static postTableRenderActions(context,tableContext){VlocityPCTableService.refreshRules(context);VlocityPCTableService.initDropZone(context,"promotion");VlocityPCTableService.makeContainerDraggable(context);VlocityPCTableService.loadContextRules(context);context.activeButtonWaitState=!1;context.contextRuleWaitState=!1;VlocityPCTableService.showFilterSection(!0,context);VlocityPCTableService.unsetTableBorder(context);}// For Firefox table rendering issue
static unsetTableBorder(context){const table=context.querySelector("table");table.classList.add("vpc-table-unset");setTimeout(()=>{table.classList.remove("vpc-table-unset");},500);}static isColumnSortable(header){const translations=VlocitySDK.translation.getInstance();return`${translations.translate("Rules")}`!==header&&`${translations.translate("Actions")}`!==header;}static toggleSortArrows(column,context){VlocityPCTableService.initializeSortArrows(context);const upArrow=column.querySelector(".vpc-up-arrow-svg"),downArrow=column.querySelector(".vpc-down-arrow-svg");if(column.sortAsc){upArrow&&upArrow.classList.remove("slds-hide");downArrow&&downArrow.classList.add("slds-hide");}else{upArrow&&upArrow.classList.add("slds-hide");downArrow&&downArrow.classList.remove("slds-hide");}}static initializeSortArrows(context){const upArrows=context.querySelectorAll(".vpc-up-arrow-svg"),downArrows=context.querySelectorAll(".vpc-down-arrow-svg");for(let i=0;i<upArrows.length;i++){upArrows[i].classList.add("slds-hide");downArrows[i].classList.add("slds-hide");}}static sortByColumn(column,columnName,context,columnClicked){// Removing sorted class from the previous column and add it to the selected column
let previousCol=context.querySelector(".vpc-table-column-sorted");if(previousCol){previousCol.classList.remove("vpc-table-column-sorted");}column.classList.add("vpc-table-column-sorted");if(!column.getAttribute("sortasc")){while(!column.getAttribute("sortasc")){column=column.parentElement;}}if(context.initialSort){column.sortAsc=!0==column.getAttribute("sortAsc");context.initialSort=!1;}const sortAsc=VlocityPCTableService.getSortDirection(column,columnClicked,context),compare=VlocityPCTableService.getCompareFunction(columnName,sortAsc);VlocityPCTableService.toggleSortArrows(column,context);context.previousSort={sortAsc:column.sortAsc,column,columnName};context.populateTable(VlocityPCTableService.getSortedData(context,compare,`${context.translations.translate("PCPromotionName").toLowerCase()}`===columnName.toLowerCase()));}static getSortDirection(column,columnClicked,context){if(columnClicked){column.sortAsc=!column.sortAsc;}else{column.sortAsc=context.previousSort?context.previousSort.sortAsc:column.sortAsc;}return column.sortAsc;}static getSortedData(context,compare,isPromotionName){let columnToSort=[];if("priceContext"===context.context||"costContext"===context.context){const filteredRecords=context.filteredRows,ActiveRecords=context.activeRows,activeCheckBoxValue=context.querySelector(".vpc-is-active-checkbox").querySelector("input").checked,searchBoxValue=context.querySelector(".vpc-table-search").value;let searchRecords=[];if(searchBoxValue){searchRecords=filteredRecords;}if(activeCheckBoxValue&&!searchBoxValue){searchRecords=ActiveRecords;}columnToSort=searchRecords.length||searchBoxValue||activeCheckBoxValue?searchRecords.sort(compare):context.records.sort(compare);}else{columnToSort=context.filteredRows?VlocityPCTableService.flattenTableData(VlocityPCUtils.deepArrayCopy(context.filteredRows)).sort(compare):VlocityPCTableService.flattenTableData(VlocityPCUtils.deepArrayCopy(context.records)).sort(compare);}return columnToSort;}static getCompareFunction(columnName,sortAsc){const translations=VlocitySDK.translation.getInstance(),namespacePrefix=vlocityPcConfig.namespacePrefix;let prop="",compare=null;switch(columnName){case`${translations.translate("PCActive")}`:compare=VlocityPCTableService.getSortCompare(sortAsc,[`${namespacePrefix}IsActive__c`]);break;case`${translations.translate("PCPromotionOffer")}`:prop="promotionName";compare=(a,b)=>{const aProp=a[prop]||"",bProp=b[prop]||"";if(sortAsc){return aProp.localeCompare(bProp);}else{return bProp.localeCompare(aProp);}};break;case`${translations.translate("PCDisplayName")}`:prop="Name";compare=(a,b)=>{if(sortAsc){return a[prop].localeCompare(b[prop]);}else{return b[prop].localeCompare(a[prop]);}};break;case`${translations.translate("PCPriceList")}`:prop="PriceList";compare=(a,b)=>{if(sortAsc){return a[prop].value.localeCompare(b[prop].value);}else{return b[prop].value.localeCompare(a[prop].value);}};break;case`${translations.translate("PCAmount")}`:compare=VlocityPCTableService.getSortCompare(sortAsc,[`${namespacePrefix}Amount__c`,`${namespacePrefix}LoyaltyAmount__c`,`${namespacePrefix}AdjustmentValue__c`]);break;case`${translations.translate("PCAvailability")}`:prop=`${namespacePrefix}EffectiveFromDate__c`;compare=(date1,date2)=>{const a=date1[prop]?new Date(date1[prop].value):null,b=date2[prop]?new Date(date2[prop].value):null;if(sortAsc){return a-b;}else{return b-a;}};break;case`${translations.translate("PCType")}`:compare=VlocityPCTableService.getSortCompare(sortAsc,[`${namespacePrefix}IsOverride__c`]);break;}return compare;}static getSortCompare(sortAsc,prop){return(a,b)=>{const propA=a[prop[0]]||a[prop[1]]||a[prop[2]],propB=b[prop[0]]||b[prop[1]]||b[prop[2]];if(sortAsc){return propA.value-propB.value;}else{return propB.value-propA.value;}};}static updatePreviousSort(context){const headers=context.querySelectorAll("th");for(let header of headers){if(header.innerText.toLowerCase()===context.previousSort.columnName.toLowerCase()){context.previousSort.column=header;break;}}}static runInitialSort(context){if(context.initialSort){if(context.previousSort){VlocityPCTableService.updatePreviousSort(context);const previousSort=context.previousSort;VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,context,!1);}else{const thElems=context.querySelectorAll("th");let initialTh=null;for(let th of thElems){if(th.innerText.toUpperCase().trim()===context.translations.translate("PCAvailability").toUpperCase().trim()){initialTh=th;break;}}VlocityPCTableService.sortByColumn(initialTh,`${context.translations.translate("PCAvailability")}`,context,!1);VlocityPCTableService.toggleTable(context.records.length?context:null);context.filterActiveOnly(context.querySelector(".vpc-is-active-checkbox").querySelector("input").checked);}}}// Table must be flat to sort data better
static flattenTableData(arr){return arr&&arr.reduce((acc,curr)=>{const adjustmentRecords=curr&&curr.Adjustments&&curr.Adjustments.totalSize?curr.Adjustments.records:[],overrideRecords=curr&&curr.Overrides&&curr.Overrides.totalSize?curr.Overrides.records:[],allRecords=adjustmentRecords.concat(overrideRecords);if(Array.isArray(adjustmentRecords)&&adjustmentRecords.length||Array.isArray(overrideRecords)&&overrideRecords.length){VlocityPCTableService.addPromotionNames(allRecords,curr.Name,curr.Category);return acc.concat(VlocityPCTableService.flattenTableData(allRecords));}if(Array.isArray(curr)){return acc.concat(VlocityPCTableService.flattenTableData(curr));}else{return acc.concat(curr);}},[]);}static addPromotionNames(arr,promotionName,category){arr.forEach(adjustOrOverride=>{if("Promotion"===category){adjustOrOverride.promotionName=promotionName;}});return arr;}static addSearchIcon(context){const vlocityInput=context.querySelector("vlocity-input").querySelector(".slds-form-element"),searchIcon=document.createElement("vlocity-icon");searchIcon.setAttribute("baseurl","/_slds/icons/");searchIcon.setAttribute("icon","utility:search");searchIcon.setAttribute("size","x-small");searchIcon.setAttribute("extraclass","slds-icon-text-default");searchIcon.classList.add("vpc-search-icon");vlocityInput.classList.add(`${vlocityPcConfig.isLanguageRTL?"vpc-search-icon-left":"vpc-search-icon-right"}`);context.querySelector("vlocity-input").querySelector(".slds-form-element").appendChild(searchIcon);}static resetTableFilters(context){context.filterTable(context.querySelector(".vpc-table-search").value);context.filterActiveOnly(context.querySelector(".vpc-is-active-checkbox").querySelector("input").checked);}static toggleTable(context){const table=context&&context.querySelector("table");if(table&&table.classList.contains("slds-hide")){table.classList.remove("slds-hide");context.querySelector(".vpc-is-active-checkbox").classList.remove("vpc-hide-visibility");context.querySelector(".vpc-table-search").classList.remove("vpc-hide-visibility");context.querySelector(".vpc-table-toggle-arrow").setAttribute("icon","utility:chevrondown");}else{if(context&&table){table.classList.add("slds-hide");context.querySelector(".vpc-table-toggle-arrow").setAttribute("icon","utility:chevronright");context.querySelector(".vpc-is-active-checkbox").classList.add("vpc-hide-visibility");context.querySelector(".vpc-table-search").classList.add("vpc-hide-visibility");}}}static showTable(context,shouldShow){const table=context&&context.querySelector("table");if(table&&shouldShow){table.classList.remove("slds-hide");context.querySelector(".vpc-is-active-checkbox").classList.remove("vpc-hide-visibility");context.querySelector(".vpc-table-search").classList.remove("vpc-hide-visibility");context.querySelector(".vpc-table-toggle-arrow").setAttribute("icon","utility:chevrondown");}else{if(context&&table){table.classList.add("slds-hide");context.querySelector(".vpc-table-toggle-arrow").setAttribute("icon","utility:chevronright");context.querySelector(".vpc-is-active-checkbox").classList.add("vpc-hide-visibility");context.querySelector(".vpc-table-search").classList.add("vpc-hide-visibility");}}pubsub.fire("vpctablepopulated","result",{});}static initPagination(context){context.pagination=context.querySelector("vlocity-pc-pagination");const pagination=context.pagination;pagination.setAttribute("pagesize",context.limit);pagination.setAttribute("isListening",!0);pagination.addEventListener("onchangepage",e=>{VlocityPCTableService.paginationNavigationHandler(e,context);});}static paginationNavigationHandler(e,context){if(e.detail<=context.pagination.getAttribute("maxpages")){context.page=e.detail;context.postPriceListEntryActions({records:context.records});}}static getCurrentPage(tableData,context){const upperIndex=context.page*context.limit,lowerIndex=upperIndex-context.limit-1;return tableData.filter((column,index)=>{return index>lowerIndex&&index<upperIndex;});}static updatePagination(context){const totalPages=Math.ceil(context.filteredRows.length/context.limit);context.pagination.setAttribute("totalsize",context.filteredRows.length);context.pagination.setAttribute("maxpages",totalPages);VlocityPCTableService.showPagination(totalPages,context);}static showPagination(totalPages,context){if(parseInt(context.pagination.getAttribute("maxpages"))<parseInt(context.pagination.getAttribute("currentpage"))){if(totalPages){context.page=totalPages;context.querySelector("vlocity-pc-pagination").classList.remove("vpc-hide-side-bar-item");}else{context.page=1;context.querySelector("vlocity-pc-pagination").classList.add("vpc-hide-side-bar-item");}}}}var vlocityPcTableService={VlocityPCTableService:VlocityPCTableService};class VlocityPcChooseContextRulesForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-choose-context-rules-form";}template(){const translations=this.translations;return html`
      <style>
        vlocity-pc-choose-context-rules-form {
          display: none;
        }

        .vpc-pricing-sub-header {
          font-size: 12px;
          color: var(--vpc-primary-color);
          padding: 0 0 10px;
        }

        .vpc-context-rules-wrapper {
          margin: 0 0 150px;
          padding: 30px;
        }

        .vpc-context-rules-header-container {
          display: grid;
          grid-template-columns: 1fr 1fr;
        }

        .vpc-context-rules-button {
          font-size: 26px;
          font-weight: bold;
          justify-self: end;
          align-self: center;
        }

        .vpc-pricing-form-title {
          font-size: 14px;
        }

        .vpc-pc-context-rules-form
          .vpc-combobox
          [role="combobox"]
          input[readonly] {
          padding: 0 10px;
        }

        .vpc-pc-context-rules-form
          .vpc-combobox
          .slds-listbox
          .slds-media__figure {
          width: 0;
          margin: 0;
        }

        .vpc-rule-sets-container {
          display: grid;
          grid-template-columns: 8fr 1fr;
          height: 40px;
        }

        .vpc-delete-rule {
          font-size: 43px;
          font-weight: bold;
          justify-self: end;
          align-self: end;
        }

        .vpc-context-rules-wrapper
          .vpc-rule-sets-container
          .vpc-combobox
          .slds-listbox
          .slds-media__body {
          margin: 0 20px 0;
        }
      </style>

      <div class="vpc-pc-context-rules-form">
        <div class="vpc-context-rules-wrapper">
          <div class="vpc-context-rules-header-container">
            <div class="vpc-title-caps vpc-pricing-form-title">
              ${translations.translate("PCContextRules")}
            </div>
          </div>
          <div class="vpc-pricing-sub-header">
            ${translations.translate("PCContextRulesSubHeaderAdjustmentsOverrides")}
          </div>
          <div class="vpc-rule-sets-container">
            <vlocity-combobox
              class="vpc-combobox"
              placeholder="${translations.translate("PCSelectARuleSet")}"
              iconbaseurl="/_slds/icons/"
              searchable="true"
              options="${JSON.stringify(this.ruleSetsArr.map(ruleSet=>{return{label:`${ruleSet.Name}`,value:`${ruleSet.Id}`};}))}"
            ></vlocity-combobox>
            <div class="vpc-delete-rule" @click="${e=>this.deleteRuleSet(e)}">
              -
            </div>
          </div>
        </div>
      </div>
    `;}connectedCallback(){this.initializeComponent();}initializeComponent(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.translations=VlocitySDK.translation.getInstance();const contextRulesInput=this.productConsole.createQuickAddPricingPropertiesInput();contextRulesInput.type="Rule";this.productConsole.getQuickAddPricingRules(contextRulesInput).then(result=>{this.allRuleSetsArr=[];this.ruleSetsArr=[];if(result&&result.result){this.allRuleSetsArr=result.result.results||[];this.ruleSetsArr=result.result.results||[];}render(this.template(),this);setTimeout(()=>{const container=this.querySelectorAll(".vpc-rule-sets-container");this.setInputListener(container);},0);});this.initEventHandlers();VlocityPCUtils.setComboboxHandlers(this);}initEventHandlers(){pubsub.register("vpccontextchange",{result:this.contextChangeHandler.bind(this)});pubsub.register("vpceditmodeon",{result:this.setEditModeState.bind(this)});pubsub.register("vpcshownewpromotionform",{result:this.hideContextRules.bind(this)});pubsub.register("vpcshowpriceform",{result:this.hideContextRules.bind(this)});pubsub.register("vpccheckifdeletedrecordineditform",{result:this.checkIfDeletedRecordInEditMode.bind(this)});pubsub.register("vpccontextruledeleted",{result:this.removeDeletedContextRuleFormList.bind(this)});}removeDeletedContextRuleFormList(e){this.tableBasedContextRuleRemoval(e.id);}checkIfDeletedRecordInEditMode(e){if(this.getAttribute("priceListEntryId")===e.priceListEntryId){pubsub.fire("vpccancelform","result",{});}}hideContextRules(){this.classList.add("vpc-hide-side-bar-item");}contextChangeHandler(contextEvent){this.context=contextEvent.context;const subHeader=this.querySelector(".vpc-pricing-sub-header");if(subHeader){subHeader.innerText="priceContext"===this.context||"costContext"===this.context?this.translations.translate("PCContextRulesSubHeaderPriceCost"):this.translations.translate("PCContextRulesSubHeaderAdjustmentsOverrides");}}setEditModeState(editMode){this.isEditMode=editMode.isOn;if(this.isEditMode){this.editModePriceListEntryId=editMode.priceListEntryId;}}/**
     * Creates a new context rules combobox.
     */addContextRuleCombo(){const comboboxContainer=document.createElement("div");comboboxContainer.classList.add("vpc-rule-sets-container");this.querySelector(".vpc-context-rules-wrapper").appendChild(comboboxContainer);// Add the combobox to it's container.
const container=this.querySelectorAll(".vpc-rule-sets-container");if(container){render(this.createRuleCombobox(),container[container.length-1]);}setTimeout(()=>{this.setInputListener(container);},0);}/**
     * Creates a new combo box template for context rules.
     * @param {object} translations - the list of translated labels.
     * @return {HTMLElement} - the vlocity-combobox element for the rule sets.
     */createRuleCombobox(){return html`
      <vlocity-combobox
        class="vpc-combobox"
        placeholder="${this.translations.translate("PCSelectARuleSet")}"
        iconbaseurl="/_slds/icons/"
        searchable="true"
        options="${JSON.stringify(this.ruleSetsArr.map(ruleSet=>{return{label:`${ruleSet.Name}`,value:`${ruleSet.Id}`};}))}"
      ></vlocity-combobox>
      <div class="vpc-delete-rule" @click="${e=>this.deleteRuleSet(e)}">
        -
      </div>
    `;}setInputListener(container){const input=container[container.length-1].getElementsByClassName("slds-input")[0];input.addEventListener("blur",e=>{this.productConsole.addContextRuleSetToPriceListEntry(this.getContextRuleInput(container)).then(response=>{const addedContextRule=container[container.length-1].getElementsByTagName("vlocity-combobox")[0];addedContextRule.setAttribute("disabled","true");addedContextRule.setAttribute("assignedId",response.id);pubsub.fire("vpcrulesetadded","result",{contextRuleToAdd:response,context:this.context});this.ruleSetsArr=this.ruleSetsArr.filter(rule=>{return rule.Id!==addedContextRule.value;});if(this.ruleSetsArr.length){this.addContextRuleCombo();}});});}getContextRuleInput(container){return this.productConsole.createContextRuleSetInput({objectId:this.isEditMode?this.editModePriceListEntryId:this.getAttribute("priceListEntryId"),ruleId:container[container.length-1].getElementsByTagName("vlocity-combobox")[0].value});}/**
     * Deletes combo boxes for context rules.
     * @param {event} e - the combobox delete button.
     */deleteRuleSet(e){// Deletes the combo container.
const combobox=e.target.previousElementSibling;if(combobox.value){this.querySelector(".vpc-context-rules-wrapper").removeChild(e.target.parentElement);}const id=combobox.getAttribute("assignedId"),value=combobox.value;if("adjustmentContext"===this.context||"overrideContext"===this.context){this.records=this.promotions;VlocityPCTableService.deleteContextRule(!0,{id},this);}pubsub.fire("vpcdeletecontextrule","result",{id});this.removeDeletedContextRuleFromList(value);// Adds back a context rule combo if the last combo is deleted.
if(!this.querySelectorAll(".vpc-rule-sets-container").length){this.addContextRuleCombo();}}removeDeletedContextRuleFromList(value){const container=this.querySelectorAll(".vpc-rule-sets-container");for(let rule of this.allRuleSetsArr){if(rule.Id===value){this.ruleSetsArr.push({Name:`${rule.Name}`,Id:`${rule.Id}`});const addedContextRule=container[container.length-1].getElementsByTagName("vlocity-combobox")[0];if(1===this.ruleSetsArr.length){this.addContextRuleCombo();}else{addedContextRule.setAttribute("options",JSON.stringify(this.ruleSetsArr.map(ruleSet=>{return{label:`${ruleSet.Name}`,value:`${ruleSet.Id}`};})));}break;}}}tableBasedContextRuleRemoval(value){const container=this.querySelectorAll(".vpc-rule-sets-container");for(let wrapper of container){const combobox=wrapper.querySelector("vlocity-combobox");if(combobox.getAttribute("assignedid")===value){for(let rule of this.allRuleSetsArr){if(rule.Id===combobox.value){this.ruleSetsArr.push({Name:`${rule.Name}`,Id:`${rule.Id}`});this.querySelector(".vpc-context-rules-wrapper").removeChild(combobox.parentElement);const addedContextRule=container[container.length-1].getElementsByTagName("vlocity-combobox")[0];if(1===this.ruleSetsArr.length){this.addContextRuleCombo();}else{addedContextRule.setAttribute("options",JSON.stringify(this.ruleSetsArr.map(ruleSet=>{return{label:`${ruleSet.Name}`,value:`${ruleSet.Id}`};})));}break;}}}}// Adds back a context rule combo if the last combo is deleted.
if(!this.querySelectorAll(".vpc-rule-sets-container").length){this.addContextRuleCombo();}}disconnectedCallback(){this.contextChangeHandlerObj={result:this.contextChangeHandler.bind(this)};this.setEditModeStateHandler={result:this.setEditModeState.bind(this)};this.hideContextRulesHandler={result:this.hideContextRules.bind(this)};this.checkIfDeletedRecordInEditModeHandler={result:this.checkIfDeletedRecordInEditMode.bind(this)};this.removeDeletedContextRuleFormListHandler={result:this.removeDeletedContextRuleFormList.bind(this)};pubsub.unregister("vpccontextchange",this.contextChangeHandlerObj);pubsub.unregister("vpceditmodeon",this.setEditModeStateHandler);pubsub.unregister("vpcshownewpromotionform",this.hideContextRulesHandler);pubsub.unregister("vpcshowpriceform",this.hideContextRulesHandler);pubsub.unregister("vpccheckifdeletedrecordineditform",this.checkIfDeletedRecordInEditModeHandler);pubsub.unregister("vpccontextruledeleted",this.removeDeletedContextRuleFormListHandler);}get context(){return this.getAttribute("context");}set context(value){this.setAttribute("context",value);}}window.customElements.define(VlocityPcChooseContextRulesForm.is,VlocityPcChooseContextRulesForm);class VlocityPCDetailsPicklist extends HTMLElement{static get is(){return"vlocity-pc-details-picklist";}constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();}template(){return html`
      <style>
        .vpc-details-picklist_item {
          padding: 4px;
          background-color: var(--vpc-primary-bg-color);
          border: 1px solid var(--vpc-secondary-border-color);
          border-radius: 2px;
          margin-right: 5px;
          cursor: pointer;
          opacity: 0.9;
          margin-bottom: 5px;
          display: inline-block;
        }

        .vpc-details-picklist_item:hover {
          opacity: 1;
        }

        .vpc-details-picklist_item-selected {
          padding: 4px;
          background-color: var(--vpc-primary-color);
          color: white;
        }
      </style>
      ${this.options?this.options.map(opt=>{return html`
              <span
                @click=${()=>this.selectOption(opt)}
                class="vpc-details-picklist_item${this.isOptionSelected(opt)?" vpc-details-picklist_item-selected":""}"
                >${opt.Name}</span
              >
            `;}):""}
    `;}render(){render(this.template(),this);}connectedCallback(){this.render();}get options(){return this._options;}get selectedOption(){return this.getAttribute("selectedoption");}set selectedOption(value){this.setAttribute("selectedoption",value);}set options(value){this._options=value;this.render();}get isMultipicklist(){return this.hasAttribute("multipicklist");}isOptionSelected(opt){if(this.isMultipicklist){const opts=this.selectedOption.split(";");if(opts&&0<opts.length){return 0<=opts.findIndex(item=>opt[VlocityPCUtils.getCustomFieldName("Value")]===item);}else{return!1;}}return this.selectedOption===opt[VlocityPCUtils.getCustomFieldName("Value")];}selectOption(opt){if(this.isMultipicklist){let opts=this.selectedOption.split(";"),idx;if(opts&&0<opts.length){idx=opts.findIndex(item=>{return item===opt[VlocityPCUtils.getCustomFieldName("Value")];});}else{opts=[];}if(0<=idx){opts.splice(idx,1);}else{opts.push(opt[VlocityPCUtils.getCustomFieldName("Value")]);}this.selectedOption=opts.join(";");}else{if(this.selectedOption===opt[VlocityPCUtils.getCustomFieldName("Value")]){this.selectedOption="";}else{this.selectedOption=opt[VlocityPCUtils.getCustomFieldName("Value")];}}this.render();this.dispatchEvent(new CustomEvent("onvaluechange",{detail:{value:this.selectedOption}}));}static get observedAttributes(){return["selectedoption"];}attributeChangedCallback(){this.render();}}window.customElements.define(VlocityPCDetailsPicklist.is,VlocityPCDetailsPicklist);var vlocityPcDetailsPicklist={VlocityPCDetailsPicklist:VlocityPCDetailsPicklist};class VlocityPCEditAttribute extends HTMLElement{static get is(){return"vlocity-pc-edit-attribute";}constructor(){super();this.picklists={};this.productConsole=VlocitySDK.productconsole.getInstance();this.translations=VlocitySDK.translation.getInstance();this.datasource=this.productConsole.config.datasource;}static get observedAttributes(){return["attributeid"];}connectedCallback(){this.registerEvents();}registerEvents(){this.attributeToggleHandler={toggleSetting:this.onToggleSetting.bind(this)};pubsub.register("vpctoggleattributesetting",this.attributeToggleHandler);this.doneAndCancelHandler={done:this.saveAttributeAssignment.bind(this),cancel:this.cancelAttributeEdit.bind(this)};pubsub.register("ondone",this.doneAndCancelHandler);pubsub.register("oncancel",this.doneAndCancelHandler);}disconnectedCallback(){pubsub.unregister("vpctoggleattributesetting",this.attributeToggleHandler);pubsub.unregister("ondone",this.doneAndCancelHandler);pubsub.unregister("oncancel",this.doneAndCancelHandler);}onToggleSetting(toggleDetails){if(toggleDetails.attributeId===this.attrWrapper.attribute.Id){this.querySelector(`#${toggleDetails.settingName}`).checked=toggleDetails.value;this.settingChanged(toggleDetails.settingName,toggleDetails.value);}}attributeChangedCallback(){setTimeout(()=>{VlocityPCUtils.showSpinner();this.getAttributeAssignment().then(response=>{this.initialAttrAssgn=Object.assign({},response.result.attributeAssignment);this.attrWrapper=response.result;this.createSectionElement();this.setupExcludedPicklistItems();this.render();this.setupBehaviorValues();this.setupEvents();if(this.isPicklistAttribute()){this.setupExcludedPicklistEvents();}this.isDesignTimeRequiredAttribute();this.componentMounted=!0;}).finally(()=>{VlocityPCUtils.hideSpinner();});});}render(){render(this.template(),this);}set attrWrapper(value){this._wrapper=value;setTimeout(()=>{this.render();});}get attrWrapper(){return this._wrapper;}createSectionElement(){const wrapper=this.attrWrapper,attrAssignment=this.attrWrapper.attributeAssignment;this.sectionElement={attributeAssignmentId:attrAssignment.Id,attributeId:wrapper.attribute.Id,dataType:attrAssignment[VlocityPCUtils.getCustomFieldName("ValueDataType")],inputType:attrAssignment[VlocityPCUtils.getCustomFieldName("UIDisplayType")]||attrAssignment[VlocityPCUtils.getCustomFieldName("ValueDataType")],isRequired:attrAssignment[VlocityPCUtils.getCustomFieldName("IsRequired")],isRuntimeConfigurable:attrAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")],isRuntimeHidden:attrAssignment[VlocityPCUtils.getCustomFieldName("IsHidden")],isRuntimeReadOnly:attrAssignment[VlocityPCUtils.getCustomFieldName("IsReadOnly")],label:"",options:wrapper.picklistItems&&wrapper.picklistItems.map(item=>{return{label:item.Name,value:item[VlocityPCUtils.getCustomFieldName("Value")]};}),picklistId:attrAssignment[VlocityPCUtils.getCustomFieldName("PicklistId")],type:"Attribute",value:attrAssignment[VlocityPCUtils.getCustomFieldName("Value")]};}setupExcludedPicklistItems(){let excludedPicklist=this.attrWrapper.excludedPicklistItems,excludedValue=this.attrWrapper.attributeAssignment[VlocityPCUtils.getCustomFieldName("ExcludedPicklistValues")];this.excludedValue=excludedValue?excludedValue:"";this.excludedOptions=excludedPicklist?excludedPicklist.map(item=>{return{label:item.picklistValue.Name,value:item.picklistValue[VlocityPCUtils.getCustomFieldName("Value")]};}):[];}excludedOptionsChanged(evt){this.excludedValue=evt.detail.value();const excludedOptions=this.excludedValue.split(",");let newPicklistOptions=this.excludedOptions.filter(item=>{return 0>excludedOptions.indexOf(item.value);});this.sectionElement.options=newPicklistOptions;const valueField=this.querySelector("vlocity-pc-layout-section-element");let picklistValue=valueField.sectionElement.value;const isPicklistValExcluded=excludedOptions.indexOf(picklistValue);valueField.sectionElement.value=0<=isPicklistValExcluded?void 0:picklistValue;this.render();}get attributeId(){return this.getAttribute("attributeid");}get objectId(){return this.getAttribute("objectid");}getAttributeAssignment(){return this.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getAttributeAssignmentByAttributeId",JSON.stringify({attributeId:this.attributeId,objectId:this.objectId})]}).execute();}template(){const attributeAssignment=this.attrWrapper.attributeAssignment,attributeObj=this.attrWrapper.attribute;return html`
      <style>
        .vpc-edit-attribute_checkboxes {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-gap: 10px;
        }
      </style>
      <div class="vpc-edit-attribute slds-p-around_large slds-m-bottom_xx-large">
        <div class="slds-clearfix">
          <div class="slds-text-heading_small vpc-title-caps slds-float_left">
            ${this.translations.translate("PCEditAttributeSectionTitle")}
          </div>
          <div class="slds-float_right">
            <vlocity-pc-switch
              baseurl="/_slds/icons/"
              icon="utility:check"
              label="${this.translations.translate("Active")}"
              value="${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsActiveAssignment")]}">
              </vlocity-pc-switch>
          </div>
        </div>
        <div class="slds-m-top_medium">
          <vlocity-input disabled="true"
            label="${this.translations.translate("PCDisplayName")}"
            value=${attributeAssignment[VlocityPCUtils.getCustomFieldName("AttributeDisplayName")]||""}></vlocity-input>

          <vlocity-textarea
            id="vpcAttrAssignHelpText"
            label="${this.translations.translate("HelpText")}"
            extraclass="slds-m-top_small"
            value=${attributeAssignment[VlocityPCUtils.getCustomFieldName("ValueDescription")]||""}>
          </vlocity-textarea>

            <div class="slds-form-element__control slds-m-top_medium">
              ${null!==attributeAssignment&&this.isDesignTimeRequired?html`
                      <span title="Required" class="vpc-attribute_required"
                        >*</span
                      >
                    `:""}
              <label class="slds-form-element__label">${this.translations.translate("PCValue")}</label>
            <div>
              <vlocity-pc-layout-section-element .sectionElement=${this.sectionElement} nosettingsicon></vlocity-pc-layout-section-element>
            </div>
            </div>

            ${this.isPicklistAttribute()?html`
                    <div class="slds-m-top_small">
                      <vlocity-combobox
                        options="${JSON.stringify(this.excludedOptions)}"
                        placeholder="${this.translations.translate("PCSelectPlaceholder")}"
                        iconbaseurl="/_slds/icons/"
                        label="${this.translations.translate("PCExcludedValue")}"
                        value="${this.excludedValue?this.excludedValue:""}"
                        multiple="true"
                        id="vpc-excluded-picklist"
                      ></vlocity-combobox>
                    </div>
                  `:""}

            ${this.sectionElement.options&&0===this.sectionElement.options.length?html`
                    <span class="vpc-invalid-label"
                      >*
                      ${this.translations.translate("PCPicklistAllExcludeMessage")}</span
                    >
                  `:""}
          </div>

          <div class="vpc-title-caps slds-m-top_small">
              ${this.translations.translate("PCOverridableBehavior")}
          </div>
          <div class="vpc-edit-attribute_checkboxes slds-m-top_small">

                <div class="slds-form-element">
                <div class="slds-form-element__control">
                  <div class="slds-checkbox">
                    <input type="checkbox" ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsRequired")]} id="IsRequired"
                    @change=${evt=>this.settingChanged("IsRequired",evt.target.checked)} class="vpc-overridable-behavior" name="IsRequired"/>
                    <label class="slds-checkbox__label" for="IsRequired">
                      <span class="slds-checkbox_faux"></span>
                      <span class="slds-form-element__label">${this.translations.translate("Required")}</span>
                    </label>
                  </div>
                </div>
            </div>
            <div class="slds-form-element">
              <div class="slds-form-element__control">
                <div class="slds-checkbox">
                  <input type="checkbox" ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsHidden")]} id="IsHidden"
                  @change=${evt=>this.settingChanged("IsHidden",evt.target.checked)} class="vpc-overridable-behavior" name="IsHidden"/>
                  <label class="slds-checkbox__label" for="IsHidden">
                    <span class="slds-checkbox_faux"></span>
                    <span class="slds-form-element__label">${this.translations.translate("Hidden")}</span>
                  </label>
                </div>
              </div>
            </div>

            <div class="slds-form-element">
              <div class="slds-form-element__control">
                <div class="slds-checkbox">
                  <input type="checkbox" ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsReadOnly")]} id="IsReadOnly"
                  @change=${evt=>this.settingChanged("IsReadOnly",evt.target.checked)} class="vpc-overridable-behavior" name="IsReadOnly"/>
                  <label class="slds-checkbox__label" for="IsReadOnly">
                    <span class="slds-checkbox_faux"></span>
                    <span class="slds-form-element__label">${this.translations.translate("ReadOnly")}</span>
                  </label>
                </div>
              </div>
            </div>

            <div class="slds-form-element">
              <div class="slds-form-element__control">
                <div class="slds-checkbox">
                  <input type="checkbox" ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("HasRule")]} id="HasRule"
                  @change=${evt=>this.settingChanged("HasRule",evt.target.checked)} class="vpc-overridable-behavior" name="HasRule"/>
                  <label class="slds-checkbox__label" for="HasRule">
                    <span class="slds-checkbox_faux"></span>
                    <span class="slds-form-element__label">${this.translations.translate("HasRule")}</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="vpc-title-caps slds-m-top_small">
            ${this.translations.translate("PCNonOverridableBehavior")}
          </div>
          <div class="vpc-edit-attribute_checkboxes slds-m-top_small">
            <div class="slds-form-element">
              <div class="slds-form-element__control">
                <div class="slds-checkbox">
                  <input type="checkbox" disabled ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")]} id="IsConfigurable"
                  @change=${evt=>this.settingChanged("IsConfigurable",evt.target.checked)}/>
                  <label class="slds-checkbox__label" for="IsConfigurable">
                    <span class="slds-checkbox_faux"></span>
                    <span class="slds-form-element__label">${this.translations.translate("PCIsConfigurable")}</span>
                  </label>
                </div>
              </div>
            </div>

            <div class="slds-form-element">
              <div class="slds-form-element__control">
                <div class="slds-checkbox">
                  <input type="checkbox" disabled ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsEncrypted")]} id="IsEncrypted"
                  @change=${evt=>this.settingChanged("IsEncrypted",evt.target.checked)}/>
                  <label class="slds-checkbox__label" for="IsEncrypted">
                    <span class="slds-checkbox_faux"></span>
                    <span class="slds-form-element__label">${this.translations.translate("PCEncrypted")}</span>
                  </label>
                </div>
              </div>
            </div>

          <div class="slds-form-element">
            <div class="slds-form-element__control">
              <div class="slds-checkbox">
                <input type="checkbox" disabled ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsNotAssetizable")]} id="IsNotAssetizable"
                @change=${evt=>this.settingChanged("IsNotAssetizable",evt.target.checked)}/>
                <label class="slds-checkbox__label" for="IsNotAssetizable">
                  <span class="slds-checkbox_faux"></span>
                  <span class="slds-form-element__label">${this.translations.translate("PCNotAssetizable")}</span>
                </label>
              </div>
            </div>
          </div>

          <div class="slds-form-element">
            <div class="slds-form-element__control">
              <div class="slds-checkbox">
                <input type="checkbox" disabled ?checked=${attributeAssignment[VlocityPCUtils.getCustomFieldName("IsNotTranslatable")]} id="IsNotTranslatable"
                @change=${evt=>this.settingChanged("IsNotTranslatable",evt.target.checked)}/>
                <label class="slds-checkbox__label" for="IsNotTranslatable">
                  <span class="slds-checkbox_faux"></span>
                  <span class="slds-form-element__label">${this.translations.translate("PCNotTranslatable")}</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <vlocity-pc-done-cancel></vlocity-pc-done-cancel>
    `;}getAttributeValue(attrAssignment){const valueFieldName=VlocityPCUtils.getCustomFieldName("Value");return attrAssignment&&attrAssignment[valueFieldName]?attrAssignment[valueFieldName]:"";}cancelAttributeEdit(){this.dispatchEvent(new CustomEvent("vpccancelattributeedit",{detail:null}));pubsub.fire("vpceditattribute","cancel",{});}saveAttributeAssignment(){const attributeAssignment=this.attrWrapper.attributeAssignment,valueField=this.querySelector("vlocity-pc-layout-section-element"),helpText=this.querySelector("#vpcAttrAssignHelpText");attributeAssignment[VlocityPCUtils.getCustomFieldName("Value")]=valueField.sectionElement.value;attributeAssignment[VlocityPCUtils.getCustomFieldName("IsActiveAssignment")]="true"===this.querySelector("vlocity-pc-switch").value;attributeAssignment[VlocityPCUtils.getCustomFieldName("ExcludedPicklistValues")]=this.excludedValue;attributeAssignment[VlocityPCUtils.getCustomFieldName("ValueDescription")]=helpText.value?helpText.value.split("\n").join(" "):"";this.finalAttrAssgn=Object.assign({},attributeAssignment);if(!attributeAssignment[VlocityPCUtils.getCustomFieldName("Value")]&&this.isDesignTimeRequired){valueField.setErrorClass();}else if(this.sectionElement.options&&!this.sectionElement.options.length){VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),this.translations.translate("PCPicklistAllExcludeMessage"),"error");}else if(VlocityPCUtils.isStateEqual(this.initialAttrAssgn,attributeAssignment)){// Since there are no changes, do not make network calls and close the panel
this.cancelAttributeEdit();}else{const input=this.productConsole.createSaveAttributeAssignmentInput();input.attributeAssignment=attributeAssignment;VlocityPCUtils.showSpinner();this.productConsole.saveAttributeAssignment(input).then(response=>{if("INVOKE-200"!==response.errorCode){VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),response.error,"error");}else{this.attrWrapper.attributeAssignment=response.result;this.dispatchEvent(new CustomEvent("vpcsaveattributesuccess",{detail:response.result}));pubsub.fire("vpceditattribute","done",{attributeAssignment:response.result,target:this});VlocityPCUtils.openToast(this.translations.translate("PCToastSuccessTitle"),this.translations.translate("PCToastSuccessMessage"),"success");}}).finally(()=>{VlocityPCUtils.hideSpinner();});}}isDesignTimeRequiredAttribute(){const attributeAssignment=this.attrWrapper.attributeAssignment;this.isDesignTimeRequired=attributeAssignment[VlocityPCUtils.getCustomFieldName("IsRequired")]&&(!attributeAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")]||attributeAssignment[VlocityPCUtils.getCustomFieldName("IsReadOnly")]||attributeAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")]&&attributeAssignment[VlocityPCUtils.getCustomFieldName("IsHidden")]);}settingChanged(settingName,settingValue){const sectionElementBehaviours={IsRequired:"isRequired",IsConfigurable:"isRuntimeConfigurable",IsHidden:"isRuntimeHidden",IsReadOnly:"isRuntimeReadOnly"},elementBehaviour=sectionElementBehaviours[settingName];this.attrWrapper.attributeAssignment[VlocityPCUtils.getCustomFieldName(settingName)]=settingValue;if("HasRule"!==settingName){this.sectionElement[elementBehaviour]=settingValue;this.isDesignTimeRequiredAttribute();const valueField=this.querySelector("vlocity-pc-layout-section-element");valueField.setErrorClass();this.render();}}getPicklists(){const input=this.productConsole.createGetObjectPicklistsInput();input.objectName=VlocityPCUtils.getCustomFieldName("AttributeAssignment");VlocityPCUtils.showSpinner();this.productConsole.getObjectPicklistsByName(input).then(response=>{if(response.result&&"INVOKE-200"===response.errorCode){this.picklists=response.result;this.render();}}).finally(()=>{VlocityPCUtils.hideSpinner();});}getPicklistObject(){this.picklistDetails=null;const picklistId=this.attrWrapper.attributeAssignment[VlocityPCUtils.getCustomFieldName("PicklistId")];if(!picklistId){return;}const input=this.productConsole.createGetProductDataInput();input.objectId=picklistId;this.productConsole.getProductData(input).then(response=>{this.picklistDetails=response.result;this.render();});}setupEvents(){const dataType=this.querySelector("#valueDataType");if(dataType){dataType.addEventListener("onvaluechange",evt=>{this.attrWrapper.attributeAssignment[VlocityPCUtils.getCustomFieldName("ValueDataType")]=evt.detail.value();this.render();});}}setupExcludedPicklistEvents(){const picklist=this.querySelector("#vpc-excluded-picklist");if(picklist){const isListening=picklist.hasAttribute("isListening");if(!isListening){picklist.setAttribute("isListening",!0);picklist.addEventListener("onvaluechange",event=>{this.excludedOptionsChanged(event);});}}}isPicklistAttribute(){const assgn=this.attrWrapper.attributeAssignment,typeName=VlocityPCUtils.getCustomFieldName("ValueDataType");if(assgn){const dataType=assgn[typeName].toUpperCase();return"PICKLIST"===dataType||"MULTI PICKLIST"===dataType;}else{return!1;}}getPicklistName(){if(this.picklistDetails){return this.picklistDetails.Name;}else{return"";}}setupBehaviorValues(){const overridableCheckboxes=this.querySelectorAll(".vpc-overridable-behavior");overridableCheckboxes.forEach(checkbox=>{checkbox.checked=this.attrWrapper.attributeAssignment[VlocityPCUtils.getCustomFieldName(checkbox.name)];});}}window.customElements.define(VlocityPCEditAttribute.is,VlocityPCEditAttribute);var vlocityPcEditAttribute={VlocityPCEditAttribute:VlocityPCEditAttribute};class VlocityPcEffectiveDatesForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-effective-dates-form";}template(){this.translations=VlocitySDK.translation.getInstance();const translations=this.translations;return html`
      <style>

      .vpc-date-picker-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .vpc-date-picker:first-of-type {
        margin: 0 3px 0 0;
      }

      .vpc-date-picker .slds-form-element__label {
        white-space: nowrap;
      }
      </style>

      <div class="vpc-title-caps vpc-pricing-form-title">${translations.translate("PCAvailability")}</div>
      <div class="vpc-date-picker-container">
      </div>
      </div>
    `;}connectedCallback(){render(this.template(),this);this.addEventListener("onvaluechange",e=>{this.errorStateHandler(e);});this.initEventHandlers();}errorStateHandler(e){const target=e.target,detail=e.detail;if(this.isInvalidDateValue(target,detail)){this.addErrorState(target);}else{pubsub.fire("vpcrunpricingformdonebuttonfunction","result",{});target.classList.remove("slds-has-error");}}isInvalidDateValue(target,detail){return!target.classList.contains("vpc-end-date")&&(detail&&!detail.value()||!target.value);}addErrorState(target){if(target){target.classList.add("slds-has-error");pubsub.fire("vpcenabledonebutton","result",{});}}initEventHandlers(){setTimeout(()=>{const datePickers=this.querySelectorAll("vlocity-datepicker");for(let datePicker of datePickers){datePicker.addEventListener("click",e=>{const selects=datePicker.getElementsByClassName("slds-select");for(let select of selects){select.addEventListener("change",e=>{this.errorStateHandler(e);});}});}},0);this.populateDateFieldsHandler={result:this.populateDateFields.bind(this)};pubsub.register("vpcshowpromotioneditview",this.populateDateFieldsHandler);pubsub.register("vpcpopulateformfields",this.populateDateFieldsHandler);}populateDateFields(data){const namespacePrefix=vlocityPcConfig.namespacePrefix,priceListEntryToEdit=data.priceListEntryToEdit,startDate=priceListEntryToEdit[`${namespacePrefix}EffectiveFromDate__c`],endDate=priceListEntryToEdit[`${namespacePrefix}EffectiveUntilDate__c`];if(startDate){this.querySelector(".vpc-start-date").value=VlocityPCUtils.getFormattedDateObject(startDate.value,"datetime");}else{this.querySelector(".vpc-start-date").value=null;}if(endDate){this.querySelector(".vpc-end-date").value=VlocityPCUtils.getFormattedDateObject(endDate.value,"datetime");}}resetForm(){const datepickerContainer=this.querySelector(".vpc-date-picker-container");if(datepickerContainer){datepickerContainer.innerText="";this.resetStartDatePicker(datepickerContainer);this.resetEndDatePicker(datepickerContainer);}for(let dateField of this.querySelectorAll("vlocity-datepicker")){dateField.value="";}const startDate=this.querySelectorAll("vlocity-datepicker")[0],date=new Date();startDate.setDate(new Date(`${date.getMonth()+1}/${date.getDate()}/${date.getFullYear()}`));}resetStartDatePicker(datepickerContainer){if(datepickerContainer){const datepicker=this.createDatePicker("vpc-start-date");datepicker.setAttribute("label",this.translations.translate("PCStartDate"));datepicker.setAttribute("required","true");datepickerContainer.appendChild(datepicker);}}resetEndDatePicker(datepickerContainer){if(datepickerContainer){const datepicker=this.createDatePicker("vpc-end-date");datepicker.setAttribute("label",this.translations.translate("PCEndDate"));datepickerContainer.appendChild(datepicker);}}createDatePicker(datepickerClass){const datepicker=document.createElement("vlocity-datepicker");datepicker.classList.add("vpc-date-picker",datepickerClass);datepicker.setAttribute("name",datepickerClass);datepicker.setAttribute("format","MMM dd, yyyy hh:mm 12h");datepicker.setAttribute("translations",JSON.stringify(VlocityPCUtils.getDatePickerLabelList()));datepicker.setAttribute("showtimepicker","");datepicker.setAttribute("showampm","");datepicker.setAttribute("locale",vlocityPcConfig.userLocaleInBcp47Format);datepicker.setAttribute("timezone",vlocityPcConfig.timeZone);return datepicker;}disconnectedCallback(){pubsub.unregister("vpcshowpromotioneditview",this.populateDateFieldsHandler);pubsub.unregister("vpcpopulateformfields",this.populateDateFieldsHandler);}}window.customElements.define(VlocityPcEffectiveDatesForm.is,VlocityPcEffectiveDatesForm);class VlocityPcExistingPromotionOfferForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-existing-promotion-offer-form";}template(promotions,priceLists){const promotionIdStr=`${vlocityPcConfig.namespacePrefix}PromotionId__c`,translations=this.translations,promotionList=this.getPromotionList();this.adjustmentOverrideType=this.getAdjustmentOverrideTypes(promotions,priceLists);return html`
      <style>
        .vpc-pc-existing-promotion-offer-form {
          display: grid;
          padding: 0 30px;
        }

        .vpc-pc-existing-promotion-offer-form
          .vpc-pc-existing-promotion-offer-container
          .vpc-existing-combobox-container
          .vpc-combobox {
          margin: 0;
        }

        .vpc-pc-existing-promotion-offer-form
          .vpc-pc-existing-promotion-offer-container
          .vpc-existing-combobox-container {
          display: grid;
          grid-row-gap: 5px;
        }

        .vpc-pc-existing-promotion-offer-container
          .vpc-combobox
          .slds-listbox
          .slds-media__body {
          margin: 0 20px 0;
        }

        .vpc-pc-existing-promotion-offer-form .vpc-title-caps {
          margin: 20px 0;
          font-weight: bold;
          font-size: 16px;
        }

        .vpc-pc-existing-promotion-offer-form .vpc-structure-tab-mode {
          margin: 0 0 20px;
        }

        .vpc-pc-existing-promotion-offer-form
          .vpc-form-title-container
          vlocity-pc-switch {
          justify-self: end;
        }

        .vpc-pc-existing-promotion-offer-form .vpc-promotion-button-container {
          display: grid;
        }

        .vpc-pc-existing-promotion-offer-form .vpc-form-title-container {
          display: grid;
          grid-template-columns: 1fr 0.1fr;
          align-items: center;
        }

        .vpc-pc-existing-promotion-offer-form .vpc-show-side-bar-item {
          display: grid;
        }

        .vpc-pc-existing-promotion-offer-form .vpc-hide-side-bar-item,
        .vpc-pc-existing-promotion-offer-container .slds-form-element__help {
          display: none;
        }
        .vpc-form-control {
          margin: 5px 0 0;
        }
      </style>

      <div class="vpc-pc-existing-promotion-offer-form">
        <div class="vpc-form-title-container">
          <div class="vpc-choose-existing-text vpc-title-caps">
            ${translations.translate("PCNewAdjustmentOrOverride")}
          </div>
          <vlocity-pc-switch
            baseurl="/_slds/icons/"
            icon="utility:check"
            label="${translations.translate("PCActive")}"
            class="vpc-adjustment-override-switch vpc-hide-side-bar-item"
          ></vlocity-pc-switch>
        </div>
        <vlocity-form class="vpc-pc-existing-promotion-offer-container">
          <div class="vpc-existing-combobox-container vpc-form-control">
            <vlocity-combobox
              label="${translations.translate("PCTypeOfAdjustmentOrOverride")}"
              placeholder="${priceLists&&priceLists.length?translations.translate("PCSelectAdjustmentOrOverride"):translations.translate("PCProductWithNoPriceList")}"
              class="vpc-combobox vpc-adjustment-override-type-combobox"
              name="vpc-existing-promotion"
              iconbaseurl="/_slds/icons/"
              searchable="false"
              multiple="false"
              required="true"
              disabled=${priceLists&&priceLists.length?"false":"true"}
              options="${this.adjustmentOverrideType}"
            ></vlocity-combobox>
          </div>
          <div
            class="vpc-existing-combobox-container vpc-existing-promotion-combobox-container vpc-form-control"
          >
            <vlocity-combobox
              label="${translations.translate("PCPromotion")}"
              placeholder="${JSON.parse(promotionList).length?translations.translate("PCChooseExistingPromotion"):translations.translate("PCProductWithNoPriceList")}"
              class="vpc-combobox vpc-existing-promotion-combobox vpc-hide-side-bar-item"
              name="vpc-existing-promotion"
              iconbaseurl="/_slds/icons/"
              required="true"
              searchable="true"
              multiple="false"
              options="${promotionList}"
            ></vlocity-combobox>
          </div>
          <div class="vpc-promotion-button-container"></div>
        </vlocity-form>
      </div>
    `;}connectedCallback(){this.initializeComponent();}initializeComponent(){const productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.translations=VlocitySDK.translation.getInstance();const promotionInput=productConsole.createAppliedPromotionsInput();promotionInput.productId=this.productId;pubsub.fire("vpcgetexistingpromotions","result",{});// Gets promotions table data.
productConsole.getExistingPromotions(productConsole.createExistingPromotionsInput({ProductId:this.productId})).then(promotions=>{productConsole.getApplicablePriceList(productConsole.createApplicablePriceListInput({ProductId:this.productId})).then(priceLists=>{this.promotions=promotions.records;this.priceLists=priceLists.records;render(this.template(promotions.records,priceLists.records),this);this.initEventHandlers();this.setInputListeners();});}).catch(error=>{throw new Error(error);});VlocityPCUtils.setComboboxHandlers(this);}initEventHandlers(){pubsub.register("vpccontextchange",{result:this.contextChangeHandler.bind(this)});pubsub.register("vpcshowpromotioneditview",{result:this.showEditPromotionView.bind(this)});pubsub.register("vpcexistingpromotions",{result:this.setExistingPromotionsHandler.bind(this)});pubsub.register("vpcgetexistingpromotionoffervalues",{result:this.fireExistingPromotionOfferValuesEvent.bind(this)});pubsub.register("vpcgetpromotionrecords",{result:this.firePromotionRecordsEvent.bind(this)});pubsub.register("vpcexpandform",{result:this.promotionBasedClickHandler.bind(this)});pubsub.register("vpcupdatechargetype",{result:this.updateChargeType.bind(this)});pubsub.register("vpcsetpromotioncombobox",{result:this.setPromotionCombobox.bind(this)});pubsub.register("vpcshowpriceform",{result:this.showPriceForm.bind(this)});pubsub.register("vpcshownewpromotionform",{result:this.showNewPromotionForm.bind(this)});pubsub.register("vpceditmodeon",{result:this.setEditModeState.bind(this)});pubsub.register("vpcshowadjustmentoverrideform",{result:this.setIsOnInitialForm.bind(this)});pubsub.register("initialadjustmentoverrideformclick",{result:this.checkForFormErrors.bind(this)});}checkForFormErrors(){for(const combobox of this.querySelectorAll(".vpc-combobox")){this.addErrorState(combobox);}}addErrorState(combobox){if(combobox&&this.isFieldEnabled(combobox)&&!combobox.classList.contains("vpc-hide-side-bar-item")){combobox.setAttribute("errormessage","This field is required");}}isFieldEnabled(combobox){return"false"===combobox.getAttribute("disabled")||!combobox.getAttribute("disabled");}setIsOnInitialForm(e){pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:e.show});if(e.show&&(!this.priceLists||this.priceLists&&!this.priceLists.length)){VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),this.translations.translate("PCProductWithNoPriceList"),"error");}}setEditModeState(editMode){this.isEditMode=editMode.isOn;this.querySelector(".vpc-choose-existing-text").innerText=this.getPromotionnOfferHeader();if(this.isEditMode){pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});}}closePromotionOfferForm(){pubsub.fire("vpcshowstructurequickadds","result",{});}showNewPromotionForm(){this.classList.remove("vpc-hide-side-bar-item");}showPriceForm(){this.querySelector(".vpc-pc-existing-promotion-offer-container").classList.add("vpc-hide-side-bar-item");this.querySelector(".vpc-choose-existing-text").innerText=this.getPromotionnOfferHeader();this.querySelector(".vpc-adjustment-override-switch").classList.remove("vpc-hide-side-bar-item");pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});}setPromotionCombobox(e){const promotionToAdd=e.promotionToAdd,promotionCombo=this.querySelector(".vpc-existing-promotion-combobox");promotionCombo.options=JSON.stringify([{label:promotionToAdd.Name,value:promotionToAdd.Id}]);promotionCombo.value=e.existingPromotion;promotionCombo.setAttribute("disabled","true");}updateChargeType(){this.querySelector(".vpc-pc-existing-promotion-offer-form").classList.add("vpc-exiting-promotion-offer-mode");}promotionBasedClickHandler(){this.querySelector(".vpc-choose-existing-text").classList.remove("vpc-structure-tab-mode");}setContext(e){pubsub.fire("vpccontextchange","result",{context:e.target.value});}firePromotionRecordsEvent(){pubsub.fire("vpcsetpromotionrecords","result",{records:this.promotions});}fireExistingPromotionOfferValuesEvent(){pubsub.fire("vpcsetexistingpromotionoffervalues","result",{existingPromotion:this.querySelector(".vpc-existing-promotion-combobox").value,existingOffer:this.rootProductId||""});}setExistingPromotionsHandler(e){this.unAppliedPromotions=e.existingPromotions;}showEditPromotionView(data){const promotionCombo=this.querySelector(".vpc-existing-promotion-combobox"),existingPromotion=this.querySelector("vlocity-pc-existing-promotion-offer-form"),priceListEntryToEdit=data.priceListEntryToEdit,promotionId=priceListEntryToEdit[`${vlocityPcConfig.namespacePrefix}PromotionId__c`];this.querySelector(".vpc-choose-existing-text").innerText="adjustmentContext"===this.context?this.translations.translate("PCEditAdjustment"):this.translations.translate("PCEditOverride");if(promotionId){const selectedPromotion=promotionCombo.options.filter(option=>promotionId.value===option.value);promotionCombo.value=selectedPromotion[0].value;promotionCombo.classList.remove("vpc-hide-side-bar-item");promotionCombo.setAttribute("disabled","true");const promotionOfferContainer=this.querySelector(".vpc-existing-combobox-container");for(let control of promotionOfferContainer.children){if(selectedPromotion[0].label!==control.selectedValue){control.classList.add("vpc-hide-side-bar-item");}}}this.querySelector(".vpc-adjustment-override-type-combobox").classList.add("vpc-hide-side-bar-item");this.querySelector(".vpc-adjustment-override-switch").classList.remove("vpc-hide-side-bar-item");this.querySelector(".vpc-promotion-button-container").classList.add("vpc-hide-side-bar-item");}contextChangeHandler(contextEvent){this.context=contextEvent.context;}refreshPromotionsOffers(){const productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();productConsole.getExistingPromotions(productConsole.createExistingPromotionsInput({ProductId:this.productId})).then(promotions=>{this.promotions=promotions.records;}).catch(error=>{throw new Error(error);});}showPromotionForm(){pubsub.fire("vpccontextchange","result",{context:this.context});pubsub.fire("vpcenablebuttoncontainer","result",{});const existingPromotion=this.querySelector(".vpc-existing-promotion-combobox");existingPromotion.value="";existingPromotion.querySelector("input").value="";pubsub.fire("vpcshowpromotionform","result",{});this.querySelector(".vpc-choose-existing-text").innerText=this.getPromotionnOfferHeader();}showExistingPromotionForm(){pubsub.fire("vpccontextchange","result",{context:this.context});pubsub.fire("vpcenablebuttoncontainer","result",{});const existingPromotionCombo=this.querySelector(".vpc-existing-promotion-combobox");if(existingPromotionCombo){pubsub.fire("vpcexistingofferpromotion","result",{existingPromotionId:existingPromotionCombo.value,existingPromotionList:this.promotions});existingPromotionCombo.setAttribute("disabled","true");this.querySelector(".vpc-pc-existing-promotion-offer-form").classList.add("vpc-exiting-promotion-offer-mode");pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});this.getHierarchyPath(existingPromotionCombo);pubsub.fire("vpcgetpromotionrecords","result",{});this.fireExistingPromotionOfferValuesEvent();}}showOfferBasedForm(){pubsub.fire("vpccontextchange","result",{context:this.context});pubsub.fire("vpcenablebuttoncontainer","result",{});const promotionCombobox=this.querySelector(".vpc-existing-promotion-combobox");promotionCombobox.classList.add("vpc-hide-side-bar-item");promotionCombobox.value="";this.querySelector(".vpc-pc-existing-promotion-offer-form").classList.add("vpc-exiting-promotion-offer-mode");this.querySelector(".vpc-choose-existing-text").innerText=this.getPromotionnOfferHeader();pubsub.fire("vpcexistingoffer","result",{});}getHierarchyPath(existingPromotionCombo){const productConsole=VlocitySDK.productconsole.getInstance().getProductOverrideSdk(),input=productConsole.createGetProductHierarchyPath();input.productId=this.productId;input.offerId=this.rootProductId;productConsole.getProductHierarchyPath(input).then(response=>{this.hierarchyPath=response.result;pubsub.fire("vpccreatepromotionitem","result",{promotionId:existingPromotionCombo.value||"",actionType:"Add/Update",cardinalityCheckScope:"Cart Scope",contextEntityFilterId:"",contextProductId:"",description:"",effectiveFromDate:"",effectiveUntilDate:"",isActive:!0,isUndoable:!1,maxQuantity:100,minQuantity:1,quantity:1,hierarchyPath:this.hierarchyPath||"",offerId:this.rootProductId===this.productId?"":this.rootProductId,productId:this.productId,undoableMessage:"",updateScope:"Update Item Only"});});}setInputListeners(){setTimeout(()=>{const context=this.querySelector("form").children[0],inputs=context.getElementsByClassName("slds-combobox__input");for(let input of inputs){input.addEventListener("blur",e=>{if(e.target.placeholder===this.translations.translate("PCChooseExistingPromotion")&&e.target.value){this.showExistingPromotionForm();const parent=this.getParentComponent(e.target,"vpc-existing-promotion-combobox");parent.removeAttribute("errormessage");}else if(`${this.translations.translate("PCSelectAdjustmentOrOverride")}`===e.target.placeholder&&e.target.value){const parent=this.getParentComponent(e.target,"vpc-adjustment-override-type-combobox");this.executeAdjustmentOverrideAction(parent);parent.removeAttribute("errormessage");}});}pubsub.fire("vpcgetproductid","result",{});},0);}getParentComponent(ele,parentClass){while(ele&&!ele.classList.contains(parentClass)){ele=ele.parentNode;}return ele;}executeAdjustmentOverrideAction(parent){const value=parent&&parent.value;this.querySelector(".vpc-adjustment-override-type-combobox").classList.add("vpc-hide-side-bar-item");this.querySelector(".vpc-adjustment-override-switch").classList.remove("vpc-hide-side-bar-item");this.isEditMode=!1;switch(value){case"Adjustment to an existing Promotion":this.existingPromotionAction("adjustmentContext");pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!0});parent.removeAttribute("errormessage");break;case"Adjustment on a new Promotion":this.context="adjustmentContext";this.showPromotionForm();pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});break;case"Adjustment on an Offer":this.context="adjustmentContext";this.showOfferBasedForm();pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});break;case"Override to an existing Promotion":this.existingPromotionAction("overrideContext");pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!0});parent.removeAttribute("errormessage");break;case"Override on a new Promotion":this.context="overrideContext";this.showPromotionForm();pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});break;case"Override on an Offer":this.context="overrideContext";this.showOfferBasedForm();pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});break;}}existingPromotionAction(context){this.disableAOCombobox();this.context=context;this.querySelector(".vpc-existing-promotion-combobox").classList.remove("vpc-hide-side-bar-item");this.querySelector(".vpc-choose-existing-text").innerText=this.getPromotionnOfferHeader();pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});}disableAOCombobox(){const aoTypeCombobox=this.querySelector(".vpc-adjustment-override-type-combobox");aoTypeCombobox.classList.remove("vpc-hide-side-bar-item");aoTypeCombobox.setAttribute("disabled","true");}resetAOComobox(){const aoTypeCombobox=this.querySelector(".vpc-adjustment-override-type-combobox");aoTypeCombobox.classList.remove("vpc-hide-side-bar-item");if(this.priceLists&&this.priceLists.length){aoTypeCombobox.removeAttribute("disabled");}else{aoTypeCombobox.addAttribute("disabled","true");}aoTypeCombobox.removeAttribute("errormessage");aoTypeCombobox.value="";}resetForm(){pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!0});this.hierarchyPath="";this.refreshPromotionsOffers();const controls=this.querySelector(".slds-form_stacked").children;for(let control of controls){control.removeAttribute("disabled");control.value="";control.classList.remove("vpc-hide-side-bar-item");}this.querySelector(".vpc-existing-promotion-combobox-container").innerText="";this.resetAOComobox();this.createExistingCombobox("PCPromotion","PCChooseExistingPromotion",["vpc-existing-promotion-combobox","vpc-hide-side-bar-item"],this.getPromotionList());pubsub.fire("vpccontextchange","result",{context:"adjustmentContext"});const switchComponent=this.querySelector(".vpc-adjustment-override-switch");switchComponent.value="true";switchComponent.classList.add("vpc-hide-side-bar-item");const formHeaderText=this.querySelector(".vpc-choose-existing-text");formHeaderText.classList.remove("vpc-hide-side-bar-item");formHeaderText.innerText=`${this.translations.translate("PCNewAdjustmentOrOverride")}`;this.setInputListeners();}createExistingCombobox(label,placeholder,className,options){const translations=this.translations,existingCombobox=document.createElement("vlocity-combobox");existingCombobox.setAttribute("label",translations.translate(label));existingCombobox.setAttribute("placeholder",options.length?translations.translate(placeholder):translations.translate("PCProductWithNoPriceList"));existingCombobox.classList.add("vpc-combobox",...className);existingCombobox.setAttribute("name",className);existingCombobox.setAttribute("iconbaseurl","/_slds/icons/");existingCombobox.setAttribute("searchable","true");existingCombobox.setAttribute("required","true");existingCombobox.setAttribute("options",options);this.querySelector(".vpc-existing-promotion-combobox-container").appendChild(existingCombobox);}getAdjustmentOverrideTypes(promotions,priceLists){if(priceLists&&priceLists.length){const translations=this.translations;let typesArr=[];if(promotions&&promotions.length){typesArr=[{label:translations.translate("PCAdjustmentExistingPromotion"),value:"Adjustment to an existing Promotion"},{label:translations.translate("PCOverrideExistingPromotion"),value:"Override to an existing Promotion"}];}return JSON.stringify(typesArr.concat([{label:translations.translate("PCAdjustmentNewPromotion"),value:"Adjustment on a new Promotion"},{label:translations.translate("PCOverrideNewPromotion"),value:"Override on a new Promotion"},{label:translations.translate("PCOverrideOnOffer"),value:"Override on an Offer"},{label:translations.translate("PCAdjustmentOnOffer"),value:"Adjustment on an Offer"}]));}else{return[];}}getPromotionnOfferHeader(){const translations=this.translations;switch(this.context){case"adjustmentContext":return this.isEditMode?translations.translate("PCEditAdjustment"):translations.translate("PCAddAdjustment");case"overrideContext":return this.isEditMode?translations.translate("PCEditOverride"):translations.translate("PCAddOverride");case"priceContext":return this.isEditMode?translations.translate("PCEditPrice"):translations.translate("PCAddPrice");case"costContext":return this.isEditMode?translations.translate("PCEditCost"):translations.translate("PCAddCost");}}getPromotionList(){const promotions=this.promotions,unAppliedPromotions=this.unAppliedPromotions,unAppliedPromotionArr=unAppliedPromotions?unAppliedPromotions.map(promotion=>{return{label:`${promotion.Name}`,value:`${promotion.Id}`};}):[],promotionArr=promotions?promotions.map(promotion=>{return{label:`${promotion.Name}`,value:`${promotion.Id}`};}):[];return JSON.stringify(promotionArr.concat(unAppliedPromotionArr));}disconnectedCallback(){this.contextChangeHandlerObj={result:this.contextChangeHandler.bind(this)};this.showEditPromotionViewHandler={result:this.showEditPromotionView.bind(this)};this.setExistingPromotionsHandlerObj={result:this.setExistingPromotionsHandler.bind(this)};this.fireExistingPromotionOfferValuesEventHandler={result:this.fireExistingPromotionOfferValuesEvent.bind(this)};this.updateChargeTypeHandler={result:this.updateChargeType.bind(this)};this.setPromotionComboboxHandler={result:this.setPromotionCombobox.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.showNewPromotionFormHandler={result:this.showNewPromotionForm.bind(this)};this.promotionBasedClickHandlerObj={result:this.promotionBasedClickHandler.bind(this)};this.firePromotionRecordsEventHandler={result:this.firePromotionRecordsEvent.bind(this)};this.setEditModeStateHandler={result:this.setEditModeState.bind(this)};this.setIsOnInitialFormHandler={result:this.setIsOnInitialForm.bind(this)};this.checkForFormErrorsHandler={result:this.checkForFormErrors.bind(this)};pubsub.unregister("vpccontextchange",this.contextChangeHandlerObj);pubsub.unregister("vpcshowpromotioneditview",this.showEditPromotionViewHandler);pubsub.unregister("vpcexistingpromotions",this.setExistingPromotionsHandlerObj);pubsub.unregister("vpcgetexistingpromotionoffervalues",this.fireExistingPromotionOfferValuesEventHandler);pubsub.unregister("vpcupdatechargetype",this.updateChargeTypeHandler);pubsub.unregister("vpcsetpromotioncombobox",this.setPromotionComboboxHandler);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showNewPromotionFormHandler);pubsub.unregister("vpcexpandform",this.promotionBasedClickHandlerObj);pubsub.unregister("vpcgetpromotionrecords",this.firePromotionRecordsEventHandler);pubsub.unregister("vpceditmodeon",this.setEditModeStateHandler);pubsub.unregister("vpcshowadjustmentoverrideform",this.setIsOnInitialFormHandler);pubsub.unregister("initialadjustmentoverrideformclick",this.checkForFormErrorsHandler);}get productId(){return this.getAttribute("productId");}get rootProductId(){return this.getAttribute("rootProductId");}}window.customElements.define(VlocityPcExistingPromotionOfferForm.is,VlocityPcExistingPromotionOfferForm);class VlocityPcFeatureUnavailable extends HTMLElement{static get is(){return"vlocity-pc-feature-unavailable";}template(){return html`
      <style>
        :host {
          display: block;
          padding: 10px 20px;
        }
        div {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
        }

      </style>
      <div>
        <image src="/resource/productconsole_assets/images/vlocity_logo.jpeg" />
        <h2>
          Feature not yet available
        </h2>
      </div>
    `;}connectedCallback(){render(this.template(),this);}}window.customElements.define(VlocityPcFeatureUnavailable.is,VlocityPcFeatureUnavailable);class VlocityPCButtonGroup extends HTMLElement{static get is(){return"vlocity-pc-button-group";}constructor(){super();}template(){return html`
      <style>
        .vpc-button-group_item {
          padding: 4px;
          background-color: var(--vpc-primary-bg-color);
          border: 1px solid var(--vpc-secondary-border-color);
          border-radius: 2px;
          margin-right: 5px;
          cursor: pointer;
          opacity: 0.9;
          margin-bottom: 5px;
          display: inline-block;
        }

        .vpc-button-group_item:hover {
          opacity: 1;
        }

        .vpc-button-group_item-selected {
          padding: 4px;
          background-color: var(--vpc-primary-color);
          color: white;
        }
      </style>
      ${this.options?this.options.map(opt=>{return html`
              <span
                @click=${()=>this.selectOption(opt)}
                @keyup=${evt=>{if(13===evt.keyCode||32===evt.keyCode){this.selectOption(opt);}}}
                class="vpc-button-group_item${this.isOptionSelected(opt)?" vpc-button-group_item-selected":""}"
                >${opt.label}</span
              >
            `;}):""}
    `;}render(){render(this.template(),this);}connectedCallback(){this.render();}get options(){return this._options;}get selectedOption(){return this.getAttribute("selectedoption");}set selectedOption(value){this.setAttribute("selectedoption",value);}set options(value){this._options=value;this.render();}get isMultipicklist(){return this.hasAttribute("multipicklist");}isOptionSelected(opt){if(this.isMultipicklist){const opts=this.selectedOption.split(";");if(opts&&opts.length){return 0<=opts.findIndex(item=>opt.value===item);}else{return!1;}}return this.selectedOption===opt.value;}selectOption(opt){if(this.isMultipicklist){let opts=this.selectedOption.split(";"),idx;if(opts&&opts.length){idx=opts.findIndex(item=>{return item===opt.value;});}else{opts=[];}if(0<=idx){opts.splice(idx,1);}else{opts.push(opt.value);}this.selectedOption=opts.join(";");}else{if(this.selectedOption===opt.value){this.selectedOption="";}else{this.selectedOption=opt.value;}}this.render();this.dispatchEvent(new CustomEvent("onvaluechange",{detail:{value:this.selectedOption}}));}static get observedAttributes(){return["selectedoption"];}attributeChangedCallback(){this.render();}}window.customElements.define(VlocityPCButtonGroup.is,VlocityPCButtonGroup);var vlocityPcButtonGroup={VlocityPCButtonGroup:VlocityPCButtonGroup};class VlocityPCLookupSearch extends HTMLElement{constructor(){super();this.searchResults=[];this.searchInProgress=!1;this.pageNumber=1;this.totalCount=0;this.maxPages=3;this.pageSize=10;this.translation=VlocitySDK.translation.getInstance();}static get is(){return"vlocity-pc-lookup-search";}get objectName(){return this.getAttribute("objectname");}get specificationTypeFilter(){return this.getAttribute("specificationTypeFilter");}get selectedObjectClassId(){const objectClassId=this.getAttribute("selectedObjectClassId");return"null"===objectClassId?null:objectClassId;}get value(){return this._value;}set value(value){this._value=value;}render(){render(this.template(),this);}connectedCallback(){this.render();this.performSearch();}template(){return html`
      <style>
        .via-slds .slds-input.vpc-lookup-search-input {
          width: 300px;
        }

        .via-slds .slds-input.vpc-page-number {
          width: 150px;
        }

        .vpc-search-item {
          word-break: break-word;
          overflow-wrap: break-word;
          display: grid;
          grid-template-columns: 90% 10%;
        }
      </style>
      <form
        @submit=${evt=>{evt.preventDefault();this.performSearch();}}
      >
        <div class="slds-form_inline">
          <div class="slds-form-element">
            <div class="slds-form-element_control">
              <input
                class="slds-input slds-m-right_small vpc-lookup-search-input"
                aria-autocomplete="list"
                type="text"
                value="${this.value.Name||""}"
              />

              <button
                class="slds-button slds-button_brand"
                title="${this.translation.translate("Search")}"
                type="submit"
              >
                <vlocity-icon
                  baseurl="/_slds/icons/"
                  icon="utility:search"
                  size="x-small"
                  extraclass="vpc-light-icon"
                >
                </vlocity-icon>
              </button>
            </div>
          </div>
        </div>
      </form>

      <div>
        ${0<this.searchResults.length?html`
              <div
                class="slds-clearfix slds-m-top_medium slds-p-around_small slds-m-bottom_small"
              >
                <vlocity-pc-pagination
                  totalsize="${this.totalCount}"
                  currentpage="${this.pageNumber}"
                  pagesize="${this.pageSize}"
                  maxpages="${this.maxPages}"
                >
                </vlocity-pc-pagination>
              </div>
            `:html`
              ${this.searchInProgress?"":html`
                    <div class="slds-text-align_center slds-m-top_x-large">
                      ${this.translation.translate("PCNoResultsMessage")}
                    </div>
                  `}
            `}
        <ul class="slds-has-dividers_bottom-space">
          ${this.searchResults.map(item=>{return html`
              <li class="slds-item vpc-search-item">
                <div>
                  ${item[VlocityPCUtils.getCustomFieldName("VersionLabel")]?item.Name+" "+item[VlocityPCUtils.getCustomFieldName("VersionLabel")]:item.Name}
                </div>
                <div>
                  <a
                    href="javascript:void(0)"
                    @click=${()=>this.selectLookupRecord(item)}
                  >
                    ${this.translation.translate("Select")}
                  </a>
                </div>
              </li>
            `;})}
        </ul>
      </div>
    `;}performSearch(isPagination){const inp=this.querySelector(".vpc-lookup-search-input");if(inp){let searchText=inp.value;if(!searchText||""===searchText.trim()){searchText="%";}const sdk=VlocitySDK.productconsole.getInstance(),input=sdk.createSearchRelatedObjectsInput();input.searchString=searchText;input.objectName=this.objectName;input.pageNumber=this.pageNumber;input.pageSize=this.pageSize;if("Product"===this.specificationTypeFilter){input.specificationTypeFilter=this.specificationTypeFilter;}input.selectedObjectClassId=this.selectedObjectClassId;VlocityPCUtils.showSpinner();this.searchInProgress=!0;this.render();sdk.searchRelatedObjects(input).then(response=>{this.searchResults=response.result.results;this.totalCount=response.result.totalCount;if(!isPagination){this.pageNumber=1;}}).finally(()=>{VlocityPCUtils.hideSpinner();this.searchInProgress=!1;this.render();this.setupPaginationEvents();});}}setupPaginationEvents(){const pagination=this.querySelector("vlocity-pc-pagination"),isListening=pagination?pagination.hasAttribute("isListening"):!0;if(!isListening){pagination.setAttribute("isListening",!0);pagination.addEventListener("onchangepage",event=>this.onChangePage(event.detail));}}onChangePage(nextPage){if(this.pageNumber!==nextPage){this.pageNumber=nextPage;this.performSearch(!0);}}selectLookupRecord(item){this.dispatchEvent(new CustomEvent("vpclookupitemselect",{detail:item}));}}window.customElements.define(VlocityPCLookupSearch.is,VlocityPCLookupSearch);class VlocityPCLookupField extends HTMLElement{static get is(){return"vlocity-pc-lookup-field";}constructor(){super();this.searchResults=[];this.translation=VlocitySDK.translation.getInstance();}get objectName(){return this.getAttribute("objectname");}get disablelookup(){return this.hasAttribute("disablelookup");}get specificationTypeFilter(){return this.getAttribute("specificationTypeFilter");}get selectedObjectClassId(){return this.getAttribute("selectedObjectClassId");}get value(){return this._value;}set value(value){this._value=value;}static get observedAttributes(){return["disablelookup","value"];}attributeChangedCallback(name,oldValue,newValue){switch(name){case"disablelookup":case"value":if(oldValue!==newValue){this.render();}break;}}template(){const isLanguageRTLStyle=!0===vlocityPcConfig.isLanguageRTL?"vpc-language-rtl-border":"";return html`
      <style>
        .via-slds .vpc-lookup-input {
          width: calc(100% - 52px);
        }

        .via-slds .vpc-lookup-input .slds-input {
          border-radius: 0.25em 0 0 0.25em;
          border-right: none;
        }

        .via-slds .vpc-lookup-input .slds-input[disabled] {
          background-color: var(--vpc-secondary-bg-color);
        }

        .via-slds .vpc-lookup-button .slds-button[disabled] {
          background-color: #e6e6e6;
          cursor: not-allowed;
        }

        .via-slds .vpc-lookup-input .slds-input[disabled].vpc-disable-bgColor {
          background-color: #e6e6e6;
        }

        .via-slds .vpc-lookup-button .slds-button {
          border-left: none;
          border-radius: 0 0.25em 0.25em 0;
          background-color: var(--vpc-primary-bg-color);
        }

        .via-slds .vpc-lookup-input .slds-input {
          border-radius: 0.25em 0 0 0.25em;
          border-right: none;
        }

        .via-slds .vpc-lookup-input .vpc-language-rtl-border {
          border-radius: 0 0.25em 0.25em 0;
          border-right: 1px solid var(--vpc-primary-slds-border-color);
          border-left: none;
        }

        .via-slds .vpc-lookup-button .vpc-language-rtl-border {
          border-radius: 0.25em 0 0 0.25em;
          border-left: 1px solid var(--vpc-primary-slds-border-color);
          border-right: none;
        }
      </style>
      <div class="slds-clearfix">
        <div
          class="slds-float_left vpc-lookup-input slds-input-has-icon slds-input-has-icon_right"
        >
          <input
            class="slds-input 
              ${isLanguageRTLStyle} 
              ${this.disablelookup?"vpc-disable-bgColor":""}"
            disabled
            aria-autocomplete="list"
            type="text"
            placeholder="${this.translation.translate("Search")}..."
            value="${this.value.Name||""}"
          />
          ${!this.disablelookup?html`
                <button
                  class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"
                  type="button"
                  @click=${()=>this.clearValue()}
                  title="${this.translation.translate("Remove")}"
                >
                  <vlocity-icon
                    baseurl="/_slds/icons/"
                    icon="utility:clear"
                    size="x-small"
                    extraclass="slds-button__icon slds-icon-text-light"
                  >
                  </vlocity-icon>
                </button>
              `:html``}
        </div>

        <div class="slds-float_left vpc-lookup-button">
          <button
            class="slds-button slds-button_neutral ${isLanguageRTLStyle}"
            title="${this.translation.translate("PCLookupSearchTitle")}"
            type="button"
            ?disabled=${this.disablelookup}
            @click="${()=>this.showLookupModal()}"
          >
            <vlocity-icon
              baseurl="/_slds/icons/"
              icon="utility:search"
              size="x-small"
              extraclass="vpc-dark-icon"
            >
            </vlocity-icon>
          </button>
        </div>
      </div>
    `;}render(){render(this.template(),this);}clearValue(){this.value={};this.render();this.dispatchEvent(new CustomEvent("onvaluechange",{detail:{value:this.value}}));}connectedCallback(){this.render();}showLookupModal(){this.modalElem=document.createElement("vlocity-modal");this.modalElem.setAttribute("title",this.translation.translate("PCLookupSearchTitle"));this.appendChild(this.modalElem);setTimeout(()=>{const modalContent=this.modalElem.querySelector(".slds-modal__content"),sldsModal=this.modalElem.querySelector(".slds-modal");sldsModal.style.zIndex="100000";render(html`
          <vlocity-pc-lookup-search
            .value=${this.value}
            objectname=${this.objectName}
            specificationTypeFilter=${this.specificationTypeFilter}
            selectedObjectClassId=${this.selectedObjectClassId}
          ></vlocity-pc-lookup-search>
        `,modalContent);const modalFooter=this.modalElem.querySelector(".slds-modal__footer");render(html`
          <div>
            <button
              class="slds-button slds-button_brand"
              @click="${()=>this.modalElem.remove()}"
            >
              ${this.translation.translate("Close")}
            </button>
          </div>
        `,modalFooter);this.lookupSearch=document.querySelector("vlocity-pc-lookup-search");this.lookupSearch.addEventListener("vpclookupitemselect",evt=>{this.modalElem.remove();this.value=evt.detail;this.render();this.dispatchEvent(new CustomEvent("onvaluechange",{detail:{value:this.value}}));});});}}window.customElements.define(VlocityPCLookupField.is,VlocityPCLookupField);const template$1=element=>{const sectionEle=element.sectionElement;return html`
    <style>
      .via-slds .vpc-section-element .slds-form-element,
      vlocity-datepicker {
        display: inline-block;
        width: 92%;
      }

      .via-slds .vpc-section-element vlocity-datepicker .slds-form-element {
        width: auto;
      }

      vlocity-datepicker .slds-form-element {
        width: auto;
      }

      .vpc-section-element .vpc-lookup-button {
        float: none;
      }

      .via-slds .vpc-section-element vlocity-textarea .slds-form-element__help {
        margin-top: 0;
      }

      .via-slds .vpc-field-layout_settings {
        fill: var(--vpc-primary-color);
      }

      .via-slds a,
      .via-slds a:focus,
      .via-slds a:hover,
      vlocity-tooltip a,
      vlocity-tooltip a:hover,
      vlocity-tooltip a:focus {
        text-decoration: none;
      }
    </style>
    <div
      id="${"Attribute"===sectionEle.type?`attribute-${sectionEle.attributeId}`:`field-${sectionEle.Id}`}"
      class="${element.enableBlockStyles?"vpc-block-styling":""} ${"Attribute"===sectionEle.type?"vpc-pointer":""}"
      @click="${element.enableBlockStyles&&"Attribute"===sectionEle.type?event=>onElementClicked(event,element,sectionEle):""}"
    >
      ${element.enableBlockStyles?html`
            <div class="vpc-block-header">
              <div class="vpc-block-header__desc">
                <span
                  class="vpc-block-header__active-indicator ${sectionEle.isActiveAssignment||"Field"===sectionEle.type?"vpc-active-assignment":"vpc-inactive-assignment"}"
                ></span>
                <span class="vpc-block-header__label">${sectionEle.label}</span>
              </div>
              <div class="vpc-block-header__behaviour-flags">
                ${sectionEle.isRequired?html`
                      <span
                        >${element.translationSdk.translate("Required")}</span
                      >
                    `:""}
                ${sectionEle.isRuntimeHidden?html`
                      <span>${element.translationSdk.translate("Hidden")}</span>
                    `:""}
                ${sectionEle.isRuntimeReadOnly?html`
                      <span
                        >${element.translationSdk.translate("ReadOnly")}</span
                      >
                    `:""}
                ${sectionEle.hasRule?html`
                      <span
                        >${element.translationSdk.translate("HasRule")}</span
                      >
                    `:""}
              </div>
            </div>
          `:""}
      <div class="vpc-section-element-input">
        ${getElementInput(element,sectionEle)}
      </div>
      <div></div>
    </div>
  `;},onElementClicked=(evt,element,sectionEle)=>{if(evt.target.classList.contains("vpc-block-header__active-indicator")){if("Attribute"===sectionEle.type){element.toggleActiveSetting();}evt.preventDefault();return;}if(!("INPUT"===evt.target.tagName||"TEXTAREA"===evt.target.tagName||evt.target.classList.contains("slds-button")||evt.target.classList.contains("slds-checkbox_faux")||evt.target.classList.contains("slds-radio_faux"))){element.onEditClicked();evt.preventDefault();}},getElementInput=(element,sectionEle)=>{let inputType=sectionEle.inputType.toLowerCase();const dataType=sectionEle.dataType.toLowerCase();let selectedValues=[],multiPickListValue;if("multi picklist"===dataType){inputType="checkbox"===inputType?"multiselect checkbox":inputType;selectedValues=sectionEle.value&&sectionEle.value.split(";");multiPickListValue=sectionEle.value&&sectionEle.value.split(";").join(",");}if(("multiselect checkbox"===inputType||"radiobutton"===inputType)&&sectionEle.options&&sectionEle.options.length){sectionEle.options.forEach(option=>{option.id="radiobutton"===inputType?`radio-${option.value}`:`checkbox-${option.value}`;});}switch(inputType){case"text":case"string":return html`
        <vlocity-input
          required="${element.isDesignTimeRequired()?"true":""}"
          type="text"
          value="${sectionEle.value||""}"
          label="${element.enableBlockStyles?"":sectionEle.label}"
          maxlength="${sectionEle.maxLength||""}"
        >
        </vlocity-input>
      `;case"number":case"single value":case"percent":case"currency":return html`
        <vlocity-input
          type="number"
          required="${element.isDesignTimeRequired()?"true":""}"
          label="${element.enableBlockStyles?"":sectionEle.label}"
          value="${sectionEle.value||""}"
        >
        </vlocity-input>
      `;case"textarea":return html`
        <div>
          <vlocity-textarea
            required="${element.isDesignTimeRequired()?"true":""}"
            label="${element.enableBlockStyles?"":sectionEle.label}"
            value="${sectionEle.value||""}"
            rows="2"
            requiredErrorMessage=" "
          ></vlocity-textarea>
        </div>
      `;case"buttongroup":return html`
        <div class="slds-form-element">
          ${element.enableBlockStyles?"":html`
                <label class="slds-form-element__label">
                  ${element.isDesignTimeRequired()?html`
                        <abbr
                          class="slds-required"
                          title="${element.translationSdk.translate("Required")}"
                          >*
                        </abbr>
                      `:``}${sectionEle.label}
                </label>
              `}
          <div>
            <vlocity-pc-button-group
              .options=${sectionEle.options}
              ?multipicklist=${"multi picklist"===dataType}
              selectedoption="${sectionEle.value||""}"
            >
            </vlocity-pc-button-group>
            <div
              class="slds-required slds-form-element__help${element.isInvalidRequired()&&element.sectionElement.touched?"":" slds-hide"}"
            >
              ${element.translationSdk.translate("RequiredField")}
            </div>
          </div>
        </div>
      `;case"radiobutton":return html`
        ${element.enableBlockStyles?"":html`
              <span>${sectionEle.label}</span>
            `}
        <vlocity-radio-group
          value="${sectionEle.value}"
          required="${element.isDesignTimeRequired()?"true":""}"
          options="${JSON.stringify(sectionEle.options)}"
        ></vlocity-radio-group>
      `;case"date":return html`
        <vlocity-datepicker
          value="${sectionEle.formattedDate||""}"
          required="${element.isDesignTimeRequired()?"true":"false"}"
          label=${element.enableBlockStyles?"":sectionEle.label}
          requiredvalidationessage=" "
          format="MMM dd, yyyy"
          timezone="${vlocityPcConfig.timeZone}"
          locale="${vlocityPcConfig.userLocaleInBcp47Format}"
          translations="${JSON.stringify(VlocityPCUtils.getDatePickerLabelList())}"
        >
        </vlocity-datepicker>
      `;case"datetime":return html`
        <vlocity-datepicker
          label=${element.enableBlockStyles?"":sectionEle.label}
          extraclass=""
          value="${sectionEle.formattedDate||""}"
          required="${element.isDesignTimeRequired()?"true":"false"}"
          showTimePicker
          requiredvalidationessage=" "
          timezone="${vlocityPcConfig.timeZone}"
          locale="${vlocityPcConfig.userLocaleInBcp47Format}"
          format="MMM dd, yyyy hh:mm 12h"
          translations="${JSON.stringify(VlocityPCUtils.getDatePickerLabelList())}"
        >
        </vlocity-datepicker>
      `;case"dropdown":case"picklist":return html`
        ${"multi picklist"===dataType?html`
              <vlocity-combobox
                options="${sectionEle.options?JSON.stringify(sectionEle.options):"[]"}"
                iconbaseurl="/_slds/icons/"
                label="${element.enableBlockStyles?"":sectionEle.label}"
                value="${multiPickListValue}"
                multiple="true"
                required="${element.isDesignTimeRequired()?"true":""}"
                disabledefaultsort
              ></vlocity-combobox>
            `:html`
              <vlocity-combobox
                options="${sectionEle.isDependentPicklist?sectionEle.controllingFieldValue?JSON.stringify(sectionEle.options[sectionEle.controllingFieldValue]):"[]":sectionEle.options?JSON.stringify(sectionEle.options):"[]"}"
                iconbaseurl="/_slds/icons/"
                label="${element.enableBlockStyles?"":sectionEle.label}"
                data-label="${sectionEle.fieldApiName}"
                value="${sectionEle.value}"
                required="${element.isDesignTimeRequired()?"true":""}"
                disabledefaultsort
              ></vlocity-combobox>
            `}
      `;case"boolean":case"checkbox":return html`
        <div class="slds-form-element">
          ${element.enableBlockStyles?"":html`
                <label class="slds-form-element__label">
                  ${element.isDesignTimeRequired()?html`
                        <abbr
                          class="slds-required"
                          title="${element.translationSdk.translate("Required")}"
                          >*
                        </abbr>
                      `:``}
                  ${sectionEle.label}
                </label>
              `}
          <div>
            <vlocity-checkbox
              checked=${element.sectionElement.value}
            ></vlocity-checkbox>
          </div>
        </div>
      `;case"lookup":case"reference":return html`
        <div class="slds-form-element">
          ${element.enableBlockStyles?"":html`
                <label class="slds-form-element__label">
                  ${element.isDesignTimeRequired()?html`
                        <abbr
                          class="slds-required"
                          title="${element.translationSdk.translate("Required")}"
                          >*
                        </abbr>
                      `:``}
                  ${sectionEle.label}
                </label>
              `}
          <div class="slds-form-element__control">
            <vlocity-pc-lookup-field
              .value="${sectionEle.refValue||{}}"
              objectname="${sectionEle.lookupObjectName}"
              ?disablelookup="${sectionEle.disabled}"
              specificationTypeFilter="${sectionEle.specificationTypeFilter}"
              data-label="${sectionEle.fieldApiName}"
              selectedObjectClassId="${sectionEle.selectedObjectClassId||null}"
            ></vlocity-pc-lookup-field>
          </div>
        </div>
      `;case"multiselect checkbox":return html`
        <div class="slds-form-element">
          ${element.enableBlockStyles?"":html`
                <label class="slds-form-element__label">
                  ${element.isDesignTimeRequired()?html`
                        <abbr
                          class="slds-required"
                          title="${element.translationSdk.translate("Required")}"
                          >*
                        </abbr>
                      `:``}
                  ${sectionEle.label}
                </label>
              `}
          ${sectionEle.options.map(item=>html`
          <vlocity-checkbox
          value="${item.value}""
          checked="${selectedValues&&0<=selectedValues.indexOf(item.value)}"
          label="${item.label}"
          checkboxid="${item.id}"></vlocity-checkbox>
        `)}
        </div>
      `;}},getSettingsIconHTML=(element,sectionEle)=>{return html`
    <a
      href="javascript:void(0)"
      @click="${()=>element.toggleSetting("isReadonly")}"
      class="${element.noSettingsIcon?"slds-hide":""}"
    >
      <vlocity-tooltip
        tooltiptype="iconlink"
        iconbaseurl="/_slds/icons/"
        nubbinposition="bottom"
        icon="utility:lock"
        iconclass="${sectionEle.isRuntimeReadOnly?"vpc-field-layout_settings":"slds-icon-text-default"}"
        iconsize="x-small"
        value="${element.translationSdk.translate("PCReadOnlyIcon")}"
      >
      </vlocity-tooltip>
    </a>
    <a
      href="javascript:void(0)"
      @click="${()=>element.toggleSetting("isVisible")}"
      class="${element.noSettingsIcon?"slds-hide":""}"
    >
      <vlocity-tooltip
        tooltiptype="iconlink"
        iconbaseurl="/_slds/icons/"
        nubbinposition="bottom"
        icon="utility:preview"
        iconclass="${sectionEle.isRuntimeHidden?"vpc-field-layout_settings":"slds-icon-text-default"}"
        iconsize="x-small"
        value="${element.translationSdk.translate("PCVisibleIcon")}"
      >
      </vlocity-tooltip>
    </a>
    <a
      href="javascript:void(0)"
      @click="${()=>element.onEditClicked()}"
      class="${element.noSettingsIcon?"slds-hide":""}"
    >
      <vlocity-tooltip
        tooltiptype="iconlink"
        iconbaseurl="/_slds/icons/"
        nubbinposition="bottom"
        icon="utility:edit"
        iconclass="vpc-field-layout_settings slds-m-left_small"
        iconsize="x-small"
        value="${element.translationSdk.translate("PCEditAttributeAssignment")}"
      >
      </vlocity-tooltip>
    </a>
  `;};var vlocityPcLayoutSectionElement_tmpl={template:template$1};class VlocityPCSectionElement extends HTMLElement{static get is(){return"vlocity-pc-layout-section-element";}constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();}render(){render(template$1(this),this);}set sectionElement(value){this._sectionElement=value;this.setFormattedDate(this._sectionElement);if(this.componentMounted){this.render();setTimeout(()=>{this.applyTabIndex();this.setupBlurEvents();this.setupChangeEvents();});}}get sectionElement(){return this._sectionElement;}get noSettingsIcon(){return this.hasAttribute("nosettingsicon");}get enableBlockStyles(){return this.hasAttribute("enableblockstyles");}connectedCallback(){this.setFormattedDate(this.sectionElement);this.style.display="block";this.render();setTimeout(()=>{this.applyTabIndex();this.setupBlurEvents();this.setupChangeEvents();this.componentMounted=!0;});this.registerEvents();}setFormattedDate(sectionElement){const inputType=sectionElement.inputType.toLowerCase();if("datetime"===inputType||"date"===inputType){sectionElement.formattedDate=sectionElement.value?VlocityPCUtils.getFormattedDateObject(sectionElement.value,inputType):null;}}registerEvents(){if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ObjectTypeId")||this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")){this.objectTypeOrProdSpecHandlers={change:this.onObjectTypeOrProdSpecChange.bind(this)};pubsub.register("onObjectTypeOrProdSpecChange",this.objectTypeOrProdSpecHandlers);}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")||this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ObjectTypeId")){this.specTypeHandlers={change:this.onSpecTypeChange.bind(this)};pubsub.register("onSpecTypeChange",this.specTypeHandlers);}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")||this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ObjectTypeId")){this.specSubTypeHandlers={change:this.onSpecSubTypeChange.bind(this)};pubsub.register("onSpecSubTypeChange",this.specSubTypeHandlers);}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("SubType")){this.typeHandlers={change:this.onTypeChange.bind(this)};pubsub.register("onTypeChange",this.typeHandlers);}}unregisterEvents(){pubsub.unregister("onSpecTypeChange",this.specTypeHandlers);pubsub.unregister("onObjectTypeOrProdSpecChange",this.objectTypeOrProdSpecHandlers);pubsub.unregister("onSpecSubTypeChange",this.specSubTypeHandlers);pubsub.unregister("onTypeChange",this.typeHandlers);}disconnectedCallback(){this.unregisterEvents();}onTypeChange(details){const comboBox=this.querySelector("vlocity-combobox");this.sectionElement.value=null;comboBox.options=JSON.stringify(this.sectionElement.options[details.typeValue]);this.sectionElement.controllingFieldValue=details.typeValue;this.render();}disableLookupElement(fieldApiName,disable){const lookupElem=this.querySelector(`vlocity-pc-lookup-field[data-label='${fieldApiName}']`),lookupInput=lookupElem.querySelector("input[disabled]");if(disable){lookupElem.setAttribute("disablelookup","");lookupInput.setAttribute("value","");}else{lookupElem.removeAttribute("disablelookup");}}onObjectTypeOrProdSpecChange(details){if(!details.value){this.disableLookupElement(this.sectionElement.fieldApiName,!1);}else if(details.fieldApiName!==this.sectionElement.fieldApiName){this.sectionElement.value=null;this.sectionElement.refValue=null;this.disableLookupElement(this.sectionElement.fieldApiName,!0);this.render();}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")){if("Simple"!==details.specSubTypeValue||"Offer"!==details.specTypeValue){this.sectionElement.value=null;this.sectionElement.refValue=null;this.disableLookupElement(this.sectionElement.fieldApiName,!0);this.render();}}}onSpecTypeChange(specDetails){if(!specDetails.productSpecValue&&specDetails.objectTypeValue){/* Object Type is set & Prod Spec is not defined, nothing needs to be done */return;}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")){this.sectionElement.specificationTypeFilter="Product";const disableProdSpec="Offer"===specDetails.specValue?"Simple"!==specDetails.specSubTypeValue?!0:!1:!0;if(disableProdSpec){this.sectionElement.value=null;this.sectionElement.refValue=null;this.disableLookupElement(this.sectionElement.fieldApiName,disableProdSpec);}}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ObjectTypeId")){this.disableLookupElement(this.sectionElement.fieldApiName,!1);}this.render();}onSpecSubTypeChange(details){if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")){const productSpecElem=this.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ProductSpecId")}']`),disableProdSpec="Simple"===details.specSubTypeValue?"Offer"===details.specTypeValue?details.objectTypeValue?!0:!1:!0:!0;if(disableProdSpec){this.sectionElement.value=null;this.sectionElement.refValue=null;this.disableLookupElement(this.sectionElement.fieldApiName,!0);this.render();}else{this.disableLookupElement(this.sectionElement.fieldApiName,!1);productSpecElem.setAttribute("specificationTypeFilter","Product");}}else{const objectTypeElem=this.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ObjectTypeId")}']`);if("Offer"===details.specTypeValue&&"Simple"!==details.specSubTypeValue||!details.productSpecValue){/**
         * Enable object type lookup,
         * for Bundled Offer or when Product Spec is not set for Simple Offer
         */objectTypeElem.removeAttribute("disablelookup");}}}applyTabIndex(){const inpElements=this.getInputElement();if(inpElements&&inpElements.length){inpElements.forEach(inpElement=>{inpElement.setAttribute("tabindex",this.sectionElement.tabIndex);});return;}const inputElements=this.querySelectorAll("vlocity-pc-button-group .vpc-button-group_item");inputElements.forEach(elem=>{elem.setAttribute("tabindex",this.sectionElement.tabIndex);elem.addEventListener("blur",()=>{if(this.sectionElement.isRequired&&!this.sectionElement.value){this.sectionElement.required=!0;}});});}setupBlurEvents(){const inpElements=this.getInputElement();if(inpElements&&inpElements.length){inpElements.forEach(inpElement=>{inpElement.addEventListener("blur",()=>{this.sectionElement.touched=!0;this.render();});});}const inputElements=this.querySelectorAll("vlocity-pc-button-group .vpc-button-group_item");inputElements.forEach(elem=>{elem.setAttribute("tabindex",this.sectionElement.tabIndex);elem.addEventListener("blur",()=>{this.sectionElement.touched=!0;this.render();});});}setErrorClass(){const inpElement=this.querySelector(".slds-form-element");if(inpElement&&this.isInvalidRequired()){inpElement.classList.add("slds-has-error");}else{inpElement.classList.remove("slds-has-error");}}isDesignTimeRequired(){return this.sectionElement.isRequired&&(!this.sectionElement.isRuntimeConfigurable||this.sectionElement.isRuntimeReadOnly||this.sectionElement.isRuntimeConfigurable&&this.sectionElement.isRuntimeHidden);}isInvalidRequired(){return this.isDesignTimeRequired()&&!this.sectionElement.value;}getInputElement(){return this.querySelectorAll("vlocity-input input").length?this.querySelectorAll("vlocity-input input"):this.querySelectorAll("vlocity-textarea textarea").length?this.querySelectorAll("vlocity-textarea textarea"):this.querySelectorAll("vlocity-datepicker input").length?this.querySelectorAll("vlocity-datepicker input"):this.querySelectorAll("vlocity-combobox input").length?this.querySelectorAll("vlocity-combobox input"):this.querySelectorAll("vlocity-pc-button-group").length?this.querySelectorAll("vlocity-pc-button-group"):this.querySelectorAll("vlocity-radio-group input").length?this.querySelectorAll("vlocity-radio-group input"):this.querySelectorAll("vlocity-checkbox input").length?this.querySelectorAll("vlocity-checkbox input"):this.querySelectorAll("vlocity-pc-lookup-field .vpc-lookup-button button");}setupChangeEvents(){const sectionElementInput=this.querySelector("vlocity-input")||this.querySelector("vlocity-textarea")||this.querySelector("vlocity-combobox")||this.querySelector("vlocity-radio-group"),isListening=sectionElementInput&&sectionElementInput.hasAttribute("islistening");if(!isListening){sectionElementInput&&sectionElementInput.setAttribute("islistening",!0);sectionElementInput&&sectionElementInput.addEventListener("onvaluechange",evt=>{if("Multi Picklist"===this.sectionElement.dataType){const value=evt.detail.value();this.sectionElement.value=value&&value.split(",").join(";");}else{this.sectionElement.value=evt.detail.value();}this.setErrorClass();if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("SpecificationType")){const specSubTypeElem=document.querySelector(`vlocity-combobox[data-label='${VlocityPCUtils.getCustomFieldName("SpecificationSubType")}']`),productSpecElem=document.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ProductSpecId")}']`),productSpec=productSpecElem.querySelector(`input[disabled]`),objectTypeElem=document.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ObjectTypeId")}']`),objectType=objectTypeElem.querySelector(`input[disabled]`),details={specValue:this.sectionElement.value,specSubTypeValue:specSubTypeElem&&specSubTypeElem.value,productSpecValue:productSpec&&productSpec.value,objectTypeValue:objectType&&objectType.value};pubsub.fire("onSpecTypeChange","change",details);}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("SpecificationSubType")){const specTypeElem=document.querySelector(`vlocity-combobox[data-label='${VlocityPCUtils.getCustomFieldName("SpecificationType")}']`),productSpecElem=document.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ProductSpecId")}']`),productSpec=productSpecElem.querySelector(`input[disabled]`),objectTypeElem=document.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ObjectTypeId")}']`),objectType=objectTypeElem.querySelector(`input[disabled]`),details={specSubTypeValue:this.sectionElement.value,specTypeValue:specTypeElem&&specTypeElem.value,productSpecValue:productSpec&&productSpec.value,objectTypeValue:objectType&&objectType.value};pubsub.fire("onSpecSubTypeChange","change",details);}if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("Type")){pubsub.fire("onTypeChange","change",{typeValue:this.sectionElement.value});}this.render();});}const datePicker=this.querySelector("vlocity-datepicker");datePicker&&datePicker.addEventListener("vlocitydatepickerchanged",event=>{const date=!event.detail.date||isNaN(event.detail.date.getTime())?null:event.detail.date,inputType=this.sectionElement.inputType.toLowerCase();this.sectionElement.formattedDate=date;if("Attribute"===this.sectionElement.type){this.sectionElement.value=VlocityPCUtils.getAttributeDateTime(date,inputType);}else{this.sectionElement.value=VlocityPCUtils.getUTCTimeStamp(date,inputType);}});const btnGroup=this.querySelector("vlocity-pc-button-group");btnGroup&&btnGroup.addEventListener("onvaluechange",evt=>{this.sectionElement.value=evt.detail.value;this.setErrorClass();this.render();});const lookup=this.querySelector("vlocity-pc-lookup-field"),isListeningLookup=lookup&&lookup.hasAttribute("islistening");if(!isListeningLookup){lookup&&lookup.setAttribute("islistening",!0);lookup&&lookup.addEventListener("onvaluechange",evt=>{this.sectionElement.value=evt.detail.value&&evt.detail.value.Id;if(this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ObjectTypeId")||this.sectionElement.fieldApiName===VlocityPCUtils.getCustomFieldName("ProductSpecId")){const specTypeElem=document.querySelector("vlocity-combobox[data-label='"+VlocityPCUtils.getCustomFieldName("SpecificationType")+"']"),specSubTypeElem=document.querySelector("vlocity-combobox[data-label='"+VlocityPCUtils.getCustomFieldName("SpecificationSubType")+"']"),details={value:this.sectionElement.value,fieldApiName:this.sectionElement.fieldApiName,specSubTypeValue:specSubTypeElem&&specSubTypeElem.value,specTypeValue:specTypeElem&&specTypeElem.value};pubsub.fire("onObjectTypeOrProdSpecChange","change",details);}this.setErrorClass();this.render();});}const checkboxes=this.querySelectorAll("vlocity-checkbox");checkboxes.forEach(cb=>{cb.addEventListener("onvaluechange",evt=>{if("Multi Picklist"===this.sectionElement.dataType){const value=evt.target.getAttribute("value"),values=this.sectionElement.value&&this.sectionElement.value.split(";")||[];if(evt.target.checked&&0>values.indexOf(value)){values.push(value);}else if(!evt.target.checked){const idx=values.indexOf(value);values.splice(idx);}this.sectionElement.value=values.join(";");this.setErrorClass();}else{this.sectionElement.value=evt.target.checked;this.setErrorClass();}});});}onEditClicked(){pubsub.fire("vpclayoutsectionelement","click",{attributeId:this.sectionElement.attributeId,target:this});}toggleSetting(settingName){const input=this.sdk.createUpdateSingleAttributeInput();input.productId=this.sectionElement.objectId;input.attributeId=this.sectionElement.attributeId;input.isVisible=!this.sectionElement.isRuntimeHidden;input.isConfigurable=this.sectionElement.isRuntimeConfigurable;input.isReadonly=this.sectionElement.isRuntimeReadOnly;input[settingName]=!input[settingName];VlocityPCUtils.showSpinner();this.sdk.updateSingleAttribute(input).then(response=>{if("INVOKE-200"!==response.errorCode){VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),response.error,"error");}else{this.sectionElement.isRuntimeHidden=!input.isVisible;this.sectionElement.isRuntimeReadOnly=input.isReadonly;pubsub.fire("vpctoggleattributesetting","toggleSetting",{settingName:"isVisible"===settingName?"IsHidden":"IsReadOnly",value:"isVisible"===settingName?!input.isVisible:input.isReadonly,attributeId:this.sectionElement.attributeId});this.render();}}).catch(err=>{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),err,"error");}).finally(()=>{VlocityPCUtils.hideSpinner();});}toggleActiveSetting(){const input=this.sdk.createUpdateSingleAttributeInput();input.productId=this.sectionElement.objectId;input.attributeId=this.sectionElement.attributeId;input.isVisible=!this.sectionElement.isRuntimeHidden;input.isConfigurable=this.sectionElement.isRuntimeConfigurable;input.isReadonly=this.sectionElement.isRuntimeReadOnly;input.isActive=!this.sectionElement.isActiveAssignment;VlocityPCUtils.showSpinner();this.sdk.updateSingleAttribute(input).then(response=>{if("INVOKE-200"!==response.errorCode){VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),response.error,"error");}else{this.sectionElement.isActiveAssignment=input.isActive;this.render();}}).catch(err=>{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),err,"error");}).finally(()=>{VlocityPCUtils.hideSpinner();});}}window.customElements.define(VlocityPCSectionElement.is,VlocityPCSectionElement);var vlocityPcLayoutSectionElement={VlocityPCSectionElement:VlocityPCSectionElement};const template$2=element=>{const columnLayout=element.section.columnLayout.toLowerCase();return html`
    <style>
      .vpc-section_two-column {
        display: grid;
        grid-template-columns: 50% 50%;
        grid-gap: 10px;
      }

      .vpc-section_one-column
        .vpc-section-element
        vlocity-input
        input[type="number"] {
        width: 31%;
      }

      .vpc-section_two-column
        .vpc-section-element
        vlocity-input
        input[type="number"] {
        width: 64%;
      }

      .vpc-section .vpc-section-element {
        margin: 5px 10px;
      }
    </style>
    <div class="slds-text-heading_small vpc-title-caps slds-border_bottom">
      ${element.section.name}
    </div>

    <div
      class="vpc-section${"2 columns"===columnLayout?" vpc-section_two-column":" vpc-section_one-column"}"
    >
      ${element.columns.map(column=>html`
          <div>
            ${column.map(sectionEle=>html`
                <vlocity-pc-layout-section-element
                  original="${sectionEle.value}"
                  fieldname="${sectionEle.fieldApiName}"
                  attributeid="${sectionEle.id}"
                  class="vpc-section-element"
                  .sectionElement=${sectionEle}
                  ?enableblockstyles=${element.enableBlockStyles}
                >
                </vlocity-pc-layout-section-element>
              `)}
          </div>
        `)}
    </div>
  `;};var vlocityPcLayoutSection_tmpl={template:template$2};class VlocityPCObjectSection extends HTMLElement{static get is(){return"vlocity-pc-layout-section";}render(){render(template$2(this),this);}set section(value){this._section=value;}get section(){return this._section;}get startTabIndex(){return+this.getAttribute("startTabIndex");}get enableBlockStyles(){return this.hasAttribute("enableblockstyles");}connectedCallback(){this.computeColumns();this.computeTabIndex();this.style.display="block";this.render();if(this.enableBlockStyles){setTimeout(()=>{this.setupSectionElements();});}else{setTimeout(()=>{this.disableProductSpecLookup();});}}disableProductSpecLookup(){const productSpecElem=this.querySelector("vlocity-pc-lookup-field[data-label='"+VlocityPCUtils.getCustomFieldName("ProductSpecId")+"']");if(productSpecElem){productSpecElem.setAttribute("disablelookup","");}}setupSectionElements(){const specTypeElem=this.querySelector(`vlocity-combobox[data-label='${VlocityPCUtils.getCustomFieldName("SpecificationType")}']`),specSubTypeElem=this.querySelector(`vlocity-combobox[data-label='${VlocityPCUtils.getCustomFieldName("SpecificationSubType")}']`),productSpecElem=this.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ProductSpecId")}']`),objectTypeElem=this.querySelector(`vlocity-pc-lookup-field[data-label='${VlocityPCUtils.getCustomFieldName("ObjectTypeId")}']`);if(specSubTypeElem&&"Simple"===specSubTypeElem.value){if(specTypeElem&&"Offer"===specTypeElem.value){const productSpec=productSpecElem&&productSpecElem.querySelector("input[disabled]"),objectType=objectTypeElem&&objectTypeElem.querySelector("input[disabled]");productSpecElem&&productSpecElem.setAttribute("specificationTypeFilter","Product");if(productSpec&&productSpec.value&&objectType&&!objectType.value){objectTypeElem.setAttribute("disablelookup","");}else if(productSpec&&!productSpec.value&&objectType&&objectType.value){productSpecElem.setAttribute("disablelookup","");}}else{productSpecElem&&productSpecElem.setAttribute("disablelookup","");}}else{productSpecElem&&productSpecElem.setAttribute("disablelookup","");}if(specTypeElem&&"undefined"!==specTypeElem.value){specTypeElem.setAttribute("disabled",!0);}if(specTypeElem&&(!specTypeElem.value||"Offer"!=specTypeElem.value)){productSpecElem.setAttribute("disablelookup","");}}computeColumns(){if("2 columns"===this.section.columnLayout.toLowerCase()){this.columns=[this.getColumnFromSection(this.section.sectionElements,1),this.getColumnFromSection(this.section.sectionElements,2)];}else{this.columns=[this.section.sectionElements.sort((item1,item2)=>item1.sequenceNumber-item2.sequenceNumber)];}}computeTabIndex(){const tabKeySequence=this.section.tabKeySequence.toLowerCase();if(!this.columns||0===this.columns.length){return;}this.columns.forEach((col,colIdx)=>{col.forEach((row,rowIdx)=>{if("left-right"===tabKeySequence){if(0===rowIdx){if(0===colIdx){row.tabIndex=this.startTabIndex;}else{row.tabIndex=this.startTabIndex+1;}}else{row.tabIndex=col[rowIdx-1].tabIndex+2;}}else{if(0==rowIdx){if(0===colIdx){row.tabIndex=this.startTabIndex;}else{const prevCol=this.columns[colIdx-1];row.tabIndex=this.startTabIndex+prevCol.length;}}else{row.tabIndex=col[rowIdx-1].tabIndex+1;}}});});}getColumnFromSection(section,columnNumber){return section.filter(item=>item.columnNumber===columnNumber).sort((item1,item2)=>item1.sequenceNumber-item2.sequenceNumber);}}window.customElements.define(VlocityPCObjectSection.is,VlocityPCObjectSection);var vlocityPcLayoutSection={VlocityPCObjectSection:VlocityPCObjectSection};const template$3=element=>{return html`
    <style>
      vlocity-pc-object-section {
        padding: 20px;
      }
      .vlocity-pc-layout-section {
        margin-bottom: 15px;
      }
      .vpc-block-styling {
        border: solid #c7c7c7;
        border-width: 1px;
        background-color: #fff;
      }
      .vpc-selected-element {
        border-color: #1489ee;
      }
      .vpc-pointer {
        cursor: pointer;
      }
      .vpc-block-styling .vpc-section-element-input {
        padding: 10px;
      }
      .vpc-block-header {
        display: grid;
        grid-template-columns: 1fr 1fr;
        width: 100%;
        height: 30px;
        padding: 0 10px;
        background-color: #fafaf9;
      }
      .vpc-block-header div {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .vpc-block-header .vpc-block-header__desc {
        line-height: 30px;
      }
      .vpc-block-header .vpc-block-header__behaviour-flags {
        float: right;
      }
      .vpc-block-header .vpc-block-header__behaviour-flags span {
        float: right;
        padding: 3px;
        border-radius: 3px;
        margin: 3px 3px 3px 0;
        background-color: #eaeaea;
      }
      .vpc-block-header .vpc-block-header__active-indicator {
        display: inline-block;
        width: 17px;
        height: 17px;
        border-radius: 50%;
        border-width: 2px;
        background-color: white;
        margin: 10px 10px -4px 5px;
      }
      .vpc-active-assignment {
        border: solid var(--vpc-primary-status-border-color);
      }
      .vpc-inactive-assignment {
        border: solid var(--vpc-secondary-status-border-color);
      }
      .vpc-block-header .vpc-block-header__label {
        font-weight: bold;
      }
      .vpc-block-header .vpc-block-header__datatype {
        color: grey;
        font-weight: 400;
      }
    </style>
    ${element.objectSections.map((item,idx)=>html`
        <vlocity-pc-layout-section
          .section=${item}
          starttabindex=${getStartTabIndex(idx,element)}
          class="vlocity-pc-layout-section"
          ?enableblockstyles=${element.enableBlockStyles}
        ></vlocity-pc-layout-section>
      `)}
    ${element.objectSections.length?html`
          <button
            class="slds-button slds-button_brand vpc-field-layout-done"
            @click=${()=>element.saveChanges()}
          >
            ${element.translationSdk.translate("Done")}
          </button>
          <button
            class="slds-button slds-button_neutral"
            @click=${()=>element.cancelChanges()}
          >
            ${element.translationSdk.translate("Cancel")}
          </button>
        `:""}
  `;},getStartTabIndex=(idx,element)=>{const section=element.objectSections[idx];if(section.startTabIndex){return section.startTabIndex;}if(0===idx){return 1;}else{const prevSection=element.objectSections[idx-1];return prevSection.sectionElements.length*prevSection.sequenceNumber+1;}};var vlocityPcFieldLayout_tmpl={template:template$3};class VlocityPCFieldLayout extends HTMLElement{static get is(){return"vlocity-pc-field-layout";}constructor(){super();this.sdk=VlocitySDK.productconsole.getInstance();this.objectDetails=this.sdk.vlocityObjectDetails();this.translationSdk=VlocitySDK.translation.getInstance();}render(){render(template$3(this),this);}get openNewRecord(){return this.hasAttribute("opennewrecord");}get isObjectType(){return this.hasAttribute("forobjecttype");}connectedCallback(){this.style.display="block";if(!this.objectSections){this.getObject();}else{this.render();}this.canSave=!0;this.sectionElementHandler={click:this.onSectionElementEdit.bind(this)};pubsub.register("vpclayoutsectionelement",this.sectionElementHandler);this.attributeUpdateHandler={result:this.onAttributeUpdate.bind(this)};pubsub.register("vpcattributeupdated",this.attributeUpdateHandler);}disconnectedCallback(){pubsub.unregister("vpclayoutsectionelement",this.sectionElementHandler);pubsub.unregister("vpcattributeupdated",this.attributeUpdateHandler);}onAttributeUpdate(){this.initialObjectSections=JSON.stringify(this.objectSections);}onSectionElementEdit(evnt){if(this.validateChanges()){VlocityPCUtils.openToast(this.translationSdk.translate("PCWarningTitle"),this.translationSdk.translate("PCProductChangesSaveWarning"),"warning");}else{pubsub.fire("vpcsectionelement","settings",evnt);}}getObject(isRefresh){VlocityPCUtils.showSpinner();const promise=this.objectId?this.getObjectById():this.getObjectByObjectName();promise.then(objectSections=>{if(objectSections&&0<objectSections.length){this.objectSections=objectSections.sort((item1,item2)=>item1.sequenceNumber-item2.sequenceNumber);}else{this.objectSections=[];VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),this.translationSdk.translate("PCLayoutErrorOnProduct"),"error",1e4);}this.initialObjectSections=JSON.stringify(this.objectSections);if(isRefresh){render(html``,this);setTimeout(()=>{this.render();});}else{this.render();}pubsub.fire("vpcfieldlayout","layoutLoaded",{});}).catch(errors=>{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),errors[0],"error",1e4);}).finally(()=>{VlocityPCUtils.hideSpinner();});}get objectId(){return this.getAttribute("objectid");}get objectName(){return this.getAttribute("objectName");}get enableBlockStyles(){return this.hasAttribute("enableblockstyles");}set objectSections(value){this.initialObjectSections=JSON.stringify(value);this._objectSections=value;}get objectSections(){return this._objectSections;}get showCancel(){return this.hasAttribute("showcancel");}getObjectById(){return this.objectDetails.getObjectById(this.objectId,this.objectName);}getObjectByObjectName(){return this.objectDetails.getNewObject(this.objectName);}saveChanges(){if(!this.validateForm()){return;}if(!this.validateChanges()){// Since there are no changes, do not make network calls and return
return;}if(this.canSave){this.canSave=!1;this.toggleDoneButton();}if(this.hasAttribute("donotsave")){pubsub.fire("vpcfieldlayoutclonesaved","clonesaved",{objectSections:this.objectSections});return;}if(!this.objectId){this.createObject();return;}VlocityPCUtils.showSpinner();this.objectDetails.saveObject(this.objectId,this.objectSections).then(responses=>{this.initialObjectSections=JSON.stringify(this.objectSections);const productResponse=responses.find(response=>{return response.result.Id===this.objectId;});if(productResponse&&productResponse.warningMessages&&productResponse.warningMessages.length){VlocityPCUtils.openToast(this.translationSdk.translate("PCWarningTitle"),productResponse.warningMessages,"warning");}VlocityPCUtils.openToast(this.translationSdk.translate("PCToastSuccessTitle"),this.translationSdk.translate("PCToastSuccessMessage"),"success");pubsub.fire("vpcfieldlayout","saveSuccess",{Id:this.objectId,object:productResponse&&productResponse.result});}).catch(errors=>{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),errors.join(", "),"error",1e4);}).finally(()=>{this.canSave=!0;this.toggleDoneButton();VlocityPCUtils.hideSpinner();});}toggleDoneButton(){const button=this.querySelector(".vpc-field-layout-done");if(this.canSave){button&&button.removeAttribute("disabled");}else{button&&button.setAttribute("disabled",!0);}}cancelChanges(){pubsub.fire("vpcfieldlayout","cancelled",{});this.objectSections=JSON.parse(this.initialObjectSections);render(html``,this);setTimeout(()=>{this.render();},0);}createObject(){VlocityPCUtils.showSpinner();this.objectDetails.createObject(this.objectName,this.objectSections,this.isObjectType).then(product=>{const successMsg="Product2"===this.objectName?this.translationSdk.translate("PCProductCreateSuccessMessage"):this.translationSdk.translate("PCToastSuccessMessage");VlocityPCUtils.openToast(this.translationSdk.translate("PCToastSuccessTitle"),successMsg,"success");if(this.openNewRecord){sforce.console.getEnclosingPrimaryTabId(result=>{window.sessionStorage.setItem("newProductTabId",result.id);sforce.console.openPrimaryTab(null,`/${product.Id}`,!0,product.Name,result=>{},product.Name);});}pubsub.fire("vpcfieldlayout","objectCreated",product);}).catch(errors=>{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),errors.join(", "),"error");}).finally(()=>{this.canSave=!0;this.toggleDoneButton();VlocityPCUtils.hideSpinner();});}validateForm(){let valid=!0;const sectionElements=this.querySelectorAll("vlocity-pc-layout-section-element");let effiectiveFrom=null,effiectiveUntil=null;if(sectionElements&&sectionElements.length){sectionElements.forEach(elem=>{const fieldName=elem.getAttribute("fieldname"),datatype=elem.sectionElement.dataType.toUpperCase(),value=elem.sectionElement.value;if("DATE"===datatype){valid=value?VlocityPCUtils.validateYearInDate(value)&&valid:valid;}if(fieldName===VlocityPCUtils.getCustomFieldName("EffectiveFromDate")){effiectiveFrom=value;}if(fieldName===VlocityPCUtils.getCustomFieldName("EffectiveUntilDate")){effiectiveUntil=value;}elem.sectionElement.touched=!0;if(elem.isInvalidRequired()){elem.setErrorClass();valid=!1;}elem.render();});}if(effiectiveFrom&&effiectiveUntil&&new Date(effiectiveFrom)>new Date(effiectiveUntil)){valid=!1;VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),this.translationSdk.translate("PCEffectiveValidationMessage"),"error");}return valid;}refresh(){this.getObject(!0);}validateChanges(){const initialSections=JSON.parse(this.initialObjectSections);return initialSections.some(section=>{return section.sectionElements.some(ele=>{let eleSelector=null;if("Attribute"===ele.type){eleSelector=`vlocity-pc-layout-section-element[attributeid='${ele.id}']`;}else{eleSelector=`vlocity-pc-layout-section-element[fieldname='${ele.fieldApiName}']`;}const domElement=this.querySelector(eleSelector);let hasChanges=!1;if(domElement&&domElement.sectionElement){const sectionElement=domElement.sectionElement;if(sectionElement.value!=ele.value){if(["DATETIME","DATE"].includes(ele.dataType)){hasChanges=new Date(ele.value).getTime()!==sectionElement.value;}else{hasChanges=!0;}}}return hasChanges;});});}}window.customElements.define(VlocityPCFieldLayout.is,VlocityPCFieldLayout);var vlocityPcFieldLayout={VlocityPCFieldLayout:VlocityPCFieldLayout};class VlocityPCFormsService{static isTimePlanPolicyValid(context){// These fields are not required, but if one is
// populated the done button should not be enabled.
const timePlan=context.querySelector(".vpc-time-plan").value,timePlanUoM=context.querySelector(".vpc-time-plan-units").value,startTimePolicy=context.querySelector(".vpc-start-time-policy").value,endTimePolicy=context.querySelector(".vpc-end-time-policy").value,delayAmount=context.querySelector(".vpc-delay-amount").value,delayUoM=context.querySelector(".vpc-delay-time-plan-units").value;let timeFields=[endTimePolicy,timePlan,timePlanUoM,startTimePolicy];if(this.isDelayRequired(delayAmount,delayUoM)){timeFields=[delayUoM,timePlan,endTimePolicy,timePlanUoM,delayAmount,startTimePolicy];}const fieldAmount=timeFields.filter(timeField=>"null"==timeField||""===timeField);if(0!==fieldAmount.length&&fieldAmount.length!==timeFields.length){context.timePlanId="";context.timePolicyId="";return!1;}return!0;}static isDelayRequired(delayAmount,delayUoM){return"null"!=delayAmount&&""!==delayAmount||"null"!=delayUoM&&""!==delayUoM;}static isPricingFormValid(context){pubsub.fire("initialadjustmentoverrideformclick","result",{});if(!context.isOnInitialForm){const fields=context.querySelectorAll(".vpc-required-field");let fieldErrors=!1;for(let field of fields){if(VlocityPCFormsService.isInvalidField(field,context)){field.setAttribute("errormessage","This field is required");field.setAttribute("required","true");fieldErrors=!0;}}const isTimeFieldSetValid=VlocityPCFormsService.isTimeFieldsValid(context),isDelayFieldSetValid=VlocityPCFormsService.isDelayFieldsValid(context);if(fieldErrors||!isTimeFieldSetValid||!isDelayFieldSetValid){return!1;}return!0;}}static isInvalidField(field,context){return!field.value&&!field.getAttribute("disabled")&&!field.classList.contains("vpc-hide-side-bar-item")&&VlocityPCFormsService.isValidDisplayField(field,context)&&VlocityPCFormsService.isValidFieldContext(field,context);}static isValidFieldContext(field,context){if(context.querySelector("vlocity-pc-promotion-form").classList.contains("vpc-hide-side-bar-item")&&field.classList.contains("vpc-promotion-field")){return!1;}return!0;}static isValidDisplayField(field,context){const pleContext=context.querySelector("vlocity-pc-pricing-details-form").context;return!(field.classList.contains("vpc-frequency-promotion-offer")&&("priceContext"===pleContext||"costContext"===pleContext))&&!(field.classList.contains("vpc-pricing-form-text-area")&&("adjustmentContext"===pleContext.context||"overrideContext"===pleContext.context));}static isTimeFieldsValid(context){const timeFields=context.querySelectorAll(".vpc-time-field");let timeFieldErrors=!1;if(!VlocityPCFormsService.isTimePlanPolicyValid(context)){for(let timeField of timeFields){if(!timeField.value||"null"===timeField.value){timeField.setAttribute("errormessage","This field is required");timeField.setAttribute("required","true");timeFieldErrors=!0;}}}if(timeFieldErrors){return!1;}return!0;}static isDelayFieldsValid(context){const timeFields=[...context.querySelectorAll(".vpc-delay-field")];if(!VlocityPCFormsService.isTimePlanPolicyValid(context)){const fieldAmount=timeFields.filter(timeField=>"null"==timeField.value||""===timeField.value);if(0!==fieldAmount.length&&fieldAmount.length!==timeFields.length){fieldAmount[0].setAttribute("errormessage","This field is required");fieldAmount[0].setAttribute("required","true");return!1;}}return!0;}static donePricingFormButtonHandler(context){if(VlocityPCFormsService.isPricingFormValid(context)&&context.pricingDetailsFormReady){context.setDoneButtonWaitState();if(context.isEditMode){VlocityPCFormsService.editPriceListEntry(context);}else{context.createPriceListEntry(context);}}}static setDoneButtonWaitState(context){// Show spinner in the button
context.querySelector(".vpc-pricing-forms-button-container").querySelector(".vpc-spinner-container").classList.remove("vpc-hide-side-bar-item");context.querySelector(".vpc-promo-done").classList.add("vpc-done-button-wait-state");}static removeButtonWaitState(context){context.querySelector(".vpc-pricing-forms-button-container").querySelector(".vpc-spinner-container").classList.add("vpc-hide-side-bar-item");context.querySelector(".vpc-promo-done").classList.remove("vpc-done-button-wait-state");}static cancelPricingFormButtonHandler(context){context.resetContextRules();context.resetAllForms();if(!context.getAttribute("rootproductid")){context.toggleForm();}const sideBar=context.querySelector(".vpc-side-bar-container");if(sideBar){sideBar.classList.remove("vpc-show-price-form");}}static editPriceListEntry(context){context.productConsole.editPriceListEntry(context.getCreatePriceListInput()).then(response=>{if(context.isEditMode){pubsub.fire("vpcshowadjustmentoverrideform","result",{show:!1});}// Dispatch event to let the tables that a new Price List Entry has been created
if(!context.getAttribute("rootProductId")){context.fireAddPriceListEntryEvent(response.id);}context.isEditMode=!1;VlocityPCFormsService.cancelPricingFormButtonHandler(context);context.querySelector(".vpc-promo-done").classList.remove("vpc-done-button-wait-state");});}static createPriceListEntry(context){context.productConsole.createPriceListEntry(context.getCreatePriceListInput()).then(response=>{if(context.isEditMode){pubsub.fire("vpcshowadjustmentoverrideform","result",{show:!1});}// Dispatch event to let the tables that a new Price List Entry has been created
context.fireAddPriceListEntryEvent(response.result.Id);context.querySelector(".vpc-promo-done").classList.remove("vpc-done-button-wait-state");context.showContextRules(response.result.Id);});}static resetDoneButton(context){context.querySelector(".vpc-pricing-forms-button-container").classList.remove("vpc-hide-side-bar-item");context.querySelector(".vpc-back-to-quickadds-button-container").classList.remove("vpc-show-side-bar-item");context.querySelector(".vpc-pricing-forms-button-container").querySelector(".vpc-spinner-container").classList.add("vpc-hide-side-bar-item");}}var vlocityPcFormService={VlocityPCFormsService:VlocityPCFormsService};/**
    * @deprecated - use VlocitySDK.factory.getSDK directly in your components instead. This could be removed going forward.
    * Provides methods to create and get the sdk instance.
    */class VlocityPCSdkService{createInstance(sfInstanceUrl,sessionId){if(!this.sdk){this.sdk=new VlocitySDK.productconsole(new VlocitySDK.datasource({url:sfInstanceUrl,sessionId:sessionId}));}return this.sdk;}getInstance(){if(!this.sdk){throw"SDK Instance is not created yet. Please call createInstance with sfInstanceUrl and sessionId to create an instance";}return this.sdk;}}var sdkService=new VlocityPCSdkService(),vlocityPcSdkService={default:sdkService};class VlocityPcFulfilment extends HTMLElement{static get is(){return"vlocity-pc-fulfilment";}connectedCallback(){let productId=this.getAttribute("productid");sdkService.createInstance(this.getAttribute("sfinstanceurl"),this.getAttribute("sessionid"));vlocityPcConfig.namespacePrefix=this.getAttribute("namespaceprefix")||"";vlocityPcConfig.sessionId=this.getAttribute("sessionid");vlocityPcConfig.sfInstanceUrl=this.getAttribute("sfinstanceurl");let sdk=sdkService.getInstance(),input={productId:productId};sdk.getProductOrchestrationplans(input).then(result=>{this.orchestrationPlans=result.records[0];this.treeInputData=this.makeTreeStructureData(this.orchestrationPlans.ItemDefinitions.records[0]);this.render();this.buildTreeStructure(this.treeInputData);});}/**
     * Creates data required for rendering D3 tree chart
     * @param {this.product} input
     * @returns {treeInputData} which is used for rendering the tree chart
     */makeTreeStructureData(input){let children=[];function processObj(arr,parent){arr.forEach(function(item){pushItem(item,parent);});}function pushItem(item,parent){if(item.ItemDefinitions&&item.ItemDefinitions.records){item.children=[];processObj(item.ItemDefinitions.records,item);}else{delete item.ItemDefinitions;}if(parent){parent.children.push(item);delete parent.ItemDefinitions;}else{children.push(item);}}let output=Object.assign({},input);processObj(output.ItemDefinitions.records);delete output.ItemDefinitions;output.children=children;return output;}/**
     * Wrapper for D3 functions used to render tree chart
     * @param {treeData} input
     */buildTreeStructure(treeData){let chartDiv=document.getElementsByTagName("body");// Set the dimensions and margins of the diagram
const margin={top:0,right:20,bottom:0,left:20},width=chartDiv[0].clientWidth,height=.45*width;let pan=d3.zoom().on("zoom",panned);// append the svg object to the body of the page
// appends a 'group' element to 'svg'
// moves the 'group' element to the top left margin
const svg=d3.select("vlocity-pc-fulfilment").append("svg").attr("width",width).attr("height",height).call(pan).append("g").attr("transform","translate("+margin.left+","+margin.top+")");let i=0,duration=750,rectW=220,rectH=50,//   Change icon paths
imagePath=`/resource/${this.namespace}productconsole_assets/images/`,//   imagePath = `../resources/StructureTree/`,
autoTaskImage="autoTask.png",manualTaskImage="manualTask.png",milestoneImage="milestone.png",root,treemap=d3.tree().size([height,width]);// declares a tree layout and assigns the size
// Assigns parent, children, height, depth
root=d3.hierarchy(treeData,function(d){return d.children;});root.x0=height/2;root.y0=0;// Collapse after the second level
root.children.forEach(collapse);update(root);expandAll();// Collapse the node and all it's children
function collapse(d){if(d.children){d._children=d.children;d._children.forEach(collapse);d.children=null;}}// Expand the node and all it's children
function expand(d){var children=d.children?d.children:d._children;if(d._children){d.children=d._children;d._children=null;}if(children)children.forEach(expand);}// Expand all the nodes
function expandAll(){expand(root);update(root);}// Collapse all the nodes
function collapseAll(){root.children.forEach(collapse);collapse(root);update(root);}function panned(){svg.attr("transform",d3.event.transform);}function update(source){// Assigns the x and y position for the nodes
let treeData=treemap(root),nodes=treeData.descendants(),links=treeData.descendants().slice(1);// Compute the new tree layout.
// Normalize for fixed-depth.
nodes.forEach(function(d){//iterate through the nodes
if(d.parent){//if the node has a parent
for(let i=0;i<d.parent.children.length;i++){//check parent children
if(d.parent.children[i].data.Name===d.data.Name){//find current node
d.yOffset=i;//index is how far node must be moved down
}}d.parentYoffset=d.parent.yOffset;//must also account for parent downset
}if(d.yOffset===void 0){d.yOffset=0;}if(d.parentYoffset===void 0){d.parentYoffset=0;}d.x=100*d.yOffset+100*d.parentYoffset+20;d.y=300*d.depth;});// ****************** Nodes section ***************************
// Update the nodes...
let node=svg.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i);}),nodeEnter=node.enter().append("g").attr("class","node").attr("transform",function(d){return"translate("+source.y0+","+source.x0+")";});// Enter any new modes at the parent's previous position.
// Add Rect for the nodes
nodeEnter.append("rect").attr("width",rectW).attr("height",rectH).attr("rx",32).attr("ry",32).on("click",click).style("fill","#fff");// Add image icon for the nodes
nodeEnter.append("image").attr("xlink:href",function(d){if("Milestone"===d.data.Type){return imagePath+milestoneImage;}else if("ManualTask"===d.data.Type){return imagePath+manualTaskImage;}else{return imagePath+autoTaskImage;}}).attr("height","25").attr("width","25").attr("x","15").attr("y","10");// Add name for the nodes
nodeEnter.append("text").attr("x",rectW/4).attr("y",rectH/2.85).attr("dy","1.5em").text(function(d){return d.data.Name;}).call(wrap,180);// Add type for the nodes
nodeEnter.append("text").attr("class","task").attr("x",rectW/4).attr("y",rectH/3.22).attr("dy",".35em").attr("fill","gray").text(function(d){return d.data.Type;}).call(wrap,180);// UPDATE
let nodeUpdate=nodeEnter.merge(node);// Transition to the proper position for the node
nodeUpdate.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";});// Update the node attributes and style
nodeUpdate.select("rect").attr("width",rectW).attr("height",rectH).attr("rx",32).attr("ry",32).style("fill","#fff");nodeUpdate.select("text").style("fill-opacity",1);// Remove any exiting nodes
let nodeExit=node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")";}).remove();// On exit reduce the node rectangles size to 0
nodeExit.select("rect").attr("width",0).attr("height",0);// On exit reduce the opacity of text labels
nodeExit.select("text").style("fill-opacity",1e-6);// ****************** links section ***************************
// Update the links...
let link=svg.selectAll("path.link").data(links,function(d){return d.id;}),linkEnter=link.enter().insert("path","g").attr("class","link").attr("d",function(d){let o={x:source.x0,y:source.y0};return diagonal(o,o);}),linkUpdate=linkEnter.merge(link);// Enter any new links at the parent's previous position.
// Transition back to the parent element position
linkUpdate.transition().duration(duration).attr("d",function(d){return diagonal(d,d.parent);});// Remove any exiting links
let linkExit=link.exit().transition().duration(duration).attr("d",function(d){let o={x:source.x,y:source.y};return diagonal(o,o);}).remove();// Store the old positions for transition.
nodes.forEach(function(d){d.x0=d.x;d.y0=d.y;});// Creates a curved (diagonal) path from parent to the child nodes
function diagonal(s,d){let path=`M ${s.y} ${s.x+rectH/2}
                    C ${(s.y+d.y)/2+rectW/2} ${s.x+rectH/2},
                    ${(s.y+d.y)/2+rectW/2} ${d.x+rectH/2},
                    ${d.y+rectW} ${d.x+rectH/2}`;return path;}// Toggle children on click.
function click(d){if(d.children){d._children=d.children;d.children=null;}else{d.children=d._children;d._children=null;}//  toggle node expanded state
// d.expanded = !d.expanded;
// if (d.parent) {
//   d.parent.children.forEach(function(element) {
//     if (d !== element) {
//       collapse(element);
//     }
//   });
// }
checkWidth(d);update(d);}function checkWidth(d){let currentCanvas=d3.select("vlocity-pc-fulfilment>svg>g"),currentWidth=currentCanvas._groups[0][0].getBBox().width,adjustedWidth=parseInt(d3.select("vlocity-pc-fulfilment>svg").attr("width"),10)-20;setTimeout(function(){let newCanvas=d3.select("vlocity-pc-fulfilment>svg>g"),newWidth=newCanvas._groups[0][0].getBBox().width,correctX=newCanvas._groups[0][0].getBBox().x;if(newWidth>adjustedWidth){currentCanvas.transition().duration(duration).attr("transform","translate(-"+(newWidth-adjustedWidth)+","+margin.top+")");}else{currentCanvas.transition().duration(duration).attr("transform","translate("+(-correctX+margin.left/2)+","+margin.top+")");}},duration);}// SVG Wrapping long texts
function wrap(text,width){text.each(function(){let text=d3.select(this),words=text.text().split(/\s+/).reverse(),word,line=[],lineNumber=0,lineHeight=1.3,x=text.attr("x"),y=text.attr("y"),dy=1.1,tspan=text.text(null).append("tspan").attr("x",x).attr("y",y);// .attr("dy", dy + "em");
while(word=words.pop()){line.push(word);tspan.text(line.join(" "));if(tspan.node().getComputedTextLength()>width){line.pop();tspan.text(line.join(" "));line=[word];tspan=text.append("tspan").attr("x",x).attr("y",y).attr("dy",++lineNumber*lineHeight+dy+"em").text(word);}}});}}}render(){render(this.template(),this);}template(){return html`
      <style>
        body {
          background-color: #f6f6f6;
        }
        h1 {
          font-weight: bold;
          font-size: 1.4em;
          padding: 20px 0 0 20px;
        }
        .node text {
          font: 12px sans-serif;
          font-weight: bold;
        }
        .node .task {
          font: 10px sans-serif;
        }
        a text {
          cursor: none;
        }
        .link {
          fill: none;
          stroke: #e5e4e3;
          stroke-width: 7px;
        }
        .no_children {
          padding: 10px;
          color: gray;
          text-align: center;
        }
        .shadow {
          /* Use -webkit- only if supporting: Chrome < 54, iOS < 9.3, Android < 4.4.4 */
          -webkit-filter: drop-shadow(-5px -5px 5px #e5e4e3);
          filter: drop-shadow(-5px -5px 5px #e5e4e3);
        }
      </style>
      <h1>${this.orchestrationPlans.Name}</h1>
    `;}}window.customElements.define(VlocityPcFulfilment.is,VlocityPcFulfilment);const PCProductDetailsLabels=["PCAttributesSectionTitle","PCFieldsSectionTitle","PCVisibleIcon","PCConfigurableIcon","PCReadOnlyIcon","PCEditAttributeAssignment","PCRequiredFieldsMissingError","PCGenericError","RequiredField","SaveChanges","PCToastErrorTitle","PCGenericError","PCToastSuccessMessage","PCSaveProductFailurePromptTitle","Required","PCIsConfigurable","PCEncrypted","ReadOnly","Hidden","PCNotAssetizable","PCNotTranslatable","PCValue","PCPicklist","PCValueDataType","PCDisplayName","PCEditAttributeSectionTitle","PCToastSuccessTitle","Cancel","of","Page","Showing","Previous","Next","Select","Search","PCLookupSearchTitle","PCPreviewAttachmentsPlaceholder","Refresh","Close","Remove","PCNoAttrsToShow","PCNoFieldsToShow","Active","Effectivity","PCNonOverridableBehavior","PCOverridableBehavior","HasRule","PCAttachmentsPreviewError","Search","PCSelectPlaceholder","PCExcludedValue","PCPicklistAllExcludeMessage","HelpText","PCProductCreateSuccessMessage","PCNewProductHeader","PCNoResultsMessage","Done","PCNewProductHeading","PCImageUploadTitle","Refresh","PCWarningTitle","PCEffectiveValidationMessage","PCSunday","PCMonday","PCTuesday","PCWednesday","PCThursday","PCFriday","PCSaturday","PCJan","PCFeb","PCMar","PCApr","PCMay","PCJun","PCJul","PCAug","PCSep","PCOct","PCNov","PCDec","PCToday","PCHours","PCMinutes","PCAm","PCPm","PCPickAYear","PCAll","PCProductChangesSaveWarning","PCLayoutErrorOnProduct"];var vlocityPcProductDetails_labels={PCProductDetailsLabels:PCProductDetailsLabels};class VlocityPCNewProduct extends HTMLElement{static get is(){return"vlocity-pc-new-product";}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-new-product {
          max-height: 100vh;
          overflow-x: hidden;
          overflow-y: auto;
        }
        .vpc-new-product vlocity-pc-field-layout {
          padding: 30px;
        }

        .via-slds .vpc-new-product .slds-modal__container {
          margin: 0 auto;
        }
      </style>
      <div class="vpc-new-product">
        <vlocity-pc-page-header
          heading="${this.translationSdk.translate("PCNewProductHeader")}"
          icon="product"
        ></vlocity-pc-page-header>
        <vlocity-pc-field-layout
          opennewrecord
          objectname="Product2"
          showcancel
        ></vlocity-pc-field-layout>
      </div>
    `;}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.style.display="block";VlocityPCUtils.getLabels(PCProductDetailsLabels,vlocityPcConfig.userLocale).then(()=>{sforce.console.getEnclosingPrimaryTabId(result=>{sforce.console.setTabTitle(this.translationSdk.translate("PCNewProductHeader"),result.id);});this.render();});pubsub.register("vpcfieldlayout",{cancelled:()=>{sforce.console.getEnclosingPrimaryTabId(result=>{sforce.console.closeTab(result.id);});sforce.console.setSelectedNavigationTab(()=>{},"standard-Product2");}});}}window.customElements.define(VlocityPCNewProduct.is,VlocityPCNewProduct);var vlocityPcNewProduct={VlocityPCNewProduct:VlocityPCNewProduct};class VlocityPcQuickAdd extends HTMLElement{static get is(){return"vlocity-pc-quick-add";}static get observedAttributes(){return["items","quickaddheading","quickaddhelptext"];}constructor(){super();let slots=this.getElementsByTagName("slot");this.slots=[...slots];this.translationSdk=VlocitySDK.translation.getInstance();}template(){let listItem=document.createElement("div");listItem.innerHTML=this.slots[0].innerHTML;return html`
      <style>
        :host {
          display: block;
        }
        .vpc-quick-add {
          padding: 35px;
          background-color: var(--vpc-secondary-bg-color);
          position: relative;
        }

        .vpc-quick-add ul {
          height: 360px;
          overflow: scroll;
          padding-right: 12px;
        }

        .vpc-quick-add_list-item {
          background-color: var(--vpc-primary-bg-color);
          padding: 10px;
          margin-bottom: 10px;
        }
      </style>
      <div class="vpc-quick-add">
        <!-- Enable slots to override and customize -->
        ${this.getAttribute("hidetitle")?"":html`
              <div class="slds-text-heading_small vpc-quick-add_heading">
                <div class="vpc-title-caps">
                  ${this.translationSdk.translate("PCQuickAddTitle")}
                </div>
                <p
                  class="slds-text-title slds-m-top_small vpc-quick-add-description"
                >
                  ${this.getAttribute("quickaddhelptext")}
                </p>
              </div>
            `}
        ${this.getAttribute("hidesearch")?"":html`
              <div class="vpc-quick-add-search">
                <div class="slds-form-element">
                  <div
                    class="slds-form-element__control slds-input-has-icon ${vlocityPcConfig.isLanguageRTL?"slds-input-has-icon_right":"slds-input-has-icon_left"}"
                  >
                    <vlocity-icon
                      baseurl="/_slds/icons/"
                      icon="utility:search"
                      size="x-small"
                      title="${this.searchPlaceholder}"
                      extraclass="slds-input__icon ${vlocityPcConfig.isLanguageRTL?"slds-input__icon_right":"slds-input__icon_left"}"
                    ></vlocity-icon>
                    <input
                      type="text"
                      @input="${evt=>this.handleSearchInput(evt)}"
                      class="vpc-quick-adds-input slds-input slds-m-top_small slds-m-bottom_small"
                      placeholder="${this.searchPlaceholder}"
                    />
                  </div>
                  <p class="slds-text-title vpc-quick-add-description">
                    ${this.getAttribute("additionalhelptext")}
                  </p>
                </div>
              </div>
            `}
        <div
          class="vpc-title-caps vpc-sub-heading slds-m-bottom_medium slds-m-top_medium vpc-quickadd-heading"
        >
          ${this.getAttribute("quickaddheading")}
        </div>

        <div
          role="status"
          class="slds-spinner slds-spinner_brand slds-hide slds-align_absolute-center slds-spinner_medium"
        >
          <span class="slds-assistive-text">Loading</span>
          <div class="slds-spinner__dot-a"></div>
          <div class="slds-spinner__dot-b"></div>
        </div>
        <div class="vpc-quickadd-items slds-hide">
          <ul>
            <vlocity-list>
              <slot class="slds-hide">
                <li class="vpc-quick-add_list-item">
                  ${listItem.children}
                </li>
              </slot>
            </vlocity-list>
          </ul>
        </div>
        <div
          class="slds-text-title slds-text-align_center slds-m-top_large slds-hide vpc-quickadd-empty"
        >
          ${this.noItemsToDisplayLabel}
        </div>
      </div>
    `;}get searchPlaceholder(){return this.getAttribute("searchplaceholder")||this.translationSdk.translate("PCQuickAddSearchPlaceholder");}get noItemsToDisplayLabel(){return this.getAttribute("noitemstodisplaylabel")||this.translationSdk.translate("PCNoItemsToShow");}connectedCallback(){const items=this.getAttribute("items");this.quickAddItems=items?JSON.parse(items):[];this.render();setTimeout(()=>{if(0<this.quickAddItems.length){this.updateItemsInList();this.showList();}else{this.showEmptyMessage();this.hideList();}});this.componentMounted=!0;this.spinnerHandler={showspinner:this.showSpinner.bind(this),hidespinner:this.hideSpinner.bind(this)};this.quickAddListChangeHandler={result:this.quickAddListChange.bind(this)};pubsub.register("showquickaddspinner",this.spinnerHandler);pubsub.register("hidequickaddspinner",this.spinnerHandler);pubsub.register("vpcquickaddlistchange",this.quickAddListChangeHandler);}quickAddListChange(){this.handleSearchInput({target:{value:this.searchText}});}disconnectedCallback(){pubsub.unregister("showquickaddspinner",this.spinnerHandler);pubsub.unregister("hidequickaddspinner",this.spinnerHandler);pubsub.unregister("vpcquickaddlistchange",this.quickAddListChangeHandler);}render(){render(this.template(),this);}attributeChangedCallback(name){if(!this.componentMounted){//don't do anything if connectedCallback is not called.
return;}const heading=this.querySelector(".vpc-quickadd-heading"),helptext=this.querySelector(".vpc-quick-add-description");switch(name){case"items":this.handleItemsChanged();break;case"quickaddheading":if(heading){heading.textContent=this.getAttribute("quickaddheading");}break;case"quickaddhelptext":if(helptext){helptext.textContent=this.getAttribute("quickaddhelptext");}break;}}handleItemsChanged(){this.quickAddItems=JSON.parse(this.getAttribute("items"));if(!this.quickAddItems){this.quickAddItems=[];}if(0<this.quickAddItems.length){this.updateItemsInList();this.hideEmptyMessage();this.showList();}else{this.hideList();this.showEmptyMessage();}}updateItemsInList(){const vlocityList=this.querySelector("vlocity-list");vlocityList.setItems(this.quickAddItems);this.makeItemsDraggable();}/**
     * Dispatches an event informing that search text has changed.
     * @param {InputEvent} event
     */handleSearchInput(event){this.searchText=event.target.value;let filterEvent=new CustomEvent("quickAddItemSearch",{detail:{searchText:this.searchText}});this.dispatchEvent(filterEvent);}/**
     * Makes all the list items draggable, handles dragstart and sets the data on dataTransfer object to whatever is set in the data-value attribute.
     * Also emits a custom event "itemDragged" letting in case it needs to be handled.
     */makeItemsDraggable(){const items=this.querySelectorAll(".vpc-quick-add_list-item");if(items){items.forEach(item=>{item.setAttribute("draggable",!0);item.style.cursor="move";item.addEventListener("dragstart",event=>{const dataElement=event.target.querySelector("[data-value]");if(dataElement){event.dataTransfer.setData("text/quickadditem",dataElement.dataset.value);}pubsub.fire("vpcitemdragged","result",{detail:{dragEvent:event,item:dataElement.dataset.value}});this.dispatchEvent(new CustomEvent("itemDragged",{detail:{dragEvent:event}}));});item.addEventListener("dragend",()=>{this.dispatchEvent(new CustomEvent("itemDragEnded"));pubsub.fire("vpcitemdragended","result");});});}}showSpinner(){const spinner=this.querySelector(".slds-spinner");if(spinner.classList.contains("slds-hide")){spinner.classList.remove("slds-hide");}}hideSpinner(){const spinner=this.querySelector(".slds-spinner");if(!spinner.classList.contains("slds-hide")){spinner.classList.add("slds-hide");}}hideEmptyMessage(){const emptyMsg=this.querySelector(".vpc-quickadd-empty");if(!emptyMsg.classList.contains("slds-hide")){emptyMsg.classList.add("slds-hide");}}showEmptyMessage(){const emptyMsg=this.querySelector(".vpc-quickadd-empty");if(emptyMsg.classList.contains("slds-hide")){emptyMsg.classList.remove("slds-hide");}}hideList(){const list=this.querySelector(".vpc-quickadd-items");if(!list.classList.contains("slds-hide")){list.classList.add("slds-hide");}}showList(){const list=this.querySelector(".vpc-quickadd-items");if(list.classList.contains("slds-hide")){list.classList.remove("slds-hide");}}}window.customElements.define(VlocityPcQuickAdd.is,VlocityPcQuickAdd);class VlocityPCObjectAttrsFields extends HTMLElement{static get is(){return"vlocity-pc-object-attrs-fields";}template(){return html`
      <style>
        .vpc-object-attrs-fields .slds-tabs_default__item {
          padding: 0 3.75rem;
        }
        .vpc-object-attr-field {
          cursor: move;
          background-color: var(--vpc-primary-bg-color);
        }
        .vpc-object-attrs-fields .vpc-quick-add {
          padding: 0 10px;
        }
        .vpc-object-attrs-fields .vpc-quick-add ul {
          height: 418px;
          overflow: hidden scroll;
          padding: 0 12px 12px 0;
        }
      </style>
      <div class="vpc-object-attrs-fields">
        <vlocity-tabs variant="default">
          <vlocity-tab>
            <slot name="title">
              <b>${this.translationSdk.translate("PCFieldsSectionTitle")}</b>
            </slot>
            <slot name="content">
              <vlocity-pc-quick-add
                items="${JSON.stringify(this.fields)}"
                hidesearch="true"
                hidetitle="true"
              >
                <slot class="slds-hide">
                  <div data-value="\${JSON.stringify(item)}">
                    <vlocity-icon
                      baseurl="/_slds/icons/"
                      icon="utility:drag_and_drop"
                      size="small"
                      extraclass="vpc-light-icon"
                    ></vlocity-icon>
                    \${item.label}
                  </div>
                </slot>
              </vlocity-pc-quick-add>
            </slot>
          </vlocity-tab>
          <vlocity-tab>
            <slot name="title">
              <b
                >${this.translationSdk.translate("PCAttributesSectionTitle")}</b
              >
            </slot>
            <slot name="content">
              <vlocity-pc-quick-add
                items="${JSON.stringify(this.applicableAttributes)}"
                hidesearch="true"
                hidetitle="true"
              >
                <slot class="slds-hide">
                  <div data-value="\${JSON.stringify(item)}">
                    <vlocity-icon
                      baseurl="/_slds/icons/"
                      icon="utility:drag_and_drop"
                      size="small"
                      extraclass="vpc-light-icon"
                    ></vlocity-icon>
                    \${item.Name}
                  </div>
                </slot>
              </vlocity-pc-quick-add>
            </slot>
          </vlocity-tab>
        </vlocity-tabs>
      </div>
    `;}connectedCallback(){this.sdk=VlocitySDK.productconsole.getInstance();this.vlocityObjectSdk=this.sdk.getVlocityObjectSdk();this.translationSdk=VlocitySDK.translation.getInstance();this.getFieldsAndAttributes();this.sectionElementUpsertHandler={delete:this.onSectionElementCreateOrDelete.bind(this),create:this.onSectionElementCreateOrDelete.bind(this)};pubsub.register("sectionelementdeleted",this.sectionElementUpsertHandler);pubsub.register("sectionelementcreated",this.sectionElementUpsertHandler);}render(){render(this.template(),this);}setupQuickAddEvents(){const quickAdds=this.querySelectorAll("vlocity-pc-quick-add");if(quickAdds){quickAdds.forEach(quickAdd=>{const isListening=quickAdd.hasAttribute("isListening");if(!isListening){quickAdd.addEventListener("itemDragged",event=>{quickAdd.setAttribute("isListening",!0);const dragDetails={event:event.detail.dragEvent,draggedField:JSON.parse(event.detail.dragEvent.dataTransfer.getData("text/quickadditem"))};pubsub.fire("vpcobjectfielddragstarted","dragStart",{dragEvent:dragDetails});});quickAdd.addEventListener("itemDragEnded",()=>{pubsub.fire("vpcobjectfielddragended","dragEnd");});}});}}getFieldsAndAttributes(){pubsub.fire("showquickaddspinner","showspinner");const facetname=this.getAttribute("facetname"),objectId=this.getAttribute("objectid");this.vlocityObjectSdk.getApplicableAttributesFields(objectId,facetname).then(result=>{this.fields=result.fields;this.applicableAttributes=result.attributes;this.render();this.setupQuickAddEvents();}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>{pubsub.fire("hidequickaddspinner","hidespinner");pubsub.fire("vpcobjectfielddropped","dropSuccessOrFailure");});}onSectionElementCreateOrDelete(){this.getFieldsAndAttributes();}disconnectedCallback(){pubsub.unregister("sectionelementdeleted",this.sectionElementUpsertHandler);pubsub.unregister("sectionelementcreated",this.sectionElementUpsertHandler);}}window.customElements.define(VlocityPCObjectAttrsFields.is,VlocityPCObjectAttrsFields);class VlocityPCObjectDetail extends HTMLElement{static get is(){return"vlocity-pc-object-detail";}static get observedAttributes(){return["objectid"];}get objectId(){return this.getAttribute("objectid");}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.cloneHandler={clonesaved:this.onObjectTypeCloneSave.bind(this)};pubsub.register("vpcfieldlayoutclonesaved",this.cloneHandler);}disconnectedCallback(){pubsub.unregister("vpcfieldlayoutclonesaved",this.cloneHandler);}attributeChangedCallback(name,oldValue,newValue){if("new"===newValue){this.getObjectTypePicklists().then(response=>{this.ObjectClassPicklists=response.result;setTimeout(()=>{this.objectSections=this.getObjectSections();this.render();});});}else if("clone"===newValue){this.getObjectTypePicklists().then(response=>{this.ObjectClassPicklists=response.result;setTimeout(()=>{this.objectSections=this.getObjectSections(this.objectDetails);this.render();});});}else{render(html``,this);const picklistPromise=this.getObjectTypePicklists(),objectDataPromise=this.getObjectData(newValue);Promise.all([picklistPromise,objectDataPromise]).then(responses=>{this.ObjectClassPicklists=responses[0].result;const epcResponse=responses[1].epcResponse;if("success"===epcResponse.overallResult){const objectData=epcResponse.entities[0].entity;this.objectSections=this.getObjectSections(objectData);this.render();}else{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),epcResponse.failureReason,"error");}});}}getObjectTypePicklists(){return this.objectDetailsSdk.getObjectPicklistsByName(VlocityPCUtils.getCustomFieldName("ObjectClass"));}render(){render(this.template(),this);}template(){return html`
      <style>
        .via-slds .slds-text-heading_medium {
          font-weight: 700;
        }
      </style>
      ${"clone"===this.objectId?html`
            <div
              class="slds-text-heading_medium vpc-title-caps slds-m-bottom_small"
            >
              ${this.translationSdk.translate("PCCloneObjectType")}
            </div>
          `:""}
      ${"new"!==this.objectId?html`
            <vlocity-pc-field-layout
              objectid="${this.objectId}"
              objectname="${VlocityPCUtils.getCustomFieldName("ObjectClass")}"
              .objectSections="${this.objectSections}"
              forobjecttype
              ?donotsave="${"clone"===this.objectId}"
              ?showcancel="${"clone"===this.objectId}"
            ></vlocity-pc-field-layout>
          `:html`
            <vlocity-pc-field-layout
              objectname="${VlocityPCUtils.getCustomFieldName("ObjectClass")}"
              .objectSections="${this.objectSections}"
              showcancel
              forobjecttype
            ></vlocity-pc-field-layout>
          `}
    `;}getObjectData(objectId){const request={epcRequest:{entity:{Id:objectId}}};return this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["readObjectClass",JSON.stringify(request)]}).execute();}isRoot(){return this.objectId===this.getAttribute("rootobjectid");}getObjectSections(objectData){const nsp=vlocityPcConfig.namespacePrefix||"",sections=[{name:this.translationSdk.translate("PCGeneralProperties"),columnLayout:"2 Columns",tabKeySequence:"Top-Down",sequenceNumber:1,sectionElements:[{type:"Field",label:this.translationSdk.translate("Name"),value:objectData&&objectData.Name,dataType:"STRING",inputType:"Text",isRequired:!0,fieldApiName:"Name",sequenceNumber:1,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCParentObjectType"),inputType:this.isRoot()?"":"lookup",dataType:this.isRoot()?"":"reference",value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")],refValue:objectData&&objectData[nsp+"ParentObjectClassId__r"],lookupObjectName:"ObjectClass__c",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("ParentObjectClassId"),sequenceNumber:2,columnNumber:1,selectedObjectClassId:"new"===this.objectId||"clone"===this.objectId?null:this.objectId}]},{name:this.translationSdk.translate("Effectivity"),columnLayout:"1 Column",tabKeySequence:"Top-Down",sequenceNumber:1,sectionElements:[{type:"Field",label:this.translationSdk.translate("PCActive"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("IsActive")],dataType:"BOOLEAN",inputType:"Checkbox",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("IsActive"),sequenceNumber:1},{type:"Field",label:this.translationSdk.translate("PCEffectiveFrom"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("EffectiveFromDate")],dataType:"Date",inputType:"Date",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("EffectiveFromDate"),sequenceNumber:2},{type:"Field",label:this.translationSdk.translate("PCEffectiveUntil"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("EffectiveUntilDate")],dataType:"Date",inputType:"Date",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("EffectiveUntilDate"),sequenceNumber:3},{type:"Field",label:this.translationSdk.translate("PCOwner"),inputType:"",dataType:"",value:objectData&&objectData.OwnerId,isRequired:!1,fieldApiName:"OwnerId",sequenceNumber:4},{type:"Field",label:this.translationSdk.translate("PCRootObject"),inputType:"",dataType:"",value:this.isRoot()?"":this.getAttribute("rootobjectid"),isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("RootObjectClassId"),sequenceNumber:5},{type:"Field",label:this.translationSdk.translate("PCObjectAPIName"),inputType:"",dataType:"",value:this.getAttribute("objectapiname"),isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("ObjectApiName"),sequenceNumber:6}]}];if(!this.isRoot()){sections[0].sectionElements.push({type:"Field",label:this.translationSdk.translate("PCVersionName"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("VersionLabel")],dataType:"STRING",inputType:"Text",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("VersionLabel"),sequenceNumber:3,columnNumber:1});sections[0].sectionElements.push({type:"Field",label:this.translationSdk.translate("PCLifeCycleStatus"),value:this.isNewObjectType()?"Draft":objectData&&objectData[VlocityPCUtils.getCustomFieldName("LifecycleStatus")],dataType:"STRING",inputType:"Dropdown",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("LifecycleStatus"),sequenceNumber:4,options:this.ObjectClassPicklists&&this.ObjectClassPicklists[VlocityPCUtils.getCustomFieldName("LifecycleStatus")],columnNumber:1});}return sections;}onObjectTypeCloneSave(details){const objectSections=details.objectSections,inputMap={};objectSections.forEach(section=>{section.sectionElements.forEach(elem=>{const type=elem.type.toLocaleLowerCase();if("field"===type){const dataType=elem.dataType.toLowerCase();if("date"===dataType||"datetime"===dataType){inputMap[elem.fieldApiName]=elem.value&&new Date(elem.value).getTime();}else{inputMap[elem.fieldApiName]=elem.value;}}});});inputMap.sourceObjectClassId=this.objectDetails.Id;inputMap[VlocityPCUtils.getCustomFieldName("RootObjectClassId")]=this.objectDetails[VlocityPCUtils.getCustomFieldName("RootObjectClassId")];VlocityPCUtils.showSpinner();this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["cloneObjectType",JSON.stringify(inputMap)]}).execute().then(result=>{if("OK"===result.error){VlocityPCUtils.toastSuccess(this.translationSdk.translate("CloneSuccess"));const item={objectType:result.result};pubsub.fire("vpcfieldlayout","objectCreated",item.objectType);pubsub.fire("vpcobjecttypes","objectTypeClicked",item);}else{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),result.error,"error");}}).finally(()=>{const fieldLayout=this.querySelector("vlocity-pc-field-layout");if(fieldLayout){fieldLayout.canSave=!0;fieldLayout.toggleDoneButton();}VlocityPCUtils.hideSpinner();});}isNewObjectType(){return"new"===this.objectId||"clone"===this.objectId;}constructor(){super();this.productConsole=VlocitySDK.productconsole.getInstance();this.objectDetailsSdk=this.productConsole.vlocityObjectDetails();}}window.customElements.define(VlocityPCObjectDetail.is,VlocityPCObjectDetail);var vlocityPcObjectDetail={VlocityPCObjectDetail:VlocityPCObjectDetail};const VlocityPCObjectLables=["PCCreateLayout","PCAddSection","Delete","PCEditSection","Section","PCObjectViewType","PCObjectCustomURI","PCObjectLayoutType","PCObjectTabKeyOrder","PCObjectTwoColumn","PCObjectOneColumn","Update","Save","Required","PCDisplayName","PCPrimaryInformation","PCObjectSectionEleDelSuccess","PCObjectSectionDeleteSuccess","PCNoItemsToShow","PCConfirmMessage","Cancel","PCToastErrorTitle","PCToastSuccessTitle","PCToastSuccessMessage","PCObjectSectionSaveSuccess","PCEditSectionElement","PCEditSectionElementAttribute","PCFieldsSectionTitle","PCObjectDetailsTab","PCObjectLayoutTab","PCObjectObjectTypeTab","PCAttributesSectionTitle","Search","PCObjectTopDownOrder","PCObjectRightLeftOrder","PCValue","PCValueDataType","PCBehaviors","Effectivity","ReadOnly","Hidden","HasRule","PCNotTranslatable","PCNotAssetizable","PCRunTimeConfigurable","PCRadiobutton","PCCheckbox","PCDropdown","PCPicklistDisplayType","PCPicklist","PCEncrypted","SaveChanges","RequiredField","NewObjectType","PCDataInformation","PCObjectsCountLabel","PCSelectPlaceholder","PCExcludedValue","PCPicklistAllExcludeMessage","Clone","CloneSuccess","PCCloneObjectType","PCSectionDuplicateError","PCGeneralProperties","Name","PCParentObjectType","Effectivity","PCActive","PCEffectiveFrom","PCEffectiveUntil","PCOwner","PCRootObject","PCObjectAPIName","HelpText","PCLookupSearchTitle","Select","PCNoResultsMessage","Clone","PCObjectSectionMoveUpSuccess","PCObjectSectionMoveDownSuccess","PCMoveUp","PCMoveDown","Done","Required","PCNewVersion","PCVersionName","PCAvailability","PCAvailabilityVersionHelpText","PCVersionStartDate","PCVersionEndDate","PCVersionCreateSuccess","PCVersionAvailability","PCCreateVersionDisabled","PCLifeCycleStatus","PCEffectiveValidationMessage","PCSunday","PCMonday","PCTuesday","PCWednesday","PCThursday","PCFriday","PCSaturday","PCJan","PCFeb","PCMar","PCApr","PCMay","PCJun","PCJul","PCAug","PCSep","PCOct","PCNov","PCDec","PCToday","PCHours","PCMinutes","PCAm","PCPm","PCPickAYear","PCAll","PCWarningTitle","PCObjectTypeLayoutWarning"];var vlocityPcObjectLabels={VlocityPCObjectLables:VlocityPCObjectLables};class VlocityPCObjectSectionElement extends HTMLElement{static get is(){return"vlocity-pc-object-section-element";}template(){return html`
      <style>
        .vpc-object-element-required {
          color: #888;
          font-style: italic;
        }
      </style>
      <div class="vpc-object-section-element-wrapper slds-clearfix">
        <div class="slds-float_left">
          ${this.sectionelement.Name}
          ${this.sectionelement.isRequired?html`
                <span class="vpc-object-element-required"
                  >(${this.translationSdk.translate("Required")})</span
                >
              `:""}
        </div>
        <div class="slds-float_right">
          <vlocity-tooltip
            tooltiptype="iconlink"
            icon="utility:delete"
            iconsize="xx-small"
            iconbaseurl="/_slds/icons/"
            value="${this.translationSdk.translate("Delete")}"
            @click="${event=>{this.deleteSectionElement(event);}}"
          >
          </vlocity-tooltip>
        </div>
      </div>
    `;}connectedCallback(){this.sdk=VlocitySDK.productconsole.getInstance();this.translationSdk=VlocitySDK.translation.getInstance();this.render();}render(){render(this.template(),this);}deleteSectionElement(event){event.stopPropagation();pubsub.fire("onsectionelementdelete","delete",{eleDetails:{sectionId:this.sectionid,eleIndex:this.elementindex,columnIndex:this.columnindex,sectionElementId:this.sectionelement.Id}});}}window.customElements.define(VlocityPCObjectSectionElement.is,VlocityPCObjectSectionElement);class VlocityPCObjectSection$1 extends HTMLElement{static get is(){return"vlocity-pc-object-section";}get showUpArrow(){return this.hasAttribute("showuparrow");}get showDownArrow(){return this.hasAttribute("showdownarrow");}attributeChangedCallback(name,oldValue,newValue){if(!name||oldValue===newValue||!this.componentMounted){return;}this.render();}static get observedAttributes(){return["showuparrow","showdownarrow"];}template(){return html`
      <style>
        .vpc-object-section-element {
          border-bottom: 1px solid var(--vpc-secondary-border-color);
        }
        .vpc-object-two-column-sections {
          display: grid;
          grid-template-columns: 6fr 6fr;
          grid-column-gap: 10px;
        }
        .vpc-object-section-ele-placeholder {
          padding: 5px;
          background-color: #139c70;
        }
        #vpc-quick-add_list-item-extra {
          cursor: move;
          padding: 5px;
          min-width: 100px;
          border: 2px solid #c2c0bf;
          background: #ededed;
          text-align: center;
          position: absolute;
        }
        .vpc-section-ele-drop-active {
          animation-name: drop-active;
          animation-duration: 3s;
        }
        @keyframes drop-active {
          from {
            background-color: #139c70;
          }
          to {
            background-color: var(--vpc-primary-bg-color);
          }
        }
        .vpc-section-elements-empty {
          min-height: 150px;
        }
        .vpc-object-section-header:hover {
          background-color: var(--vpc-active-dropzone-color);
          cursor: pointer;
        }
        .vpc-object-section-element:hover {
          background-color: var(--vpc-active-dropzone-color);
          cursor: pointer;
        }
        .vpc-sectione-element-active {
          background-color: var(--vpc-active-dropzone-color);
        }
        .vpc-section-header-left {
          width: 90%;
        }
      </style>
      <div
        class="slds-clearfix slds-p-around_x-small vpc-object-section-header"
        @click="${()=>this.showSectionEditForm()}"
      >
        <div class="slds-float_left vpc-section-header-left">
          ${this.section.Name}
          <span class="slds-badge">
            ${this.translationSdk.translate("Section")}
          </span>
          <span class="slds-badge">
            ${"2 Columns"===this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]?this.translationSdk.translate("PCObjectTwoColumn"):this.translationSdk.translate("PCObjectOneColumn")}
          </span>
        </div>
        <div class="slds-float_right">
          ${this.showUpArrow?html`
                <vlocity-tooltip
                  tooltiptype="iconlink"
                  icon="utility:arrowup"
                  iconsize="xx-small"
                  iconbaseurl="/_slds/icons/"
                  value="${this.translationSdk.translate("PCMoveUp")}"
                  @click="${event=>{this.swapSection(event,"up");}}"
                >
                </vlocity-tooltip>
              `:""}
          ${this.showDownArrow?html`
                <vlocity-tooltip
                  tooltiptype="iconlink"
                  icon="utility:arrowdown"
                  iconsize="xx-small"
                  iconbaseurl="/_slds/icons/"
                  value="${this.translationSdk.translate("PCMoveDown")}"
                  @click="${event=>{this.swapSection(event,"down");}}"
                >
                </vlocity-tooltip>
              `:""}
          <vlocity-tooltip
            tooltiptype="iconlink"
            icon="utility:delete"
            iconsize="xx-small"
            iconbaseurl="/_slds/icons/"
            value="${this.translationSdk.translate("Delete")}"
            @click="${event=>{this.deleteSection(event);}}"
          >
          </vlocity-tooltip>
        </div>
      </div>
      <div
        class="${1<this.section.formattedElements.length?"vpc-object-two-column-sections":""}"
      >
        ${repeat(this.section.formattedElements,sectionEle=>sectionEle,(sectionEle,columnIndex)=>html`
            <ul
              class="slds-p-top_small slds-p-bottom_small"
              data-value="${columnIndex}"
            >
              ${sectionEle.elements.length?html`
                    ${repeat(sectionEle.elements,element=>element,(element,index)=>html`
                        <li
                          class="vpc-object-section-element slds-p-around_x-small ${element.isRecentDrop?"vpc-section-ele-drop-active":""} ${this.selectedSectionElement&&this.selectedSectionElement.Id===element.Id?"vpc-sectione-element-active":""}"
                          @dragenter="${event=>{this.onSectionElementDragEnter(event);}}"
                          @dragleave="${event=>this.onSectionElementDragLeave(event)}"
                          @drop="${event=>this.onFieldDropOnSectionEle(event)}"
                          @dragover="${event=>this.cancelEvent(event)}"
                          @dragstart="${event=>{this.onExistingElementDragStart(event);}}"
                          id="${index}"
                          draggable="true"
                          @dragend="${()=>this.onFieldDragEnd()}"
                          @click="${event=>this.showSectionElementForm(event,element)}"
                        >
                          <vlocity-pc-object-section-element
                            .sectionelement="${element}"
                            .sectionid="${this.section.Id}"
                            .elementindex="${index}"
                            .columnindex="${columnIndex}"
                          >
                          </vlocity-pc-object-section-element>
                        </li>
                      `)}
                  `:html`
                    <li
                      class="vpc-section-elements-empty"
                      @dragenter="${event=>{this.onSectionElementDragEnter(event,!0);}}"
                      @dragleave="${event=>this.onSectionElementDragLeave(event)}"
                      @drop="${event=>this.onFieldDropOnSectionEle(event)}"
                      @dragover="${event=>this.cancelEvent(event)}"
                      id="0"
                    ></li>
                  `}
            </ul>
          `)}
        <vlocity-prompt
          id="deleteSectionConfirmation"
          titletext="${this.translationSdk.translate("Delete")}"
          canceltext="${this.translationSdk.translate("Cancel")}"
          confirmtext="${this.translationSdk.translate("Delete")}"
          helptext="${this.translationSdk.translate("PCConfirmMessage")}"
        ></vlocity-prompt>
      </div>
    `;}connectedCallback(){this.sdk=VlocitySDK.productconsole.getInstance();this.translationSdk=VlocitySDK.translation.getInstance();this.vlocityObjectSdk=this.sdk.getVlocityObjectSdk();this.componentMounted=!0;this.render();this.sectionElementHandler={delete:this.onSectionElementDelete.bind(this),dragStart:this.onFieldDragStart.bind(this),dragEnd:this.onFieldDragEnd.bind(this),cancel:this.onSectionElementUpdateCancel.bind(this)};pubsub.register("vpcobjectfielddragstarted",this.sectionElementHandler);pubsub.register("vpcobjectfielddragended",this.sectionElementHandler);pubsub.register("onsectionelementupdatecancel",this.sectionElementHandler);pubsub.register("onsectionelementdelete",this.sectionElementHandler);this.existingFieldHandler={dragStart:this.onExistingFieldDragStartHandler.bind(this),dropped:this.onExistingElementDrop.bind(this)};pubsub.register("vpcobjectexistingfielddragstarted",this.existingFieldHandler);pubsub.register("vpcexistingfielddropped",this.existingFieldHandler);}disconnectedCallback(){pubsub.unregister("vpcobjectfielddragstarted",this.sectionElementHandler);pubsub.unregister("vpcobjectfielddragended",this.sectionElementHandler);pubsub.unregister("onsectionelementupdatecancel",this.sectionElementHandler);pubsub.unregister("onsectionelementdelete",this.sectionElementHandler);pubsub.unregister("vpcobjectexistingfielddragstarted",this.existingFieldHandler);pubsub.unregister("vpcexistingfielddropped",this.existingFieldHandler);}onFieldDragStart(detail){this.droppedField=detail.dragEvent.event.dataTransfer.getData("text/quickadditem")&&JSON.parse(detail.dragEvent.event.dataTransfer.getData("text/quickadditem"))||detail.dragEvent.draggedField;this.dragCount=0;this.placeholderIndex=void 0;this.appendGhostElementForDrag(detail.dragEvent.event);}onExistingElementDragStart(event){const draggedFieldIndex=parseInt(event.currentTarget.id),draggedColumnIndex=parseInt(event.currentTarget.parentElement.getAttribute("data-value")),draggedField=this.section.formattedElements[draggedColumnIndex].elements[draggedFieldIndex];event.dataTransfer.setData("text/quickadditem",JSON.stringify(draggedField));const dragDetails={event:event,draggedFieldIndex:draggedFieldIndex,draggedColumnIndex:draggedColumnIndex,draggedSectionId:this.section.Id,draggedField:draggedField};pubsub.fire("vpcobjectexistingfielddragstarted","dragStart",{dragEvent:dragDetails});}onExistingElementDrop(dropDetails){const drop=dropDetails.dropped;if(this.draggedSectionId===this.section.Id&&this.draggedSectionId!==drop.droppedSectionId){this.section.formattedElements[this.draggedColumnIndex].elements.splice(this.draggedFieldIndex,1);this.section.formattedElements.forEach((elements,eleIndex)=>{elements.elements.forEach((element,index)=>{element[VlocityPCUtils.getCustomFieldName("Sequence")]=0===eleIndex?10*(index+1):10*(this.section.formattedElements[0].elements.length+index+1);});});}this.render();}onExistingFieldDragStartHandler(details){this.draggedFieldIndex=details.dragEvent.draggedFieldIndex;this.draggedColumnIndex=details.dragEvent.draggedColumnIndex;this.draggedSectionId=details.dragEvent.draggedSectionId;this.onFieldDragStart(details);}resetAttributes(){this.droppedColumnIndex=void 0;this.draggedFieldIndex=void 0;this.draggedColumnIndex=void 0;this.droppedField=void 0;this.placeholderIndex=void 0;}appendGhostElementForDrag(event){const isGhostElementExists=document.body.querySelector("#vpc-quick-add_list-item-extra");if(!isGhostElementExists){let ghostElement=document.createElement("div");ghostElement.id="vpc-quick-add_list-item-extra";ghostElement.innerText=this.droppedField.label?this.droppedField.label:this.droppedField.Name;document.body.appendChild(ghostElement);event.dataTransfer.setDragImage(ghostElement,0,0);}}onFieldDragEnd(){this.removePlaceHolders();if(document.getElementById("vpc-quick-add_list-item-extra")){document.body.removeChild(document.getElementById("vpc-quick-add_list-item-extra"));}}onSectionElementDragEnter(event,isEmptyDropzone){const currentIndex=parseInt(event.currentTarget.id);this.dragCount++;const rect=event.currentTarget.getBoundingClientRect();let isFirstHalf=!1;isFirstHalf=event.clientY<rect.top+rect.height/2;isFirstHalf=isEmptyDropzone?!0:isFirstHalf;let li=document.createElement("li");li.classList.add("vpc-object-section-ele-placeholder");this.placeholderIndex=isFirstHalf?currentIndex:currentIndex+1;const placeHolder=this.querySelector(".vpc-object-section-ele-placeholder");if(!placeHolder||this.placeholderIndex!=placeHolder.id){this.removePlaceHolders();li.id=this.placeholderIndex;event.currentTarget.parentNode.insertBefore(li,isFirstHalf?event.currentTarget:event.currentTarget.nextSibling);this.makeDroppable();}}onSectionElementDragLeave(){this.dragCount--;if(0===this.dragCount&&!this.dragEnteredOnPlaceHolder){this.removePlaceHolders();}}makeDroppable(){const dropZones=this.querySelectorAll(".vpc-object-section-ele-placeholder");dropZones.forEach(dropZone=>{dropZone.addEventListener("dragover",event=>this.cancelEvent(event));dropZone.addEventListener("drop",event=>{this.onSectionElementDrop(event);});dropZone.addEventListener("dragenter",()=>{this.dragEnteredOnPlaceHolder=!0;},!1);dropZone.addEventListener("dragleave",()=>{this.dragEnteredOnPlaceHolder=!1;if(0===this.dragCount){this.removePlaceHolders();}});});}onSectionElementDrop(event){this.placeholderIndex=parseInt(event.currentTarget.id);this.droppedColumnIndex=parseInt(event.currentTarget.parentElement.getAttribute("data-value"));this.onFieldDrop(event);}onFieldDropOnSectionEle(event){this.droppedColumnIndex=parseInt(event.currentTarget.parentElement.getAttribute("data-value"));this.onFieldDrop(event);}onFieldDrop(event){this.droppedField=JSON.parse(event.dataTransfer.getData("text/quickadditem"));if(this.placeholderIndex!=void 0){this.clearIsRecentDrop();this.droppedField.isRecentDrop=!0;this.isSectionElementUpdating=!0;this.render();this.upsertSectionElement();}pubsub.fire("vpcobjectfielddropped","dropped",{dropped:event});}updateSectionElements(updatedSectionElements){if(this.droppedField[VlocityPCUtils.getCustomFieldName("ObjectSectionId")]&&this.draggedSectionId!==this.section.Id){const dropDetails={droppedFieldIndex:this.placeholderIndex,droppedField:this.droppedField,droppedColumnIndex:this.droppedColumnIndex,droppedSectionId:this.section.Id};pubsub.fire("vpcexistingfielddropped","dropped",{dropped:dropDetails});}this.tranformSectionWithNewElements(updatedSectionElements);}tranformSectionWithNewElements(updatedSectionElements){if(this.section.sectionElements){this.section.sectionElements.records=updatedSectionElements;}else{this.sectionElements={records:updatedSectionElements};}this.section=this.vlocityObjectSdk.transformSection(this.section);}upsertSectionElement(){VlocityPCUtils.showSpinner();this.droppedField[VlocityPCUtils.getCustomFieldName("Sequence")]=this.getSequence();this.droppedField[VlocityPCUtils.getCustomFieldName("Column")]=0===this.droppedColumnIndex?1:2;const input=this.vlocityObjectSdk.createSectionElementUpsertInput();input.sectionId=this.section.Id;input.sectionElement=this.droppedField;input.objectId=this.getAttribute("objectid");this.vlocityObjectSdk.upsertSectionElement(input).then(response=>{this.updateSectionElements(response.result);this.resetAttributes();this.removePlaceHolders();this.isSectionElementUpdating=!1;if(input.sectionElement.Id){pubsub.fire("vpcobjectfielddropped","dropSuccessOrFailure");}else{pubsub.fire("sectionelementcreated","create");}this.render();}).catch(error=>{pubsub.fire("vpcobjectfielddropped","dropSuccessOrFailure");VlocityPCUtils.toastError(error);this.isSectionElementUpdating=!1;this.render();}).finally(()=>{VlocityPCUtils.hideSpinner();});}getSequence(){let sequence;const dropSectionElements=this.section.formattedElements[this.droppedColumnIndex].elements,sequenceName=VlocityPCUtils.getCustomFieldName("Sequence");if(0===this.placeholderIndex){const firstColumnElements=this.section.formattedElements[0].elements.length,lastElementSeq=0<firstColumnElements?this.section.formattedElements[0].elements[firstColumnElements-1][sequenceName]:1;sequence=1===this.droppedColumnIndex?0<firstColumnElements?lastElementSeq+1:1:dropSectionElements.length?dropSectionElements[0][sequenceName]-1:1;}else if(this.placeholderIndex===dropSectionElements.length){sequence=dropSectionElements[dropSectionElements.length-1][sequenceName]+1;}else{sequence=(dropSectionElements[this.placeholderIndex-1][sequenceName]+dropSectionElements[this.placeholderIndex][sequenceName])/2;}return sequence;}clearIsRecentDrop(){this.section.formattedElements.forEach(ele=>{ele.elements.forEach(element=>element.isRecentDrop=!1);});}cancelEvent(event){if(event.stopPropagation){event.stopPropagation();}if(event.preventDefault){event.preventDefault();}}removePlaceHolders(){const placeholders=this.querySelectorAll(".vpc-object-section-ele-placeholder");placeholders.forEach(placeholder=>{placeholder.remove();});}showSectionEditForm(){pubsub.fire("vpcobjectsectionclicked","click",{section:this.section});}showSectionElementForm(event,sectionElement){this.selectedSectionElement=sectionElement;event.stopPropagation();pubsub.fire("vpcsectionelementclicked","click",{sectionElement:sectionElement});this.render();}onSectionElementUpdateCancel(){this.selectedSectionElement=null;this.render();}deleteSection(event){event.stopPropagation();const sectionDeleteConfirm=this.querySelector("#deleteSectionConfirmation");sectionDeleteConfirm.show().then(()=>{VlocityPCUtils.showSpinner();vlocityPcConfig.dataSourceService.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["deleteObject",JSON.stringify({objectId:this.section.Id})]}).execute().then(response=>{const errorMessages=VlocityPCUtils.processResponseForErrorMessages(response);if(errorMessages&&errorMessages.length){VlocityPCUtils.toastError(errorMessages);}else{VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCObjectSectionDeleteSuccess"));pubsub.fire("sectiondeleted","delete",{Id:this.section.Id});}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>VlocityPCUtils.hideSpinner());});}onSectionElementDelete(deleteDetails){if(deleteDetails.eleDetails.sectionId===this.section.Id){const sectionEleDeleteConfirm=this.querySelector("#deleteSectionConfirmation");sectionEleDeleteConfirm.show().then(()=>{VlocityPCUtils.showSpinner();vlocityPcConfig.dataSourceService.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["deleteObject",JSON.stringify({objectId:deleteDetails.eleDetails.sectionElementId})]}).execute().then(response=>{const errorMessages=VlocityPCUtils.processResponseForErrorMessages(response);if(errorMessages&&errorMessages.length){VlocityPCUtils.toastError(errorMessages);}else{this.section.formattedElements[deleteDetails.eleDetails.columnIndex].elements.splice(deleteDetails.eleDetails.eleIndex,1);pubsub.fire("sectionelementdeleted","delete",{Id:deleteDetails.eleDetails.sectionElementId});this.render();VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCObjectSectionEleDelSuccess"));}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>VlocityPCUtils.hideSpinner());});}}swapSection(event,upOrDown){event.stopPropagation();pubsub.fire("onsectionswap","swapSections",{sectionIndex:parseInt(this.sectionindex),upOrDown:upOrDown});}render(){render(this.template(),this);}}window.customElements.define(VlocityPCObjectSection$1.is,VlocityPCObjectSection$1);class VlocityPCObjectSectionForm extends HTMLElement{static get is(){return"vlocity-pc-object-section-form";}template(){return html`
      <style>
        .vpc-object-section-element {
          border-bottom: 1px solid var(--vpc-secondary-border-color);
        }
        .vpc-section-form-heading {
          text-transform: uppercase;
          letter-spacing: 1px;
          font-size: 14px;
        }
      </style>
      <div class="slds-p-around_medium">
        <div
          class="slds-text-title_bold slds-m-bottom_small vpc-section-form-heading"
        >
          ${this.section.Id?html`
                <strong
                  >${this.translationSdk.translate("PCEditSection")}</strong
                >
              `:html`
                <strong
                  >${this.translationSdk.translate("PCAddSection")}</strong
                >
              `}
        </div>
        <vlocity-form model="${JSON.stringify(this.section)}">
          <div class="slds-form-element slds-p-left_x-small">
            <label class="slds-form-element__label">
              <abbr
                class="slds-required"
                title="${this.translationSdk.translate("Required")}"
                >*
              </abbr>
              ${this.translationSdk.translate("Section")}
            </label>
            <vlocity-pc-lookup-field
              class="slds-m-bottom_medium"
              objectname="${VlocityPCUtils.getCustomFieldName("UISection")}"
              .value=${this.lookupValue}
            >
            </vlocity-pc-lookup-field>
          </div>
          <vlocity-radio-group
            label="${this.translationSdk.translate("PCObjectLayoutType")}"
            name="${VlocityPCUtils.getCustomFieldName("ColumnLayout")}"
            groupName="${VlocityPCUtils.getCustomFieldName("ColumnLayout")}"
            value="${this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]}"
            options="${JSON.stringify([{label:`${this.translationSdk.translate("PCObjectOneColumn")}`,value:"1 Column",id:"radioonecolumn"},{label:`${this.translationSdk.translate("PCObjectTwoColumn")}`,value:"2 Columns",id:"radiotwocolumns"}])}"
          ></vlocity-radio-group>

          <div>
            ${this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]?html`
                  <vlocity-radio-group
                    label="${this.translationSdk.translate("PCObjectTabKeyOrder")}"
                    name="${VlocityPCUtils.getCustomFieldName("TabKeyOrder")}"
                    groupName="${VlocityPCUtils.getCustomFieldName("TabKeyOrder")}"
                    value="${this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]}"
                    options="${JSON.stringify([{label:`${this.translationSdk.translate("PCObjectTopDownOrder")}`,value:"Top-Down",id:"radiotopdown"},{label:`${this.translationSdk.translate("PCObjectRightLeftOrder")}`,value:"Left-Right",id:"radioleftright"}])}"
                    disabled="${"1 Column"===this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]?!0:!1}"
                  ></vlocity-radio-group>
                `:""}
          </div>
        </vlocity-form>
      </div>
      <vlocity-pc-done-cancel></vlocity-pc-done-cancel>
    `;}connectedCallback(){this.sdk=VlocitySDK.productconsole.getInstance();this.vloctiyObjectSdk=this.sdk.getVlocityObjectSdk();this.translationSdk=VlocitySDK.translation.getInstance();this.showForm();this.registerEvents();}registerEvents(){this.doneAndCancelHandler={done:this.saveSection.bind(this),cancel:this.cancel.bind(this)};pubsub.register("ondone",this.doneAndCancelHandler);pubsub.register("oncancel",this.doneAndCancelHandler);}disconnectedCallback(){pubsub.unregister("ondone",this.doneAndCancelHandler);pubsub.unregister("oncancel",this.doneAndCancelHandler);}setupFieldValueChangeEvents(){this.setupLayoutTypeChangeEvent();this.setupLookupFieldEvents();this.setupTabKeyOrderChangeEvent();}setupLayoutTypeChangeEvent(){const viewTypeComboBox=this.querySelector("vlocity-radio-group[name=\""+VlocityPCUtils.getCustomFieldName("ColumnLayout")+"\"]");viewTypeComboBox.addEventListener("onvaluechange",event=>{this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]=event.detail.value();if("1 Column"===event.detail.value()){this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]=null;this.render();setTimeout(()=>{this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]="Top-Down";this.render();});}else{this.render();}});}setupTabKeyOrderChangeEvent(){const viewTypeComboBox=this.querySelector("vlocity-radio-group[name=\""+VlocityPCUtils.getCustomFieldName("TabKeyOrder")+"\"]");viewTypeComboBox.addEventListener("onvaluechange",event=>{this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]=event.detail.value();});}setupLookupFieldEvents(){const lookupField=this.querySelector("vlocity-pc-lookup-field");lookupField.addEventListener("onvaluechange",evt=>{if(evt.detail&&evt.detail.value){this.lookupValue=JSON.stringify(evt.detail.value);this.section[VlocityPCUtils.getCustomFieldName("SectionId")]=evt.detail.value?evt.detail.value.Id:null;this.validateForm();}this.render();});}render(){render(this.template(),this);}canCreateSection(){let checkForCanCreate=!0;if(this.section&&this.section.Id&&this.section[VlocityPCUtils.getCustomFieldName("SectionId")]===this.sectionIdCopy){checkForCanCreate=!1;}return new Promise((resolve,reject)=>{if(checkForCanCreate){vlocityPcConfig.dataSourceService.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["canCreateObjectSection",JSON.stringify({sectionId:this.section[VlocityPCUtils.getCustomFieldName("SectionId")],objectFacetId:this.facetId})]}).execute().then(response=>{if(response.result){resolve();}else{reject();}});}else{resolve();}});}saveSection(){if(this.validateForm()){VlocityPCUtils.showSpinner();this.canCreateSection().then(()=>{const input=this.vloctiyObjectSdk.createUpsertSectionInput();input.section=this.section;input.objectFacetId=this.facetId;this.vloctiyObjectSdk.upsertSection(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){VlocityPCUtils.toastError(result.error);}else{VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCObjectSectionSaveSuccess"));pubsub.fire("onsectionupsertsave","save",result);}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}).catch(()=>{VlocityPCUtils.toastError(this.translationSdk.translate("PCSectionDuplicateError"));VlocityPCUtils.hideSpinner();});}}validateForm(){let valid=!0;if(this.section&&!this.section[VlocityPCUtils.getCustomFieldName("SectionId")]){this.querySelector("vlocity-pc-lookup-field .vpc-lookup-input").classList.add("slds-has-error");valid=!1;}else{this.querySelector("vlocity-pc-lookup-field .vpc-lookup-input").classList.remove("slds-has-error");}return valid;}cancel(){pubsub.fire("onsectionupsertcancel","cancel");}showForm(){this.facetId=this.getAttribute("objectfacetid");if(this.sectionid){this.getSectionObject();}else{this.section={};this.lookupValue={Name:""};this.setUpDefaultValues();this.disableSaveButton=!0;this.render();this.setupFieldValueChangeEvents();}}setUpDefaultValues(){this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]=this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]?this.section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]:"1 Column";this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]=this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]?this.section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]:"Top-Down";}getSectionObject(){VlocityPCUtils.showSpinner();vlocityPcConfig.dataSourceService.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getObject",JSON.stringify({objectId:this.sectionid})]}).execute().then(response=>{this.section=response.result;this.sectionIdCopy=response.result[`${VlocityPCUtils.getCustomFieldName("SectionId")}`];this.setUpDefaultValues();this.lookupValue={Name:this.section[`${vlocityPcConfig.namespacePrefix}SectionId__r`]?this.section[`${vlocityPcConfig.namespacePrefix}SectionId__r`].Name:this.sectionName};this.render();this.setupFieldValueChangeEvents();}).finally(()=>VlocityPCUtils.hideSpinner());}}window.customElements.define(VlocityPCObjectSectionForm.is,VlocityPCObjectSectionForm);class VlocityPCObjectSectionElementForm extends HTMLElement{static get is(){return"vlocity-pc-object-section-element-form";}template(){return html`
      <style>
        .vpc-section-element-form h3 {
          color: var(--vpc-icon-dark);
        }
        .vpc-section-element-form-heading {
          text-transform: uppercase;
          letter-spacing: 1px;
          font-size: 14px;
        }
      </style>
      <div class="slds-p-around_medium">
        <div class="slds-clearfix slds-m-bottom_medium slds-m-top_small">
          <div
            class="slds-text-title_bold slds-m-bottom_small slds-float_left vpc-section-element-form-heading"
          >
            <strong
              >${"Attribute"===this.propertyType?this.translationSdk.translate("PCEditSectionElementAttribute"):this.translationSdk.translate("PCEditSectionElement")}</strong
            >
          </div>
          ${"Attribute"===this.propertyType?html`
                <div class="slds-float_right">
                  <vlocity-pc-switch
                    baseurl="/_slds/icons/"
                    icon="utility:check"
                    label="${this.translationSdk.translate("PCActive")}"
                    value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("IsActiveAssignment")]}"
                  ></vlocity-pc-switch>
                </div>
              `:""}
        </div>
        <vlocity-form
          model="${JSON.stringify(this.sectionElement)}"
          class="vpc-section-element-form"
        >
          <div>
            ${"Attribute"===this.propertyType?html`
                  <h3 class="slds-text-heading--label slds-m-bottom_small">
                    ${this.translationSdk.translate("PCPrimaryInformation")}
                  </h3>
                `:""}
            <vlocity-input
              name="${"Attribute"===this.propertyType?VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride"):"Name"}"
              label="${this.translationSdk.translate("PCDisplayName")}"
              value="${"Attribute"===this.propertyType?this.sectionElement[VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride")]||"":this.sectionElement.Name||""}"
              extraclass="slds-m-bottom_medium"
              required="true"
            >
            </vlocity-input>

            ${"Attribute"===this.propertyType?html`
                  <vlocity-textarea
                    label="${this.translationSdk.translate("HelpText")}"
                    name="${VlocityPCUtils.getCustomFieldName("ValueDescription")}"
                    value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDescription")]||""}"
                  ></vlocity-textarea>
                `:""}
            ${"Field"===this.propertyType?html`
                  <div class="slds-form-element">
                    <div class="slds-form-element__control">
                      <div class="slds-checkbox">
                        <input
                          type="checkbox"
                          name="isRequired"
                          id="isRequired"
                          ?checked="${this.sectionElement.isRequired}"
                          ?disabled="${this.sectionElement.disableIsRequired}"
                        />
                        <label class="slds-checkbox__label" for="isRequired">
                          <span class="slds-checkbox_faux"></span>
                          <span class="slds-form-element__label"
                            >${this.translationSdk.translate("Required")}</span
                          >
                        </label>
                      </div>
                    </div>
                  </div>
                `:""}
          </div>
          <div>
            ${"Attribute"===this.propertyType?html`
                  <h3
                    class="slds-text-heading--label slds-m-bottom_small slds-m-top_x-large"
                  >
                    ${this.translationSdk.translate("PCDataInformation")}
                  </h3>
                  <vlocity-combobox
                    name="${VlocityPCUtils.getCustomFieldName("ValueDataType")}"
                    label="${this.translationSdk.translate("PCValueDataType")}"
                    options="${JSON.stringify(this.pickListValues[VlocityPCUtils.getCustomFieldName("ValueDataType")])}"
                    value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]||""}"
                    iconbaseurl="/_slds/icons/"
                    extraclass="slds-m-bottom_medium"
                  >
                  </vlocity-combobox>
                  ${this.getDataTypeContent()}
                  <h3
                    class="slds-text-heading--label slds-m-bottom_small slds-m-top_x-large"
                  >
                    ${this.translationSdk.translate("PCBehaviors")}
                  </h3>
                  <ul>
                    ${repeat(this.behaviors,behavior=>behavior,behavior=>html`
                        <li class="slds-m-bottom_xx-small">
                          <div class="slds-form-element slds-m-bottom_medium">
                            <div class="slds-form-element__control">
                              <div class="slds-checkbox vpc-behavior-checkbox">
                                <input
                                  type="checkbox"
                                  name="${behavior.name}"
                                  id="${behavior.name}"
                                  ?checked="${behavior.value}"
                                  ?disabled="${behavior.isReadOnly}"
                                  @change=${evt=>this.behaviorChanged(behavior.name,evt.target.checked)}
                                />
                                <label
                                  class="slds-checkbox__label"
                                  for="${behavior.name}"
                                >
                                  <span class="slds-checkbox_faux"></span>
                                  <span class="slds-form-element__label">
                                    ${behavior.label}
                                  </span>
                                </label>
                              </div>
                            </div>
                          </div>
                        </li>
                      `)}
                  </ul>
                `:""}
          </div>
        </vlocity-form>
      </div>
      <vlocity-pc-done-cancel></vlocity-pc-done-cancel>
    `;}connectedCallback(){this.sdk=VlocitySDK.productconsole.getInstance();this.vlocityObjectSdk=this.sdk.getVlocityObjectSdk();this.translationSdk=VlocitySDK.translation.getInstance();this.selectedPicklistValues=[];this.excludedOptions=[];this.showForm();this.registerEvents();}registerEvents(){this.doneAndCancelHandler={done:this.updateSectionElement.bind(this),cancel:this.cancel.bind(this)};pubsub.register("ondone",this.doneAndCancelHandler);pubsub.register("oncancel",this.doneAndCancelHandler);}disconnectedCallback(){pubsub.unregister("ondone",this.doneAndCancelHandler);pubsub.unregister("oncancel",this.doneAndCancelHandler);}render(){render(this.template(),this);}updateSectionElement(){if(this.validateForm()){if("Attribute"===this.propertyType){this.updateAttributeAssignment();}else{const formModel=this.querySelector("vlocity-form").model;this.sectionElement.Name=formModel.Name;const requiredCheckBox=this.querySelector("input[name=\"isRequired\"]");this.sectionElement.isRequired=requiredCheckBox?requiredCheckBox.checked:!1;this.updateObjectSectionElement(this.sectionElement);}}}validateForm(){let isValid=this.isNameValid()?!0:!1;isValid=this.isPickListValid()&&isValid;return isValid;}isNameValid(){const isValid="Attribute"===this.propertyType?this.sectionElement[VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride")]:this.sectionElement.Name,fieldName="Attribute"===this.propertyType?VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride"):"Name",nameInput=this.querySelector(`vlocity-input[name='${fieldName}'] .slds-form-element`);this.setErrorClass(nameInput,!isValid);return isValid;}isPickListValid(){if("Attribute"===this.propertyType&&this.isPicklistAttribute()){const picklistIdInput=this.querySelector("vlocity-pc-lookup-field .vpc-lookup-input");this.setErrorClass(picklistIdInput,!this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]);return!this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]?!1:!0;}else{return!0;}}setErrorClass(context,isError){if(isError){context.classList.add("slds-has-error");}else{context.classList.remove("slds-has-error");}}showForm(){this.propertyType=this.getAttribute("propertytype");this.sectionElement=JSON.parse(this.getAttribute("sectionelement"));if("Attribute"===this.propertyType){this.getAttributeAssignmentObject();}else{this.render();this.setUpNameValueChangeEvent();}}updateObjectSectionElement(sectionElement){const input=this.vlocityObjectSdk.createSectionElementUpsertInput();input.sectionElement=sectionElement;input.noRenumberElements=!0;VlocityPCUtils.showSpinner();this.vlocityObjectSdk.createOrUpdateSectionElement(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){VlocityPCUtils.toastError(result.error);}else{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastSuccessTitle"),this.translationSdk.translate("PCToastSuccessMessage"),"success");pubsub.fire("onsectionelementsave","save");}}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>VlocityPCUtils.hideSpinner());}isPicklistAttribute(){const assgn=this.sectionElement,typeName=VlocityPCUtils.getCustomFieldName("ValueDataType");if(assgn){const dataType=assgn[typeName].toUpperCase();return"PICKLIST"===dataType||"MULTI PICKLIST"===dataType;}else{return!1;}}updateAttributeAssignment(){if(this.isPicklistAttribute()&&this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]&&!this.selectedPicklistValues.length){VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),this.translationSdk.translate("PCPicklistAllExcludeMessage"),"error");}else{VlocityPCUtils.showSpinner();const formModel=this.querySelector("vlocity-form").model;this.sectionElement=formModel;this.setDateTimeValue();const valueDescription=this.querySelector(`vlocity-textarea[name="${VlocityPCUtils.getCustomFieldName("ValueDescription")}"]`);this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDescription")]=valueDescription.value?valueDescription.value.split("\n").join(" "):"";this.sectionElement[VlocityPCUtils.getCustomFieldName("IsActiveAssignment")]="true"===this.querySelector("vlocity-pc-switch").value;const isUpdate=!0;this.setValueForMultiPicklist(isUpdate);this.clearPicklistValues();this.getBehaviorValues();const input=this.sdk.createSaveAttributeAssignmentInput();input.attributeAssignment=this.sectionElement;input.attributeAssignment[VlocityPCUtils.getCustomFieldName("ExcludedPicklistValues")]=this.excludedValue;this.sdk.saveAttributeAssignment(input).then(response=>{if(response.errorCode&&"INVOKE-200"!==response.errorCode){VlocityPCUtils.toastError(response.error);}else{const sectionElement=JSON.parse(this.getAttribute("sectionelement"));sectionElement.Name=this.sectionElement[VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride")];this.updateObjectSectionElement(sectionElement);}}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>VlocityPCUtils.hideSpinner());}}clearPicklistValues(){if("Multi Picklist"!==this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]&&"Picklist"!==this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]){this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]=null;this.sectionElement[VlocityPCUtils.getCustomFieldName("UIDisplayType")]=null;}}setValueForMultiPicklist(isUpdate){if("Multi Picklist"===this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]){const value=this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")];if(isUpdate){const values=value?value.split(","):[];this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=values.length?values.join(";"):null;}else{const values=value?value.split(";"):[];this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=values.length?values.join(","):null;}}}getAttributeAssignmentObject(){VlocityPCUtils.showSpinner();const objectId=this.getAttribute("objectid"),attributeId=this.getAttribute("attributeid");this.vlocityObjectSdk.getAttributeAssignmentObject(objectId,attributeId).then(result=>{this.pickListValues=result[1].result;this.pickListValues[VlocityPCUtils.getCustomFieldName("ValueDataType")]=this.pickListValues[VlocityPCUtils.getCustomFieldName("ValueDataType")].filter(picklistValue=>{return"Lookup"!==picklistValue.value;});this.sectionElement=result[0].attributeAssignment;this.selectedPicklistValues=result[0].picklistItems?result[0].picklistItems.map(item=>{return{label:item.Name,value:item[VlocityPCUtils.getCustomFieldName("Value")]};}):[];this.excludedOptions=result[0].excludedPicklistItems?result[0].excludedPicklistItems.map(item=>{return{label:item.picklistValue.Name,value:item.picklistValue[VlocityPCUtils.getCustomFieldName("Value")]};}):[];let excludedValue=this.sectionElement[VlocityPCUtils.getCustomFieldName("ExcludedPicklistValues")];this.excludedValue=excludedValue?excludedValue:"";this.lookupValue={Name:result[0].picklistObject&&result[0].picklistObject.Name?result[0].picklistObject.Name:""};this.setFormattedDate(this.sectionElement);this.formBehaviorObject();this.setValueForMultiPicklist();this.render();this.setupFieldValueChangeEvents();}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>{VlocityPCUtils.hideSpinner();});}setFormattedDate(sectionElement){const inputType=sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")].toLowerCase(),value=sectionElement[VlocityPCUtils.getCustomFieldName("Value")];if("datetime"===inputType||"date"===inputType){this.dateValueString=value;sectionElement.formattedDate=value?VlocityPCUtils.getFormattedDateObject(value,inputType):null;}}formBehaviorObject(){this.behaviors=[{label:this.translationSdk.translate("PCRunTimeConfigurable"),name:`${VlocityPCUtils.getCustomFieldName("IsConfigurable")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsConfigurable")}`]},{label:this.translationSdk.translate("Required"),name:`${VlocityPCUtils.getCustomFieldName("IsRequired")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsRequired")}`]},{label:this.translationSdk.translate("Hidden"),name:`${VlocityPCUtils.getCustomFieldName("IsHidden")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsHidden")}`]},{label:this.translationSdk.translate("ReadOnly"),name:`${VlocityPCUtils.getCustomFieldName("IsReadOnly")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsReadOnly")}`]},{label:this.translationSdk.translate("HasRule"),name:`${VlocityPCUtils.getCustomFieldName("HasRule")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("HasRule")}`]},{label:this.translationSdk.translate("PCEncrypted"),name:`${VlocityPCUtils.getCustomFieldName("IsEncrypted")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsEncrypted")}`],isReadOnly:!0},{label:this.translationSdk.translate("PCNotAssetizable"),name:`${VlocityPCUtils.getCustomFieldName("IsNotAssetizable")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsNotAssetizable")}`]},{label:this.translationSdk.translate("PCNotTranslatable"),name:`${VlocityPCUtils.getCustomFieldName("IsNotTranslatable")}`,value:this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsNotTranslatable")}`]}];this.setDefaultRunTimeConfigurable();this.setDefaultNotAssetizable();}excludedOptionsChanged(evt){this.excludedValue=evt.detail.value();const excludedOptions=this.excludedValue.split(",");let newPicklistOptions=this.excludedOptions.filter(item=>{return 0>excludedOptions.indexOf(item.value);});this.selectedPicklistValues=newPicklistOptions;const valueField=this.querySelector("vlocity-combobox[name=\""+VlocityPCUtils.getCustomFieldName("Value")+"\"]");let picklistValue=valueField.value;const isPicklistValExcluded=excludedOptions.indexOf(picklistValue);valueField.value=0<=isPicklistValExcluded?void 0:picklistValue;this.render();}setupExcludedPicklistEvents(){const picklist=this.querySelector("#vpc-excluded-picklist");if(picklist){const isListening=picklist.hasAttribute("isListening");if(!isListening){picklist.setAttribute("isListening",!0);picklist.addEventListener("onvaluechange",event=>{this.excludedOptionsChanged(event);});}}}setupFieldValueChangeEvents(){const dataTypeInput=this.querySelector("vlocity-combobox[name=\""+VlocityPCUtils.getCustomFieldName("ValueDataType")+"\"]");dataTypeInput.addEventListener("onvaluechange",event=>{this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]=event.detail.value();this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=null;this.setDefaultRunTimeConfigurable();this.setDefaultNotAssetizable();this.render();this.setupValueDataTypeChangeEvents();});this.setUpNameValueChangeEvent();this.setupValueDataTypeChangeEvents();}setUpNameValueChangeEvent(){const nameField="Attribute"===this.propertyType?VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride"):"Name",nameInput=this.querySelector(`vlocity-input[name='${nameField}']`);nameInput.addEventListener("onvaluechange",event=>{this.sectionElement[nameField]=event.detail.value();this.isNameValid();});}setDefaultRunTimeConfigurable(){const isRunTimeConfigurable="Multi Picklist"===this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]||"Picklist"===this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]||"Checkbox"===this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")];if(this.behaviors){const runTimeConfigurable=this.behaviors.find(behavior=>behavior.name===VlocityPCUtils.getCustomFieldName("IsConfigurable"));this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsConfigurable")}`]=isRunTimeConfigurable||this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsConfigurable")}`];runTimeConfigurable.value=this.sectionElement[`${VlocityPCUtils.getCustomFieldName("IsConfigurable")}`];runTimeConfigurable.isReadOnly=isRunTimeConfigurable;const runTimeConfigCheckBox=this.querySelector(`input[name=${VlocityPCUtils.getCustomFieldName("IsConfigurable")}]`);if(runTimeConfigCheckBox){runTimeConfigCheckBox.checked=runTimeConfigurable.value;}}}setDefaultNotAssetizable(){if(this.behaviors){const notAssetizable=this.behaviors.find(behavior=>behavior.name===VlocityPCUtils.getCustomFieldName("IsNotAssetizable"));if(!this.sectionElement[VlocityPCUtils.getCustomFieldName("IsConfigurable")]){this.sectionElement[VlocityPCUtils.getCustomFieldName("IsNotAssetizable")]=!1;notAssetizable.isReadOnly=!0;notAssetizable.checked=!1;const notAssetizableCheckBox=this.querySelector(`input[name=${VlocityPCUtils.getCustomFieldName("IsNotAssetizable")}]`);if(notAssetizableCheckBox){notAssetizableCheckBox.checked=!1;}}else{notAssetizable.isReadOnly=!1;}}}behaviorChanged(name,value){this.sectionElement[name]=value;if(name===VlocityPCUtils.getCustomFieldName("IsConfigurable")){this.setDefaultNotAssetizable();this.render();}}setupValueDataTypeChangeEvents(){const selectedDataType=this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")];if("Picklist"===selectedDataType||"Multi Picklist"===selectedDataType){this.setupLookupFieldEvents();this.setupUIDisplayTypeEvents();this.setupExcludedPicklistEvents();}else if("Checkbox"===selectedDataType){this.setUpCheckboxEvent();}else if("Date"===selectedDataType||"Datetime"===selectedDataType){this.setDateChangeEvent();}else{this.setTextChangeEvent();}}setupLookupFieldEvents(){const lookupField=this.querySelector("vlocity-pc-lookup-field");lookupField.addEventListener("onvaluechange",evt=>{if(evt.detail&&evt.detail.value){this.lookupValue=JSON.stringify(evt.detail.value);this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]=evt.detail.value?evt.detail.value.Id:null;this.isPickListValid();if(this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]){this.vlocityObjectSdk.getPicklistItems(this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]).then(response=>{this.selectedPicklistValues=response.result&&response.result.length?response.result.filter(value=>!0===value[VlocityPCUtils.getCustomFieldName("IsActive")]):[];this.excludedOptions=response.result&&response.result.length?response.result.filter(value=>!0===value[VlocityPCUtils.getCustomFieldName("IsActive")]):[];this.excludedValue="";this.render();}).catch(()=>{this.render();});}else{this.selectedPicklistValues=[];this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=null;this.render();}}});}getBehaviorValues(){const checkboxes=this.querySelectorAll(".vpc-behavior-checkbox");checkboxes.forEach(checkbox=>{const input=checkbox.querySelector("input");this.sectionElement[input.name]=input.checked?!0:!1;});}setUpCheckboxEvent(){const checkboxInput=this.querySelector("vlocity-checkbox[name=\""+VlocityPCUtils.getCustomFieldName("Value")+"\"]");checkboxInput.addEventListener("onvaluechange",()=>{this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=checkboxInput.checked?!0:!1;});}setTextChangeEvent(){const textValueInput=this.querySelector(`vlocity-input[name="${VlocityPCUtils.getCustomFieldName("Value")}"]`);textValueInput.addEventListener("onvaluechange",event=>{this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=event.detail.value();});}setDateChangeEvent(){const dateInput=this.querySelector("vlocity-datepicker[name=\""+VlocityPCUtils.getCustomFieldName("Value")+"\"]");dateInput.addEventListener("vlocitydatepickerchanged",event=>{const date=!event.detail.date||isNaN(event.detail.date.getTime())?null:event.detail.date;this.sectionElement.formattedDate=date;const inputType=this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")].toLowerCase();this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=VlocityPCUtils.getAttributeDateTime(date,inputType);this.dateValueString=this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")];});}setDateTimeValue(){const inputType=this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")].toLowerCase();if("datetime"===inputType||"date"===inputType){this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]=this.dateValueString;}}setupUIDisplayTypeEvents(){const uiDisplayTypeInput=this.querySelector(`vlocity-combobox[name='${VlocityPCUtils.getCustomFieldName("UIDisplayType")}']`);uiDisplayTypeInput.addEventListener("onvaluechange",event=>{this.sectionElement[VlocityPCUtils.getCustomFieldName("UIDisplayType")]=event.detail.value();});}getDataTypeContent(){let content;switch(this.sectionElement[VlocityPCUtils.getCustomFieldName("ValueDataType")]){case"Number":case"Currency":case"Percent":case"Text":content=html`
          <vlocity-input
            name="${VlocityPCUtils.getCustomFieldName("Value")}"
            label="${this.translationSdk.translate("PCValue")}"
            value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]||""}"
            extraclass="slds-m-bottom_xx-small"
          >
          </vlocity-input>
        `;break;case"Checkbox":content=html`
          <vlocity-checkbox
            label="${this.translationSdk.translate("PCValue")}"
            name="${VlocityPCUtils.getCustomFieldName("Value")}"
            checked="${this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]}"
            value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]}"
            extraclass="slds-m-bottom_medium"
          >
          </vlocity-checkbox>
        `;break;case"Date":content=this.getDateHTML();break;case"Datetime":content=this.getDateTimeHTML();break;case"Picklist":content=this.getPicklistHTML(!1);break;case"Multi Picklist":content=this.getPicklistHTML(!0);break;default:break;}return content;}getDateHTML(){return html`
      <vlocity-datepicker
        value="${this.sectionElement.formattedDate||""}"
        label=${this.translationSdk.translate("PCValue")}
        timezone="${vlocityPcConfig.timeZone}"
        locale="${vlocityPcConfig.userLocaleInBcp47Format}"
        format="MMM dd, yyyy"
        translations="${JSON.stringify(VlocityPCUtils.getDatePickerLabelList())}"
        name="${VlocityPCUtils.getCustomFieldName("Value")}"
      >
      </vlocity-datepicker>
    `;}getDateTimeHTML(){return html`
      <vlocity-datepicker
        label=${this.translationSdk.translate("PCValue")}
        extraclass=""
        value="${this.sectionElement.formattedDate||""}"
        showTimePicker
        timezone="${vlocityPcConfig.timeZone}"
        locale="${vlocityPcConfig.userLocaleInBcp47Format}"
        format="MMM dd, yyyy hh:mm 12h"
        translations="${JSON.stringify(VlocityPCUtils.getDatePickerLabelList())}"
        name="${VlocityPCUtils.getCustomFieldName("Value")}"
      >
      </vlocity-datepicker>
    `;}getPicklistHTML(isMultiple){const picklistVlaues=isMultiple?[{label:this.translationSdk.translate("PCDropdown"),value:"Dropdown"},{label:this.translationSdk.translate("PCCheckbox"),value:"Checkbox"}]:[{label:this.translationSdk.translate("PCDropdown"),value:"Dropdown"},{label:this.translationSdk.translate("PCRadiobutton"),value:"Radiobutton"}];return html`
      <vlocity-combobox
        name="${VlocityPCUtils.getCustomFieldName("UIDisplayType")}"
        label="${this.translationSdk.translate("PCPicklistDisplayType")}"
        options="${JSON.stringify(picklistVlaues)}"
        value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("UIDisplayType")]||""}"
        iconbaseurl="/_slds/icons/"
        extraclass="slds-m-bottom_medium"
      >
      </vlocity-combobox>
      <div class="slds-form-element slds-m-bottom_medium">
        <label class="slds-form-element__label">
          <abbr
            class="slds-required"
            title="${this.translationSdk.translate("Required")}"
            >*
          </abbr>
          ${this.translationSdk.translate("PCPicklist")}
        </label>
        <vlocity-pc-lookup-field
          class="slds-m-bottom_medium"
          objectname="${VlocityPCUtils.getCustomFieldName("Picklist")}"
          .value=${this.lookupValue}
        >
        </vlocity-pc-lookup-field>
      </div>
      <vlocity-combobox
        name="${VlocityPCUtils.getCustomFieldName("Value")}"
        label="${this.translationSdk.translate("PCValue")}"
        options="${JSON.stringify(this.selectedPicklistValues)}"
        value="${this.sectionElement[VlocityPCUtils.getCustomFieldName("Value")]||""}"
        iconbaseurl="/_slds/icons/"
        extraclass="slds-m-bottom_medium"
        multiple="${isMultiple}"
        disabledefaultsort
      >
      </vlocity-combobox>
      ${this.getExcludedPicklistHTML()}
    `;}getExcludedPicklistHTML(){return html`
      <div class="slds-m-top_small">
        <vlocity-combobox
          options="${this.excludedOptions?JSON.stringify(this.excludedOptions):"[]"}"
          placeholder="${this.translationSdk.translate("PCSelectPlaceholder")}"
          iconbaseurl="/_slds/icons/"
          name="${VlocityPCUtils.getCustomFieldName("ExcludedPicklistValues")}"
          label="${this.translationSdk.translate("PCExcludedValue")}"
          value="${this.excludedValue?this.excludedValue:""}"
          multiple="true"
          id="vpc-excluded-picklist"
          disabledefaultsort
        ></vlocity-combobox>
      </div>
      ${0===this.selectedPicklistValues.length&&this.sectionElement[VlocityPCUtils.getCustomFieldName("PicklistId")]?html`
            <span class="vpc-invalid-label"
              >*
              ${this.translationSdk.translate("PCPicklistAllExcludeMessage")}</span
            >
          `:""}
    `;}cancel(){pubsub.fire("onsectionelementupdatecancel","cancel");}}window.customElements.define(VlocityPCObjectSectionElementForm.is,VlocityPCObjectSectionElementForm);class VlocityPcSwitch extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-switch";}template(){return html`
      <style>
        .vpc-switch-container {
          display: grid;
          background: var(--vpc-primary-button-bg-color);
          grid-template-columns: 1fr 0.7fr;
          border-radius: 38px;
          width: 48px;
          padding: 2px;
          align-items: center;
          overflow: hidden;
        }

        .vpc-switch-container .vpc-switch-button {
          border-radius: 100%;
          background: white;
          height: 20px;
          width: 20px;
        }

        .vpc-switch-container .vpc-switch-icon {
          justify-self: center;
        }

        .vpc-switch-off {
          grid-template-columns: 0 1fr;
          background: gray;
        }

        .vpc-switch-main-container .vpc-switch-label {
          padding: 0 7px;
          margin: 0;
          align-self: center;
        }

        .vpc-switch-main-container {
          display: grid;
          grid-template-columns: max-content max-content;
        }
      </style>
      <div class="vpc-switch-main-container">
        <label
          for="switchContainer"
          class="vpc-switch-label slds-form-element__label"
          >${this.label}</label
        >
        <div
          id="#switchContainer"
          class="vpc-switch-container"
          @click="${()=>this.toogleSwitch()}"
        >
          <vlocity-icon
            baseurl="${this.baseurl}"
            icon="${this.icon}"
            size="xx-small"
            class="vpc-switch-icon"
          ></vlocity-icon>
          <div class="vpc-switch-button"></div>
        </div>
      </div>
    `;}connectedCallback(){render(this.template(),this);this.toogleSwitch({isActive:"true"===this.value});pubsub.register("vpctoogleactiveswitch",{result:this.toogleSwitch.bind(this)});this.componentMounted=!0;}toogleSwitch(e){const switchClasses=this.querySelector(".vpc-switch-container").classList,isActive=e?e.isActive:switchClasses.contains("vpc-switch-off");if(isActive){switchClasses.remove("vpc-switch-off");this.querySelector(".vpc-switch-icon").classList.remove("vpc-hide-side-bar-item");}else{switchClasses.add("vpc-switch-off");this.querySelector(".vpc-switch-icon").classList.add("vpc-hide-side-bar-item");}pubsub.fire("vpcswitchchangeevent","result",{isActive});this.value=isActive;}disconnectedCallback(){this.toogleSwitchHandler={result:this.toogleSwitch.bind(this)};pubsub.unregister("vpctoogleactiveswitch",this.toogleSwitchHandler);}static get observedAttributes(){return["label","value","icon","baseurl"];}attributeChangedCallback(name,oldValue,newValue){if(!name||oldValue===newValue||!this.componentMounted){return;}switch(name){case"label":this.label=newValue;break;case"value":let isActive="true"===newValue;this.toogleSwitch({isActive});break;case"icon":this.icon=newValue;break;case"baseurl":this.icon=newValue;break;}}get label(){return this.getAttribute("label");}set label(value){this.setAttribute("label",value);}get value(){return this.getAttribute("value");}set value(value){this.setAttribute("value",value);}get icon(){return this.getAttribute("icon");}set icon(value){this.setAttribute("icon",value);}get baseurl(){return this.getAttribute("baseurl");}set baseurl(value){this.setAttribute("baseurl",value);}}window.customElements.define(VlocityPcSwitch.is,VlocityPcSwitch);class VlocityPCObjectLayout extends HTMLElement{static get is(){return"vlocity-pc-object-layout";}static get observedAttributes(){return["objectid"];}connectedCallback(){this.registerEvents();}attributeChangedCallback(){render(html``,this);setTimeout(()=>{this.getLayoutDetails();this.showAttrsFields=!0;this.showSectionElementForm=!1;this.showSectionForm=!1;});}template(){return html`
      <style>
        .vpc-object-section {
          background-color: var(--vpc-primary-bg-color);
        }
        .vpc-object-section-active {
          background-color: var(--vpc-active-dropzone-color);
        }
        .vpc-object-facet-wrapper {
          display: grid;
          grid-template-columns: 64% 35%;
        }
        .vpc-object-sections {
          height: 450px;
          overflow-y: scroll;
        }
      </style>
      <div class="vpc-object-layout slds-p-around_medium">
        ${this.facetDetails&&this.facetDetails.objectFacetId?html`
              <div class="vpc-object-facet-wrapper">
                <div>
                  <vlocity-button
                    extraclass="slds-m-bottom_x-small"
                    styletype="neutral"
                    label="${this.translationSdk.translate("PCAddSection")}"
                    @click="${()=>{this.onUpsertSection();}}"
                  >
                  </vlocity-button>
                  ${this.hideSections?"":html`
                        <ul class="vpc-object-sections">
                          ${repeat(this.facetDetails.records,section=>section,(section,index)=>html`
                              <li
                                class="vpc-object-section slds-p-around_x-small slds-m-bottom_small ${this.selectedSectionForEdit&&this.selectedSectionForEdit.Id===section.Id?"vpc-object-section-active":""}"
                              >
                                <vlocity-pc-object-section
                                  .section="${section}"
                                  .sectionindex="${index}"
                                  objectid="${this.getAttribute("objectid")}"
                                  ?showuparrow="${0!==index}"
                                  ?showdownarrow="${index!==this.facetDetails.records.length-1}"
                                >
                                </vlocity-pc-object-section>
                              </li>
                            `)}
                        </ul>
                      `}
                </div>
                <div class="vpc-object-layout-form-section">
                  ${this.showSectionForm?html`
                        <vlocity-pc-object-section-form
                          .sectionid="${this.selectedSectionForEdit.Id}"
                          .sectionName="${this.selectedSectionForEdit.Name}"
                          objectfacetid="${this.facetDetails&&this.facetDetails.objectFacetId}"
                        >
                        </vlocity-pc-object-section-form>
                      `:""}
                  ${this.showSectionElementForm?html`
                        <vlocity-pc-object-section-element-form
                          sectionelement="${JSON.stringify(this.sectionElementForEdit)}"
                          objectid="${this.getAttribute("objectid")}"
                          propertytype="${this.sectionElementForEdit.propertyType||this.sectionElementForEdit[VlocityPCUtils.getCustomFieldName("Type")]}"
                          attributeid="${this.sectionElementForEdit.AttributeId||this.sectionElementForEdit[VlocityPCUtils.getCustomFieldName("AttributeId")]}"
                        >
                        </vlocity-pc-object-section-element-form>
                      `:""}
                  ${this.showAttrsFields&&this.facetDetails&&this.facetDetails.records&&this.facetDetails.records.length?html`
                        <vlocity-pc-object-attrs-fields
                          objectid="${this.getAttribute("objectid")}"
                          facetname="${this.getAttribute("facetname")}"
                        ></vlocity-pc-object-attrs-fields>
                      `:""}
                </div>
              </div>
            `:html`
              <vlocity-button
                styletype="neutral"
                label="${this.translationSdk.translate("PCCreateLayout")}"
                @click="${()=>{this.onCreateLayout();}}"
              >
              </vlocity-button>
            `}
      </div>
    `;}constructor(){super();this.sdk=VlocitySDK.productconsole.getInstance();this.vlocityObjectSdk=this.sdk.getVlocityObjectSdk();this.translationSdk=VlocitySDK.translation.getInstance();}registerEvents(){this.sectionElementHandler={delete:this.onSectionElementDelete.bind(this),dragStart:this.activateSectionArea.bind(this),dragEnd:this.deActivateSectionArea.bind(this),dropped:this.deActivateSectionArea.bind(this),click:this.onSectionElementClick.bind(this),cancel:this.onSectionElementUpdateCancel.bind(this),save:this.onSectionElementSave.bind(this)};pubsub.register("vpcobjectfielddragstarted",this.sectionElementHandler);pubsub.register("vpcobjectfielddragended",this.sectionElementHandler);pubsub.register("vpcobjectfielddropped",this.sectionElementHandler);pubsub.register("vpcsectionelementclicked",this.sectionElementHandler);pubsub.register("onsectionelementupdatecancel",this.sectionElementHandler);pubsub.register("onsectionelementsave",this.sectionElementHandler);pubsub.register("sectionelementdeleted",this.sectionElementHandler);this.sectionHandler={delete:this.onSectionDelete.bind(this),swapSections:this.onSectionSwap.bind(this),click:this.onUpsertSection.bind(this),cancel:this.onUpsertSectionCancel.bind(this),save:this.onUpsertSectionSave.bind(this)};pubsub.register("vpcobjectsectionclicked",this.sectionHandler);pubsub.register("onsectionupsertcancel",this.sectionHandler);pubsub.register("onsectionupsertsave",this.sectionHandler);pubsub.register("sectiondeleted",this.sectionHandler);pubsub.register("onsectionswap",this.sectionHandler);}onUpsertSection(selectedSection){this.showSectionForm=!1;this.showAttrsFields=!1;this.selectedSectionForEdit=selectedSection?selectedSection.section:{};this.showSectionElementForm=!1;this.render();setTimeout(()=>{this.showSectionForm=!0;this.render();});}onUpsertSectionCancel(){this.showSectionForm=!1;this.showAttrsFields=!0;this.showSectionElementForm=!1;this.selectedSectionForEdit=null;this.render();}onUpsertSectionSave(section){this.showSectionForm=!1;this.showAttrsFields=!0;this.selectedSectionForEdit=null;this.showSectionElementForm=!1;const updatedSectionIndex=this.facetDetails.records.findIndex(record=>record.Id===section.Id),refUISection=section[`${vlocityPcConfig.namespacePrefix}SectionId__r`],upsertedSection={displaySequence:section[VlocityPCUtils.getCustomFieldName("Sequence")]?section[VlocityPCUtils.getCustomFieldName("Sequence")]:10,Name:refUISection.Name,Id:section.Id};upsertedSection[VlocityPCUtils.getCustomFieldName("ColumnLayout")]=section[VlocityPCUtils.getCustomFieldName("ColumnLayout")];upsertedSection[VlocityPCUtils.getCustomFieldName("TabKeyOrder")]=section[VlocityPCUtils.getCustomFieldName("TabKeyOrder")];upsertedSection[VlocityPCUtils.getCustomFieldName("ObjectFacetId")]=section[VlocityPCUtils.getCustomFieldName("ObjectFacetId")];if(-1!==updatedSectionIndex){if("1 Column"===section[VlocityPCUtils.getCustomFieldName("ColumnLayout")]&&"2 Columns"===this.facetDetails.records[updatedSectionIndex][VlocityPCUtils.getCustomFieldName("ColumnLayout")]){const selectedSection=this.facetDetails.records[updatedSectionIndex];selectedSection.sectionElements.records.forEach(record=>{record[VlocityPCUtils.getCustomFieldName("Column")]="1";});}upsertedSection.sectionElements=this.facetDetails.records[updatedSectionIndex].sectionElements;this.facetDetails.records[updatedSectionIndex]=this.vlocityObjectSdk.transformSection(upsertedSection);}else{upsertedSection.sectionElements={records:[]};this.facetDetails.records.splice(0,0,this.vlocityObjectSdk.transformSection(upsertedSection));}this.render();}onSectionElementUpdateCancel(){this.showSectionForm=!1;this.showSectionElementForm=!1;this.showAttrsFields=!0;this.render();}onSectionElementSave(){this.showSectionElementForm=!1;this.showSectionForm=!1;this.showAttrsFields=!0;this.getLayoutDetails();}onSectionElementClick(sectionElement){this.sectionElementForEdit=sectionElement.sectionElement;this.showSectionForm=!1;this.showAttrsFields=!1;this.showSectionElementForm=!1;this.selectedSectionForEdit=null;this.render();setTimeout(()=>{this.showSectionElementForm=!0;this.render();},0);}onSectionElementDelete(sectionElement){if(this.showSectionElementForm){this.showSectionElementForm=this.sectionElementForEdit&&sectionElement.Id===this.sectionElementForEdit.Id?!1:this.showSectionElementForm;this.showAttrsFields=!this.showSectionElementForm||this.showAttrsFields;this.render();}}activateSectionArea(){const sectionElements=this.querySelectorAll(".vpc-object-section");sectionElements.forEach(section=>{section.classList.add("vpc-object-section-active");});}deActivateSectionArea(){const sectionElements=this.querySelectorAll(".vpc-object-section");sectionElements.forEach(section=>{section.classList.remove("vpc-object-section-active");});}getLayoutDetails(){VlocityPCUtils.showSpinner();const objectId=this.getAttribute("objectid"),facetName=this.getAttribute("facetname");this.vlocityObjectSdk.getLayoutDetails(objectId,facetName).then(result=>{this.facetDetails=result;const isValidLayout=this.isValidLayout();pubsub.fire("vpcobjecttypelayoutloaded","result",{isValidLayout});this.render();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}isValidLayout(){if(!this.facetDetails.objectFacetId){return!1;}if(!this.facetDetails.records||!this.facetDetails.records.length){return!1;}return this.facetDetails.records.some(section=>{return section.sectionElements&&section.sectionElements.records&&section.sectionElements.records.length?!0:!1;});}onCreateLayout(){VlocityPCUtils.showSpinner();vlocityPcConfig.dataSourceService.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["createFacetsObject",JSON.stringify({id:this.getAttribute("objectid"),facet:"General Properties"})]}).execute().then(result=>{const errorMsg=VlocityPCUtils.getErrorFromSuccessResponse(result);if(""===errorMsg){this.getLayoutDetails();}else{VlocityPCUtils.toastError(errorMsg);}}).catch(error=>{const errorMessages=VlocityPCUtils.getErrorMessagesFromErrorsArray(error),errorMsg=""!==errorMessages?errorMessages:error;VlocityPCUtils.toastError(errorMsg);}).finally(()=>VlocityPCUtils.hideSpinner());}onSectionDelete(section){if(this.showSectionForm){this.showSectionForm=this.selectedSectionForEdit&&section.Id===this.selectedSectionForEdit.Id?!1:this.showSectionForm;this.showAttrsFields=!this.showSectionForm||this.showAttrsFields;}else if(this.showSectionElementForm){this.showSectionElementForm=this.sectionElementForEdit&&this.sectionElementForEdit[VlocityPCUtils.getCustomFieldName("ObjectSectionId")]===section.Id?!1:this.showSectionElementForm;this.showAttrsFields=!this.showSectionElementForm||this.showAttrsFields;}this.facetDetails.records=this.facetDetails.records.filter(record=>record.Id!==section.Id);this.render();}onSectionSwap(swapDetails){VlocityPCUtils.showSpinner();let firstIndex="up"===swapDetails.upOrDown?swapDetails.sectionIndex-1:swapDetails.sectionIndex,secondIndex="up"===swapDetails.upOrDown?swapDetails.sectionIndex:swapDetails.sectionIndex+1;vlocityPcConfig.dataSourceService.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["swapSectionSequence",JSON.stringify({sourceSectionId:this.facetDetails.records[firstIndex].Id,targetSectionId:this.facetDetails.records[secondIndex].Id})]}).execute().then(()=>{const firstSectionSeq=this.facetDetails.records[firstIndex][VlocityPCUtils.getCustomFieldName("Sequence")];this.facetDetails.records[firstIndex][VlocityPCUtils.getCustomFieldName("Sequence")]=this.facetDetails.records[secondIndex][VlocityPCUtils.getCustomFieldName("Sequence")];this.facetDetails.records[secondIndex][VlocityPCUtils.getCustomFieldName("Sequence")]=firstSectionSeq;[this.facetDetails.records[firstIndex],this.facetDetails.records[secondIndex]]=[this.facetDetails.records[secondIndex],this.facetDetails.records[firstIndex]];this.hideSections=!0;this.render();setTimeout(()=>{this.hideSections=!1;this.render();VlocityPCUtils.hideSpinner();},0);const successMsg="up"===swapDetails.upOrDown?this.translationSdk.translate("PCObjectSectionMoveUpSuccess"):this.translationSdk.translate("PCObjectSectionMoveDownSuccess");VlocityPCUtils.toastSuccess(successMsg);}).catch(error=>{VlocityPCUtils.hideSpinner();VlocityPCUtils.toastError(error);});}render(){render(this.template(),this);}disconnectedCallback(){pubsub.unregister("vpcobjectfielddragstarted",this.sectionElementHandler);pubsub.unregister("vpcobjectfielddragended",this.sectionElementHandler);pubsub.unregister("vpcobjectfielddropped",this.sectionElementHandler);pubsub.unregister("vpcsectionelementclicked",this.sectionElementHandler);pubsub.unregister("onsectionelementupdatecancel",this.sectionElementHandler);pubsub.unregister("onsectionelementsave",this.sectionElementHandler);pubsub.unregister("sectionelementdeleted",this.sectionElementHandler);pubsub.unregister("vpcobjectsectionclicked",this.sectionHandler);pubsub.unregister("onsectionupsertcancel",this.sectionHandler);pubsub.unregister("onsectionupsertsave",this.sectionHandler);pubsub.unregister("sectiondeleted",this.sectionHandler);pubsub.unregister("onsectionswap",this.sectionHandler);}}window.customElements.define(VlocityPCObjectLayout.is,VlocityPCObjectLayout);class VlocityPCNewVersion extends HTMLElement{static get is(){return"vlocity-pc-new-version";}get objectId(){return this.getAttribute("objectId");}get objectApiName(){return this.getAttribute("objectapiname");}connectedCallback(){this.translationSdk=VlocitySDK.translation.getInstance();this.versionSdk=VlocitySDK.productconsole.getInstance().getVersioningSdk();this.version=this.versionSdk.getVersionObject();this.version.objectId=this.objectId;this.version.objectApiName=this.objectApiName;}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-new-version-heading {
          font-size: 1.2rem;
          font-weight: bold;
        }
        .vpc-new-version-modal-content {
          background-color: var(--vpc-secondary-bg-color);
          overflow: visible;
        }
        .vpc-new-version-backdrop {
          opacity: 0.8;
        }
      </style>
      ${this.isShown?html`
            <div
              class="slds-backdrop slds-backdrop_open vpc-new-version-backdrop"
            ></div>
            <div class="slds-modal slds-fade-in-open">
              <div class="slds-modal__container">
                <header class="slds-modal__header">
                  <div class="vpc-new-version-heading">
                    ${this.translationSdk.translate("PCNewVersion")}
                  </div>
                </header>
                <div class="vpc-new-version-modal-content slds-p-around_medium">
                  <vlocity-input
                    name="name"
                    label="${this.translationSdk.translate("PCVersionName")}"
                    value="${this.version.name||""}"
                    extraclass="slds-m-bottom_medium"
                    required="true"
                    maxlength="255"
                  >
                  </vlocity-input>
                </div>
                <footer class="slds-modal__footer">
                  <vlocity-button
                    styletype="neutral"
                    label="${this.translationSdk.translate("Cancel")}"
                    @click="${()=>{this.cancel();}}"
                  >
                  </vlocity-button>
                  <vlocity-button
                    styletype="brand"
                    label="${this.translationSdk.translate("Save")}"
                    @click="${()=>{this.createVersion();}}"
                  >
                  </vlocity-button>
                </footer>
              </div>
            </div>
          `:""}
    `;}show(objectId,objectApiName){this.version=this.versionSdk.getVersionObject();this.version.objectId=objectId;this.version.objectApiName=objectApiName;this.version.name="";this.isShown=!0;this.canSave=!0;this.render();setTimeout(()=>{this.setUpChangeEvents();});}cancel(){this.isShown=!1;this.render();}setUpChangeEvents(){let isListening;const inputElement=this.querySelector("vlocity-input[name='name']");isListening=inputElement.hasAttribute("isListening");if(!isListening){inputElement.setAttribute("isListening",!0);inputElement.addEventListener("onvaluechange",evt=>{this.version.name=evt.detail.value();this.validateForm();});}}validateForm(){const inputElement=this.querySelector("vlocity-input[name='name']");if(!this.version.name.length){inputElement.querySelector(".slds-form-element").classList.add("slds-has-error");return!1;}else{inputElement.querySelector(".slds-form-element").classList.remove("slds-has-error");return!0;}}createVersion(){if(this.validateForm()&&this.canSave){this.canSave=!1;this.versionSdk.createVersion(this.version).then(response=>{const errorMessages=this.getErrorMessages(response);if(errorMessages&&errorMessages.length){VlocityPCUtils.toastError(errorMessages);}else{const objectType=response.result;VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCVersionCreateSuccess"));this.isShown=!1;pubsub.fire("onVersionCreate","create",{objectType});this.render();}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{this.canSave=!0;});}}getErrorMessages(response){let errorMessages="";if(response.messages&&response.messages.length){errorMessages=response.messages.reduce((errorMsg,error)=>{return"INVOKE-200"!==error.code?errorMsg+error.message+"\r\n":errorMsg;},"");}return errorMessages;}}window.customElements.define(VlocityPCNewVersion.is,VlocityPCNewVersion);var vlocityPcNewVersion={VlocityPCNewVersion:VlocityPCNewVersion};class VlocityPCObjectTypes extends HTMLElement{static get is(){return"vlocity-pc-object-types";}constructor(){super();this.productConsole=VlocitySDK.productconsole.getInstance();this.vlocityObjectSdk=this.productConsole.getVlocityObjectSdk();this.translationSdk=VlocitySDK.translation.getInstance();}render(){render(this.template(),this);}template(){return html`
      <style>
        #objectTypesRoot {
          max-height: calc(100vh - 70px);
          overflow-x: hidden;
          overflow-y: auto;
        }

        .vpc-object-type-node:nth-child(odd) {
          background-color: var(--vpc-primary-bg-color);
        }

        .vpc-object-type-node.object-type-selected {
          border-left: 4px solid var(--vpc-primary-color);
          background-color: var(--vpc-selected-item-color);
        }
        .vpc-object-type-node {
          word-break: break-word;
          overflow-wrap: break-word;
        }
      </style>
      <vlocity-prompt
        id="deleteObjectTypeConfirmation"
        titletext="${this.translationSdk.translate("Delete")}"
        canceltext="${this.translationSdk.translate("Cancel")}"
        confirmtext="${this.translationSdk.translate("Delete")}"
        helptext="${this.translationSdk.translate("PCConfirmMessage")}"
      ></vlocity-prompt>
      <vlocity-pc-new-version></vlocity-pc-new-version>
      <div
        class="vpc-title-caps slds-border_bottom slds-m-bottom_small slds-p-bottom_small slds-clearfix"
      >
        ${this.translationSdk.translate("PCObjectObjectTypeTab")}
        <span class="slds-float_right">
          <button
            class="slds-button slds-button_neutral"
            @click=${()=>this.onNewObjectType()}
          >
            ${this.translationSdk.translate("NewObjectType")}
          </button>
        </span>
      </div>

      <div id="objectTypesRoot">
        <div
          class="slds-p-top_x-small slds-clearfix slds-p-bottom_x-small slds-border_bottom vpc-object-type-node slds-p-right_small"
        >
          <span class="slds-float_right"
            >${this.objectTypes?html`
                  ${this.objectTypes.length}
                  ${this.translationSdk.translate("PCObjectsCountLabel")}
                `:""}</span
          >
        </div>
        ${this.objectTypes?this.objectTypes.map(item=>{const padding=item.level*(item.isLeaf?18:15)+5+"px";return html`
                <div
                  style="padding-left: ${padding}"
                  class="slds-clearfix slds-p-top_x-small slds-clearfix slds-p-bottom_x-small slds-border_bottom vpc-object-type-node ${item.objectType.Id===this.selectedObjectTypeId?"object-type-selected":""} ${item.isShown?"":"slds-hide"}"
                >
                  <div class="slds-float_left">
                    ${item.isLeaf?html``:html`
                          <span
                            @click="${()=>this.toggleChildren(item,!1)}"
                            class="${item.isOpened?"":"slds-hide"}"
                          >
                            <vlocity-icon
                              baseurl="/_slds/icons/"
                              icon="utility:chevrondown"
                              size="x-small"
                              extraclass="slds-icon-text-default"
                            >
                            </vlocity-icon>
                          </span>
                          <span
                            @click="${()=>this.toggleChildren(item,!0)}"
                            class="${!item.isOpened?"":"slds-hide"}"
                          >
                            <vlocity-icon
                              baseurl="/_slds/icons/"
                              icon="utility:chevronright"
                              size="x-small"
                              extraclass="slds-icon-text-default"
                            >
                            </vlocity-icon>
                          </span>
                        `}

                    <a
                      href="javascript:void(0)"
                      @click=${()=>this.onObjectTypeClick(item)}
                      >${item.objectType[VlocityPCUtils.getCustomFieldName("VersionLabel")]?item.objectType.Name+" "+item.objectType[VlocityPCUtils.getCustomFieldName("VersionLabel")]:item.objectType.Name}</a
                    >
                  </div>
                  <div class="slds-float_right">
                    ${0<item.level?html`
                          <a
                            href="javascript:void(0)"
                            @click="${()=>this.onNewVersion(item)}"
                            class="slds-m-right_small"
                          >
                            <vlocity-tooltip
                              tooltiptype="iconlink"
                              iconbaseurl="/_slds/icons/"
                              nubbinposition="top"
                              icon="utility:add"
                              iconclass="slds-icon-text-default"
                              iconsize="x-small"
                              value="${this.translationSdk.translate("PCNewVersion")}"
                            ></vlocity-tooltip>
                          </a>
                          <a
                            href="javascript:void(0)"
                            @click="${()=>this.onObjectTypeClone(item)}"
                            class="slds-m-right_small"
                          >
                            <vlocity-tooltip
                              tooltiptype="iconlink"
                              iconbaseurl="/_slds/icons/"
                              nubbinposition="top"
                              icon="utility:copy"
                              iconclass="slds-icon-text-default"
                              iconsize="x-small"
                              value="${this.translationSdk.translate("Clone")}"
                            ></vlocity-tooltip>
                          </a>
                          <a
                            href="javascript:void(0)"
                            @click="${()=>this.onObjectTypeDelete(item)}"
                            class="slds-m-right_small"
                          >
                            <vlocity-tooltip
                              tooltiptype="iconlink"
                              iconbaseurl="/_slds/icons/"
                              nubbinposition="top"
                              icon="utility:delete"
                              iconclass="slds-icon-text-default"
                              iconsize="x-small"
                              value="${this.translationSdk.translate("Delete")}"
                            ></vlocity-tooltip>
                          </a>
                        `:html``}
                  </div>
                </div>
              `;}):html``}
      </div>
    `;}get rootObjectClassId(){return this.getAttribute("root");}connectedCallback(){this.isVersioningEnabled=null;this.render();this.getRootHierarchy();this.versionHandlers={create:this.onVersionCreate.bind(this)};pubsub.register("onVersionCreate",this.versionHandlers);this.fieldLayoutHandler={saveSuccess:this.objectTypeSaved.bind(this),objectCreated:this.objectTypeCreated.bind(this)};pubsub.register("vpcfieldlayout",this.fieldLayoutHandler);}disconnectedCallback(){pubsub.unregister("onVersionCreate",this.versionHandlers);pubsub.unregister("vpcfieldlayout",this.fieldLayoutHandler);}objectTypeCreated(objectType){const parentObjectClassId=objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")];this.selectedObjectTypeId=objectType.Id;const isChildOfRoot=!parentObjectClassId||parentObjectClassId===this.rootObjectClassId;if(isChildOfRoot){//New/Updated object type is child of Product2(root) or not having a ParentObjectClassId
const level=1;this.objectTypes.splice(this.getLocOfElement(this.objectTypes,objectType,level),0,{level,objectType:objectType,isLeaf:!0,isOpened:!1,isShown:!0});}else if(parentObjectClassId){//New/Updated object type as child of another object type
const parentObjIndex=this.objectTypes.findIndex(item=>item.objectType.Id===parentObjectClassId),parentLevel=this.objectTypes[parentObjIndex].level,siblings=this.objectTypes.filter(item=>item.objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")]===parentObjectClassId);if(siblings&&0<siblings.length){//To place new/updated object type at correct place in the sortetd siblings list
const childIndexRelativeToSibling=this.getLocOfElement(siblings,objectType,parentLevel+1)===siblings.length?siblings.length-1:this.getLocOfElement(siblings,objectType,parentLevel+1),newChildSiblingId=siblings[childIndexRelativeToSibling].objectType.Id,newChildSiblingIndex=this.objectTypes.findIndex(item=>item.objectType.Id===newChildSiblingId),newChildIndex=this.getLocOfElement(siblings,objectType,parentLevel+1)===siblings.length?newChildSiblingIndex+1:newChildSiblingIndex;this.objectTypes.splice(newChildIndex,0,{level:parentLevel+1,objectType:objectType,isLeaf:!0,isOpened:!1,isShown:this.objectTypes[parentObjIndex].isOpened?!0:!1});}else{//Inserting new/updated object type next to parent when it does not have any siblings.
this.objectTypes[parentObjIndex].isLeaf=!1;this.objectTypes[parentObjIndex].isOpened=!0;this.objectTypes.splice(parentObjIndex+1,0,{level:parentLevel+1,objectType:objectType,isLeaf:!0,isOpened:!1,isShown:!0});}}this.render();}getLocOfElement(objectTypes,objectType,level){let i=0;for(i=0;i<objectTypes.length;i++){if(objectTypes[i].level===level&&0>=objectType.Name.toLocaleLowerCase().localeCompare(objectTypes[i].objectType.Name.toLocaleLowerCase())){return i;}}return objectTypes.length;}objectTypeSaved(evnt){const objectType=evnt.object,selectedObjectType=this.objectTypes.find(item=>item.objectType.Id===evnt.Id);if(objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")]!=selectedObjectType.objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")]){this.objectTypes=this.objectTypes.filter(item=>item.objectType.Id!==evnt.Id);this.objectTypeCreated(objectType);}else{selectedObjectType.objectType=objectType;}this.selectedObjectTypeId=evnt.Id;this.render();}onVersionCreate(detail){this.objectTypeCreated(detail.objectType);pubsub.fire("vpcobjecttypes","objectTypeClicked",detail);}getRootHierarchy(objectTypeId){this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getObjectTypeStructure",JSON.stringify({objectClassId:this.getAttribute("root")})]}).execute().then(response=>{this.selectedObjectTypeId=objectTypeId||this.getAttribute("selectedobjecttypeid")||this.rootObjectClassId;this.objectTypes=response.result;this.addRootNode();if(this.previousObjectTypes){this.restoreTreeState();}else{this.openlevelZero();this.previousObjectTypes=this.objectTypes;}this.render();});}addRootNode(){this.objectTypes.forEach(item=>{item.level++;});if(this.objectTypes&&this.objectTypes.length){this.objectTypes.unshift({level:0,objectType:{Id:this.getAttribute("root"),Name:this.objectTypes[0].objectType[VlocityPCUtils.getCustomFieldName("ObjectApiName")]}});}}restoreTreeState(){this.objectTypes.forEach(outer=>{const prev=this.previousObjectTypes.find(item=>item.objectType.Id===outer.objectType.Id);if(prev&&prev.objectType){outer.isShown=prev.isShown;outer.isOpened=prev.isOpened;if(outer.isOpened){this.toggleChildren(outer,!0);}}});this.previousObjectTypes=this.objectTypes;}onObjectTypeClick(item){this.selectedObjectTypeId=item.objectType.Id;this.render();pubsub.fire("vpcobjecttypes","objectTypeClicked",item);}onNewVersion(item){this.getVersioningEnabled().then(()=>{if(this.isVersioningEnabled){this.querySelector("vlocity-pc-new-version").show(item.objectType.Id,VlocityPCUtils.getCustomFieldName("ObjectClass"));}else{VlocityPCUtils.toastError(this.translationSdk.translate("PCCreateVersionDisabled"));}});}getVersioningEnabled(){return new Promise((resolve,reject)=>{if(null===this.isVersioningEnabled){this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["isVersioningEnabled","{}"]}).execute().then(response=>{this.isVersioningEnabled=response.result;resolve();}).catch(error=>{reject(error);});}else{resolve();}});}refresh(){this.getRootHierarchy();}onNewObjectType(){pubsub.fire("vpcobjecttypes","newObjectType",{});}onObjectTypeDelete(item){const deleteConfirm=this.querySelector("#deleteObjectTypeConfirmation");deleteConfirm.show().then(()=>{VlocityPCUtils.showSpinner();this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["deleteObjectType",JSON.stringify({objectTypeId:item.objectType.Id})]}).execute().then(result=>{if("OK"===result.error){this.objectTypes=this.objectTypes.filter(object=>object.objectType.Id!==item.objectType.Id);if(1<item.level){const siblings=this.objectTypes.filter(object=>object.objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")]===item.objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")]);if(!siblings.length){const parent=this.objectTypes.find(object=>object.objectType.Id===item.objectType[VlocityPCUtils.getCustomFieldName("ParentObjectClassId")]);parent.isLeaf=!0;parent.isOpened=!1;}}this.render();pubsub.fire("vpcobjecttypes","objectTypeDeleted",{id:item.objectType.Id});}else{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastErrorTitle"),result.error,"error");}}).finally(()=>{VlocityPCUtils.hideSpinner();});});}onObjectTypeClone(item){pubsub.fire("vpcobjecttypes","cloneObjectType",{item:item.objectType});}toggleChildren(item,isOpened){item.isOpened=isOpened;this.render();const itemIdx=this.objectTypes.findIndex(objType=>item.objectType.Id===objType.objectType.Id);if(0<=itemIdx){let i=itemIdx;while(i<this.objectTypes.length){if(this.objectTypes[i].level>item.level){if(!isOpened){this.objectTypes[i].isShown=!1;}else if(this.objectTypes[i].level===item.level+1){this.objectTypes[i].isShown=!0;if(this.objectTypes[i].isOpened){this.toggleChildren(this.objectTypes[i],isOpened);}}}i++;if(this.objectTypes[i]&&this.objectTypes[i].level<=item.level){break;}}}this.render();}openlevelZero(){this.objectTypes.forEach(item=>{item.isOpened=0===item.level;item.isShown=0===item.level||1===item.level;});}setSelectedObjectTypeId(id){this.selectedObjectTypeId=id;this.render();}}window.customElements.define(VlocityPCObjectTypes.is,VlocityPCObjectTypes);var vlocityPcObjectTypes={VlocityPCObjectTypes:VlocityPCObjectTypes};class VlocityPCObject extends HTMLElement{static get is(){return"vlocity-pc-object";}template(){return html`
      <style>
        .vpc-object-grid {
          display: grid;
          grid-template-columns: 23% 77%;
          grid-gap: 20px;
        }
        .disable-pointer-events {
          pointer-events: none;
          opacity: 0.6;
        }
      </style>
      ${!this.hideObjectPage?html`
            <div
              class="vpc-object-grid ${this.disablePointerEvents?"disable-pointer-events":""}"
            >
              <div class="slds-m-top_x-small">
                <vlocity-pc-object-types
                  root="${this.getAttribute("objectid")}"
                  selectedobjecttypeid="${this.selectedObjectTypeId||this.getAttribute("objectid")}"
                >
                </vlocity-pc-object-types>
              </div>
              ${this.isNewObjectType?html`
                    <vlocity-pc-object-detail
                      objectid="new"
                      rootobjectid="${this.getAttribute("objectid")}"
                      objectapiname="${this.objectData&&this.objectData[VlocityPCUtils.getCustomFieldName("ObjectApiName")]}"
                    ></vlocity-pc-object-detail>
                  `:this.isCloneObjectType?html`
                      <vlocity-pc-object-detail
                        objectid="clone""
                        .objectDetails = "${this.clonedObjectDetails}"
                        rootobjectid="${this.getAttribute("objectid")}"
                        objectapiname="${this.objectData&&this.objectData[VlocityPCUtils.getCustomFieldName("ObjectApiName")]}"
                      ></vlocity-pc-object-detail>`:html`
                    <vlocity-tabs variant="default" id="mainTabs">
                      <vlocity-tab>
                        <slot name="title">
                          <b
                            >${this.translationSdk.translate("PCObjectDetailsTab")}</b
                          >
                        </slot>
                        <slot name="content">
                          <vlocity-pc-object-detail
                            objectid="${this.selectedObjectTypeId||this.getAttribute("objectid")}"
                            rootobjectid="${this.getAttribute("objectid")}"
                            objectapiname="${this.objectData&&this.objectData[VlocityPCUtils.getCustomFieldName("ObjectApiName")]}"
                          ></vlocity-pc-object-detail>
                        </slot>
                      </vlocity-tab>
                      <vlocity-tab
                        class="${this.isNewObjectType?"slds-hide":""}"
                      >
                        <slot name="title">
                          <b
                            >${this.translationSdk.translate("PCObjectLayoutTab")}</b
                          >
                        </slot>
                        <slot name="content">
                          <vlocity-pc-object-layout
                            objectid="${this.selectedObjectTypeId||this.getAttribute("objectid")}"
                            facetname="${this.facetName}"
                          ></vlocity-pc-object-layout>
                        </slot>
                      </vlocity-tab>
                    </vlocity-tabs>
                  `}
            </div>
          `:""}
    `;}connectedCallback(){this.facetName="General properties";this.translationSdk=VlocitySDK.translation.getInstance();this.productConsole=VlocitySDK.productconsole.getInstance();this.vlocityObjectSdk=this.productConsole.getVlocityObjectSdk();Promise.all([VlocityPCUtils.getLabels(VlocityPCObjectLables,vlocityPcConfig.userLocale),this.getObjectData(this.getAttribute("objectid"))]).then(responses=>{this.objectData=responses[1].result;this.render();});this.objectTypesHandler={objectTypeClicked:this.objectTypeClicked.bind(this),newObjectType:this.onNewObjectType.bind(this),objectTypeDeleted:this.onObjectTypeDelete.bind(this),cloneObjectType:this.onCloneObjectType.bind(this)};pubsub.register("vpcobjecttypes",this.objectTypesHandler);this.fieldLayoutHandler={saveSuccess:this.objectDetailSaved.bind(this),cancelled:this.objectDetailCancelled.bind(this),objectCreated:this.objectTypeCreated.bind(this)};pubsub.register("vpcfieldlayout",this.fieldLayoutHandler);this.objectLayoutHandler={result:this.objectLayoutLoaded.bind(this)};pubsub.register("vpcobjecttypelayoutloaded",this.objectLayoutHandler);this.versionHandlers={create:this.onVersionCreate.bind(this)};pubsub.register("onVersionCreate",this.versionHandlers);this.sectionElementHandler={dropped:this.onSectionElementDrop.bind(this),dropSuccessOrFailure:this.onSectionElementDropUpsert.bind(this)};pubsub.register("vpcobjectfielddropped",this.sectionElementHandler);}onSectionElementDrop(){this.disablePointerEvents=!0;this.render();}onSectionElementDropUpsert(){this.disablePointerEvents=!1;this.render();}objectTypeClicked(item){this.newObjectTypeCreated=!1;this.selectedObjectTypeId=item.objectType.Id;if(this.isNewObjectType){this.isNewObjectType=!1;}if(this.isCloneObjectType){this.isCloneObjectType=!1;}sforce.console.setTabTitle(item.objectType.Name);this.render();}objectLayoutLoaded(evnt){if(this.newObjectTypeId&&this.newObjectTypeId==this.selectedObjectTypeId&&!evnt.isValidLayout){VlocityPCUtils.openToast(this.translationSdk.translate("PCWarningTitle"),this.translationSdk.translate("PCObjectTypeLayoutWarning"),"warning");}this.newObjectTypeId=null;}onVersionCreate(evnt){this.newObjectTypeId=evnt.objectType.Id;}objectTypeCreated(evt){this.newObjectTypeId=evt.Id;this.objectDetailSaved(evt);}objectDetailSaved(evt){this.isNewObjectType=!1;this.isCloneObjectType=!1;this.selectedObjectTypeId=evt.Id;if(evt.Name){sforce.console.setTabTitle(evt.Name);}this.render();}onObjectTypeDelete(evt){if(this.selectedObjectTypeId===evt.id){this.selectedObjectTypeId=this.getAttribute("objectid");this.render();}}objectDetailCancelled(){this.isNewObjectType=!1;this.isCloneObjectType=!1;this.render();}onNewObjectType(){this.isNewObjectType=!0;this.render();}onCloneObjectType(item){this.clonedObjectDetails=item.item;this.isCloneObjectType=!0;this.isNewObjectType=!1;this.render();}refreshTabs(){const tabs=this.querySelector("vlocity-tabs#mainTabs");tabs&&tabs.render();}render(){render(this.template(),this);}getObjectData(objectId){return this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getObject",JSON.stringify({objectId:objectId})]}).execute();}reloadObjectRecordPage(){this.hideObjectPage=!0;this.render();setTimeout(()=>{this.hideObjectPage=!1;this.render();});}disconnectedCallback(){pubsub.unregister("vpcfieldlayout",this.fieldLayoutHandler);pubsub.unregister("vpcobjecttypes",this.objectTypesHandler);pubsub.unregister("vpcobjectfielddropped",this.sectionElementHandler);pubsub.unregister("vpcobjecttypelayoutloaded",this.objectLayoutHandler);pubsub.unregister("onVersionCreate",this.versionHandlers);}}window.customElements.define(VlocityPCObject.is,VlocityPCObject);class VlocityPCPageHeader extends HTMLElement{static get is(){return"vlocity-pc-page-header";}render(){const svgLink=`/_slds/icons/standard-sprite/svg/symbols.svg#${this.getAttribute("icon")}`;render(html`
        <div class="slds-page-header">
          <div class="slds-page-header__row">
            <div class="slds-page-header__col-title">
              <div class="slds-media">
                <div class="slds-media__figure">
                  <span
                    class="slds-icon_container slds-icon-standard-${this.getAttribute("icon")}"
                    title="${this.getAttribute("heading")}"
                  >
                    <vlocity-icon
                      icon="standard:${this.getAttribute("icon")}"
                      baseurl="/_slds/icons/"
                      extraclass="slds-page-header__icon"
                    ></vlocity-icon>
                    <span class="slds-assistive-text"
                      >${this.getAttribute("heading")}</span
                    >
                  </span>
                </div>
                <div class="slds-media__body">
                  <div class="slds-page-header__name">
                    <div class="slds-page-header__name-title">
                      <h1>
                        <span
                          class="slds-page-header__title slds-truncate"
                          title="${this.getAttribute("heading")}"
                          >${this.getAttribute("heading")}</span
                        >
                      </h1>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `,this);}connectedCallback(){this.render();}}window.customElements.define(VlocityPCPageHeader.is,VlocityPCPageHeader);var vlocityPcPageHeader={VlocityPCPageHeader:VlocityPCPageHeader};const VlocityPCPicklistLabels=["New","RequiredField","SaveChanges","Cancel","Delete","Edit","PCConfirmMessage","PCToastErrorTitle","PCToastSuccessTitle","PCToastSuccessMessage","PCNoPicklistItems","NewPicklistItem","PCPicklistItemDeleted","PCRequiredFieldsMissingError","PCGeneralProperties","PCValue","PCLabel","PCCode","PCAbbreviation","SequenceNumber","Effectivity","PCActive","PCEffectiveFrom","PCEffectiveUntil","PCPicklistId","Done","PCPicklistItems","PCPicklistName","Description","PCNewPicklistHeading","PCDataType","PCVersionName","PCLifeCycleStatus","PCEffectiveValidationMessage","PCSunday","PCMonday","PCTuesday","PCWednesday","PCThursday","PCFriday","PCSaturday","PCJan","PCFeb","PCMar","PCApr","PCMay","PCJun","PCJul","PCAug","PCSep","PCOct","PCNov","PCDec","PCToday","PCHours","PCMinutes","PCAm","PCPm","PCPickAYear","PCAll"];var vlocityPcPicklistLabels={VlocityPCPicklistLabels:VlocityPCPicklistLabels};class VlocityPCPicklistDetail extends HTMLElement{static get is(){return"vlocity-pc-picklist-detail";}constructor(){super();}get picklistId(){return this.getAttribute("picklistid");}get isNewPicklist(){return"new"===this.getAttribute("type");}template(){return html`
      <style>
        .vpc-new-picklist vlocity-pc-field-layout {
          padding: 30px;
        }
      </style>
      ${this.isNewPicklist?html`
            <div class="vpc-new-picklist">
              <vlocity-pc-page-header
                heading="${this.translationSdk.translate("PCNewPicklistHeading")}"
                icon="product"
              ></vlocity-pc-page-header>
              <vlocity-pc-field-layout
                objectname="${VlocityPCUtils.getCustomFieldName("Picklist")}"
                .objectSections="${this.objectSections}"
                showcancel
                opennewrecord
              ></vlocity-pc-field-layout>
            </div>
          `:html`
            <vlocity-pc-field-layout
              objectid="${this.picklistId}"
              objectname="${VlocityPCUtils.getCustomFieldName("Picklist")}"
              .objectSections="${this.objectSections}"
            ></vlocity-pc-field-layout>
          `}
    `;}render(){render(this.template(),this);}connectedCallback(){this.productConsoleSdk=VlocitySDK.productconsole.getInstance();this.translationSdk=VlocitySDK.translation.getInstance();if(this.isNewPicklist){VlocityPCUtils.getLabels(VlocityPCPicklistLabels,vlocityPcConfig.userLocale).then(()=>{sforce.console.getEnclosingPrimaryTabId(result=>{sforce.console.setTabTitle(this.translationSdk.translate("PCNewPicklistHeading"),result.id);});this.initializeComponent();});pubsub.register("vpcfieldlayout",{cancelled:()=>{sforce.console.getEnclosingPrimaryTabId(result=>{sforce.console.closeTab(result.id);});const picklistObject=VlocityPCUtils.getCustomFieldName("Picklist");sforce.console.setSelectedNavigationTab(()=>{},picklistObject);}});}else{this.initializeComponent();}}initializeComponent(){const picklistInput=this.productConsoleSdk.createGetObjectPicklistsInput();picklistInput.objectName=VlocityPCUtils.getCustomFieldName("Picklist");const picklistPromise=this.productConsoleSdk.getObjectPicklistsByName(picklistInput);let objectPromise;if(!this.isNewPicklist){objectPromise=this.getObjectData();}Promise.all([picklistPromise,objectPromise]).then(responses=>{const objectData=responses&&responses[1]?responses[1].result:null;this.objectSections=this.getObjectSections(objectData,responses[0].result);this.render();});}getObjectData(){return this.productConsoleSdk.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getObject",JSON.stringify({objectId:this.picklistId})]}).execute();}getObjectSections(objectData,picklists){const datatypeOptions=picklists[VlocityPCUtils.getCustomFieldName("DataType")],sections=[{name:this.translationSdk.translate("PCGeneralProperties"),columnLayout:"2 columns",tabKeySequence:"Top-Down",sequenceNumber:1,sectionElements:[{type:"Field",label:this.translationSdk.translate("PCPicklistName"),value:objectData&&objectData.Name,dataType:"STRING",inputType:"Text",isRequired:!0,fieldApiName:"Name",sequenceNumber:1,columnNumber:1,maxLength:80},{type:"Field",label:this.translationSdk.translate("PCCode"),inputType:"Text",dataType:"STRING",value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("Code")],isRequired:!0,fieldApiName:VlocityPCUtils.getCustomFieldName("Code"),sequenceNumber:2,columnNumber:1,maxLength:255},{type:"Field",label:this.translationSdk.translate("PCVersionName"),inputType:"Text",dataType:"STRING",isRequired:!1,value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("VersionLabel")],fieldApiName:VlocityPCUtils.getCustomFieldName("VersionLabel"),sequenceNumber:3,columnNumber:1,maxLength:255},{type:"Field",label:this.translationSdk.translate("PCDataType"),inputType:"Dropdown",dataType:"STRING",value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("DataType")],isRequired:!0,fieldApiName:VlocityPCUtils.getCustomFieldName("DataType"),sequenceNumber:5,columnNumber:2,options:datatypeOptions},{type:"Field",label:this.translationSdk.translate("Description"),inputType:"Text",dataType:"STRING",value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("Description")],isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("Description"),sequenceNumber:6,columnNumber:2,maxLength:255},{type:"Field",label:this.translationSdk.translate("PCLifeCycleStatus"),value:this.isNewPicklist?"Draft":objectData&&objectData[VlocityPCUtils.getCustomFieldName("LifecycleStatus")],dataType:"STRING",inputType:"Dropdown",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("LifecycleStatus"),sequenceNumber:7,options:picklists[VlocityPCUtils.getCustomFieldName("LifecycleStatus")],columnNumber:2}]},{name:this.translationSdk.translate("Effectivity"),columnLayout:"2 columns",tabKeySequence:"Top-Down",sequenceNumber:1,sectionElements:[{type:"Field",label:this.translationSdk.translate("PCActive"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("IsActive")],dataType:"BOOLEAN",inputType:"Checkbox",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("IsActive"),sequenceNumber:1,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCEffectiveFrom"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("EffectiveFromDate")],dataType:"Date",inputType:"Date",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("EffectiveFromDate"),sequenceNumber:2,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCEffectiveUntil"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("EffectiveUntilDate")],dataType:"Date",inputType:"Date",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("EffectiveUntilDate"),sequenceNumber:3,columnNumber:1}]}];return sections;}}window.customElements.define(VlocityPCPicklistDetail.is,VlocityPCPicklistDetail);var vlocityPcPicklistDetail={VlocityPCPicklistDetail:VlocityPCPicklistDetail};class VlocityPCPicklistValues extends HTMLElement{static get is(){return"vlocity-pc-picklist-values";}constructor(){super();this.sdk=VlocitySDK.productconsole.getInstance();this.translationSdk=VlocitySDK.translation.getInstance();}get picklistId(){return this.getAttribute("picklistid");}template(){return html`
      <style>
        .vpc-picklist-items-grid {
          display: grid;
          grid-template-columns: 50% 50%;
          grid-gap: 20px;
        }
        .vpc-picklist-item {
          background-color: var(--vpc-secondary-bg-color);
          transition: background-color 0.5s ease;
          padding: 6px;
          margin-bottom: 8px;
        }

        .vpc-picklist-drop-target {
          background-color: #139c70;
          height: 10px;
        }

        .vpc-picklist-item_highlight {
          background-color: #bef7b7;
        }

        .vpc-picklist-items {
          max-height: 70vh;
          overflow-x: hidden;
          overflow-y: auto;
        }

        .via-slds .vpc-vf-page-heading {
          font-weight: 700;
          text-transform: uppercase;
          font-size: 1rem;
          letter-spacing: 1px;
        }
      </style>

      <vlocity-prompt
        id="deletePicklistItemConfirmation"
        titletext="${this.translationSdk.translate("Delete")}"
        canceltext="${this.translationSdk.translate("Cancel")}"
        confirmtext="${this.translationSdk.translate("Delete")}"
        helptext="${this.translationSdk.translate("PCConfirmMessage")}"
      ></vlocity-prompt>
      <div>
        <h2 class="vpc-vf-page-heading slds-border_bottom">
          ${this.translationSdk.translate("PCPicklistItems")}
        </h2>
      </div>
      <div class="vpc-picklist-items-grid">
        <div>
          <div
            class="slds-p-around_x-small slds-m-around_x-small slds-clearfix"
          >
            <button
              class="slds-button slds-button_neutral slds-float_right"
              @click="${()=>this.newPicklistItem()}"
            >
              ${this.translationSdk.translate("NewPicklistItem")}
            </button>
          </div>
          ${this.picklistItems&&this.picklistItems.length?html``:html`
                <div class="slds-text-color_weak slds-text-align_center">
                  ${this.translationSdk.translate("PCNoPicklistItems")}
                </div>
              `}
          <div class="vpc-picklist-items">
            ${this.picklistItems.map((item,idx)=>html`
                <div
                  id="${item.Id}_before"
                  class="vpc-picklist-drop-target"
                  style="display:none"
                  @drop=${evt=>this.onDrop(evt,item)}
                  @dragover=${evt=>{evt.preventDefault();}}
                  @dragenter=${evt=>evt.preventDefault()}
                ></div>
                <div
                  class="vpc-picklist-item"
                  draggable="true"
                  @dragstart=${evt=>{this.onPicklistDragStart(item,evt);}}
                  @dragover=${evt=>{evt.preventDefault();this.onPicklistItemDragOver(evt,item);}}
                  @drop=${evt=>this.onDrop(evt,item)}
                  @dragenter=${evt=>evt.preventDefault()}
                  @dragleave=${()=>{if(0===idx||idx===this.picklistItems.length-1){this.onDragEnd();}}}
                  @dragend=${evt=>this.onDragEnd()}
                  id="item_${item.Id}"
                >
                  <vlocity-icon
                    baseurl="/_slds/icons/"
                    icon="utility:drag_and_drop"
                    size="small"
                    label="Drag"
                    extraclass="vpc-light-icon"
                  ></vlocity-icon>
                  ${item.Name}

                  <span class="slds-float_right">
                    <a
                      href="javascript:void(0);"
                      title="${this.translationSdk.translate("Edit")}"
                      @click="${()=>this.selectPicklistItem(item)}"
                    >
                      <vlocity-icon
                        baseurl="/_slds/icons/"
                        icon="utility:edit"
                        size="x-small"
                        extraclass="slds-icon-text-default"
                        class="slds-m-right_small"
                      ></vlocity-icon>
                    </a>
                    <a
                      href="javascript:void(0);"
                      title="${this.translationSdk.translate("Delete")}"
                      @click="${()=>this.deletePicklistItem(item)}"
                    >
                      <vlocity-icon
                        baseurl="/_slds/icons/"
                        icon="utility:delete"
                        size="x-small"
                        extraclass="slds-icon-text-default"
                      ></vlocity-icon>
                    </a>
                  </span>
                </div>
                <div
                  id="${item.Id}_after"
                  class="vpc-picklist-drop-target"
                  @drop=${evt=>this.onDrop(evt,item)}
                  @dragover=${evt=>{evt.preventDefault();}}
                  @dragenter=${evt=>evt.preventDefault()}
                  style="display:none"
                ></div>
              `)}
          </div>

          ${this.showSaveChanges?html`
                <div>
                  <button
                    class="slds-button slds-button_brand"
                    @click=${()=>this.updatePicklistItems()}
                  >
                    ${this.translationSdk.translate("SaveChanges")}
                  </button>

                  <button
                    class="slds-button slds-button_neutral"
                    @click=${()=>this.cancelChanges()}
                  >
                    ${this.translationSdk.translate("Cancel")}
                  </button>
                </div>
              `:html``}
        </div>

        ${this.selectedPicklistItem?html`
              ${this.selectedPicklistItem.Id?html`
                    <div>
                      <vlocity-pc-field-layout
                        .objectSections=${this.objectSections}
                        objectname="${VlocityPCUtils.getCustomFieldName("PicklistValue")}"
                        objectId="${this.selectedPicklistItem.Id}"
                        showcancel
                      >
                      </vlocity-pc-field-layout>
                    </div>
                  `:html`
                    <div>
                      <vlocity-pc-field-layout
                        .objectSections=${this.objectSections}
                        objectname="${VlocityPCUtils.getCustomFieldName("PicklistValue")}"
                        showcancel
                      >
                      </vlocity-pc-field-layout>
                    </div>
                  `}
            `:""}
      </div>
    `;}render(){render(this.template(),this);}connectedCallback(){this.initializeComponent();this.fieldLayoutHandler={saveSuccess:this.objectDetailSaved.bind(this),cancelled:this.objectDetailCancelled.bind(this),objectCreated:this.objectDetailSaved.bind(this)};pubsub.register("vpcfieldlayout",this.fieldLayoutHandler);}disconnectedCallback(){this.fieldLayoutHandler={saveSuccess:this.objectDetailSaved.bind(this),cancelled:this.objectDetailCancelled.bind(this),objectCreated:this.objectDetailSaved.bind(this)};pubsub.unregister("vpcfieldlayout",this.fieldLayoutHandler);}objectDetailSaved(){if(this.selectedPicklistItem){this.selectedPicklistItem=null;this.render();this.getPicklistItems().then(response=>{this.picklistItems=response.result;this.originalItems=[...response.result];this.sortBySequence(this.picklistItems);this.render();});}}initializeComponent(){VlocityPCUtils.showSpinner();Promise.all([this.getPicklistItems(),this.getPicklist()]).then(responses=>{if(responses[0].result&&responses[0].result.length){this.picklistItems=responses[0].result;this.originalItems=[...responses[0].result];this.sortBySequence(this.picklistItems);}else{this.picklistItems=[];}this.picklist=responses[1].result;this.render();}).finally(()=>{VlocityPCUtils.hideSpinner();});}refresh(){this.objectDetailCancelled();this.showSaveChanges=!1;this.initializeComponent();}objectDetailCancelled(){this.selectedPicklistItem=null;this.render();}getPicklist(){return this.sdk.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getObject",JSON.stringify({objectId:this.picklistId})]}).execute();}getPicklistItems(){return this.sdk.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getPicklistItems",JSON.stringify({picklistId:this.picklistId})]}).execute();}deletePicklistItem(item){const deleteConfirm=this.querySelector("#deletePicklistItemConfirmation");deleteConfirm.show().then(()=>{VlocityPCUtils.showSpinner();this.sdk.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["deleteObject",JSON.stringify({objectId:item.Id})]}).execute().then(response=>{const errorMessages=VlocityPCUtils.processResponseForErrorMessages(response);if(errorMessages&&errorMessages.length){VlocityPCUtils.toastError(errorMessages);}else{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastSuccessTitle"),this.translationSdk.translate("PCPicklistItemDeleted"),"success");if(this.selectedPicklistItem&&this.selectedPicklistItem.Id===item.Id){this.selectedPicklistItem=null;}this.getPicklistItems().then(response=>{this.picklistItems=response.result;this.originalItems=[...response.result];this.sortBySequence(this.picklistItems);this.render();});}}).finally(()=>{VlocityPCUtils.hideSpinner();});});}selectPicklistItem(item){this.selectedPicklistItem=null;this.render();setTimeout(()=>{this.selectedPicklistItem=item;this.objectSections=this.getObjectSections(item);this.render();});}newPicklistItem(){this.selectedPicklistItem=null;this.render();setTimeout(()=>{this.selectedPicklistItem={};this.objectSections=this.getObjectSections(this.selectPicklistItem);this.render();});}getObjectSections(objectData){const dataType=this.picklist[VlocityPCUtils.getCustomFieldName("DataType")].toLowerCase(),sections=[{name:this.translationSdk.translate("PCGeneralProperties"),columnLayout:"2 columns",tabKeySequence:"Top-Down",sequenceNumber:1,startTabIndex:15,sectionElements:[{type:"Field",label:this.translationSdk.translate("PCValue"),isRequired:"boolean"!==dataType,sequenceNumber:1,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCLabel"),value:objectData&&objectData.Name,dataType:"STRING",inputType:"Text",isRequired:!0,fieldApiName:"Name",sequenceNumber:2,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCCode"),inputType:"Text",dataType:"STRING",value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("Code")],isRequired:!0,fieldApiName:VlocityPCUtils.getCustomFieldName("Code"),sequenceNumber:3,columnNumber:2},{type:"Field",label:this.translationSdk.translate("PCAbbreviation"),inputType:"Text",dataType:"STRING",value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("Abbreviation")],isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("Abbreviation"),sequenceNumber:4,columnNumber:2},{type:"Field",label:this.translationSdk.translate("SequenceNumber"),inputType:"",dataType:"",value:objectData.Id?objectData&&objectData[VlocityPCUtils.getCustomFieldName("Sequence")]:this.picklistItems.length+1,isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("Sequence"),sequenceNumber:4,columnNumber:2}]},{name:this.translationSdk.translate("Effectivity"),columnLayout:"2 columns",tabKeySequence:"Top-Down",sequenceNumber:1,startTabIndex:20,sectionElements:[{type:"Field",label:this.translationSdk.translate("PCActive"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("IsActive")],dataType:"BOOLEAN",inputType:"Checkbox",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("IsActive"),sequenceNumber:1,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCEffectiveFrom"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("EffectiveFromDate")],dataType:"Date",inputType:"Date",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("EffectiveFromDate"),sequenceNumber:2,columnNumber:1},{type:"Field",label:this.translationSdk.translate("PCEffectiveUntil"),value:objectData&&objectData[VlocityPCUtils.getCustomFieldName("EffectiveUntilDate")],dataType:"Date",inputType:"Date",isRequired:!1,fieldApiName:VlocityPCUtils.getCustomFieldName("EffectiveUntilDate"),sequenceNumber:3,columnNumber:2},{type:"Field",label:this.translationSdk.translate("PCPicklistId"),inputType:"",dataType:"",value:this.picklist.Id,fieldApiName:VlocityPCUtils.getCustomFieldName("PicklistId"),sequenceNumber:3,columnNumber:2}]}];this.updateValueField(sections[0].sectionElements[0],objectData);return sections;}updateValueField(valueField,objectData){const dataType=this.picklist[VlocityPCUtils.getCustomFieldName("DataType")].toLowerCase();switch(dataType){case"number":valueField.dataType="Number";valueField.inputType="Number";valueField.value=objectData&&objectData[VlocityPCUtils.getCustomFieldName("NumberValue")];valueField.fieldApiName=VlocityPCUtils.getCustomFieldName("NumberValue");break;case"date":valueField.dataType="Date";valueField.inputType="Date";valueField.value=objectData&&objectData[VlocityPCUtils.getCustomFieldName("DateValue")];valueField.fieldApiName=VlocityPCUtils.getCustomFieldName("DateValue");break;case"date time":valueField.dataType="DateTime";valueField.inputType="DateTime";valueField.value=objectData&&objectData[VlocityPCUtils.getCustomFieldName("DateTimeValue")];valueField.fieldApiName=VlocityPCUtils.getCustomFieldName("DateTimeValue");break;case"boolean":valueField.dataType="Boolean";valueField.inputType="Checkbox";valueField.value=objectData&&objectData[VlocityPCUtils.getCustomFieldName("BooleanValue")];valueField.fieldApiName=VlocityPCUtils.getCustomFieldName("BooleanValue");break;default:valueField.dataType="STRING";valueField.inputType="Text";valueField.value=objectData&&objectData[VlocityPCUtils.getCustomFieldName("TextValue")];valueField.fieldApiName=VlocityPCUtils.getCustomFieldName("TextValue");break;}}onPicklistDragStart(item,dragEvt){dragEvt.dataTransfer.setData("text/plain",JSON.stringify(item));}onPicklistItemDragOver(evt,item){let isFirstHalf=!1;const rect=evt.target.getBoundingClientRect();isFirstHalf=evt.clientY<rect.top+rect.height/2;let prevDropTarget=this.dropTarget;if(isFirstHalf){this.dropTarget=this.querySelector(`#${item.Id}_before`);this.dropLocation="before";}else{this.dropTarget=this.querySelector(`#${item.Id}_after`);this.dropLocation="after";}if(prevDropTarget){prevDropTarget.style.display="none";}this.dropTarget.style.display="block";}onDragEnd(){if(this.dropTarget){this.dropTarget.style.display="none";this.dropTarget=null;}}onDrop(evt,item){evt.preventDefault();let itemDropped=evt.dataTransfer.getData("text/plain");itemDropped=itemDropped&&JSON.parse(itemDropped);if(itemDropped.Id===item.Id){return;}this.updateSequence(item,itemDropped,this.dropLocation);this.showSaveChanges=!0;this.render();const newItem=this.querySelector(`#item_${itemDropped.Id}`);if(newItem){newItem.classList.add("vpc-picklist-item_highlight");setTimeout(()=>{newItem.classList.remove("vpc-picklist-item_highlight");},1e3);}}updateSequence(targetItem,droppedItem,location){const itemIdx=this.picklistItems.findIndex(item=>item.Id===droppedItem.Id);this.picklistItems.splice(itemIdx,1);const targetIdx=this.picklistItems.findIndex(item=>item.Id===targetItem.Id);if("before"===location){this.picklistItems.splice(targetIdx,0,droppedItem);}else{this.picklistItems.splice(targetIdx+1,0,droppedItem);}this.picklistItems.forEach((item,idx)=>{item[VlocityPCUtils.getCustomFieldName("Sequence")]=idx+1;});this.sortBySequence(this.picklistItems);this.render();}sortBySequence(items){items.sort((a,b)=>{const seqA=+a[VlocityPCUtils.getCustomFieldName("Sequence")],seqB=+b[VlocityPCUtils.getCustomFieldName("Sequence")];return seqA-seqB;});}updatePicklistItems(){const promises=[];this.picklistItems.forEach(item=>{promises.push(this.sdk.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["updateObject",JSON.stringify({so:item})]}).execute());});VlocityPCUtils.showSpinner();Promise.all(promises).then(()=>{VlocityPCUtils.openToast(this.translationSdk.translate("PCToastSuccessTitle"),this.translationSdk.translate("PCToastSuccessMessage"),"success");this.showSaveChanges=!1;this.originalItems=[...this.picklistItems];this.render();}).finally(()=>{VlocityPCUtils.hideSpinner();});}cancelChanges(){this.picklistItems=[...this.originalItems];this.showSaveChanges=!1;this.render();}}window.customElements.define(VlocityPCPicklistValues.is,VlocityPCPicklistValues);var vlocityPcPicklistValues={VlocityPCPicklistValues:VlocityPCPicklistValues};class VlocityPCPicklist extends HTMLElement{static get is(){return"vlocity-pc-picklist";}constructor(){super();}get picklistId(){return this.getAttribute("picklistid");}template(){return html`
      <style>
        .vpc-picklist {
          background-color: var(--vpc-primary-bg-color);
        }
      </style>
      ${!this.hidePicklist?html`
            <div
              class="vpc-picklist slds-border_top slds-border_bottom slds-border_left slds-border_right slds-p-around_medium"
            >
              <div class="slds-m-bottom_xx-large">
                <vlocity-pc-picklist-detail
                  picklistid="${this.picklistId}"
                ></vlocity-pc-picklist-detail>
              </div>
              <div>
                <vlocity-pc-picklist-values
                  picklistid="${this.picklistId}"
                ></vlocity-pc-picklist-values>
              </div>
            </div>
          `:""}
    `;}render(){render(this.template(),this);}connectedCallback(){VlocityPCUtils.getLabels(VlocityPCPicklistLabels,vlocityPcConfig.userLocale).then(()=>{this.render();});}refresh(){this.hidePicklist=!0;this.render();setTimeout(()=>{this.hidePicklist=!1;this.render();});}}window.customElements.define(VlocityPCPicklist.is,VlocityPCPicklist);var vlocityPcPicklist={VlocityPCPicklist:VlocityPCPicklist};class VlocityPcPriceForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-price-form";}template(){const translations=VlocitySDK.translation.getInstance(),baseVirtualArr=[{label:translations.translate("PCBase"),value:!0},{label:translations.translate("PCVirtual"),value:!1}];return html`
      <style>
        vlocity-pc-price-form {
          border-bottom: 1px solid var(--vpc-primary-border-color);
        }

        vlocity-pc-price-form,
        .vpc-pc-price-form {
          display: grid;
        }

        .vpc-new-price-container {
          display: grid;
          padding: 5px 30px 15px;
        }

        .vpc-form-field {
          padding: 6px 10px;
          font-size: 14px;
          margin: 0 0 15px;
          border-radius: 4px;
          border-style: none;
          border: 1px solid var(--vpc-primary-input-border-color);
        }

        .vpc-pc-price-form .vpc-character-limit-message {
          display: grid;
          grid-template-columns: 16px 190px;
          bottom: 17px;
        }

        .vpc-pc-price-form .vpc-character-limit-message p {
          padding: 2px 0 0 3px;
          font-size: 12px;
        }

        .vpc-pc-price-form
          .vpc-new-price-container
          .vpc-virtual-checkbox-container {
          margin: 15px 0 0;
        }

        .vpc-pc-price-form
          .vpc-new-price-container
          .vpc-pricing-form-text-area {
          margin: 0;
        }

        .vpc-pricing-textarea {
          resize: none;
          height: 60px;
          width: 100%;
        }

        .vpc-pc-price-form .vpc-new-price-container .slds-form-element__help {
          display: none;
        }
      </style>

      <div class="vpc-pc-price-form">
        <vlocity-form class="vpc-new-price-container">
          <div>
            <vlocity-textarea
              name="vpc-display-text"
              class="vpc-pricing-form-text-area vpc-required-field"
              label="${translations.translate("PCDisplayName")}"
              noresize
              required="true"
            ></vlocity-textarea>
            <div class="vpc-character-limit-message">
              <vlocity-tooltip
                tooltiptype="iconlink"
                icon="utility:info"
                iconsize="xx-small"
                iconbaseurl="/_slds/icons/"
                value="${translations.translate("PCDisplayNameCharacterLimit")}"
              ></vlocity-tooltip>
              <p>${translations.translate("PCDisplayNameCharacterLimit")}</p>
            </div>
          </div>
          <div class="vpc-virtual-checkbox-container">
            <vlocity-checkbox
              class="vpc-price-type-checkbox"
              name="vpc-is-base-price"
              label="${translations.translate("PCVirtualPrice")}"
            ></vlocity-checkbox>
          </div>
        </vlocity-form>
      </div>
    `;}connectedCallback(){render(this.template(),this);this.addEventListener("onvaluechange",e=>{this.fireDisplayNameTextHandler();if(!e.detail.value()&&"VLOCITY-CHECKBOX"!==e.target.nodeName){this.addErrorState(e);}else{e.target.removeAttribute("errormessage");pubsub.fire("vpcrunpricingformdonebuttonfunction","result",{});pubsub.fire("vpccreatepricingelement","result",{});}});this.initEventHandlers();setTimeout(()=>{pubsub.fire("vpcgetpricingform","result",{});this.querySelector(".vpc-pricing-form-text-area").querySelector("textarea").setAttribute("maxLength","80");},0);}initEventHandlers(){this.setGetPricingFormHandlerObj={result:this.setGetPricingFormHandler.bind(this)};this.pricingFormValidHandler={result:this.pricingFormValid.bind(this)};this.priceListChangeHandlerObj={result:this.priceListChangeHandler.bind(this)};this.popualteFormFieldsObj={result:this.popualteFormFields.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.showNewPromotionFormHandler={result:this.showNewPromotionForm.bind(this)};this.contextChangeHandlerObj={result:this.contextChangeHandler.bind(this)};this.fireDisplayNameTextHandlerObj={result:this.fireDisplayNameTextHandler.bind(this)};pubsub.register("vpcpricingform",this.setGetPricingFormHandlerObj);pubsub.register("vpcpricingformvalid",this.pricingFormValidHandler);pubsub.register("vpcpricelistchange",this.priceListChangeHandlerObj);pubsub.register("vpcpopulateformfields",this.popualteFormFieldsObj);pubsub.register("vpcshowpriceform",this.showPriceFormHandler);pubsub.register("vpcgetdisplaynametext",this.fireDisplayNameTextHandlerObj);pubsub.register("vpcshownewpromotionform",this.showNewPromotionFormHandler);pubsub.register("vpccontextchange",this.contextChangeHandlerObj);}contextChangeHandler(e){if("adjustmentContext"===e.context||"overrideContext"===e.context){this.querySelector(".vpc-pricing-form-text-area").classList.remove("vpc-required-field");}else{this.querySelector(".vpc-pricing-form-text-area").classList.add("vpc-required-field");}}showNewPromotionForm(){this.classList.add("vpc-hide-side-bar-item");}fireDisplayNameTextHandler(){pubsub.fire("vpcsetdisplaynametext","result",{displayNameText:this.querySelector(".vpc-pricing-form-text-area").querySelector("textarea")});}showPriceForm(){this.classList.remove("vpc-hide-side-bar-item");}popualteFormFields(e){const priceListEntryToEdit=e.priceListEntryToEdit,namespacePrefix=vlocityPcConfig.namespacePrefix,pricingTextarea=this.querySelector(".vpc-pricing-form-text-area"),displayText=priceListEntryToEdit[`${namespacePrefix}DisplayText__c`].value;pricingTextarea.querySelector("textarea").value=displayText;pricingTextarea.value=displayText;this.querySelector(".vpc-price-type-checkbox").querySelector("input").checked=!priceListEntryToEdit[`${namespacePrefix}IsBasePrice__c`].value;}priceListChangeHandler(e){this.priceListId=e.priceListId;}pricingFormValid(e){if(e.isPricingFormValid&&this.priceListId&&this.querySelector(".vpc-pricing-form-text-area").value){pubsub.fire("vpcenabledonebutton","result",{enable:!0});}}setGetPricingFormHandler(e){this.pricingDetailsForm=e.pricingDetailsForm;}addErrorState(e){if(e){e.target.setAttribute("errormessage","This field is required");pubsub.fire("vpcenabledonebutton","result",{});}}enableDoneButton(){pubsub.fire("vpccallpricingformvalid","result",{});}resetForm(){const textarea=this.querySelector(".vpc-pricing-form-text-area");textarea.value="";textarea.querySelector("textarea").value="";textarea.removeAttribute("errormessage");const priceTypeCheckbox=this.querySelector(".vpc-price-type-checkbox");priceTypeCheckbox.value=!1;priceTypeCheckbox.querySelector("input").checked=!1;this.priceListId="";}disconnectedCallback(){pubsub.unregister("vpcpricingform",this.setGetPricingFormHandlerObj);pubsub.unregister("vpcpricingformvalid",this.pricingFormValidHandler);pubsub.unregister("vpcpricelistchange",this.priceListChangeHandlerObj);pubsub.unregister("vpcpopulateformfields",this.popualteFormFieldsObj);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showNewPromotionFormHandler);pubsub.unregister("vpccontextchange",this.contextChangeHandlerObj);pubsub.unregister("vpcgetdisplaynametext",this.fireDisplayNameTextHandlerObj);}}window.customElements.define(VlocityPcPriceForm.is,VlocityPcPriceForm);class VlocityPcPriceListHeader extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-price-list-header";}template(){const translations=this.translations,priceListValues=this.getPriceListValues();return html`
      <style>
        .vpc-new-price-list-header-form {
          display: grid;
        }

        .vpc-new-price-list-header-container {
          display: grid;
          padding: 0 30px;
        }

        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .vpc-combobox
          .slds-listbox
          .slds-media__body {
          margin: 0 20px 0;
        }

        .vpc-new-price-list-header-container .vpc-promotion-mode {
          margin: 0 0 20px 0;
        }

        .vpc-pricelist-header-container {
          display: grid;
          grid-template-columns: 1fr 0.1fr;
          align-items: center;
        }

        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .vpc-price-list-combo-container
          .vpc-price-list-combobox,
        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .vpc-header-display-name {
          margin: 0;
        }

        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .vpc-form-control {
          margin: 5px 0 0;
        }

        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .vpc-display-name-existing-mode {
          margin: 0;
        }

        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .vpc-hide-side-bar-item,
        .vpc-new-price-list-header-container
          .vpc-new-price-list-header-form
          .slds-form-element__help {
          display: none;
        }

        .vpc-new-price-list-header-container
          .vpc-header-display-name
          .slds-input::-ms-clear {
          display: none;
        }
      </style>

      <div class="vpc-new-price-list-header-container">
        <vlocity-form class="vpc-new-price-list-header-form">
          <div class="vpc-pricelist-header-container"></div>
          <div class="vpc-price-list-combo-container vpc-form-control">
            <vlocity-combobox
              class="vpc-combobox vpc-price-list-combobox vpc-required-field"
              label="${translations.translate("PCPriceList")}"
              placeholder="${priceListValues.length?translations.translate("PCSelectPriceList"):translations.translate("PCProductWithNoPriceList")}"
              iconbaseurl="/_slds/icons/"
              searchable="true"
              required="true"
              options="${priceListValues}"
            >
            </vlocity-combobox>
          </div>
          <div class="vpc-form-control vpc-display-name-existing-mode">
            <vlocity-input
              type="text"
              label="${translations.translate("PCDisplayName")}"
              class="vpc-input vpc-header-display-name vpc-required-field vpc-hide-side-bar-item"
              required="true"
              name="vpc-header-display-name"
            ></vlocity-input>
          </div>
        </vlocity-form>
      </div>
    `;}connectedCallback(){this.initializeComponent();}initializeComponent(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.translations=VlocitySDK.translation.getInstance();if(this.rootProductId){this.productConsole.getApplicablePriceList(this.productConsole.createApplicablePriceListInput({ProductId:this.productId})).then(result=>{this.priceListsArr=result.records;render(this.template(),this);VlocityPCUtils.setComboboxHandlers(this);});}else{const priceListInput=this.productConsole.createPriceListInput(!0);this.productConsole.getPriceList(priceListInput).then(result=>{this.priceListsArr=result.records;render(this.template(),this);VlocityPCUtils.setComboboxHandlers(this);});}this.addEventListener("onvaluechange",e=>{e.target.classList.contains("vpc-price-list-combobox")&&pubsub.fire("vpcpricelistchange","result",{priceListId:e.target.value});pubsub.fire("vpcsetheaderdisplaytext","result",{adjustmentOverrideName:this.querySelector(".vpc-header-display-name")});if(!e.detail.value()){this.addErrorState(e);}else{if(e.target.classList.contains("vpc-header-display-name")){pubsub.fire("vpcrunpricingformdonebuttonfunction","result",{});}e.target.removeAttribute("errormessage");this.enableDoneButton();}});pubsub.fire("vpcgetpricingform","result",{});this.initEventHandlers();}initEventHandlers(){pubsub.register("vpccontextchange",{result:this.contextChangeHandler.bind(this)});pubsub.register("vpcexistingofferpromotion",{result:this.existingPromotionOfferHandler.bind(this)});pubsub.register("vpceditmodeon",{result:this.setEditModeState.bind(this)});pubsub.register("vpcshowpromotioneditview",{result:this.showEditPromotionView.bind(this)});pubsub.register("vpcpricingform",{result:this.setGetPricingFormHandler.bind(this)});pubsub.register("vpcpricelistchange",{result:this.priceListChangeHandler.bind(this)});pubsub.register("vpcpopulateformfields",{result:this.popualteFormFields.bind(this)});pubsub.register("vpcenablepricelistcombobox",{result:this.enablePriceListCombobox.bind(this)});pubsub.register("vpcexistingoffer",{result:this.offerBasedHandler.bind(this)});pubsub.register("vpc-show-edit-offer-only-view",{result:this.showOfferOnlyEditView.bind(this)});pubsub.register("vpcshowpromotionform",{result:this.showPromotionForm.bind(this)});pubsub.register("vpcshowpriceform",{result:this.showPriceForm.bind(this)});pubsub.register("vpcshownewpromotionform",{result:this.showNewPromotionForm.bind(this)});pubsub.register("vpccheckifdeletedrecordineditform",{result:this.checkIfDeletedRecordInEditMode.bind(this)});pubsub.register("vpccreatepricingelement",{result:this.createPricingElement.bind(this)});pubsub.register("vpcgetstructuredisplaynametext",{result:this.fireDisplayNameTextHandler.bind(this)});}fireDisplayNameTextHandler(){pubsub.fire("vpcsetheaderdisplaytext","result",{adjustmentOverrideName:this.querySelector(".vpc-header-display-name")});}checkIfDeletedRecordInEditMode(e){if(this.priceListEntryId===e.priceListEntryId){pubsub.fire("vpccancelform","result",{});}}showNewPromotionForm(){this.classList.add("vpc-hide-side-bar-item");}showPriceForm(){this.classList.remove("vpc-hide-side-bar-item");}showPromotionForm(){this.classList.remove("vpc-hide-side-bar-item");}showOfferOnlyEditView(){this.showOfferOnlyEditView=!0;}enablePriceListCombobox(e){this.querySelector(".vpc-price-list-combobox").setAttribute("disabled",`${!e.enable}`);}popualteFormFields(e){const priceListInput=this.productConsole.createPriceListInput();this.productConsole.getPriceList(priceListInput).then(result=>{this.priceListsArr=result.records;this.resetForm();const priceListEntryToEdit=e.priceListEntryToEdit;this.priceListEntryId=priceListEntryToEdit.Id.value;const namespacePrefix=vlocityPcConfig.namespacePrefix,priceListCombo=this.querySelector(".vpc-price-list-combobox"),selectedPriceList=priceListCombo.options.filter(option=>{return priceListEntryToEdit[`${namespacePrefix}PriceListId__c`].value===option.value;});priceListCombo.value=selectedPriceList[0].value;priceListCombo.setAttribute("disabled","true");});}priceListChangeHandler(e){this.priceListId=e.priceListId;}setGetPricingFormHandler(e){this.pricingDetailsForm=e.pricingDetailsForm;}showEditPromotionView(data){const priceListEntryToEdit=data.priceListEntryToEdit;this.priceListsArr=[{Name:priceListEntryToEdit.PriceList.value,Id:priceListEntryToEdit[`${vlocityPcConfig.namespacePrefix}PriceListId__c`].value}];this.resetForm(!0);this.classList.remove("vpc-hide-side-bar-item");this.priceListEntryId=priceListEntryToEdit.Id.value;const displayName=this.querySelector(".vpc-header-display-name");displayName.parentElement.classList.remove("vpc-display-name-existing-mode");displayName.classList.remove("vpc-hide-side-bar-item");displayName.value=priceListEntryToEdit[`Name`];displayName.querySelector("input").value=priceListEntryToEdit[`Name`];const priceListCombo=this.querySelector(".vpc-price-list-combobox"),selectedPriceList=priceListCombo.options.filter(option=>{return priceListEntryToEdit[`${vlocityPcConfig.namespacePrefix}PriceListId__c`].value===option.value;});priceListCombo.value=selectedPriceList[0].value;priceListCombo.setAttribute("disabled","true");}refreshPriceListData(){if(this.rootProductId){this.productConsole.getApplicablePriceList(this.productConsole.createApplicablePriceListInput({ProductId:this.productId})).then(result=>{this.priceListsArr=result.records;});}else{const priceListInput=this.productConsole.createPriceListInput(!0);this.productConsole.getPriceList(priceListInput).then(result=>{this.priceListsArr=result.records;});}}existingPromotionOfferHandler(e){const displayName=this.querySelector(".vpc-header-display-name");displayName.classList.remove("vpc-hide-side-bar-item");displayName.parentElement.classList.remove("vpc-display-name-existing-mode");this.classList.remove("vpc-hide-side-bar-item");this.existingPromotionOffer=!0;const existingPromotionList=e.existingPromotionList,selectedPromotionId=e.existingPromotionId,priceList=existingPromotionList.filter(promotion=>{return promotion.Id===selectedPromotionId;})[0],priceListCombo=this.querySelector(".vpc-price-list-combobox");priceListCombo.value=priceList[`${vlocityPcConfig.namespacePrefix}PriceListId__c`];priceListCombo.setAttribute("disabled","true");pubsub.fire("vpcpricelistchange","result",{priceListId:priceListCombo.value});}offerBasedHandler(e){const displayName=this.querySelector(".vpc-header-display-name");displayName.classList.remove("vpc-hide-side-bar-item");displayName.parentElement.classList.remove("vpc-display-name-existing-mode");this.classList.remove("vpc-hide-side-bar-item");this.existingPromotionOffer=!0;}contextChangeHandler(contextEvent){this.context=contextEvent.context;this.headerDisplayNameContextChange();}setEditModeState(editMode){this.isEditMode=editMode.isOn;}headerDisplayNameContextChange(){if("priceContext"===this.context||"costContext"===this.context){const displayName=this.querySelector(".vpc-header-display-name");displayName.classList.add("vpc-hide-side-bar-item");displayName.parentElement.classList.add("vpc-display-name-existing-mode");}}addErrorState(e){if(e){e.target.setAttribute("errormessage","This field is required");pubsub.fire("vpcenabledonebutton","result",{});}}enableDoneButton(){pubsub.fire("vpcenableajustmentoverridebutton","result",{});this.createPricingElement();}createPricingElement(){const pricingDetailsForm=this.pricingDetailsForm;if(pricingDetailsForm.pricingVariableId&&pricingDetailsForm.pricingElementId&&this.priceListId){pricingDetailsForm.isPricingDetailsFormValid();}else{if(pricingDetailsForm.isPricingFormValid(pricingDetailsForm.querySelector(".vpc-amount-section"))&&this.priceListId&&!this.pricingElementId){pricingDetailsForm.getPricingElement();}}}resetForm(isEditView){if(!isEditView){this.refreshPriceListData();}const translations=this.translations,priceListCombo=this.querySelector(".vpc-price-list-combobox");priceListCombo.removeAttribute("disabled");priceListCombo.value="";this.showOfferOnlyEditView=!1;this.priceListEntryId="";// Resets the options in the price list combobox
const priceListComboContainer=this.querySelector(".vpc-price-list-combo-container");priceListComboContainer.innerText="";this.createExistingCombobox(translations.translate("PCPriceList"),translations.translate("PCSelectPriceList"),"vpc-price-list-combobox",priceListComboContainer,this.getPriceListValues());// Resets the Adjustment or Override name input
const headerDisplayName=this.querySelector(".vpc-header-display-name");headerDisplayName.value="";headerDisplayName.querySelector("input").value="";headerDisplayName.classList.add("vpc-hide-side-bar-item");headerDisplayName.removeAttribute("errormessage");headerDisplayName.parentElement.classList.add("vpc-display-name-existing-mode");// The form model must be reset for the values not to persist
this.querySelector("vlocity-form").model="";this.isEditMode=!1;this.priceListId="";}getPriceListValues(){if(this.priceListsArr){return`${JSON.stringify(this.priceListsArr.map(priceList=>{return{label:`${priceList.Name}`,value:`${priceList.Id}`};}))}`;}return[];}createExistingCombobox(label,placeholder,className,container,options){const translations=this.translations,existingCombobox=document.createElement("vlocity-combobox");existingCombobox.setAttribute("label",translations.translate(label));existingCombobox.setAttribute("placeholder",options.length?translations.translate(placeholder):translations.translate("PCProductWithNoPriceList"));existingCombobox.classList.add("vpc-combobox",className,"vpc-required-field");existingCombobox.setAttribute("name",className);existingCombobox.setAttribute("iconbaseurl","/_slds/icons/");existingCombobox.setAttribute("searchable","true");existingCombobox.setAttribute("required","true");existingCombobox.setAttribute("options",options);container.appendChild(existingCombobox);}disconnectedCallback(){this.contextChangeHandlerObj={result:this.contextChangeHandler.bind(this)};this.existingPromotionOfferHandlerObj={result:this.existingPromotionOfferHandler.bind(this)};this.setEditModeStateHandler={result:this.setEditModeState.bind(this)};this.showEditPromotionViewHandler={result:this.showEditPromotionView.bind(this)};this.setGetPricingFormHandlerObj={result:this.setGetPricingFormHandler.bind(this)};this.priceListChangeHandlerObj={result:this.priceListChangeHandler.bind(this)};this.popualteFormFieldsHandler={result:this.popualteFormFields.bind(this)};this.enablePriceListComboboxHandler={result:this.enablePriceListCombobox.bind(this)};this.offerBasedHandlerObj={result:this.offerBasedHandler.bind(this)};this.showPromotionFormHandler={result:this.showPromotionForm.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.showNewPromotionFormHandler={result:this.showNewPromotionForm.bind(this)};this.checkIfDeletedRecordInEditModeHandler={result:this.checkIfDeletedRecordInEditMode.bind(this)};this.createPricingElementHandler={result:this.createPricingElement.bind(this)};this.fireDisplayNameTextHandlerObj={result:this.fireDisplayNameTextHandler.bind(this)};pubsub.unregister("vpccontextchange",this.contextChangeHandlerObj);pubsub.unregister("vpcexistingofferpromotion",this.existingPromotionOfferHandlerObj);pubsub.unregister("vpceditmodeon",this.setEditModeStateHandler);pubsub.unregister("vpcshowpromotioneditview",this.showEditPromotionViewHandler);pubsub.unregister("vpcpricingform",this.setGetPricingFormHandlerObj);pubsub.unregister("vpcpricelistchange",this.priceListChangeHandlerObj);pubsub.unregister("vpcpopulateformfields",this.popualteFormFieldsHandler);pubsub.unregister("vpcenablepricelistcombobox",this.enablePriceListComboboxHandler);pubsub.unregister("vpcexistingoffer",this.offerBasedHandlerObj);pubsub.unregister("vpcshowpromotionform",this.showPromotionFormHandler);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showNewPromotionFormHandler);pubsub.unregister("vpccheckifdeletedrecordineditform",this.checkIfDeletedRecordInEditModeHandler);pubsub.unregister("vpccreatepricingelement",this.createPricingElementHandler);pubsub.unregister("vpcgetstructuredisplaynametext",this.fireDisplayNameTextHandlerObj);}get productId(){return this.getAttribute("productId");}get rootProductId(){return this.getAttribute("rootProductId");}}window.customElements.define(VlocityPcPriceListHeader.is,VlocityPcPriceListHeader);class VlocityPcPricesTable extends HTMLElement{constructor(){super();this.page=1;this.limit=10;}static get is(){return"vlocity-pc-prices-table";}template(){const translations=this.translations;return html`
      <style>
        .vpc-pc-prices-table {
          display: grid;
          margin: 25px;
        }

        .vpc-table-button-container {
          display: grid;
          align-items: center;
          grid-column-gap: 1%;
          grid-template-columns: 2% 76% 20%;
          margin: 0 0 10px 1px;
        }

        .vpc-table-button-container h1 {
          font-size: 14px;
          font-weight: bold;
        }

        .vpc-price-status-toggle {
          border-radius: 50%;
          height: 16px;
          width: 16px;
          border: 0.1rem solid var(--vpc-secondary-status-border-color);
        }

        .vpc-status-on {
          border-color: var(--vpc-primary-status-border-color);
        }

        .vpc-status-wait-state {
          border-color: gray;
        }

        table.vpc-prices-table {
          border: 1px solid var(--vpc-primary-border-color);
          background: var(--vpc-secondary-bg-color);
        }

        .vpc-prices-table th {
          font-size: 10px;
          color: var(--vpc-primary-text-color);
          text-align: left;
          padding: 20px 0 0;
          min-width: 65px;
        }

        .vpc-prices-table th:first-of-type {
          position: relative;
        }

        .vpc-prices-table td {
          text-align: left;
          color: #616161;
          font-size: 13px;
          border-spacing: 0;
          height: 67px;
          border-bottom: 1px solid var(--vpc-secondary-border-color);
          padding: 15px 10px 15px 0;
          white-space: nowrap;
        }

        .vpc-prices-table .vpc-dropzone {
          height: 36px;
          padding: 5px;
        }

        .vpc-dropzone {
          white-space: nowrap;
          background: #f7f7f7;
          border-radius: 12px;
        }

        .vpc-prices-table .vpc-dropzone-populated {
          height: 100%;
          background: none;
        }

        .vpc-prices-table .vpc-dropzone-container {
          position: relative;
          min-width: 140px;
        }

        .vpc-prices-table tr:last-of-type td {
          border-bottom: 0;
        }

        .vpc-prices-table th:nth-of-type(1),
        .vpc-prices-table td:nth-of-type(1) {
          text-align: center;
          text-align: -webkit-center;
          text-align: -moz-center;
          min-width: 60px;
        }

        .vpc-prices-table td:nth-of-type(1) .vpc-price-status-toggle {
          margin: 0 auto;
        }

        .vpc-prices-table th:last-of-type,
        .vpc-prices-table td:last-of-type
          min-width: 70px;
        }

        .vpc-prices-table td:last-of-type {
          padding: 15px 0;
        }

        .vpc-prices-table th:last-of-type {
          text-align: center;
          text-align: -webkit-center;
          text-align: -moz-center;
        }

        .vpc-prices-table td:nth-of-type(2),
        .vpc-prices-table th:nth-of-type(2) {
          font-weight: 600;
          text-align: start;
        }

        .vpc-prices-table td:nth-of-type(2) {
          color: black;
        }

        .vpc-prices-table td:nth-of-type(1) {
          padding: 15px 0;
        }

        .vpc-table-pill,
        .vpc-empty-pill {
          border-radius: 4px;
          border: 1px solid var(--vpc-primary-input-border-color);
          max-width: max-content;
          display: inline-block;
          text-overflow: unset;
          overflow: visible;
          white-space: nowrap;
          margin: 0 1px;
          background: var(--vpc-primary-pill-bg-color);
          color: var(--vpc-primary-color);
          padding: 3px 5px;
          margin: 0 4px 0 0;
        }

        .vpc-empty-pill {
          visibility: hidden;
        }

        .vpc-table-pill p {
          display: inline-block;
          margin: 0 5px 0 0;
        }

        .vpc-table-pill div {
          display: inline-block;
        }

        .vpc-table-pill div svg {
          position: relative;
          top: 2px;
          fill: var(--vpc-primary-color);
          height: 14px;
          vertical-align: baseline;
          opacity: 0.5;
        }

        .vpc-table-pill div svg:hover {
          opacity: 1;
          fill: var(--vpc-primary-button-bg-color);
        }

        .vpc-entry-action-button .slds-icon-text-default,
        .via-slds .vpc-pc-pricing .vlocity-icon-text-default {
          height: 15px;
          fill: var(--vpc-primary-button-bg-color);
        }

        .vpc-pricing-action-container {
          display: grid;
          grid-template-columns: 25px 25px;
          justify-content: center;
          opacity: 0.7;
        }

        .vpc-pricing-action-container:hover {
          opacity: 1;
        }

        .vpc-action-td .vpc-pricing-action-container-delete-mode {
          grid-template-columns: 53px;
        }

        .vpc-pc-prices-table .vpc-dropzone-container,
        .vpc-pc-prices-table .vpc-availability-column {
          min-width: 120px;
        }

        .vpc-mini-table-column, .vpc-mini-table-data {
          direction: ltr;
          text-align: -webkit-match-parent;
          unicode-bidi: embed;
        }

        vpc-pc-prices-table .vpc-dropzone-container .vpc-drop-zone-eligible,
        vpc-pc-prices-table .vpc-dropzone-container .vpc-dropzone__active {
          background-color: var(--vpc-primary-bg-color);
          border-radius: 5px;
        }

        .vpc-prices-table .vpc-dropzone-text {
          text-align: center;
          color: lightgray;
          margin-top: 3px;
        }

        .vpc-pc-prices-table .vpc-table-unset {
          border-collapse: unset;
        }

        .vpc-pc-prices-table .vpc-table-button-container .vpc-table-button-wrapper .vpc-new-price-button {
          position: relative;
          top: 8px;
          width: 100%;
          color: var(--vpc-primary-button-bg-color);
          white-space: nowrap;
          margin: 0;
          min-width: fit-content;
        }

        vlocity-pc-prices-table
        .vpc-pc-prices-table
        .vpc-table-button-container
        .vpc-empty-table-mode {
          top: 0;
        }

        .vpc-table-search {
          position: relative;
        }

        .vpc-table-search .slds-input::placeholder {
          opacity: 0.5;
        }

        .vpc-pc-prices-table .vpc-filter-section {
          display: grid;
          grid-template-columns: 300px 215px 70px;
          align-items: baseline;
        }

        .vpc-pc-prices-table .vpc-filter-section .vpc-is-active-checkbox {
          margin: 0 10px;
        }

        .vpc-filter-container {
          position: relative;
        }

        .vpc-new-price-focus {
          animation: 0.5s ease blink 3;
        }

        .vpc-prices-table .vpc-pill-container {
          display: flex;
        }

        .vpc-wrap-rules {
          white-space: normal;
        }

        .vpc-pc-prices-table .vpc-filter-section .vpc-search-icon {
          position: relative;
          bottom: 26px;
          margin: 0 5px 0;
        }

        .vpc-pc-prices-table .vpc-filter-section .vpc-search-icon-left {
          text-align: left;
        }

        .vpc-pc-prices-table .vpc-filter-section .vpc-search-icon-right {
          text-align: right;
        }

        .vpc-up-arrow-svg,
        .vpc-down-arrow-svg {
          position: relative;
          bottom: 1px;
          left: 1px;
          height: 11px;
        }

        .vpc-prices-table th:hover:not(.vpc-table-column-sorted) .vpc-down-arrow-svg {
          display: inline-block !important
        }

        .vpc-pill-actions-wait-state {
          position: relative;
          bottom: 4px;
          left: 4px;
          padding: 0 12px 0 2px;
        }

        .vpc-pill-actions-wait-state .vpc-spinner-container {
          transform: scale(0.6);
        }

        .vpc-pill-actions-wait-state .vpc-entry-action-button {
          display: none;
        }

        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-a:after,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-a:before,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-b:after,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-b:before,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner--brand.slds-spinner:after,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner--brand.slds-spinner:before,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-a:after,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-a:before,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-b:after,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-b:before,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner_brand.slds-spinner:after,
        .vpc-prices-table
          .vpc-spinner-container
          .slds-spinner_brand.slds-spinner:before {
          background-color: var(--vpc-primary-color);
        }

        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-a:after,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-a:before,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-b:after,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner--brand
          .slds-spinner__dot-b:before,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner--brand.slds-spinner:after,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner--brand.slds-spinner:before,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-a:after,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-a:before,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-b:after,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner_brand
          .slds-spinner__dot-b:before,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner_brand.slds-spinner:after,
        .vpc-pricing-action-container
          .vpc-spinner-container
          .slds-spinner_brand.slds-spinner:before {
          background-color: var(--vpc-primary-button-bg-color);
        }

        .vpc-pc-prices-table .vpc-long-column, .vpc-pc-prices-table .vpc-short-column {
          text-overflow: ellipsis;
          overflow: hidden;
        }

        .vpc-pc-prices-table .vpc-long-column {
          max-width: 233px;
          min-width: 120px;
        }

        .vpc-pc-prices-table .vpc-table-search .slds-input::-ms-clear {
          display: none;
        }

        .vpc-pc-prices-table .vpc-short-column {
          max-width: 145px;
        }

        .vpc-pc-prices-table .vpc-table-page-navigation-container {
          display: grid;
          grid-template-columns: 50px 50px 50px;
          margin: 15px 0 0;
          justify-content: right;
        }

        .vpc-pc-prices-table .vpc-pricing-table-page-number {
          text-align: center;
          background: var(--vpc-primary-button-bg-color);
          color: var(--vpc-primary-page-navigation-color);
          padding: 6px;
        }

        .vpc-pc-prices-table .vpc-previous-button {
          border-radius: 4px 0 0 4px;
        }

        .vpc-pc-prices-table .vpc-next-button {
          border-radius: 0 4px 4px 0;
        }

        .vpc-pc-prices-table vlocity-pc-pagination .slds-float_left:first-letter {
          text-transform: capitalize;
        }

        .vpc-entry-actions-wait-state {
          position: relative;
          left: 18px;
        }

        .vpc-pc-prices-table .vpc-quick-add-button {
          visibility: hidden;
          background: #1589ee;
          color: #ffffff;
          width: 100%;
        }
        .vpc-pc-pricing vlocity-pc-prices-table[context="costContext"] .vpc-quick-add-button {
          display: none;
        }

        .vpc-pc-prices-table .vpc-table-toggle-arrow {
          padding: 0 0 3px;
        }

        .vpc-pc-prices-table .vpc-empty-table {
          height: 67px;
        }

        .vpc-table-button-wrapper {
          position: relative;
          top: 18px;
          width: 100%;
          justify-self: end;
          height: 50px;
        }

        .vpc-mini-table-data {
          display: none;
          font-weight: normal;
          color: var(--vpc-primary-text-color);
        }

        .vpc-pc-prices-table .vpc-hide-visibility {
          visibility: hidden;
        }

        .vpc-pc-prices-table .vpc-show-side-bar-item {
          display: grid;
        }

        .vpc-pc-prices-table .vpc-hide-side-bar-item {
          display: none;
        }

        @keyframes blink {
          0% {
            box-shadow: none;
          }
          25% {
            box-shadow: 0 0 15px -3px gold;
          }
          50% {
            box-shadow: none;
          }
          75% {
            box-shadow: 0 0 15px -3px gold;
          }
          100% {
            box-shadow: none;
          }
        }
        
        .vpc-pricing-dropzone__active {
          border: 2px dashed #4285f4;
        }
      </style>

      <div class="vpc-pc-prices-table">
        <vlocity-toast
          title="${translations.translate("PCToastErrorTitle")}"
          class="vpc-hide-side-bar-item"
          message=""
          position="left"
          styletype="error"
        ></vlocity-toast>
        <div class="vpc-table-button-container">
          <vlocity-icon
            label="Slds Input"
            baseurl="/_slds/icons/"
            class="vpc-table-toggle-arrow"
            icon="utility:chevronright"
            size="xx-small"
            extraclass="slds-icon-text-default"
            @click="${()=>VlocityPCTableService.toggleTable(this)}"
          ></vlocity-icon>
          <h1>
            ${"priceContext"===this.context?translations.translate("PCPrices"):translations.translate("PCCosts")}
          </h1>
          <div class="vpc-table-button-wrapper">
          <button class="vpc-quick-add-button slds-button slds-button_neutral vpc-table-button" @click="${()=>pubsub.fire("vpcshowquickaddpanel","result",{show:!0})}">${translations.translate("PCQuickAddTitle")}</button>
          <button class="slds-button slds-button_neutral vpc-table-button vpc-new-price-button" @click="${()=>this.newPriceButtonHandler()}" disabled>${"priceContext"===this.context?translations.translate("PCNewPrice"):translations.translate("PCNewCost")}</button>
          </div>
        </div>
        <div class="vpc-filter-section">
          <vlocity-input
            type="text"
            class="vpc-table-search vpc-hide-visibility"
            placeholder="${"priceContext"===this.context?translations.translate("PCSearchPriceListEntries"):translations.translate("PCSearchCostEntries")}" @input="${e=>this.filterTable(e.target.value)}"></vlocity-input>
          <vlocity-checkbox
            class="vpc-is-active-checkbox vpc-hide-visibility"
            label="${translations.translate("PCShowActiveOnly")}"
            @click="${e=>this.filterActiveOnly(e.target.checked)}"
            checked="true"
          ></vlocity-checkbox>

        </div>
        <table class="vpc-prices-table slds-hide" cellspacing="0">
          <tbody></tbody>
        </table>
        <div class="slds-m-top_small">
          <vlocity-pc-pagination
            totalsize="0"
            currentpage="1"
            pagesize="${this.limit}"
            maxpages="10"
            class="vpc-hide-side-bar-item"
          >
          </vlocity-pc-pagination>
        </div>
    </div>
      </div>
    `;}connectedCallback(){this.isInitial=!0;this.initializeComponent();}initializeComponent(){// Get instance of sdk to get price input and data.
this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.translations=VlocitySDK.translation.getInstance();this.input=this.productConsole.createAppliedPriceListEntriesInput();this.input.productId=this.productId;this.initialSort=!0;this.previousSort=null;this.previousFilterValue="";this.refreshTableData();if(this.isInitial){this.initEventHandlers();}render(this.template(),this);setTimeout(()=>{VlocityPCTableService.addSearchIcon(this);VlocityPCTableService.initPagination(this);},0);}initEventHandlers(){this.isInitial=!1;this.addPriceListEntryHandlerObj={result:this.addPriceListEntryHandler.bind(this)};this.tableDataChangeHandlerObj={result:this.tableDataChangeHandler.bind(this)};this.enableTableButtonHandlerObj={result:this.enableTableButtonHandler.bind(this)};this.deleteContextRuleHandler={result:this.deleteContextRule.bind(this)};pubsub.register("vpcaddpricelistentry",this.addPriceListEntryHandlerObj);pubsub.register("vpcrulesetadded",this.tableDataChangeHandlerObj);pubsub.register("vpcenabletablebuttons",this.enableTableButtonHandlerObj);pubsub.register("vpcdeletecontextrule",this.deleteContextRuleHandler);}deleteContextRule(e){VlocityPCTableService.deleteContextRule(!0,{id:e.id},this);}enableTableButtonHandler(){const newPriceButton=this.querySelector(".vpc-new-price-button");newPriceButton&&newPriceButton.removeAttribute("disabled");}tableDataChangeHandler(e){const context=e.context;if("priceContext"===context||"costContext"===context){this.refreshTableData();}}addPriceListEntryHandler(e){this.tableDataChangeHandler(e);this.newPriceListEntryId=e.priceListEntryId;}refreshTableData(){// Gets price table data.
if("priceContext"===this.context){this.input.type="Prices";this.productConsole.getAppliedPricelistEntries(this.input).then(result=>{this.postPriceListEntryActions(result);}).catch(error=>{console.log(error);});}else{this.input.type="Costs";this.productConsole.getAppliedCostPricelistEntries(this.input).then(result=>{this.postPriceListEntryActions(result);}).catch(error=>{console.log(error);});}}postPriceListEntryActions(result){const previousSort=this.previousSort;this.records=result.records;this.activeRows=this.records;this.filteredRows=this.records;if(!previousSort){this.populateTable(result.records);}else{VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,this,!1);VlocityPCTableService.resetTableFilters(this);}}/**
     * Function used to populate price table and initialize listeners.
     *
     * @param {Array<Array<object>>} tableData - table data returned by the getAppliedPriceListEntries function used to populate the table.
     */populateTable(tableData){const tbody=this.querySelector("tbody"),translations=this.translations;if(!tableData||!tableData.length){const emptyTableTableRow=html`
        <tr class="vpc-empty-table">
          <td>${translations.translate("PCNoPriceListEntries")}</td>
        </tr>
      `;render(emptyTableTableRow,tbody);if(!this.records){VlocityPCTableService.showFilterSection(!1,this);}this.initialSort=!0;return;}// Get the table header with column names.
const tableHeader=this.getColumnNames(tableData,translations,vlocityPcConfig.namespacePrefix);tableData=VlocityPCTableService.getCurrentPage(tableData,this);const tableRow=html`
      ${tableData.map((columnData,index)=>{let statusOnClass=columnData[VlocityPCUtils.getCustomFieldName("IsActive")].value?"vpc-status-on":"";const currencyCode=columnData[VlocityPCUtils.getCustomFieldName("CurrencyCode")],currencyCodeValue=currencyCode?currencyCode.value:null;if(!currencyCodeValue){// Show error to display missing info to user
const toast=this.querySelector("vlocity-toast");toast.classList.remove("vpc-hide-side-bar-item");toast.setAttribute("message",`${translations.translate("PCCurrencyCodeMissing")} "${columnData.Name}" ${translations.translate("PCPricingElementProblem")}`);}const miniTableStr=`${VlocityPCTableService.getAmountString(columnData)} ${VlocityPCTableService.getDateString(columnData)}`;return html`
          ${!index?tableHeader:""}
          <tr>
            <td>
              <div
                class="vpc-price-status-toggle ${statusOnClass} ${"Active"===this.lastPriorityColumn?`vpc-last-priority`:""}"
                @click="${e=>this.statusButtonHandler(e,{priceListEntry:columnData})}"
              ></div>
            </td>
            <td class="vpc-long-column">
              ${columnData.Name}
              <div class="vpc-mini-table-data">${miniTableStr}</div>
            </td>
            <td
              class="vpc-long-column ${"Price List"===this.lastPriorityColumn?`vpc-last-priority`:""}"
            >
              ${columnData.PriceList.value}
            </td>
            <td
              class="vpc-short-column ${"Amount"===this.lastPriorityColumn?`vpc-last-priority`:""} vpc-mini-table-column"
            >
              ${VlocityPCTableService.getAmountString(columnData)}
            </td>
            <td
              class="vpc-availability-column ${"Availability"===this.lastPriorityColumn?`vpc-last-priority`:""} vpc-mini-table-column"
            >
              ${VlocityPCTableService.getDateString(columnData)}
            </td>
            <td
              class="vpc-dropzone-container ${"Rules"===this.lastPriorityColumn?`vpc-last-priority`:""}"
            >
              <vlocity-pc-dropzone
                accepts="text/quickadditem"
                dragactiveclass="vpc-pricing-dropzone__active"
                ruleSets="${JSON.stringify(columnData.Rules)}"
                priceListEntryId="${columnData.Id.value}"
              ></vlocity-pc-dropzone>
            </td>
            ${this.getActionsColumn(columnData)}
          </tr>
        `;})}
    `;render(tableRow,tbody);VlocityPCTableService.postTableRenderActions(this,null);VlocityPCTableService.runInitialSort(this);this.pagination.setAttribute("currentpage",this.page);if(this.newPriceListEntryId){this.highlightNewPriceListEntry();}}getColumnSortArrows(){return html`
      <vlocity-icon
        label="Slds Input"
        baseurl="/_slds/icons/"
        class="vpc-up-arrow-svg slds-hide"
        icon="utility:arrowup"
        size="xx-small"
        extraclass="vlocity-icon-text-default"
      ></vlocity-icon>
      <vlocity-icon
        label="Slds Input"
        baseurl="/_slds/icons/"
        class="vpc-down-arrow-svg slds-hide"
        icon="utility:arrowdown"
        size="xx-small"
        extraclass="vlocity-icon-text-default"
      ></vlocity-icon>
    `;}getColumnNames(tableData,translations,namespace){// Grabs all of the table header names
const tableHeadersArr=[{label:`${translations.translate("PCActive")}`,value:"Active"},{label:`${translations.translate("PCDisplayName")}`,value:"Display Name"},{label:`${translations.translate("PCPriceList")}`,value:"Price List"},{label:`${translations.translate("PCAmount")}`,value:"Amount"},{label:`${translations.translate("PCAvailability")}`,value:"Availability"},{label:`${translations.translate("Rules")}`,value:"Rules"},{label:`${translations.translate("Actions")}`,value:"Actions"}];return html`
      <tr class="vpc-title-caps">
        ${tableHeadersArr.map(header=>html`
              <th
                sortAsc="false"
                class="${header.value===this.lastPriorityColumn?"vpc-last-priority":""} ${"Amount"===header.value||"Availability"===header.value?"vpc-mini-table-column":""}"
                @click="${e=>VlocityPCTableService.sortByColumn(e.target,header.label,this,!0)}"
              >
                ${header.label}${VlocityPCTableService.isColumnSortable(header.label)?this.getColumnSortArrows():""}
              </th>
            `)}
      </tr>
    `;}getActionsColumn(columnData){return html`
      <td class="vpc-action-td">
        <div class="vpc-pricing-action-container">
          <vlocity-tooltip
            class="vpc-entry-action-button"
            tooltiptype="iconlink"
            iconbaseurl="/_slds/icons/"
            nubbinposition="bottom"
            icon="utility:edit"
            iconsize="xx-small"
            value="${this.translations.translate("Edit")}"
            @click="${e=>this.editPriceListEntryHandler(e,{priceListEntryId:columnData.Id.value})}"
          >
          </vlocity-tooltip>
          <vlocity-tooltip
            class="vpc-entry-action-button"
            tooltiptype="iconlink"
            iconbaseurl="/_slds/icons/"
            nubbinposition="bottom"
            icon="utility:delete"
            iconsize="xx-small"
            value="${this.translations.translate("PCDeleteTitle")}"
            @click="${e=>VlocityPCTableService.deleteConfirmationHandler(e,{priceListEntryId:columnData.Id.value,name:columnData.Name,context:this})}"
          >
          </vlocity-tooltip>
          <div class="vpc-spinner-container">
            <div
              role="status"
              class="slds-spinner slds-spinner_small slds-hide slds-spinner_brand slds-align_absolute-center"
            >
              <span class="slds-assistive-text">Loading</span>
              <div class="slds-spinner__dot-a"></div>
              <div class="slds-spinner__dot-b"></div>
            </div>
          </div>
        </div>
      </td>
    `;}newPriceButtonHandler(){// Loads the Price form when the "New Price" button is clicked
pubsub.fire("vpcresetallforms","result",{});pubsub.fire("vpccontextchange","result",{context:this.context});pubsub.fire("vpceditmodeon","result",{priceListEntryId:null,isOn:!1});pubsub.fire("vpcshowpriceform","result",{});pubsub.fire("vpcexpandform","result",{});pubsub.fire("vpcsetfrequencydefaultvalue","result",{});}editPriceButtonHandler(){// Loads the Price form when the "New Price" button is clicked
pubsub.fire("vpcresetallforms","result",{});pubsub.fire("vpccontextchange","result",{context:this.context});pubsub.fire("vpceditmodeon","result",{priceListEntryId:null,isOn:!1});pubsub.fire("vpcshowpriceform","result",{});pubsub.fire("vpcexpandform","result",{});pubsub.fire("vpcsetfrequencydefaultvalue","result",{});}/**
     * Function to set the event listener on all status buttons.
     */statusButtonHandler(e,eventData){if(this.activeButtonWaitState){return;}e.target.classList.add("vpc-status-wait-state");this.activeButtonWaitState=!0;this.productConsole.editPriceListEntry(this.getCreatePriceListInput(eventData.priceListEntry)).then(response=>{this.refreshTableData();e.target.classList.remove("vpc-status-wait-state");});}filterActiveOnly(checked){const tableSearchText=this.querySelector(".vpc-table-search").value;if(tableSearchText&&!this.filteredRows){this.filteredRows=this.records;this.filterTable(tableSearchText);}const records=tableSearchText?this.filteredRows:this.records;if(checked){const namespacePrefix=vlocityPcConfig.namespacePrefix,isActiveProperty=`${namespacePrefix}IsActive__c`;this.activeRows=records&&records.filter(row=>{return row[isActiveProperty].value;});this.populateTable(this.activeRows);if(!this.skipFilterTable){this.filterTable(tableSearchText);}else{this.skipFilterTable=!1;}}else{this.populateTable(records);if(!this.skipFilterTable){this.filterTable(tableSearchText);}else{this.skipFilterTable=!1;}}if(tableSearchText){setTimeout(()=>{const previousSort=this.previousSort;VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,this,!1);},100);}}filterTable(value){const isActiveCheckbox=this.querySelector(".vpc-is-active-checkbox").querySelector("input").checked;if(this.previousFilterValue!==value){this.filteredRows=this.records;this.activeRows=this.records;this.skipFilterTable=!0;this.filterActiveOnly(isActiveCheckbox);}this.previousFilterValue=value;if(isActiveCheckbox&&!this.activeRows){this.activeRows=this.records;}const records=isActiveCheckbox?this.activeRows:this.records,namespacePrefix=vlocityPcConfig.namespacePrefix,searchText=value.toLowerCase(),amountProperty=`${namespacePrefix}Amount__c`,loyaltyAmountProperty=`${namespacePrefix}LoyaltyAmount__c`,currencyCodeProperty=`${namespacePrefix}CurrencyCode__c`;this.filteredRows=records&&records.filter(row=>{const rules=row.Rules.records||[];for(let rule of rules){if(rule.Name.toLowerCase().includes(searchText)){return!0;}}const currencyCodeValue=row[currencyCodeProperty]?row[currencyCodeProperty].value.toLowerCase().includes(searchText):!1,amountValue=row[amountProperty]?row[amountProperty].value:row[loyaltyAmountProperty].value;return row.Name.toLowerCase().includes(searchText)||row.PriceList.value.toLowerCase().includes(searchText)||amountValue==searchText||currencyCodeValue;});VlocityPCTableService.updatePagination(this);this.populateTable(this.filteredRows);if(!searchText){setTimeout(()=>{const previousSort=this.previousSort;VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,this,!1);},100);}}getCreatePriceListInput(priceListEntry){const namespacePrefix=vlocityPcConfig.namespacePrefix,startDate=priceListEntry[`${namespacePrefix}EffectiveFromDate__c`],endDate=priceListEntry[`${namespacePrefix}EffectiveUntilDate__c`],startDateValue=new Date(startDate?startDate.value:"").valueOf(),endDateValue=Date(endDate?endDate.value:"").valueOf();return this.productConsole.createEditPriceListEntryInput({priceListEntryId:priceListEntry.Id.value,productId:this.productId,pricingElementId:priceListEntry[`${namespacePrefix}PricingElementId__c`].value,isBasePrice:priceListEntry[`${namespacePrefix}IsBasePrice__c`].value,displayText:priceListEntry[`${namespacePrefix}DisplayText__c`].value,isActive:!priceListEntry[`${namespacePrefix}IsActive__c`].value,startDate:isNaN(startDateValue)?null:startDateValue,endDate:isNaN(endDateValue)?null:endDateValue});}editPriceListEntryHandler(e,eventData){// 1. Get Data
const priceListEntryToEdit=this.records.filter(record=>{return record.Id.value===eventData.priceListEntryId;})[0];// 2. Open Relavant Forms
this.newPriceButtonHandler();// 3. Populate Fields
pubsub.fire("vpcpopulateformfields","result",{priceListEntryToEdit});// 4. Create a Edit Context, button should run editPriceListEntry
pubsub.fire("vpceditmodeon","result",{priceListEntryId:eventData.priceListEntryId,isOn:!0});}highlightNewPriceListEntry(){setTimeout(()=>{const priceListEntryId=this.newPriceListEntryId,filteredRecords=this.filteredRows,ActiveRecords=this.activeRows,activeCheckBoxValue=this.querySelector(".vpc-is-active-checkbox").querySelector("input").checked,searchBoxValue=this.querySelector(".vpc-table-search").value;let searchRecords=[];if(searchBoxValue){searchRecords=filteredRecords;}if(activeCheckBoxValue&&!searchBoxValue){searchRecords=ActiveRecords;}const records=searchRecords.length||searchBoxValue||activeCheckBoxValue?searchRecords:this.records,index=records.findIndex(record=>record.Id.value===priceListEntryId)+1;if(index){this.querySelectorAll("tr")[index].classList.add("vpc-new-price-focus");}this.newPriceListEntryId="";},500);}disconnectedCallback(){pubsub.unregister("vpcaddpricelistentry",this.addPriceListEntryHandlerObj);pubsub.unregister("vpcrulesetadded",this.tableDataChangeHandlerObj);pubsub.unregister("vpcenabletablebuttons",this.enableTableButtonHandlerObj);pubsub.unregister("vpcdeletecontextrule",this.deleteContextRuleHandler);}static get observedAttributes(){return["productId","context","lastPriorityColumn"];}attributeChangedCallback(name,oldValue,newValue){switch(name){case"productId":this._productId=newValue;break;case"context":this._context=newValue;break;case"lastPriorityColumn":this._lastPriorityColumn=newValue;break;}}get productId(){return this.getAttribute("productId");}set productId(value){this.setAttribute("productId",value);}get context(){return this.getAttribute("context");}set context(value){this.setAttribute("context",value);}get lastPriorityColumn(){return this.getAttribute("lastPriorityColumn");}set lastPriorityColumn(value){this.setAttribute("lastPriorityColumn",value);}}window.customElements.define(VlocityPcPricesTable.is,VlocityPcPricesTable);class VlocityPcPricingDetailsForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-pricing-details-form";}template(pickListItems,chargeMeasurementArr,typeArr){const translations=this.translations,chargeTypesArr=this.getChargeTypeOptions(translations),adjustmentMethodArr=[{label:translations.translate("PCFixed"),value:"Absolute"},{label:"%",value:"Percent"}],chargeMeasurement=chargeMeasurementArr.map(measurement=>{return{label:measurement.Name,value:measurement.Id};});// Creating picklist options I cannot get from the backend.
pickListItems.RecurringFrequency.unshift(...typeArr.filter(type=>"One-time"===type.value||"Usage"===type.value));pickListItems.TimePlanUOM.forEach((plan,index)=>{plan.label+="s";});pickListItems.TimePlanUOM.push({label:`${translations.translate("PCComboboxNone")}`,value:""});pickListItems.StartTimePolicy.push({label:`${translations.translate("PCComboboxNone")}`,value:""});pickListItems.EndTimePolicy.push({label:`${translations.translate("PCComboboxNone")}`,value:""});return html`
      <style>
        vlocity-pc-pricing-details-form {
          margin: 0 0 90px;
        }

        .vpc-combobox,
        .vpc-input {
          margin: 15px 5px 0 0;
        }

        .vpc-pricing-details-container {
          display: grid;
          padding: 5px 30px 20px;
          min-width: 445px;
        }

        .vpc-pricing-details-container .vpc-combobox [role="combobox"] input[readonly] {
          padding: 0 10px;
        }

        .vpc-pricing-details-container .vpc-combobox .slds-listbox .slds-media__figure {
          width: 0;
          margin: 0;
        }

        .vpc-amount-section {
          display: grid;
          grid-template-columns: auto auto;
          align-items: end;
          margin-top: -15px;
        }

        .vpc-promotion-mode {
          grid-template-columns: 1.3fr 1fr 1.1fr 1.2fr;
        }

        .vpc-combobox [role="combobox"] input[readonly][disabled] {
          border-color: #ecebea;
        }

        .vpc-combobox .slds-combobox__input::placeholder,
        .vpc-input .slds-input::placeholder {
          opacity: 0.5;
        }

        .vpc-pricing-details-price-section .vpc-pricing-details-text {
          margin: auto;
          height: 100%;
          padding: 22px 3px 0;
        }

        .vpc-pricing-details-price-section .vpc-starting-on {
          white-space: pre;
        }

        .vpc-pricing-details-price-section .vpc-delay-section .vpc-pricing-details-text {
          padding: 10px 0 0;
        }

        .vpc-pricing-details-for-text {
          text-align: center;
        }

        .vpc-pricing-details-container .vpc-title-caps {
          margin: 20px 0 7px 0;
          font-weight: bold;
        }

        .vpc-pricing-details-container .vpc-error-message {
          color: red;
          padding: 16px 0;
        }

        .vpc-pricing-variable-combo-populated {
          margin: 15px 5px 0 0;
        }

        .vpc-timeplan-section {
          display: none;
        }

        .vpc-timeplan-container {
          display: grid;
          grid-template-columns: 0.1fr 0.7fr 1.2fr;
          align-items: end;
        }

        .vpc-time-policy-section {
          display: none;
          grid-template-columns: 0.1fr 1fr;
          align-items: end;
        }

        .vpc-pricing-details-price-section .vpc-time-policy-until-section {
          display: none;
          grid-template-columns: 0.1fr 1fr;
          align-items: end;
        }

        .vpc-pricing-details-price-section .vpc-frequency-price-cost {
          margin: 0;
        }

        .vpc-pricing-details-container .vpc-pricng-details-required {
          font-size: 12px;
          color: #706E6B;
          margin: 0 0 6px 0;
        }

        .vpc-pricing-details-container .vpc-pricng-details-required span, .vpc-timing-required span {
          padding: 0 5px 0 0;
          font-size: 12px;
          color: red;
        }

        .vpc-pricing-details-container .vpc-add-delay, .vpc-pricing-details-container .vpc-add-timing {
          display: none;
          border: none;
          padding: 10px 0 0;
          color: var(--vpc-primary-button-bg-color);
          background: transparent;
        }

        .vpc-pricing-details-container .vpc-add-delay:focus, .vpc-pricing-details-container .vpc-add-timing:focus {
          outline: none;
        }

        .vpc-pricing-details-container .vpc-delay-section {
          display: none;
          grid-template-columns: 40px 0.3fr 1fr;
          align-items: end;
        }

        .vpc-pricing-details-price-section .vpc-promotion-offer-frequency-container {
          display: grid;
          grid-template-columns: 1fr 1fr;
        }

        .vpc-pricing-details-container .vpc-delay-amount, .vpc-pricing-details-container .vpc-delay-time-plan-units {
          margin: 5px 5px 0 0;
        }

        .vpc-pricing-details-container .vpc-currency {
          min-width: 95px;
        }

        .vpc-pricing-details-container .vpc-adjustment-method {
          min-width: 99px;
        }

        .vpc-pricing-details-container .vpc-pricing-is-active-checkbox {
          margin: 1px;
        }

        .vpc-pricing-details-container .vpc-date-picker-container {
          margin: 5px 0 0;
        }

        .vpc-pricing-details-container .vpc-date-picker:first-of-type {
          margin: 0 3px 0 0;
        }

        .vpc-pricing-details-price-section .vpc-combobox .slds-listbox .slds-media__body {
          margin: 0 20px 0;
        }

        .vpc-pricing-variable-combo-container .vpc-draw-attention {
          animation: 1.5s ease blink;
        }

        @keyframes blink {
          0% {
            box-shadow: none;
          }
          25% {
            box-shadow: 0 0 20px 0 gold;
          }
          50% {
            box-shadow: none;
          }
          75% {
            box-shadow: 0 0 20px 0 gold;
          }
          100% {
            box-shadow: none;
          }
        }

        .vpc-pricing-details-container .vpc-show-side-bar-item {
          display: grid;
        }

        .vpc-pricing-details-container .vpc-hide-side-bar-item, .vpc-pricing-details-container .vpc-pricing-details-price-section .slds-form-element__help, .vpc-adjustment-method {
          display: none;
        }
      </style>

      <vlocity-form class="vpc-pricing-details-container">
        <div class="vpc-title-caps vpc-pricing-form-title">
          ${translations.translate("PCPricingDetails")}
        </div>
        <vlocity-form class="vpc-pricing-details-price-section">
          <div class="vpc-amount-section">
            <vlocity-combobox
              class="vpc-combobox vpc-price-method"
              name="priceMethod"
              disabled="true"
              placeholder="${chargeTypesArr[0].label}"
              label="${translations.translate("PCType")}"
              iconbaseurl="/_slds/icons/"
              options="${JSON.stringify(chargeTypesArr)}"
            ></vlocity-combobox>
            <vlocity-input
              type="number"
              class="vpc-input vpc-amount vpc-required-field"
              placeholder="0"
              label="${translations.translate("PCAmount")}"
              name="amount"
              @input="${e=>this.checkMaxLength(e)}"
              maxLength="16"
              required="true"
            ></vlocity-input>
            <vlocity-combobox
              class="vpc-combobox vpc-currency vpc-required-field"
              name="currency"
              placeholder="${pickListItems.CurrencyCode[0].label}"
              label="${translations.translate("PCCurrency")}"
              iconbaseurl="/_slds/icons/"
              disabled="true"
            ></vlocity-combobox>
            <vlocity-combobox
              class="vpc-combobox vpc-adjustment-method vpc-required-field"
              name="adjustmentMethod"
              required="false"
              placeholder="${adjustmentMethodArr[0].label}"
              label="${translations.translate("PCAdjustmentMethod")}"
              iconbaseurl="/_slds/icons/"
              options="${JSON.stringify(adjustmentMethodArr)}"></vlocity-combobox>
            <vlocity-combobox
              class="vpc-combobox vpc-frequency vpc-frequency-price-cost vpc-required-field"
              name="frequency"
              placeholder="${pickListItems.RecurringFrequency[0].label}"
              label="${translations.translate("RecurringFrequency")}"
              iconbaseurl="/_slds/icons/"
              options="${JSON.stringify(pickListItems.RecurringFrequency)}"
              ></vlocity-combobox>
          </div>
          <div class="vpc-promotion-offer-frequency-container">
            <vlocity-combobox
            class="vpc-combobox vpc-frequency vpc-frequency-promotion-offer vpc-required-field"
            name="frequency"
            placeholder="${pickListItems.RecurringFrequency[0].label}"
            label="${translations.translate("RecurringFrequency")}"
            iconbaseurl="/_slds/icons/"
            options="${JSON.stringify(pickListItems.RecurringFrequency)}"
            ></vlocity-combobox>
            <vlocity-combobox
            class="vpc-combobox vpc-usage-UOM vpc-hide-side-bar-item"
            name="usageUOM"
            placeholder="${translations.translate("PCSelectUsageUOM")}"
            label="${translations.translate("PCUsageUOM")}"
            iconbaseurl="/_slds/icons/"
            options="${JSON.stringify(chargeMeasurement)}"
            required="true"
            ></vlocity-combobox>
          </div>
          <div class="vpc-time-toggle-container">
          <button class="vpc-add-timing" @click="${e=>this.addTimingClickHandler(e)}">${translations.translate("PCAddTiming")}</button>
      </div>
        <div class="vpc-timeplan-section">
          <p class="vpc-timing-required vpc-hide-side-bar-item"><span>*</span>${translations.translate("PCAllFieldsRequired")}</p>
          <div class="vpc-timeplan-container">
              <p class="vpc-pricing-details-text vpc-pricing-details-for-text">
              ${translations.translate("PCFor")}
              </p>
              <vlocity-input name="timePlan" class="vpc-input vpc-time-plan vpc-time-field" type="number" placeholder="0" value=null></vlocity-input>
              <vlocity-combobox name="timePolicy" class="vpc-combobox vpc-time-plan-units vpc-time-field" iconbaseurl="/_slds/icons/" placeholder="${pickListItems.TimePlanUOM[0].label}" options=${JSON.stringify(pickListItems.TimePlanUOM)} value=null></vlocity-combobox>
          </div>
      </div>
      <div class="vpc-time-policy-section">
        <p class="vpc-pricing-details-text vpc-starting-on">${translations.translate("PCStartingOn")}</p>
        <vlocity-combobox name="timePolicy" class="vpc-combobox vpc-start-time-policy vpc-time-field" iconbaseurl="/_slds/icons/" placeholder="${pickListItems.StartTimePolicy[0].label}" options=${JSON.stringify(pickListItems.StartTimePolicy)} value=null></vlocity-combobox>
      </div>
      <div class="vpc-time-policy-until-section">
        <p class="vpc-pricing-details-text">${translations.translate("PCUntil")}</p>
        <vlocity-combobox name="timePolicy" class="vpc-combobox vpc-end-time-policy vpc-time-field" iconbaseurl="/_slds/icons/" placeholder="${pickListItems.EndTimePolicy[0].label}" options=${JSON.stringify(pickListItems.EndTimePolicy)} value=null></vlocity-combobox>
      </div>
      <div>
        <div class="vpc-pricing-variable-combo-container"></div>
      </div>
      <button class="vpc-add-delay" @click="${e=>this.addDelayClickHandler(e)}">${translations.translate("PCAddDelay")}</button>
    </div>
          <div class="vpc-delay-section">
            <p class="vpc-pricing-details-text">${translations.translate("PCDelay")}</p><vlocity-input type="number" class="vpc-input vpc-delay-amount vpc-delay-field" placeholder="0" value=null></vlocity-input>
            <vlocity-combobox name="timePolicy" iconbaseurl="/_slds/icons/" class="vpc-combobox vpc-delay-time-plan-units vpc-delay-field" placeholder="${pickListItems.TimePlanUOM[0].label}" options=${JSON.stringify(pickListItems.TimePlanUOM)} value=null></vlocity-combobox>
          </div>
          <vlocity-pc-effective-dates-form></vlocity-pc-effective-dates-form>
        </vlocity-form>
      </div>

        <div class="vpc-details-error-container"></div>
      </vlocity-form>
    `;}connectedCallback(){this.initializeComponent();this.createPricingElementDebounce=VlocityPCUtils.debounce(this.createPricingElement,400,this);this.createPricingVariableDebounce=VlocityPCUtils.debounce(this.getPricingVariable,300,this);}initializeComponent(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();const pricingPickListInput=this.productConsole.createPricingPickListInput();this.translations=VlocitySDK.translation.getInstance();const namespacePrefix=vlocityPcConfig.namespacePrefix;this.productConsole.getPricingPicklistItems(pricingPickListInput).then(response=>{this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getSearchResultsMap",JSON.stringify({inputMap:{objectType:`${namespacePrefix}ChargeMeasurement__c`,searchString:"%"}})]}).execute().then(chargeMeasurementResponse=>{this.productConsole.config.datasource.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["getObjectPicklistsByName",JSON.stringify({objectName:`${namespacePrefix}PricingVariable__c`})]}).execute().then(chargeType=>{this.pickListItems=response.result;render(this.template(response.result,chargeMeasurementResponse.result.results,chargeType.result[`${namespacePrefix}ChargeType__c`]),this);const pricingDetailsSection=this.querySelector(".vpc-pricing-details-price-section");setTimeout(()=>{pubsub.fire("vpctoogleactiveswitch","result",{isActive:!0});this.setInputListeners(pricingDetailsSection);this.querySelector("vlocity-pc-effective-dates-form").resetForm();pubsub.fire("vpcgetproductid","result",{});this.setAppliedPromotions();},0);});});});this.addEventListener("onvaluechange",e=>{if(e.target.classList.contains("vpc-delay-amount")||e.target.classList.contains("vpc-time-plan")){this.updateDetailsForm(e);this.resetTimeFields();this.enableDoneButton();return;}if(!e.detail.value()&&"VLOCITY-CHECKBOX"!==e.target.nodeName){// Add error state to the control, since there is no value.
this.addErrorState(e);}else{// Contains a value, so the error state must be removed.
e.target.removeAttribute("errormessage");pubsub.fire("vpcgetstructuredisplaynametext","result",{});if(e.target.classList.contains("vpc-amount")){this.updateDetailsForm(e);}else{this.enableDoneButton()||this.createPricingElementDebounce();}}});this.initEventHandlers();VlocityPCUtils.setComboboxHandlers(this);pubsub.fire("vpcgetproductid","result",{});}initEventHandlers(){this.createPromotionItemDebounce=VlocityPCUtils.debounce(this.createPromotionItem,500,this);this.setEditModeStateHandler={result:this.setEditModeState.bind(this)};this.contextChangeHandlerObj={result:this.contextChangeHandler.bind(this)};this.createPromotionItemDebounceHandler={result:this.createPromotionItemDebounce.bind(this)};this.showEditPromotionViewHandler={result:this.showEditPromotionView.bind(this)};this.updateCurrencyValuesHandler={result:this.updateCurrencyValues.bind(this)};this.existingPromotionOfferHandlerObj={result:this.existingPromotionOfferHandler.bind(this)};this.firePricingFromReferenceEventHandler={result:this.firePricingFromReferenceEvent.bind(this)};this.pricingFormValidHandlerObj={result:this.pricingFormValidHandler.bind(this)};this.setFrequencyDefaultValueHandler={result:this.setFrequencyDefaultValue.bind(this)};this.popualteFormFieldsHandler={result:this.popualteFormFields.bind(this)};this.setExistingPromotionOfferValuesHandler={result:this.setExistingPromotionOfferValues.bind(this)};this.setHeaderDisplayVariablesHandler={result:this.setHeaderDisplayVariables.bind(this)};this.setDisplayNameTextHandler={result:this.setDisplayNameText.bind(this)};this.setStructureDisplayNameTextHandler={result:this.setStructureDisplayNameText.bind(this)};this.setProductIdHandlerObj={result:this.setProductIdHandler.bind(this)};this.setPromotionRecordsHandlerObj={result:this.setPromotionRecordsHandler.bind(this)};this.showFormHandler={result:this.showForm.bind(this)};this.showNewPromotionFieldsHandlerObj={result:this.showNewPromotionFieldsHandler.bind(this)};this.showEditPriceListEntryViewHandlerObj={result:this.showEditPriceListEntryViewHandler.bind(this)};this.updateChargeTypeHandler={result:this.updateChargeType.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.resetTimeFieldsHandler={result:this.resetTimeFields.bind(this)};this.enableDoneButtonHandler={result:this.enableDoneButton.bind(this)};this.existingOfferHandlerObj={result:this.existingOfferHandler.bind(this)};pubsub.register("vpceditmodeon",this.setEditModeStateHandler);pubsub.register("vpccontextchange",this.contextChangeHandlerObj);pubsub.register("vpccreatepromotionitem",this.createPromotionItemDebounceHandler);pubsub.register("vpcshowpromotioneditview",this.showEditPromotionViewHandler);pubsub.register("vpcpricelistchange",this.updateCurrencyValuesHandler);pubsub.register("vpcexistingofferpromotion",this.existingPromotionOfferHandlerObj);pubsub.register("vpcgetpricingform",this.firePricingFromReferenceEventHandler);pubsub.register("vpccallpricingformvalid",this.pricingFormValidHandlerObj);pubsub.register("vpcsetfrequencydefaultvalue",this.setFrequencyDefaultValueHandler);pubsub.register("vpcpopulateformfields",this.popualteFormFieldsHandler);pubsub.register("vpcsetexistingpromotionoffervalues",this.setExistingPromotionOfferValuesHandler);pubsub.register("vpcsetheaderdisplaytext",this.setHeaderDisplayVariablesHandler);pubsub.register("vpcsetdisplaynametext",this.setDisplayNameTextHandler);pubsub.register("vpcsetstructuredisplaynametext",this.setStructureDisplayNameTextHandler);pubsub.register("vpcproductid",this.setProductIdHandlerObj);pubsub.register("vpcsetpromotionrecords",this.setPromotionRecordsHandlerObj);pubsub.register("vpcrunpricingformdonebuttonfunction",this.enableDoneButtonHandler);pubsub.register("vpcshowpricingdetailsform",this.showFormHandler);pubsub.register("vpcexistingoffer",this.existingOfferHandlerObj);pubsub.register("vpcshownewpromotionform",this.showNewPromotionFieldsHandlerObj);pubsub.register("vpcshoweditpricelistentryview",this.showEditPriceListEntryViewHandlerObj);pubsub.register("vpcupdatechargetype",this.updateChargeTypeHandler);pubsub.register("vpcshowpriceform",this.showPriceFormHandler);pubsub.register("vpcresettimefields",this.resetTimeFieldsHandler);pubsub.register("vpcswitchchangeevent",this.enableDoneButtonHandler);}showPriceForm(){this.classList.remove("vpc-hide-side-bar-item");}updateChargeType(){const contextCombo=this.querySelector(".vpc-price-method");contextCombo.removeAttribute("disabled");contextCombo.options=JSON.stringify([{label:"Adjust",value:"Adjust"},{label:"Override",value:"Override"}]);}showEditPriceListEntryViewHandler(e){const priceListEntryToEdit=e.priceListEntryToEdit;VlocityPCTableService.setPricingVariablesForEditMode(priceListEntryToEdit,this);const namespacePrefix=vlocityPcConfig.namespacePrefix,offerId=priceListEntryToEdit[`${namespacePrefix}OfferId__c`],promotionItemId=priceListEntryToEdit[`${namespacePrefix}PromotionItemId__c`],promotionId=priceListEntryToEdit[`${namespacePrefix}PromotionId__c`];this.promotionId=promotionId?promotionId.value:"";this.promotionItemId=promotionItemId?promotionItemId.value:"";this.setAttribute("offerId",offerId?offerId.value:"");if(!this.promotionId&&!this.promotionItemId&&offerId.value){this.pureOffer=!0;}}showNewPromotionFieldsHandler(){this.classList.add("vpc-hide-side-bar-item");const frequencyCombo=this.querySelector(".vpc-frequency-promotion-offer"),adjustmentMethodCombo=this.querySelector(".vpc-adjustment-method");frequencyCombo.value=frequencyCombo.options[0].value;adjustmentMethodCombo.value=adjustmentMethodCombo.options[0].value;}showForm(e){this.resetFormFieldsByClass([".vpc-amount",".vpc-frequency-promotion-offer",".vpc-adjustment-method"]);this.promotionId=e.promotionId;this.promotionItemId=e.promotionItemId;this.classList.remove("vpc-hide-side-bar-item");this.newPromotion=!0;this.setDefaultValue();}setPromotionRecordsHandler(e){this.promotionRecords=VlocityPCTableService.flattenTableData(e.records)||[];}setProductIdHandler(e){this.productId=e.productId;}setDisplayNameText(e){this.displayNameText=e.displayNameText;}setStructureDisplayNameText(e){const structureDisplayNameText=e.adjustmentOverrideName;this.structureDisplayNameText=structureDisplayNameText;this.structureDisplayNameTextValue=structureDisplayNameText&&structureDisplayNameText.value;}setHeaderDisplayVariables(e){const adjustmentOverrideName=e.adjustmentOverrideName;this.adjustmentOverrideName=adjustmentOverrideName;this.adjustmentOverrideNameValue=adjustmentOverrideName&&adjustmentOverrideName.value;this.enableDoneButton();}setExistingPromotionOfferValues(e){this.existingPromotion=e.existingPromotion;this.existingOffer=e.existingOffer;}popualteFormFields(e){const priceListEntryToEdit=e.priceListEntryToEdit,namespacePrefix=vlocityPcConfig.namespacePrefix;pubsub.fire("vpcgetdisplaynametext","result",{});this.updateCurrencyValues({priceListId:priceListEntryToEdit[`${namespacePrefix}PriceListId__c`].value,setAssignedValue:!0});const loyaltyAmount=priceListEntryToEdit[`${namespacePrefix}LoyaltyAmount__c`],loyaltyCode=priceListEntryToEdit[`${namespacePrefix}LoyaltyCode__c`],currencyCode=this.querySelector(".vpc-currency");currencyCode.value=loyaltyAmount?loyaltyCode.value:priceListEntryToEdit[`${namespacePrefix}CurrencyCode__c`].value;if(currencyCode.value){currencyCode.removeAttribute("disabled");}this.querySelector(".vpc-amount").value=loyaltyAmount?loyaltyAmount.value:priceListEntryToEdit[`${namespacePrefix}Amount__c`].value;// Setting pricing element and pricing variable for edit mode.
VlocityPCTableService.setPricingVariablesForEditMode(priceListEntryToEdit,this);const frequency=priceListEntryToEdit[`${namespacePrefix}RecurringFrequency__c`],frequencyCombobox=this.querySelector(".vpc-frequency");frequencyCombobox.value=frequency?frequency.value:JSON.parse(frequencyCombobox.getAttribute("options"))[0].value;this.populateUsageFields(priceListEntryToEdit,".vpc-frequency-price-cost");pubsub.fire("vpctoogleactiveswitch","result",{isActive:priceListEntryToEdit[`${namespacePrefix}IsActive__c`].value});}populateUsageFields(priceListEntryToEdit,frequencyClass){const namespacePrefix=vlocityPcConfig.namespacePrefix,chargeMeasurement=priceListEntryToEdit.ChargeMeasurementName,chargeType=priceListEntryToEdit[`${namespacePrefix}ChargeType__c`],usageUOM=this.querySelector(".vpc-usage-UOM");if(chargeMeasurement&&chargeMeasurement.value){usageUOM.classList.remove("vpc-hide-side-bar-item");usageUOM.querySelector(".slds-combobox__input").value=chargeMeasurement.value;this.querySelector(frequencyClass).value="Usage";for(const option of JSON.parse(usageUOM.getAttribute("options"))){if(option.label===chargeMeasurement.value){usageUOM.value=option.value;break;}}}}setFrequencyDefaultValue(){const frequencyCombo=this.querySelector(".vpc-frequency-price-cost");frequencyCombo.value=frequencyCombo.options[0].value;}pricingFormValidHandler(){pubsub.fire("vpcpricingformvalid",{pricingFormValid:this.isPricingFormValid(this.querySelector(".vpc-amount-section"))});}firePricingFromReferenceEvent(){pubsub.fire("vpcpricingform","result",{pricingDetailsForm:this});}existingPromotionOfferHandler(e){this.classList.remove("vpc-hide-side-bar-item");this.existingPromotionId=e.existingPromotionId;this.setDefaultValue();}existingOfferHandler(e){this.classList.remove("vpc-hide-side-bar-item");this.offerBased=!0;this.setDefaultValue();}setDefaultValue(){const frequencyCombo=this.querySelector(".vpc-frequency-promotion-offer"),adjustmentMethodCombo=this.querySelector(".vpc-adjustment-method");frequencyCombo.value=frequencyCombo.options[0].value;adjustmentMethodCombo.value=adjustmentMethodCombo.options[0].value;}showEditPromotionView(data){const namespacePrefix=vlocityPcConfig.namespacePrefix,priceListEntryToEdit=data.priceListEntryToEdit;this.updateCurrencyValues({priceListId:priceListEntryToEdit[`${namespacePrefix}PriceListId__c`].value,setAssignedValue:!0});const frequencyCombobox=this.querySelector(".vpc-frequency"),frequency=priceListEntryToEdit[`${namespacePrefix}RecurringFrequency__c`];this.querySelector(".vpc-frequency-promotion-offer").value=frequency?frequency.value:JSON.parse(frequencyCombobox.getAttribute("options"))[0].value;this.classList.remove("vpc-hide-side-bar-item");this.populateUsageFields(priceListEntryToEdit,".vpc-frequency-promotion-offer");const adjustmentMethod=priceListEntryToEdit[`${namespacePrefix}AdjustmentMethod__c`],adjustmentMethodCombo=this.querySelector(".vpc-adjustment-method");priceListEntryToEdit[`${namespacePrefix}IsOverride__c`].value&&adjustmentMethodCombo.setAttribute("disabled","true");adjustmentMethodCombo.value=adjustmentMethod?adjustmentMethod.value:"";const amount=priceListEntryToEdit[`${namespacePrefix}Amount__c`]||priceListEntryToEdit[`${namespacePrefix}AdjustmentValue__c`];this.querySelector(".vpc-amount").value=amount.value;pubsub.fire("vpctoogleactiveswitch","result",{isActive:priceListEntryToEdit[`${namespacePrefix}IsActive__c`].value});pubsub.fire("vpcgetstructuredisplaynametext","result",{});this.querySelector(".vpc-currency").value=priceListEntryToEdit[`${namespacePrefix}CurrencyCode__c`].value;const timePlanId=priceListEntryToEdit[`${namespacePrefix}TimePlanId__c`],timePolicyId=priceListEntryToEdit[`${namespacePrefix}TimePolicyId__c`];if(timePlanId&&timePolicyId){this.timePlanId=timePlanId?timePlanId.value:"";this.timePolicyId=timePolicyId?timePolicyId.value:"";const timePlanPolicyObject={timePlanId:this.timePlanId,timePolicyId:this.timePolicyId,priceListEntryToEdit,namespacePrefix};this.getTimePlan(timePlanPolicyObject);}}getTimePlan(timePlanPolicyObject){this.productConsole.getTimePlan(this.getTimePlanPolicyInput(timePlanPolicyObject.timePlanId)).then(response=>{this.getTimePolicy(timePlanPolicyObject,response);});}getTimePolicy(timePlanPolicyObject,timePlan){this.productConsole.getTimePolicy(this.getTimePlanPolicyInput(timePlanPolicyObject.timePolicyId)).then(response=>{this.populateTimePlanPolicyFields(timePlanPolicyObject,timePlan.result,response.result);});}populateTimePlanPolicyFields(timePlanPolicyObject,timePlan,timePolicy){const priceListEntryToEdit=timePlanPolicyObject.priceListEntryToEdit,namespacePrefix=timePlanPolicyObject.namespacePrefix,totalDuration=timePlan[`${namespacePrefix}TotalDuration__c`],isStartTimeDelay=timePolicy[`${namespacePrefix}IsStartTimeDelayed__c`],delayAmount=timePolicy[`${namespacePrefix}StartTimeDelayOffset__c`];this.querySelector(".vpc-timing-required").classList.remove("vpc-hide-side-bar-item");this.setComboboxValue(this.querySelector(".vpc-start-time-policy"),timePolicy[`${namespacePrefix}StartTimePolicy__c`]);this.setComboboxValue(this.querySelector(".vpc-end-time-policy"),timePolicy[`${namespacePrefix}EndTimePolicy__c`]);this.setComboboxValue(this.querySelector(".vpc-time-plan-units"),timePlan[`${namespacePrefix}TotalDurationUoM__c`]);if(totalDuration){this.querySelector(".vpc-time-plan").value=totalDuration;}if(delayAmount){this.querySelector(".vpc-delay-amount").value=delayAmount;}this.setComboboxValue(this.querySelector(".vpc-delay-time-plan-units"),timePolicy[`${namespacePrefix}StartTimeDelayOffsetUoM__c`]);}setComboboxValue(combobox,prop){if(combobox&&prop){const matchedValue=combobox.options.filter(option=>{return prop===option.value;});combobox.value=matchedValue[0].value;}}getTimePlanPolicyInput(timePlanPolicyObject){return this.productConsole.createGetTimePlanPolicyInput(timePlanPolicyObject);}contextChangeHandler(contextEvent){this.context=contextEvent.context;if("adjustmentContext"===this.context||"overrideContext"===this.context){this.setPromotionView();}else{this.setPriceCostView();if("costContext"===this.context){this.removeLoyaltyOption();}}this.setRequiredComboboxes();const pricingDetailsSection=this.querySelector(".vpc-pricing-details-price-section");setTimeout(()=>{this.setInputListeners(pricingDetailsSection);},0);}setEditModeState(editMode){this.isEditMode=editMode.isOn;if(!this.isEditMode){pubsub.fire("vpctoogleactiveswitch","result",{isActive:!0});}}updateCurrencyValues(params){// If the price list changes, update the currency values
this.productConsole.getPriceListCurrencyValues(this.productConsole.createPriceListCurrencyValuesInput(params)).then(response=>{this.priceListId=params.priceListId;this.enableCurrencyCombo(this.querySelector(".vpc-adjustment-method").querySelector("input").value);const currencyCodeCombo=this.querySelector(".vpc-currency");currencyCodeCombo.setAttribute("options",JSON.stringify(response.result));if(!params.setAssignedValue){currencyCodeCombo.value=currencyCodeCombo.options[0]?currencyCodeCombo.options[0].value:"";}if("priceContext"!==this.context){this.removeLoyaltyOption();}if(!this.pricingElementId){this.createPricingElementDebounce();}if(!this.pricingVariableId){this.createPricingVariableDebounce();}});}enableFrequencyField(frequencyField){frequencyField.classList.remove("vpc-hide-side-bar-item");frequencyField.setAttribute("disabled","");}disableFrequencyField(frequencyField){frequencyField.classList.add("vpc-hide-side-bar-item");frequencyField.setAttribute("disabled","true");}setPromotionView(){const frequency=this.querySelector(".vpc-frequency-price-cost");frequency&&frequency.setAttribute("disabled","true");frequency&&frequency.classList.add("vpc-hide-side-bar-item");this.enableFrequencyField(this.querySelector(".vpc-frequency-promotion-offer"));this.disableFrequencyField(this.querySelector(".vpc-frequency-price-cost"));VlocityPCUtils.addOrRemoveClassQuerySelector([".vpc-timeplan-section",".vpc-time-policy-section",".vpc-time-policy-until-section"],"vpc-show-side-bar-item","remove","querySelector",this);VlocityPCUtils.addOrRemoveClassQuerySelector([".vpc-add-timing",".vpc-adjustment-method"],"vpc-show-side-bar-item","add","querySelector",this);this.querySelector(".vpc-adjustment-method").setAttribute("disabled","");if("overrideContext"===this.context){this.querySelector(".vpc-adjustment-method").setAttribute("disabled","true");}}setPriceCostView(){VlocityPCUtils.addOrRemoveClassQuerySelector([".vpc-timeplan-section",".vpc-time-policy-section",".vpc-add-delay",".vpc-add-timing",".vpc-adjustment-method",".vpc-time-policy-until-section",".vpc-frequency-price-cost"],"vpc-show-side-bar-item","remove","querySelector",this);this.enableFrequencyField(this.querySelector(".vpc-frequency-price-cost"));this.disableFrequencyField(this.querySelector(".vpc-frequency-promotion-offer"));this.querySelector(".vpc-amount-section").classList.remove("vpc-promotion-mode");this.querySelector(".vpc-adjustment-method").setAttribute("disabled","true");}setRequiredComboboxes(){const priceMethod=this.querySelector(".vpc-price-method"),chargeTypesArr=this.getChargeTypeOptions(this.translations);priceMethod.options=JSON.stringify(chargeTypesArr);priceMethod.placeholder=chargeTypesArr[0].label;}addErrorState(e){if(e){e.target.setAttribute("errormessage","This field is required");pubsub.fire("vpcenabledonebutton","result",{});this.resetTimeFields();}}resetTimeFields(){const timePlan=this.querySelector(".vpc-time-plan"),timePlanUoM=this.querySelector(".vpc-time-plan-units"),startPolicy=this.querySelector(".vpc-start-time-policy"),endPolicy=this.querySelector(".vpc-end-time-policy"),delay=this.querySelector(".vpc-delay-amount"),delayUoM=this.querySelector(".vpc-delay-time-plan-units");if((!timePlan.value||"null"===timePlan.value)&&(!timePlanUoM.value||"null"===timePlanUoM.value)&&(!startPolicy.value||"null"===startPolicy.value)&&(!endPolicy.value||"null"===endPolicy.value)&&(!delay.value||"null"===delay.value)&&(!delayUoM.value||"null"===delayUoM.value)){timePlan.removeAttribute("errormessage");timePlanUoM.removeAttribute("errormessage");startPolicy.removeAttribute("errormessage");endPolicy.removeAttribute("errormessage");delay.removeAttribute("errormessage");delayUoM.removeAttribute("errormessage");this.timeError=!1;this.enableDoneButton();this.querySelector(".vpc-timing-required").classList.add("vpc-hide-side-bar-item");}else{this.querySelector(".vpc-timing-required").classList.remove("vpc-hide-side-bar-item");}this.resetDelayFields(delay,delayUoM);}clearTimeFields(){this.resetFormFieldsByClass([".vpc-time-field",".vpc-delay-field"]);this.querySelector(".vpc-time-plan").value=null;this.querySelector(".vpc-delay-amount").value=null;}clearDelayFields(){this.resetFormFieldsByClass([".vpc-delay-field"]);this.querySelector(".vpc-delay-amount").value=null;}resetDelayFields(delay,delayUoM){if((!delay.value||"null"===delay.value)&&(!delayUoM.value||"null"===delayUoM.value)){delay.removeAttribute("errormessage");delayUoM.removeAttribute("errormessage");}}removeLoyaltyOption(){const currencyCombo=this.querySelector(".vpc-currency");currencyCombo.options=JSON.stringify(currencyCombo.options.filter(option=>{return`${this.translations.translate("PCPTS")}`!==option.value;}));}checkMaxLength(e){const amountField=e.target,maxLength=parseInt(amountField.getAttribute("maxLength"),10);if(amountField.value.length>maxLength){const amount=this.querySelector(".vpc-amount"),newValue=amountField.value.toString().slice(0,maxLength);amount.value=newValue;amount.querySelector("input").value=newValue;}}enableDoneButton(){// if all items to create a price list entry are valid, enabled the done button.
if(this.isPricingDetailsFormValid()){pubsub.fire("vpcenabledonebutton","result",{enable:!0});return!0;}pubsub.fire("vpcenabledonebutton","result",{});return!1;}isPricingDetailsFormValid(){return this.pricingVariableId&&this.pricingElementId&&!this.timeError&&this.querySelector(".vpc-amount").value&&this.priceListId&&this.isDisplayNameFieldValid()&&VlocityPCFormsService.isTimePlanPolicyValid(this)&&this.hasPromotionItemId()&&this.isEffectiveDatesValid();}isEffectiveDatesValid(){const startDateEle=this.querySelector(".vpc-start-date"),endDateEle=this.querySelector(".vpc-end-date"),startDate=startDateEle&&startDateEle.value?new Date(startDateEle.value).valueOf():null,endDate=endDateEle&&endDateEle.value?new Date(endDateEle.value).valueOf():null;if(startDate&&!endDate){return!0;}if(startDate&&endDate&&startDate<endDate){return!0;}return!1;}hasPromotionItemId(){if(("adjustmentContext"===this.context||"overrideContext"===this.context)&&!this.offerBased&&!this.pureOffer){return this.promotionItemId;}return!0;}createPricingElement(){const amountSection=this.querySelector(".vpc-amount-section"),frequencyCombo=this.querySelector(".vpc-frequency-promotion-offer"),pricingVariableCombo=this.querySelector(".vpc-pricing-variable"),contextArr="adjustmentContext"===this.context||"overrideContext"===this.context?[amountSection,frequencyCombo]:[amountSection];if(pricingVariableCombo){this.pricingVariableId=pricingVariableCombo.value;}// If the forms are valid, and the pricing variable has been created,
// create the pricing element before enabling the done button.
if(this.isPricingFormValid(this.querySelector(".vpc-amount-section"))&&this.priceListId&&this.inputsPopulated(contextArr)&&this.pricingVariableId&&!this.pricingElementId){this.getPricingElement();}}setInputListeners(pricingDetailsSection){const inputs=pricingDetailsSection.getElementsByClassName("slds-input");for(let input of inputs){input&&input.addEventListener("blur",e=>{this.updateDetailsForm(e);});}}enableCurrencyCombo(value){const currencyCombo=this.querySelector(".vpc-currency");if("%"===value){currencyCombo.setAttribute("disabled","true");}else{const adjustmentMethod=this.querySelector(".vpc-adjustment-method").querySelector("input");if(this.priceListId&&adjustmentMethod&&"%"!==adjustmentMethod.value){currencyCombo.removeAttribute("disabled");}}}enableUsage(e){if(!this.isChargeMeasurementBlur(e)){const usageUOM=this.querySelector(".vpc-usage-UOM");if("Usage"===this.querySelector(".vpc-frequency-promotion-offer").value||"Usage"===this.querySelector(".vpc-frequency-price-cost").value){usageUOM.classList.remove("vpc-hide-side-bar-item");usageUOM.classList.add("vpc-required-field");usageUOM.setAttribute("required","true");}else{usageUOM.classList.add("vpc-hide-side-bar-item");usageUOM.classList.remove("vpc-required-field");usageUOM.value="";usageUOM.querySelector(".slds-combobox__input").value="";usageUOM.setAttribute("required","false");}}}updateDetailsForm(e){const value=e.target.value;this.comboContextChange(e);this.enableCurrencyCombo(value);this.enableUsage(e);if("priceContext"===this.context){this.disableRecurringField(e);}this.getTimePlanTimePolicy();const contextArr=this.getContextArr();if(this.inputsPopulated(contextArr)){pubsub.fire("vpcgetexistingpromotionoffervalues","result",{});if((this.existingPromotion||this.existingOffer)&&!this.offerBased){this.createExistingPromotionOffer(e);}else{this.evaluateNeedForPricingVariable(e);}}}isNotTimeField(e){let ele=e.target;while(ele){if(ele.classList&&ele.classList.contains("vpc-time-field")){return!1;}ele=ele.parentElement;}return!0;}isAmountBlur(e){let ele=e.target.parentElement;while(ele){if(ele.classList&&ele.classList.contains("vpc-amount")){return!0;}ele=ele.parentElement;}}isChargeMeasurementBlur(e){let ele=e.target.parentElement;while(ele){if(ele.classList&&ele.classList.contains("vpc-usage-UOM")){return!0;}ele=ele.parentElement;}}disableRecurringField(e){// Recurring field should be disabled if loyalty is selected.
const translations=this.translations,isLoyalty=`${translations.translate("PCPTS")}`===e.target.value,frequency=this.querySelector(".vpc-frequency-price-cost");if(isLoyalty){const frequencyCombobox=this.querySelector(".vpc-frequency");frequency.value=JSON.parse(frequencyCombobox.getAttribute("options"))[0].value;}frequency.setAttribute("disabled",`${isLoyalty}`);}getContextArr(){return"adjustmentContext"===this.context||"overrideContext"===this.context?[this.querySelector(".vpc-amount-section"),this.querySelector(".vpc-frequency-promotion-offer")]:[this.querySelector(".vpc-amount-section")];}comboContextChange(e){const priceMethodValue=e.target.value;if("Adjust"===priceMethodValue||"Override"===priceMethodValue){this.context="Adjust"===priceMethodValue?"adjustmentContext":"overrideContext";pubsub.fire("vpccontextchange","result",{context:this.context});}}createExistingPromotionOffer(e){if(!this.promotionItemId){this.createPromotionItemDebounce();}this.evaluateNeedForPricingVariable(e);}evaluateNeedForPricingVariable(e){if(this.isNotTimeField(e)){this.isAmountBlur(e)||this.createPricingVariableDebounce();}}inputsPopulated(contexts){const combos=this.querySelectorAll("vlocity-combobox"),excludeArr=[];for(let combo of combos){if("false"===combo.getAttribute("required")){excludeArr.push(combo.getElementsByClassName("slds-combobox__input")[0]);}}let skipInput=!1;for(let context of contexts){const inputs=context.getElementsByClassName("slds-input");for(let input of inputs){for(let exludeinput of excludeArr){if(exludeinput===input){skipInput=!0;}}if(skipInput){skipInput=!1;continue;}const isDisabled=input.getAttribute("disabled");if(!input.value&&null===isDisabled){return!1;}}}return!0;}getPricingVariable(){this.pricingVariableId="";this.pricingElementId="";pubsub.fire("vpcenabledonebutton","result",{});if(this.isPricingFormValid(this.querySelector(".vpc-amount-section"))){this.productConsole.getPricingVariable(this.getPricingVariableInput()).then(response=>{const records=response.records;this.pricingVariableId=records?records[0].Id:"";const pricingVariableContainer=this.querySelector(".vpc-pricing-variable-combo-container"),errorElement=this.querySelector(".vpc-details-error-container");this.resetContainers(pricingVariableContainer,errorElement);this.displayPricingVariableError(pricingVariableContainer,response,errorElement);this.addPricingCombobox(records,pricingVariableContainer);if(this.pricingVariableId){this.getPricingElement(pricingVariableContainer);}});}}isPricingFormValid(pricingDetailsSection){const combos=this.querySelectorAll("vlocity-combobox"),excludeArr=[];for(let combo of combos){if("false"===combo.getAttribute("required")){excludeArr.push(combo.getElementsByClassName("slds-combobox__input")[0]);}}const inputs=pricingDetailsSection.getElementsByClassName("slds-input");let skipInput=!1;for(let input of inputs){for(let exludeinput of excludeArr){if(exludeinput===input){skipInput=!0;}}if(skipInput){skipInput=!1;continue;}if(!input.attributes.disabled&&!input.value){return!1;}}return!0;}addDelayClickHandler(e){e.preventDefault();this.toogleDelay(e);}toogleDelay(e){if(e.target.textContent===this.translations.translate("PCAddDelay")){this.querySelector(".vpc-add-delay").innerText=this.translations.translate("PCRemoveDelay");this.querySelector(".vpc-delay-section").classList.add("vpc-show-side-bar-item");}else{this.resetDelayToogle();this.clearDelayFields();this.resetTimePlanPolicyVariables();this.getTimePlanTimePolicy();}}addTimingClickHandler(e){e.preventDefault();// Adding class to the Timing form.
const timingButton=this.querySelector(".vpc-add-timing");if(this.querySelector(".vpc-timeplan-section").classList.contains("vpc-show-side-bar-item")){this.toggleTiming("remove");this.clearTimeFields();this.getTimePlanTimePolicy();this.resetTimePlanPolicyVariables();timingButton.innerText=this.translations.translate("PCAddTiming");}else{this.toggleTiming("add");timingButton.innerText=this.translations.translate("PCRemoveTiming");}}toggleTiming(addOrRemove){// Adding class to the Timing form.
VlocityPCUtils.addOrRemoveClassQuerySelector([".vpc-timeplan-section",".vpc-time-policy-section",".vpc-add-delay",".vpc-time-policy-until-section"],"vpc-show-side-bar-item",addOrRemove,"querySelector",this);if("remove"===addOrRemove){this.resetDelayToogle();}}resetTimePlanPolicyVariables(){this.timePlanId="";this.timePolicyId="";}getPricingVariableInput(){const frequency="priceContext"===this.context||"costContext"===this.context?this.querySelector(".vpc-frequency-price-cost"):this.querySelector(".vpc-frequency-promotion-offer"),usageUOM=this.querySelector(".vpc-usage-UOM");if(this.isFrequencyFieldsValid(frequency,usageUOM)){const currencyCode=this.querySelector(".vpc-currency");let adjustmentMethod=this.querySelector(".vpc-adjustment-method"),type="",chargeType="";const chargeMeasurement=this.querySelector(".vpc-usage-UOM");switch(this.context){case"priceContext":type="Price";break;case"costContext":type="Cost";break;case"adjustmentContext":type="Price";break;case"overrideContext":type="Price";adjustmentMethod=null;break;}const inputMap={SubType:"Standard",Frequency:this.getFrequency(frequency.value),ChargeType:this.getChargeType(frequency,usageUOM),AdjustmentMethod:adjustmentMethod?adjustmentMethod.value:"",Type:type,CurrencyCode:currencyCode?currencyCode.value:""};if(chargeMeasurement&&chargeMeasurement.value){inputMap.ChargeMeasurementId=chargeMeasurement.value;}return this.productConsole.createPricingVariableInput(inputMap);}}isFrequencyFieldsValid(frequency,usageUOM){if("Usage"===frequency.value&&!usageUOM.value){return!1;}return!0;}resetContainers(pricingVariableContainer,errorElement){pricingVariableContainer.innerText="";errorElement.innerText="";}displayPricingVariableError(pricingVariableContainer,response,errorElement){if(!response.records){const errorMessage=document.createElement("p");errorMessage.innerText=response.messages[0].message;errorMessage.classList.add("vpc-error-message");pricingVariableContainer.classList.remove("vpc-pricing-variable-combo-populated");errorElement.appendChild(errorMessage);}}addPricingCombobox(records,pricingVariableContainer){if(records&&1<records.length){const translations=this.translations,pricingVariableArr=[];for(let record of records){pricingVariableArr.push({label:record.Name,value:record.Id});}const pricingVariableCombo=document.createElement("vlocity-combobox");pricingVariableCombo.classList.add("vpc-pricing-variable","vpc-required-field");pricingVariableCombo.setAttribute("name","pricingVariable");pricingVariableCombo.setAttribute("label",translations.translate("PCPricingVariable"));pricingVariableCombo.setAttribute("required",!0);pricingVariableCombo.setAttribute("iconbaseurl","/_slds/icons/");pricingVariableCombo.setAttribute("placeholder",`${translations.translate("PCSelectPricingVariable")}`);pricingVariableCombo.setAttribute("options",`${JSON.stringify(pricingVariableArr)}`);pricingVariableContainer.classList.add("vpc-pricing-variable-combo-populated");pricingVariableContainer.appendChild(pricingVariableCombo);const pricingVariableInput=pricingVariableContainer.getElementsByClassName("slds-combobox__input");setTimeout(()=>{pricingVariableInput[0].classList.add("vpc-draw-attention");},0);}}getPricingElement(pricingVariableContainer){const inputs=pricingVariableContainer?pricingVariableContainer.getElementsByClassName("slds-combobox__input"):[];setTimeout(()=>{if(inputs.length){inputs.item(0).addEventListener("blur",e=>{this.createPricingElementDebounce();});}else{this.executeGetPricingElement();}},0);}executeGetPricingElement(){pubsub.fire("vpcsetbuttonwaitstate","result",{});const pricingVariableCombo=this.querySelector(".vpc-pricing-variable");if(pricingVariableCombo){this.pricingVariableId=pricingVariableCombo.value;}if(this.isPricingElementReady()){this.productConsole.getPricingElement(this.getPricingElementInput()).then(response=>{pubsub.fire("vpccheckforerrors","result",{response});if(response.records){this.pricingElementId=response.records[0].Id;this.handlePostPricingElementActions();}else{this.pricingElementId="";}});}else{this.removeButtonWaitState();}}isPricingElementReady(){return this.pricingVariableId&&this.priceListId&&this.querySelector(".vpc-amount").value;}handlePostPricingElementActions(){this.removeButtonWaitState();this.enableDoneButton();if(this.isMissingAdjustmentOverrideName()){pubsub.fire("vpcenabledonebutton","result",{});}}isMissingAdjustmentOverrideName(){const adjustmentOverrideName=this.adjustmentOverrideName;return(this.existingPromotion||this.existingOffer)&&!this.adjustmentOverrideNameValue&&adjustmentOverrideName&&!adjustmentOverrideName.classList.contains("vpc-hide-side-bar-item")&&!this.isEditMode;}removeButtonWaitState(){pubsub.fire("vpcremovebuttonwaitstate","result",{});}isDisplayNameFieldValid(){if(("priceContext"===this.context||"costContext"===this.context)&&!this.displayNameText.value){return!1;}if(("adjustmentContext"===this.context||"overrideContext"===this.context)&&!this.adjustmentOverrideNameValue&&!this.structureDisplayNameTextValue){return!1;}return!0;}getPricingElementInput(){const pricingVariableCombo=this.querySelector(".vpc-pricing-variable"),currencyCode=this.querySelector(".vpc-currency"),frequency="priceContext"===this.context||"costContext"===this.context?this.querySelector(".vpc-frequency-price-cost"):this.querySelector(".vpc-frequency-promotion-offer"),usageUOM=this.querySelector(".vpc-usage-UOM"),pricingElementInputMap={Amount:this.querySelector(".vpc-amount").value,PricingVariableId:this.pricingVariableId,PriceListId:this.priceListId,CurrencyCode:currencyCode?currencyCode.value:"",ChargeType:this.getChargeType(frequency,usageUOM)};if(usageUOM&&usageUOM.value){pricingElementInputMap.ChargeMeasurementId=usageUOM.value;}return this.productConsole.createPricingElementInput(pricingElementInputMap);}getChargeType(frequency,usageUOM){let chargeType;if("adjustmentContext"===this.context){chargeType="Adjustment";}else{chargeType="One-time"===frequency.value?"One-time":"Recurring";}if(("priceContext"===this.context||"costContext"===this.context)&&usageUOM&&usageUOM.value){return"Usage";}return chargeType;}getFrequency(frequencyValue){return"One-time"===frequencyValue||"Usage"===frequencyValue?"":frequencyValue;}createPromotionItem(itemObject){if(!this.getPromotionItem()&&!this.gettingPromotionItem){this.gettingPromotionItem=!0;const item=itemObject||{promotionId:this.existingPromotion||"",actionType:"Add/Update",cardinalityCheckScope:"Cart Scope",contextEntityFilterId:"",contextProductId:"",description:"",effectiveFromDate:"",effectiveUntilDate:"",isActive:!0,isUndoable:!1,maxQuantity:100,minQuantity:1,quantity:1,hierarchyPath:"",offerId:this.existingOffer===this.productId?"":this.existingOffer,productId:this.productId,undoableMessage:"",updateScope:"Update Item Only"};this.productConsole.createPromotionItem(this.createNewPromotionItemInput(item)).then(result=>{this.gettingPromotionItem=!1;this.promotionItemId=result.result.Id;this.enableDoneButton();});}}getPromotionItem(){const promotionRecords=this.appliedPromotions,existingPromotion=this.existingPromotion,namespacePrefix=vlocityPcConfig.namespacePrefix;let promotionItemId=null;for(let record of promotionRecords){const promotionId=record[`${namespacePrefix}PromotionId__c`];if(promotionId&&promotionId.value===existingPromotion){const promotionItem=record[`${namespacePrefix}PromotionItemId__c`];this.promotionItemId=promotionItem&&promotionItem.value;return this.promotionItemId;}}return!1;}createNewPromotionItemInput(item){return this.productConsole.createPromotionItemInput(item);}getChargeTypeOptions(translations){switch(this.context){case"adjustmentContext":return[{label:translations.translate("PCAdjust"),value:"Adjust"},{label:translations.translate("PCOverride"),value:"Override"}];case"overrideContext":return[{label:translations.translate("PCOverride"),value:"Override"},{label:translations.translate("PCAdjust"),value:"Adjust"}];default:return[{label:translations.translate("PCCharge"),value:"Charge"}];}}getTimePlanTimePolicy(){const startTimePolicy=this.querySelector(".vpc-start-time-policy"),timePlanUOM=this.querySelector(".vpc-time-plan-units"),timePlanAmount=this.querySelector(".vpc-time-plan"),endTimePolicy=this.querySelector(".vpc-end-time-policy"),delay=this.querySelector(".vpc-delay-amount"),delayUoM=this.querySelector(".vpc-delay-time-plan-units"),delayValue=delay?delay.value:null,delayUoMValue=delayUoM?delayUoM.value:null,startTimePolicyValue=startTimePolicy?startTimePolicy.value:"",timePlanUOMValue=timePlanUOM?timePlanUOM.value:"",timePlanAmountValue=timePlanAmount?parseInt(timePlanAmount.value):"",endTimePolicyValue=endTimePolicy?endTimePolicy.value:"";if(timePlanUOMValue&&timePlanAmountValue&&endTimePolicyValue&&startTimePolicyValue){const timeInput={StartTimePolicy:startTimePolicyValue,EndTimePolicy:endTimePolicyValue,Frequency:timePlanAmountValue,TimePlanUOM:timePlanUOMValue};if(delayValue&&delayUoMValue){timeInput.Delay=parseInt(delayValue,10);timeInput.DelayUOM="null"===delayUoMValue?null:delayUoMValue;}this.productConsole.getTimePlanTimePolicyIds(this.getTimePlanTimePolicyInput(timeInput)).then(response=>{this.assignTimePlanTimePolicy(response);this.handleTimePlanTimePolicyErrors(response);});}}getTimePlanTimePolicyInput(timePlanTimePolicyObject){return this.productConsole.createTimePlanPolicyIdsInput(timePlanTimePolicyObject);}assignTimePlanTimePolicy(response){const timePlanRecords=response.timePlanResult.records,timePolicyRecords=response.timePolicyResult.records;this.timePlanId=timePlanRecords.length?timePlanRecords[0].fields.Id:"";this.timePolicyId=timePolicyRecords.length?timePolicyRecords[0].fields.Id:"";if(this.timePlanId&&this.timePolicyId){this.timeError=!1;this.enableDoneButton();}}handleTimePlanTimePolicyErrors(response){const errorContainer=this.querySelector(".vpc-details-error-container");errorContainer.innerText="";const timePlanError=response.timePlanResult.messages,timePolicyError=response.timePolicyResult.messages;if(timePlanError.length){this.createTimePlanPolicyError(this.querySelector(".vpc-time-plan"),this.querySelector(".vpc-time-plan-units"),timePlanError[0].message,errorContainer);this.timeError=!0;this.enableDoneButton();}if(timePolicyError.length){this.createTimePlanPolicyError(this.querySelector(".vpc-start-time-policy"),this.querySelector(".vpc-end-time-policy"),timePolicyError[0].message,errorContainer);this.timeError=!0;this.enableDoneButton();}}createTimePlanPolicyError(startField,endField,error,errorContainer){if(startField.value&&endField.value){pubsub.fire("vpccheckforerrors","result",{response:{errorCode:" ",error}});}}setAppliedPromotions(){this.promotionInput=this.productConsole.createAppliedPromotionsInput();this.promotionInput.productId=this.productId;this.productConsole.getAppliedPromotions(this.promotionInput).then(result=>{this.appliedPromotions=VlocityPCTableService.flattenTableData(result.records)||[];pubsub.fire("vpcenabletablebuttons","result",{});});}resetForm(){this.resetFormFieldsByType(["vlocity-combobox","vlocity-input"]);this.resetFormProperties();this.resetPricingDetailsForms();this.querySelector(".vpc-add-delay").classList.remove("vpc-show-side-bar-item");this.querySelector(".vpc-time-plan").value=null;this.querySelector(".vpc-delay-amount").value=null;this.querySelector(".vpc-details-error-container").innerText="";this.querySelector(".vpc-pricing-variable-combo-container").innerText="";this.querySelector(".vpc-delay-section").classList.remove("vpc-show-side-bar-item");this.querySelector(".vpc-timing-required").classList.add("vpc-hide-side-bar-item");this.querySelector(".vpc-adjustment-method").setAttribute("disabled","false");this.querySelector(".vpc-currency").setAttribute("disabled","true");this.enableUsage({target:{value:null}});const pricingVariableContainer=this.querySelector(".vpc-pricing-variable-combo-container");pricingVariableContainer.classList.remove("vpc-pricing-variable-combo-populated");pricingVariableContainer.innerText="";if("adjustmentContext"===this.context||"overrideContext"===this.context){this.setAppliedPromotions();}const timingButton=this.querySelector(".vpc-add-timing");if(this.querySelector(".vpc-timeplan-section").classList.contains("vpc-show-side-bar-item")){this.toggleTiming("remove");timingButton.innerText=this.translations.translate("PCAddTiming");}this.resetDelayToogle();}resetDelayToogle(){this.querySelector(".vpc-add-delay").innerText=this.translations.translate("PCAddDelay");this.querySelector(".vpc-delay-section").classList.remove("vpc-show-side-bar-item");}resetPricingDetailsForms(){const forms=this.querySelectorAll("form");for(let form of forms){form.reset();form.parentElement.model="";}}resetFormFieldsByType(fieldClasses){for(let fieldClass of fieldClasses){const fields=this.querySelectorAll(fieldClass);for(let field of fields){field.value="";field.removeAttribute("errormessage");}}}resetFormFieldsByClass(fieldClasses){for(let fieldClass of fieldClasses){const fields=this.querySelectorAll(fieldClass);for(let field of fields){field.value="";field.removeAttribute("errormessage");}}}resetFormProperties(){this.existingPromotion="";this.existingOffer="";this.pricingVariableId="";this.pricingElementId="";this.promotionId="";this.promotionItemId="";this.isEditMode=!1;this.timePlanId="";this.timePolicyId="";this.timeError=!1;this.priceListId="";this.adjustmentOverrideName="";this.adjustmentOverrideNameValue="";this.displayNameText="";this.structureDisplayNameText="";this.structureDisplayNameTextValue="";this.promotionRecords="";this.offerId="";this.newPromotion=!1;this.pureOffer=!1;this.offerBased=!1;}disconnectedCallback(){pubsub.unregister("vpceditmodeon",this.setEditModeStateHandler);pubsub.unregister("vpccontextchange",this.contextChangeHandlerObj);pubsub.unregister("vpccreatepromotionitem",this.createPromotionItemDebounceHandler);pubsub.unregister("vpcshowpromotioneditview",this.showEditPromotionViewHandler);pubsub.unregister("vpcpricelistchange",this.updateCurrencyValuesHandler);pubsub.unregister("vpcexistingofferpromotion",this.existingPromotionOfferHandlerObj);pubsub.unregister("vpcgetpricingform",this.firePricingFromReferenceEventHandler);pubsub.unregister("vpccallpricingformvalid",this.pricingFormValidHandlerObj);pubsub.unregister("vpcsetfrequencydefaultvalue",this.setFrequencyDefaultValueHandler);pubsub.unregister("vpcpopulateformfields",this.popualteFormFieldsHandler);pubsub.unregister("vpcsetexistingpromotionoffervalues",this.setExistingPromotionOfferValuesHandler);pubsub.unregister("vpcsetheaderdisplaytext",this.setHeaderDisplayVariablesHandler);pubsub.unregister("vpcsetdisplaynametext",this.setDisplayNameTextHandler);pubsub.unregister("vpcsetstructuredisplaynametext",this.setStructureDisplayNameTextHandler);pubsub.unregister("vpcproductid",this.setProductIdHandlerObj);pubsub.unregister("vpcsetpromotionrecords",this.setPromotionRecordsHandlerObj);pubsub.unregister("vpcshowpricingdetailsform",this.showFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showNewPromotionFieldsHandlerObj);pubsub.unregister("vpcshoweditpricelistentryview",this.showEditPriceListEntryViewHandlerObj);pubsub.unregister("vpcupdatechargetype",this.updateChargeTypeHandler);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcresettimefields",this.resetTimeFieldsHandler);pubsub.unregister("vpcswitchchangeevent",this.enableDoneButtonHandler);pubsub.unregister("vpcrunpricingformdonebuttonfunction",this.enableDoneButtonHandler);pubsub.unregister("vpcexistingoffer",this.existingOfferHandlerObj);}get existingPromotion(){return this.getAttribute("existingPromotion");}set existingPromotion(value){this.setAttribute("existingPromotion",value);}get existingOffer(){return this.getAttribute("existingOffer");}set existingOffer(value){this.setAttribute("existingOffer",value);}get offerId(){return this.getAttribute("offerId");}set offerId(value){this.setAttribute("offerId",value);}get promotionItemId(){return this.getAttribute("promotionItemId");}set promotionItemId(value){this.setAttribute("promotionItemId",value);}get promotionId(){return this.getAttribute("promotionId");}set promotionId(value){this.setAttribute("promotionId",value);}get pricingElementId(){return this.getAttribute("pricingElementId");}set pricingElementId(value){this.setAttribute("pricingElementId",value);}get pricingVariableId(){return this.getAttribute("pricingVariableId");}set pricingVariableId(value){this.setAttribute("pricingVariableId",value);}get timePlanId(){return this.getAttribute("timePlanId");}set timePlanId(value){this.setAttribute("timePlanId",value);}get timePolicyId(){return this.getAttribute("timePolicyId");}set timePolicyId(value){this.setAttribute("timePolicyId",value);}get context(){return this.getAttribute("context");}set context(value){this.setAttribute("context",value);}}window.customElements.define(VlocityPcPricingDetailsForm.is,VlocityPcPricingDetailsForm);class VlocityPcPricingQuickAdd extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-pricing-quick-add";}template(){const translations=VlocitySDK.translation.getInstance();return html`
      <style>
        vlocity-pc-pricing-quick-add {
          position: absolute;
          right: 0;
          width: 100%;
        }

        vlocity-pc-quick-add {
          display: block;
        }

        .vpc-quick-add_list-item svg {
          height: 18px;
        }

        .item-container {
          display: grid;
          grid-template-columns: 20px 10% 80%;
          align-items: center;
        }

        .vpc-quick-add-description {
          color: var(--vpc-primary-color);
          font-size: 12px;
          margin: 0 0 20px;
        }

        .vpc-quick-adds-input {
          width: 99%;
          border-radius: 3px;
          padding: 7px;
          border-style: none;
          border: 1px solid var(--vpc-primary-input-border-color);
        }

        .vpc-quick-add ul {
          list-style: none;
          padding: 0;
        }

        li.vpc-quick-add_list-item {
          background: var(--vpc-primary-bg-color);
          background-color: var(--vpc-primary-bg-color);
          margin: 5px 0;
          padding: 10px;
        }

        .vpc-quick-add_list-item div {
          background: var(--vpc-primary-bg-color);
          background-color: var(--vpc-primary-bg-color);
          text-align: left;
          font-size: 13px;
        }

        .vpc-sub-heading {
          font-size: 14px;
          font-weight: bold;
        }

        .vpc-quick-add-close {
          position: absolute;
          top: 16px;
          z-index: 1;
          right: 16px;
        }

        .vpc-quick-add-close-left {
          position: absolute;
          top: 16px;
          z-index: 1;
          left: 16px;
          right: auto;
        }

        vlocity-pc-pricing-quick-add
          .vpc-quick-add-close
          .slds-icon-text-default {
          fill: var(--vpc-primary-button-bg-color);
        }

        vlocity-pc-pricing-quick-add .vpc-hide-side-bar-item {
          display: none;
        }
      </style>
      <vlocity-icon
        baseurl="/_slds/icons/"
        class="vpc-quick-add-close"
        icon="utility:close"
        size="small"
        extraclass="slds-icon-text-default"
        @click="${()=>pubsub.fire("vpcshowquickaddpanel","result",{show:!1})}"
      ></vlocity-icon>
      <vlocity-pc-quick-add
        items="${JSON.stringify(this.quickAddItems)}"
        quickaddheading="${translations.translate("PCPromotionRules")}"
      >
        <slot>
          <div class="item-container" data-value="\${JSON.stringify(item)}">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="#dedcdb"
              id="drag_and_drop"
              width="100%"
              height="100%"
            >
              <path
                d="M9.2 1.8c1 0 1.9.9 1.9 1.9s-.9 1.8-1.9 1.8-1.8-.8-1.8-1.8.8-1.9 1.8-1.9zm5.6 0c1 0 1.8.9 1.8 1.9s-.8 1.8-1.8 1.8-1.9-.8-1.9-1.8.9-1.9 1.9-1.9zM9.2 7.4c1 0 1.9.8 1.9 1.8s-.9 1.9-1.9 1.9-1.8-.9-1.8-1.9.8-1.8 1.8-1.8zm5.6 0c1 0 1.8.8 1.8 1.8s-.8 1.9-1.8 1.9-1.9-.9-1.9-1.9.9-1.8 1.9-1.8zm-5.6 5.5c1 0 1.9.9 1.9 1.9s-.9 1.8-1.9 1.8-1.8-.8-1.8-1.8.8-1.9 1.8-1.9zm5.6 0c1 0 1.8.9 1.8 1.9s-.8 1.8-1.8 1.8-1.9-.8-1.9-1.8.9-1.9 1.9-1.9zm-5.6 5.6c1 0 1.9.8 1.9 1.8s-.9 1.9-1.9 1.9-1.8-.9-1.8-1.9.8-1.8 1.8-1.8zm5.6 0c1 0 1.8.8 1.8 1.8s-.8 1.9-1.8 1.9-1.9-.9-1.9-1.9.9-1.8 1.9-1.8z"
              ></path>
            </svg>
            \${item.type === "promotions" ? html\`<svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="#1389ee"
              id="announcement"
              width="100%"
              height="100%"
            >
              <path
                d="M10.5 21l-.6-.5c-.7-.5-.7-1.4-.7-1.9v-1.3c0-.4-.3-.7-.7-.7H5.8c-.4 0-.7.3-.7.7v3.6c0 1.2.7 2.2 1.9 2.2h2.2c1.4 0 1.5-.9 1.5-.9s.2-.9-.2-1.2zM20.8 8.3V2c0-1.1-1.4-1.4-2.2-.7l-4.1 3.9c-.6.5-1.4.8-2.3.8h-7C2.8 6 .9 8.1.9 10.5v.1c0 2.4 1.9 4.2 4.3 4.2h7c.9 0 1.7.3 2.4.9l4 4c.8.7 2.2.4 2.2-.7v-6.3c1.4 0 2.2-.9 2.2-2.2 0-1.2-.8-2.2-2.2-2.2z"
              ></path></svg
            >\` : ''} \${item.type === "rules" ? html\`<svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              id="rules"
              fill="#1389ee"
              width="100%"
              height="100%"
            >
              <path
                d="M23.1 11.7L19.4 8c-.2-.2-.5-.2-.7 0l-.7.7c-.2.2-.2.5 0 .7l1.2 1.1c.1.2 0 .6-.3.6H8.7L14.8 5c.2-.2.6 0 .6.3v1.6c0 .3.2.5.4.5h1c.3 0 .5-.2.5-.5V1.6c0-.3-.2-.5-.5-.5h-5.3c-.2 0-.4.2-.4.5v.9c0 .3.2.5.4.5h1.7c.3 0 .4.3.2.6L6 11H1.4c-.3 0-.5.3-.5.5v1c0 .3.3.5.5.5H6l7.5 7.4c.2.2 0 .6-.3.6h-1.6c-.3 0-.5.2-.5.5v.9c0 .2.2.4.5.5h5.2c.3 0 .5-.2.5-.5v-5.3c0-.3-.2-.4-.5-.4h-.9c-.3 0-.5.1-.5.4v1.7c0 .3-.3.4-.5.2l-6.1-6H19c.2 0 .4.4.2.6L18 14.7c-.2.2-.2.5 0 .7l.7.7c.2.2.5.2.7 0l3.7-3.7c.2-.2.2-.5 0-.7z"
              ></path></svg
            >\` : ''} \${typeof item.Name === 'string' ? item.Name : (typeof
            item[item.Name].label === 'string' ? item[item.Name].label : '')}
          </div>
        </slot>
      </vlocity-pc-quick-add>
    `;}render(){render(this.template(),this);}connectedCallback(){this.getQuickAddPricingProperties();this.initEventHandlers();}initEventHandlers(){this.fireExistingPromotionsEventHandler={result:this.fireExistingPromotionsEvent.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.showNewPromotionFormHandler={result:this.showNewPromotionForm.bind(this)};pubsub.register("vpcgetexistingpromotions",this.fireExistingPromotionsEventHandler);pubsub.register("vpcshowpriceform",this.showPriceFormHandler);pubsub.register("vpcshownewpromotionform",this.showNewPromotionFormHandler);}showNewPromotionForm(){this.classList.add("vpc-hide-side-bar-item");}showPriceForm(){this.classList.add("vpc-hide-side-bar-item");}fireExistingPromotionsEvent(){pubsub.fire("vpcexistingpromotion","result",{existingPromotions:this.existingPromotions});}getQuickAddPricingProperties(){const sdkInstance=VlocitySDK.productconsole.getInstance().getProductPricingSdk();let quickAddRuleInput=sdkInstance.createQuickAddPricingPropertiesInput(),quickAddPromotionInput=sdkInstance.createQuickAddPricingPropertiesInput();quickAddPromotionInput.productId=this.getAttribute("productId");quickAddRuleInput.type="Rule";quickAddPromotionInput.type="Promotion";const existingPromotions=sdkInstance.getQuickAddPricingExistingPromotions(quickAddPromotionInput).then(result=>{let records=[];if(result&&result.result&&result.result.results.length){records=result.result.results;records.forEach(item=>{item.type="promotions";});this.existingPromotions=VlocityPCTableService.flattenTableData(records);}return records;}),pricingRules=sdkInstance.getQuickAddPricingRules(quickAddRuleInput).then(result=>{let records=[];if(result&&result.result&&result.result.results.length){records=result.result.results;records.forEach(item=>{item.type="rules";});}return records;});// Will need to add promotions promise back soon, so I'm leaving this Promise.all here for now.
Promise.all([pricingRules]).then(values=>{// Combining all of the arrays from the different api calls.
this.quickAddItems=values.reduce((acc,curr)=>acc.concat(curr),[]);this.render();// Must override the description for the pricing tab.
const quickAddDescription=this.querySelector(".vpc-quick-add-description"),translations=VlocitySDK.translation.getInstance();quickAddDescription.innerText=translations.translate("PCQuickAddsSubHeading");if(vlocityPcConfig._isLanguageRTL){this.querySelector(".vpc-quick-add-close").classList.add("vpc-quick-add-close-left");}let quickAddList=this.querySelector("vlocity-pc-quick-add");quickAddList.addEventListener("quickAddItemSearch",event=>{this.filterQuickAddItems(event);});});}filterQuickAddItems(event){let filteredItems=this.quickAddItems.filter(item=>item.Name.toLowerCase().includes(event.detail.searchText.toLowerCase())),quickAddList=this.querySelector("vlocity-pc-quick-add");quickAddList.setAttribute("items",JSON.stringify(filteredItems));}disconnectedCallback(){pubsub.unregister("vpcgetexistingpromotions",this.fireExistingPromotionsEventHandler);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showNewPromotionFormHandler);}}window.customElements.define(VlocityPcPricingQuickAdd.is,VlocityPcPricingQuickAdd);class VlocityPcPromotionsTable extends HTMLElement{constructor(){super();this.page=1;this.limit=10;}static get is(){return"vlocity-pc-promotions-table";}template(){const translations=this.translations;return html`
      <style>
        .vpc-pc-promotions-table {
          display: grid;
          margin: 25px;
        }

        .vpc-pc-promotions-table .vpc-table-pill {
          border-radius: 5px;
          border: 1px solid lightgrey;
          max-width: max-content;
          display: inline-block;
          text-overflow: unset;
          white-space: nowrap;
          overflow: visible;
          margin: 0 1px;
          margin: 0 4px 0 0;
        }

        .vpc-sub-row td {
          padding: 0;
        }

        .vpc-pc-promotions-table .vpc-promotion-table-container {
          display: grid;
          align-items: center;
          grid-column-gap: 10px;
          grid-template-columns: 2% 76% 20%;
          padding: 15px 0;
        }

        .vpc-pc-promotions-table .vpc-table-button-container {
          display: grid;
          align-items: center;
          grid-column-gap: 10px;
          grid-template-columns: 2% 80% 16%;
          margin: 0 0 10px 1px;
        }

        .vpc-promotion-table-container h1 {
          font-size: 14px;
          font-weight: bold;
        }

        .vpc-promotion-status-toggle {
          border-radius: 50%;
          height: 16px;
          width: 16px;
          border: 0.1rem solid var(--vpc-secondary-status-border-color);
        }

        .vpc-status-on {
          border-color: var(--vpc-primary-status-border-color);
        }

        .vpc-pc-promotions-table .vpc-long-column,
        .vpc-pc-promotions-table .vpc-short-column {
          text-overflow: ellipsis;
          overflow: hidden;
        }

        .vpc-pc-promotions-table .vpc-long-column {
          max-width: 233px;
          min-width: 120px;
        }

        .vpc-pc-promotions-table .vpc-short-column {
          max-width: 145px;
        }

        .vpc-status-wait-state {
          border-color: gray;
        }

        table.vpc-promotions-table {
          border: 1px solid var(--vpc-primary-border-color);
          background: var(--vpc-secondary-bg-color);
        }

        .vpc-promotions-table th {
          font-size: 10px;
          color: var(--vpc-primary-text-color);
          text-align: left;
          padding: 20px 0 0;
          min-width: 65px;
        }

        .vpc-promotions-table td {
          text-align: left;
          color: #616161;
          padding: 20px 0 10px;
          font-size: 13px;
          min-width: 120px;
          border-spacing: 0;
        }

        .vpc-promotions-table .vpc-promotion-row .vpc-promotion-name-column,
        .vpc-promotions-table th:nth-of-type(3) {
          padding: 20px 10px 0 0;
          text-align: start;
        }

        .vpc-promotions-table .vpc-dropzone {
          padding: 5px;
          height: 36px;
          background: #f7f7f7;
          border-radius: 12px;
        }

        .vpc-promotions-table tr:last-of-type td {
          border-bottom: 0;
        }

        tr.vpc-sub-row td.vpc-rule-container {
          padding: 0;
        }

        tr.vpc-sub-row td {
          font-size: 13px;
          border-bottom: 1px solid var(--vpc-secondary-border-color);
          white-space: nowrap;
          padding: 15px 10px 15px 0;
        }

        .vpc-sub-row .vpc-rules-column {
          padding: 15px 0;
        }

        .vpc-promotions-table .vpc-dropzone-populated {
          height: 100%;
          background: none;
        }

        .vpc-sub-row td:nth-of-type(3) {
          text-align: start;
          color: black;
          font-weight: 500;
        }

        .vpc-promotions-table th:nth-of-type(1),
        .vpc-promotions-table td:nth-of-type(1) {
          text-align: center;
          text-align: -webkit-center;
          text-align: -moz-center;
          min-width: 60px;
        }

        .vpc-promotions-table td:nth-of-type(1) .vpc-promotion-status-toggle {
          margin: 0 auto;
        }

        .vpc-promotions-table td:nth-of-type(3) {
          color: black;
          font-weight: 600;
        }

        .vpc-promotions-table td:nth-of-type(1) {
          padding: 15px 0;
        }

        .vpc-dropzone-container .vpc-drop-zone-eligible,
        .vpc-dropzone-container .vpc-dropzone__active {
          background-color: var(--vpc-primary-bg-color);
          border-radius: 5px;
        }

        .vpc-promotions-table
          .vpc-dropzone-container
          .vpc-promotion-dropzone-text {
          position: absolute;
          top: 23px;
          left: 0;
          bottom: 0;
          right: 0;
          height: 0;
          text-align: center;
          color: lightgray;
          font-weight: normal;
        }

        .vpc-promotions-table .vpc-dropzone-container .vpc-dropzone-text {
          text-align: center;
          color: lightgray;
          margin-top: 3px;
        }

        .vpc-promotions-table
          .vpc-dropzone-container
          .vpc-promotion-dropzone-text {
          top: 28px;
        }

        .vpc-pc-promotions-table .vpc-table-unset {
          border-collapse: unset;
        }

        .vpc-promotions-table .vpc-dropzone-container {
          position: relative;
        }

        .vpc-promotions-table .vpc-promotion-row .vpc-dropzone-container {
          min-width: 140px;
        }

        .vpc-promotions-table .vpc-type-column {
          min-width: 0;
        }

        .vpc-promotions-table .vpc-pill-container {
          display: flex;
        }

        .vpc-promotions-table .vpc-type-header {
          padding: 20px 5px 0;
        }

        .vpc-table-pill,
        .vpc-empty-pill {
          border-radius: 4px;
          border: 1px solid var(--vpc-primary-input-border-color);
          max-width: max-content;
          display: inline-block;
          text-overflow: ellipsis;
          overflow: hidden;
          margin: 0 1px;
          background: var(--vpc-primary-pill-bg-color);
          padding: 3px 5px;
        }

        .vpc-empty-pill {
          visibility: hidden;
        }

        .vpc-pc-promotions-table .vpc-filter-section {
          display: grid;
          grid-template-columns: 300px 215px;
          align-items: baseline;
        }

        .vpc-pc-promotions-table .vpc-filter-section .vpc-is-active-checkbox {
          margin: 0 10px;
        }

        .vpc-search-icon-container {
          display: grid;
          grid-template-columns: 1fr 0fr;
          position: relative;
          bottom: 31px;
        }

        .vpc-search-icon-container vlocity-icon {
          margin: 4px 7px 0;
        }

        .vpc-pc-promotions-table .vpc-filter-section .vpc-search-icon {
          position: relative;
          bottom: 26px;
          margin: 0 5px 0;
        }

        .vpc-pc-promotions-table .vpc-filter-section .vpc-search-icon-left {
          text-align: left;
        }

        .vpc-pc-promotions-table .vpc-filter-section .vpc-search-icon-right {
          text-align: right;
        }

        .vpc-pc-promotions-table .vpc-table-page-navigation-container {
          display: grid;
          grid-template-columns: 50px 50px 50px;
          margin: 15px 0 0;
          justify-content: right;
        }

        .vpc-pc-promotions-table .vpc-pricing-table-page-number {
          text-align: center;
          background: var(--vpc-primary-button-bg-color);
          color: var(--vpc-primary-page-navigation-color);
          padding: 6px;
        }

        .vpc-pc-promotions-table .vpc-offer-promotion-column span {
          font-weight: bold;
        }

        .vpc-pc-promotions-table .vpc-promotion-icon svg {
          fill: var(--vpc-primary-button-bg-color);
        }

        .vpc-pc-promotions-table .vpc-offer-icon svg {
          fill: var(--vpc-primary-offer-color);
        }

        .vpc-pc-promotions-table .vpc-previous-button {
          border-radius: 4px 0 0 4px;
        }

        .vpc-pc-promotions-table .vpc-next-button {
          border-radius: 0 4px 4px 0;
        }

        .vpc-promotions-table th:last-of-type,
        .vpc-promotions-table td:last-of-type {
          min-width: 70px;
        }

        .vpc-promotions-table th:last-of-type {
          text-align: center;
          text-align: -webkit-center;
          text-align: -moz-center;
        }

        .vpc-action-confirmation {
          display: none;
          background: var(--vpc-secondary-button-bg-color);
          border: none;
          border-radius: 3px;
        }

        .vpc-action-td .vpc-action-confirmation {
          color: var(--vpc-primary-button-bg-color);
        }

        .vpc-action-td .vpc-pricing-action-container-delete-mode {
          grid-template-columns: 53px;
        }

        .vpc-pc-promotions-table
          vlocity-pc-pagination
          .slds-float_left:first-letter {
          text-transform: capitalize;
        }

        .vpc-table-button-wrapper {
          position: relative;
          width: 100%;
          justify-self: end;
          height: 50px;
        }

        .vpc-promotions-table .vpc-action-td:last-of-type {
          padding: 15px 0;
        }

        .vpc-pc-promotions-table .vpc-table-search .slds-input::-ms-clear {
          display: none;
        }

        .vpc-entry-action-button .slds-icon-text-default,
        .via-slds .vpc-pc-pricing .vlocity-icon-text-default {
          height: 15px;
          fill: var(--vpc-primary-button-bg-color);
        }

        .vpc-promotions-table
          th:hover:not(.vpc-table-column-sorted)
          .vpc-down-arrow-svg {
          display: inline-block !important;
        }

        .vpc-promotion-icon,
        .vpc-offer-icon {
          margin: 0 10px 0 0;
        }

        .vpc-mini-table-data {
          display: none;
          font-weight: normal;
          color: var(--vpc-primary-text-color);
        }

        .vpc-pc-promotions-table .vpc-quick-add-button {
          visibility: hidden;
          background: #1589ee;
          color: #ffffff;
          width: 100%;
        }

        .vpc-title-caps {
          text-transform: uppercase;
          font-weight: bold;
        }

        .vpc-table-button-container .new-adjustment-button,
        .vpc-table-button-container .new-override-button {
          white-space: nowrap;
        }

        .vpc-wrap-rules {
          white-space: normal;
        }

        .vpc-pc-promotions-table .vpc-empty-table {
          height: 67px;
        }

        .vpc-offer-promotion-column .vpc-offer-icon,
        .vpc-offer-promotion-column .vpc-promotion-icon {
          font-weight: normal;
        }

        .vpc-pc-promotions-table .vpc-table-toggle-arrow {
          padding: 0 0 3px;
        }

        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-a:after,
        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-a:before,
        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-b:after,
        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-b:before,
        .vpc-spinner-container .slds-spinner--brand.slds-spinner:after,
        .vpc-spinner-container .slds-spinner--brand.slds-spinner:before,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-a:after,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-a:before,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-b:after,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-b:before,
        .vpc-spinner-container .slds-spinner_brand.slds-spinner:after,
        .vpc-spinner-container .slds-spinner_brand.slds-spinner:before {
          background-color: var(--vpc-primary-color);
        }

        .vpc-pc-promotions-table .vpc-show-side-bar-item {
          display: grid;
        }

        .vpc-pc-promotions-table .vpc-hide-side-bar-item {
          display: none;
        }

        .vpc-pricing-dropzone__active {
          border: 2px dashed #4285f4;
        }
      </style>

      <div class="vpc-pc-promotions-table">
        <vlocity-toast
          title="${translations.translate("PCToastErrorTitle")}"
          class="vpc-hide-side-bar-item"
          message=""
          position="left"
          styletype="error"
        ></vlocity-toast>
        <div class="vpc-promotion-table-container">
          <vlocity-icon
            label="Slds Input"
            baseurl="/_slds/icons/"
            class="vpc-table-toggle-arrow"
            icon="utility:chevronright"
            size="xx-small"
            extraclass="slds-icon-text-default"
            @click="${()=>VlocityPCTableService.toggleTable(this)}"
          ></vlocity-icon>
          <h1 class="vpc-title-caps">
            ${translations.translate("PCPromotionsAndOffers")}
          </h1>
        </div>
        <div class="vpc-filter-section">
          <vlocity-input
            type="text"
            class="vpc-table-search"
            placeholder="${translations.translate("PCSearchAdjustmentsOverrides")}"
            @input="${e=>this.filterTable(e.target.value)}"
          ></vlocity-input>
          <vlocity-checkbox
            class="vpc-is-active-checkbox"
            label="${translations.translate("PCShowActiveOnly")}"
            @click="${e=>this.filterActiveOnly(e.target.checked)}"
            checked="true"
          ></vlocity-checkbox>
        </div>

        <table class="vpc-promotions-table slds-hide">
          <tr class="vpc-promotions-header"></tr>
        </table>

        <div class="slds-m-top_small">
          <vlocity-pc-pagination
            totalsize="0"
            currentpage="1"
            pagesize="${this.limit}"
            maxpages="10"
            class="vpc-hide-side-bar-item"
          >
          </vlocity-pc-pagination>
        </div>
      </div>
    `;}connectedCallback(){this.initializeComponent();}initializeComponent(){// Get instance of sdk to get promotions input and to get promotion data.
this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.promotionInput=this.productConsole.createAppliedPromotionsInput();this.translations=VlocitySDK.translation.getInstance();this.promotionInput.productId=this.productId;this.initialSort=!0;this.previousSort=null;this.previousFilterValue="";this.refreshTableData();this.initEventHandlers();render(this.template(),this);setTimeout(()=>{VlocityPCTableService.addSearchIcon(this);VlocityPCTableService.initPagination(this);},0);}initEventHandlers(){pubsub.register("vpcaddpricelistentry",{result:this.tableDataChangeHandler.bind(this)});pubsub.register("vpcrulesetadded",{result:this.tableDataChangeHandler.bind(this)});pubsub.register("vpcenabletablebuttons",{result:this.enableTableButtonsHandler.bind(this)});pubsub.register("vpcgetpromotionrecords",{result:this.firePromotionRecordsEvent.bind(this)});pubsub.register("vpcdeletecontextrule",{result:this.deleteContextRule.bind(this)});}deleteContextRule(e){VlocityPCTableService.deleteContextRule(!0,{id:e.id},this);}firePromotionRecordsEvent(){pubsub.fire("vpcsetpromotionrecords","result",{records:this.records});}enableTableButtonsHandler(){const newAdjustmentButton=this.querySelector(".new-adjustment-button"),newOverrideButton=this.querySelector(".new-override-button");newAdjustmentButton&&newAdjustmentButton.removeAttribute("disabled");newOverrideButton&&newOverrideButton.removeAttribute("disabled");}tableDataChangeHandler(e){const context=e.context;if("adjustmentContext"===context||"overrideContext"===context){this.refreshTableData();}}refreshTableData(){// Gets promotions table data.
this.productConsole.getAppliedPromotions(this.promotionInput).then(result=>{this.postPriceListEntryActions(result);}).catch(error=>{console.log(error);});}postPriceListEntryActions(result){const previousSort=this.previousSort;this.records=VlocityPCTableService.flattenTableData(result.records)||[];this.activeRows=this.records;this.filteredRows=this.records;if(!previousSort){this.populateTable(this.records);}else{VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,this,!1);VlocityPCTableService.resetTableFilters(this);}}/**
     * Function used to populate promotions table and initialize listeners.
     *
     * @param {Array<Array<object>>} tableData - table data returned by the getAppliedPromotions function used to populate the table.
     */populateTable(tableData){const tbody=this.querySelector("tbody"),translations=this.translations;if(!tableData||!tableData.length){const emptyTableTableRow=html`
        <tr class="vpc-empty-table">
          <td>${translations.translate("PCNoPriceListEntries")}</td>
        </tr>
      `;render(emptyTableTableRow,tbody);if(!this.records||!this.records.length){VlocityPCTableService.showFilterSection(!1,this);}this.initialSort=!0;return;}tableData=VlocityPCTableService.getCurrentPage(tableData,this);const tableRow=html`
      ${tableData.map((columnData,index)=>{return html`
          ${!index?this.getColumnNames():""}
          ${this.createPromoOfferRow(columnData)}
        `;})}
    `;render(tableRow,tbody);VlocityPCTableService.postTableRenderActions(this,"promotion");VlocityPCTableService.runInitialSort(this);this.pagination.setAttribute("currentpage",this.page);}filterActiveOnly(checked){const tableSearchText=this.querySelector(".vpc-table-search").value;if(tableSearchText&&!this.filteredRows){this.filteredRows=this.records;this.filterTable(tableSearchText);}const records=tableSearchText?this.filteredRows:this.records;if(checked){const namespacePrefix=vlocityPcConfig.namespacePrefix,isActiveProperty=`${namespacePrefix}IsActive__c`;this.activeRows=records.filter(row=>{return row[isActiveProperty].value;});this.populateTable(this.activeRows);if(!this.skipFilterTable){this.filterTable(tableSearchText);}else{this.skipFilterTable=!1;}}else{this.populateTable(records);if(!this.skipFilterTable){this.filterTable(tableSearchText);}else{this.skipFilterTable=!1;}}if(tableSearchText){setTimeout(()=>{const previousSort=this.previousSort;VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,this,!1);},100);}}filterTable(value){const isActiveCheckbox=this.querySelector(".vpc-is-active-checkbox").querySelector("input").checked;if(this.previousFilterValue!==value){this.filteredRows=this.records;this.activeRows=this.records;this.skipFilterTable=!0;this.filterActiveOnly(isActiveCheckbox);}this.previousFilterValue=value;if(isActiveCheckbox&&!this.activeRows){this.activeRows=this.records;}const records=isActiveCheckbox?this.activeRows:this.records,namespacePrefix=vlocityPcConfig.namespacePrefix,searchText=value.toLowerCase(),amountProperty=`${namespacePrefix}Amount__c`,currencyCodeProperty=`${namespacePrefix}CurrencyCode__c`,adjustmentValueProperty=`${namespacePrefix}AdjustmentValue__c`,isOverrideProperty=`${namespacePrefix}IsOverride__c`;this.filteredRows=records.filter(row=>{const rules=row.Rules.records||[];for(let rule of rules){if(rule.Name.toLowerCase().includes(searchText)){return!0;}}const currencyCodeValue=row[currencyCodeProperty]?row[currencyCodeProperty].value.toLowerCase().includes(searchText):!1,amountValue=row[amountProperty]?row[amountProperty].value:row[adjustmentValueProperty].value;return row.promotionName&&row.promotionName.toLowerCase().includes(searchText)||row.offerName&&row.offerName.toLowerCase().includes(searchText)||row.Name.toLowerCase().includes(searchText)||row.PriceList.value.toLowerCase().includes(searchText)||row.PriceList.value.toLowerCase().includes(searchText)||amountValue==searchText||!row[isOverrideProperty].value&&`${this.translations.translate("CPQAdjustment").toLowerCase()}`===searchText||currencyCodeValue;});VlocityPCTableService.updatePagination(this);this.populateTable(this.filteredRows);if(!searchText){setTimeout(()=>{const previousSort=this.previousSort;VlocityPCTableService.sortByColumn(previousSort.column,previousSort.columnName,this,!1);},100);}}statusButtonHandler(e,eventData){if(this.activeButtonWaitState){return;}e.target.classList.add("vpc-status-wait-state");this.activeButtonWaitState=!0;this.productConsole.editPriceListEntry(this.getEditPromotionOfferPriceListEntryInput(eventData.priceListEntry)).then(response=>{this.refreshTableData();e.target.classList.remove("vpc-status-wait-state");});}getEditPromotionOfferPriceListEntryInput(priceListEntry){const namespacePrefix=vlocityPcConfig.namespacePrefix,startDate=priceListEntry[`${namespacePrefix}EffectiveFromDate__c`],endDate=priceListEntry[`${namespacePrefix}EffectiveUntilDate__c`],startDateValue=new Date(startDate?startDate.value:"").valueOf(),endDateValue=Date(endDate?endDate.value:"").valueOf(),promotionId=priceListEntry[`${namespacePrefix}PromotionId__c`];return this.productConsole.createEditPromotionOfferPriceListEntryInput({promotionId:promotionId?promotionId.value:"",pricingElementId:priceListEntry[`${namespacePrefix}PricingElementId__c`].value,isBasePrice:priceListEntry[`${namespacePrefix}IsBasePrice__c`].value,isOverride:priceListEntry[`${namespacePrefix}IsOverride__c`].value,priceListEntryId:priceListEntry.Id.value,displayText:priceListEntry.Name,offerId:priceListEntry[`${namespacePrefix}OfferId__c`]?priceListEntry[`${namespacePrefix}OfferId__c`].value:"",timePlanId:priceListEntry[`${namespacePrefix}TimePlanId__c`]?priceListEntry[`${namespacePrefix}TimePlanId__c`].value:"",timePolicyId:priceListEntry[`${namespacePrefix}TimePolicyId__c`]?priceListEntry[`${namespacePrefix}TimePolicyId__c`].value:"",isActive:!priceListEntry[`${namespacePrefix}IsActive__c`].value,startDate:isNaN(startDateValue)?null:startDateValue,endDate:isNaN(endDateValue)?null:endDateValue});}createPromotionItem(promotionToAdd){this.productConsole.createPromotionItem(this.createNewPromotionItemInput(this.getPromotionItemObject())).then(result=>{this.promotionItemId=result.id;this.setPromotionCombobox(promotionToAdd);this.showExistingPromotionForm();this.updateChargeType();});}getPromotionItemObject(){return{promotionId:this.existingPromotion||"",actionType:"Add",cardinalityCheckScope:"",contextEntityFilterId:"",contextProductId:"",description:"",effectiveFromDate:"",effectiveUntilDate:"",isActive:!0,isUndoable:!1,maxQuantity:1,minQuantity:1,quantity:1,hierarchyPath:"",offerId:this.existingOffer||"",productId:this.productId,undoableMessage:"",updateScope:"Update Item Only"};}updateChargeType(){pubsub.fire("vpcupdatechargetype","result",{});}showExistingPromotionForm(){pubsub.fire("vpcshowexistingpromotionform","result",{});pubsub.fire("vpcexistingofferpromotion","result",{});}setPromotionCombobox(promotionToAdd){pubsub.fire("vpcsetpromotioncombobox","result",{promotionToAdd,existingPromotion:this.existingPromotion});this.showNewPromotionForm("adjustmentContext");}createNewPromotionItemInput(item){return this.productConsole.createPromotionItemInput(item);}getContextRuleInput(ruleSetObject){return this.productConsole.createContextRuleSetInput({objectId:ruleSetObject.priceListEntryId,ruleId:ruleSetObject.id});}createPromoOfferRow(promoOfferType){const translations=this.translations;let statusOnClass=promoOfferType[VlocityPCUtils.getCustomFieldName("IsActive")].value?"vpc-status-on":"",promoOfferTypeDateString=VlocityPCTableService.getDateString(promoOfferType),type="";if(promoOfferType[VlocityPCUtils.getCustomFieldName("IsOverride")].value){type=translations.translate("PCOverride");this.context="overrideContext";}else{type=translations.translate("CPQAdjustment");this.context="adjustmentContext";}if(!promoOfferType[VlocityPCUtils.getCustomFieldName("CurrencyCode")]){// Show error to display missing info to user
const toast=this.querySelector("vlocity-toast");toast.classList.remove("vpc-hide-side-bar-item");toast.setAttribute("message",`${translations.translate("PCCurrencyCodeMissing")} "${promoOfferType.Name}" ${translations.translate("PCPricingElementProblem")}`);}const miniTableStr=`${VlocityPCTableService.getAmountString(promoOfferType)} ${promoOfferTypeDateString}`;return html`
      <tr class="vpc-sub-row">
        <td
          class="${this.lastPriorityColumn.includes("Active")?`vpc-last-priority`:""}"
        >
          <div
            class="vpc-promotion-status-toggle ${statusOnClass}"
            @click="${e=>this.statusButtonHandler(e,{priceListEntry:promoOfferType})}"
          ></div>
        </td>
        <td
          class="${this.lastPriorityColumn.includes("Promotion / Offer")?`vpc-last-priority`:""}"
        >
          <div class="vpc-offer-promotion-column">
            <p>
              <span
                >${promoOfferType.promotionName?html`
                      <vlocity-tooltip
                        tooltiptype="iconlink"
                        iconbaseurl="/_slds/icons/"
                        class="vpc-promotion-icon"
                        nubbinposition="bottom-left"
                        icon="utility:announcement"
                        iconsize="xx-small"
                        islanguagertl="${vlocityPcConfig.isLanguageRTL}"
                        value="${this.translations.translate("PCPromotion")}: ${promoOfferType.promotionName}"
                      ></vlocity-tooltip>
                    `:""}</span
              >${promoOfferType.promotionName?promoOfferType.promotionName:""}
            </p>
            <p>
              <span
                >${promoOfferType.offerName?html`
                      <vlocity-tooltip
                        tooltiptype="iconlink"
                        iconbaseurl="/_slds/icons/"
                        class="vpc-offer-icon"
                        nubbinposition="bottom-left"
                        icon="action:share_thanks"
                        iconsize="xx-small"
                        islanguagertl="${vlocityPcConfig.isLanguageRTL}"
                        value="${this.translations.translate("PCOffer")}: ${promoOfferType.offerName}"
                      ></vlocity-tooltip>
                    `:""}</span
              >${promoOfferType.offerName?promoOfferType.offerName:""}
            </p>
          </div>
        </td>
        <td
          class="vpc-long-column ${this.lastPriorityColumn.includes("Display Name")?`vpc-last-priority`:""}"
        >
          ${promoOfferType.Name}
          <div class="vpc-mini-table-data">${miniTableStr}</div>
        </td>
        <td
          class="vpc-long-column ${this.lastPriorityColumn.includes("Price List")?`vpc-last-priority`:""}"
        >
          ${promoOfferType.PriceList.value}
        </td>
        <td
          class="vpc-type-column vpc-short-column ${this.lastPriorityColumn.includes("Amount")?`vpc-last-priority`:""} vpc-mini-table-column"
        >
          ${VlocityPCTableService.getAmountString(promoOfferType)}
        </td>
        <td
          class="vpc-type-column ${this.lastPriorityColumn.includes("Type")?`vpc-last-priority`:""} vpc-mini-table-column"
        >
          ${type}
        </td>
        <td
          class="${this.lastPriorityColumn.includes("Availability")?`vpc-last-priority`:""} vpc-mini-table-column"
        >
          ${promoOfferTypeDateString}
        </td>
        <td
          class="vpc-rules-column vpc-dropzone-container ${this.lastPriorityColumn.includes("Rules")?`vpc-last-priority`:""}"
        >
          <vlocity-pc-dropzone
            accepts="text/quickadditem"
            dragactiveclass="vpc-pricing-dropzone__active"
            ruleSets="${JSON.stringify(promoOfferType.Rules)}"
            priceListEntryId="${promoOfferType.Id.value}"
          ></vlocity-pc-dropzone>
        </td>
        ${this.getActionsColumn(promoOfferType)}
      </tr>
    `;}getColumnNames(){const translations=this.translations,tableHeadersArr=[{label:`${translations.translate("PCActive")}`,value:"Active"},{label:`${translations.translate("PCPromotionOffer")}`,value:"Promotion / Offer"},{label:`${translations.translate("PCDisplayName")}`,value:"Display Name"},{label:`${translations.translate("PCPriceList")}`,value:"Price List"},{label:`${translations.translate("PCAmount")}`,value:"Amount"},{label:`${translations.translate("PCType")}`,value:"Type"},{label:`${translations.translate("PCAvailability")}`,value:"Availability"},{label:`${translations.translate("Rules")}`,value:"Rules"},{label:`${translations.translate("Actions")}`,value:"Actions"}];return html`
      <tr class="vpc-title-caps">
        ${tableHeadersArr.map(header=>{const typeClass=header===translations.translate("Type")?"vpc-type-header":"";return html`
            <th
              sortAsc="true"
              class="${typeClass} ${this.lastPriorityColumn.includes(header.value)?"vpc-last-priority":""} ${"Amount"===header.value||"Availability"===header.value||"Type"===header.value?"vpc-mini-table-column":""}"
              @click="${e=>VlocityPCTableService.sortByColumn(e.target,header.label,this,!0)}"
            >
              ${header.label}${VlocityPCTableService.isColumnSortable(header.label)?this.getColumnSortArrows():""}
            </th>
          `;})}
      </tr>
    `;}getColumnSortArrows(){return html`
      <vlocity-icon
        label="Slds Input"
        baseurl="/_slds/icons/"
        class="vpc-up-arrow-svg slds-hide"
        icon="utility:arrowup"
        size="xx-small"
        extraclass="vlocity-icon-text-default"
      ></vlocity-icon>
      <vlocity-icon
        label="Slds Input"
        baseurl="/_slds/icons/"
        class="vpc-down-arrow-svg slds-hide"
        icon="utility:arrowdown"
        size="xx-small"
        extraclass="vlocity-icon-text-default"
      ></vlocity-icon>
    `;}getActionsColumn(promoOfferType){return html`
      <td class="vpc-action-td">
        <div class="vpc-pricing-action-container">
          <vlocity-tooltip
            class="vpc-entry-action-button"
            tooltiptype="iconlink"
            iconbaseurl="/_slds/icons/"
            nubbinposition="bottom"
            icon="utility:edit"
            iconsize="xx-small"
            value="${this.translations.translate("Edit")}"
            @click="${e=>this.editPriceListEntryHandler(e,{priceListEntryId:promoOfferType.Id.value,data:promoOfferType})}"
          >
          </vlocity-tooltip>
          <vlocity-tooltip
            class="vpc-entry-action-button"
            tooltiptype="iconlink"
            iconbaseurl="/_slds/icons/"
            nubbinposition="bottom"
            icon="utility:delete"
            iconsize="xx-small"
            value="${this.translations.translate("PCDeleteTitle")}"
            @click="${e=>VlocityPCTableService.deleteConfirmationHandler(e,{priceListEntryId:promoOfferType.Id.value,name:promoOfferType.Name,context:this})}"
          >
          </vlocity-tooltip>
          <div class="vpc-spinner-container">
            <div
              role="status"
              class="slds-spinner slds-spinner_small slds-hide slds-spinner_brand slds-align_absolute-center"
            >
              <span class="slds-assistive-text">Loading</span>
              <div class="slds-spinner__dot-a"></div>
              <div class="slds-spinner__dot-b"></div>
            </div>
          </div>
        </div>
      </td>
    `;}showNewPromotionForm(context){pubsub.fire("vpcresetallforms","result",{});pubsub.fire("vpccontextchange","result",{context});pubsub.fire("vpcexpandform","result",{});pubsub.fire("vpcshownewpromotionform","result",{});}editPriceListEntryHandler(e,eventData){// 1. Get All Data
const namespacePrefix=vlocityPcConfig.namespacePrefix,priceListEntryToEdit=eventData.data;// 2. Open Relavant Forms
this.showEditModeForm(priceListEntryToEdit);// 3. Populate Data
const offerId=priceListEntryToEdit[`${namespacePrefix}OfferId__c`],promotionId=priceListEntryToEdit[`${namespacePrefix}PromotionId__c`];pubsub.fire("vpcshoweditpricelistentryview","result",{priceListEntryToEdit});if(!promotionId&&offerId){pubsub.fire("vpc-show-edit-offer-only-view","result",{priceListEntryToEdit});}// 4. Create a Edit Context, button should run editPriceListEntry
pubsub.fire("vpceditmodeon","result",{priceListEntryId:eventData.priceListEntryId,isOn:!0});}showEditModeForm(priceListEntryToEdit){this.showNewPromotionForm(priceListEntryToEdit[`${vlocityPcConfig.namespacePrefix}IsOverride__c`].value?"overrideContext":"adjustmentContext");pubsub.fire("vpcshowpromotioneditview","result",{priceListEntryToEdit});}disconnectedCallback(){this.tableDataChangeHandlerObj={result:this.tableDataChangeHandler.bind(this)};this.enableTableButtonsHandlerObj={result:this.enableTableButtonsHandler.bind(this)};this.firePromotionRecordsEventHandler={result:this.firePromotionRecordsEvent.bind(this)};this.deleteContextRuleHandler={result:this.deleteContextRule.bind(this)};pubsub.unregister("vpcaddpricelistentry",this.tableDataChangeHandlerObj);pubsub.unregister("vpcrulesetadded",this.tableDataChangeHandlerObj);pubsub.unregister("vpcenabletablebuttons",this.enableTableButtonsHandlerObj);pubsub.unregister("vpcgetpromotionrecords",this.firePromotionRecordsEventHandler);pubsub.unregister("vpcdeletecontextrule",this.deleteContextRuleHandler);}static get observedAttributes(){return["productId"];}attributeChangedCallback(name,oldValue,newValue){switch(name){case"productId":this._productId=newValue;break;}}get productId(){return this.getAttribute("productId");}set productId(value){this.setAttribute("productId",value);}get context(){return this.getAttribute("context");}set context(value){this.setAttribute("context",value);}get lastPriorityColumn(){return this.getAttribute("lastPriorityColumn");}set lastPriorityColumn(value){this.setAttribute("lastPriorityColumn",value);}}window.customElements.define(VlocityPcPromotionsTable.is,VlocityPcPromotionsTable);class VlocityPcPromotionForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-promotion-form";}template(){const translations=this.translations;return html`
      <style>
        .vpc-promotions-border-bottom {
          border-bottom: 1px solid var(--vpc-primary-border-color);
        }

        .vpc-new-promotion-container {
          display: grid;
          padding: 0 30px 15px;
        }

        .vpc-pc-promotion-wrapper
          .vpc-new-promotion-container
          .vpc-promo-form
          .vpc-combobox,
        .vpc-pc-promotion-wrapper
          .vpc-new-promotion-container
          .vpc-promo-form
          .vpc-input,
        .vpc-pc-promotion-wrapper
          .vpc-new-promotion-container
          .vpc-promo-form
          .vpc-pricing-form-text-area {
          margin: 0;
        }

        .vpc-promo-form .vpc-date-picker:first-of-type {
          margin: 0 3px 0 0;
        }

        .vpc-show-side-bar-item {
          display: grid;
        }

        .vpc-hide-side-bar-item {
          display: none;
        }

        .vpc-promo-form .vpc-date-picker-container {
          display: grid;
          grid-template-columns: 1fr 1fr;
        }

        .vpc-pc-promotion-wrapper .vpc-create-promotion-button {
          width: 100%;
          margin: 20px 0;
        }

        .vpc-promo-form .vpc-form-control {
          margin: 5px 0 0;
        }

        .vpc-pc-promotion-wrapper .vpc-promo-form .slds-form-element__help {
          display: none;
        }

        .vpc-pc-promotion-wrapper .vpc-create-button-wait-state {
          background: lightgray;
          height: 32px;
        }

        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-a:after,
        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-a:before,
        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-b:after,
        .vpc-spinner-container .slds-spinner--brand .slds-spinner__dot-b:before,
        .vpc-spinner-container .slds-spinner--brand.slds-spinner:after,
        .vpc-spinner-container .slds-spinner--brand.slds-spinner:before,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-a:after,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-a:before,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-b:after,
        .vpc-spinner-container .slds-spinner_brand .slds-spinner__dot-b:before,
        .vpc-spinner-container .slds-spinner_brand.slds-spinner:after,
        .vpc-spinner-container .slds-spinner_brand.slds-spinner:before {
          background-color: var(--vpc-primary-color);
        }

        .vpc-pc-promotion-wrapper .vpc-input .slds-input::-ms-clear {
          display: none;
        }
      </style>

      <div class="vpc-pc-promotion-wrapper">
        <div class="vpc-new-promotion-container">
          <vlocity-form class="vpc-promo-form">
            <div class="vpc-form-control">
              <vlocity-input
                type="text"
                label="${translations.translate("PCPromotionName")}"
                class="vpc-input vpc-display-name vpc-required-field vpc-promotion-field"
                name="vpc-display-name"
                required="true"
              ></vlocity-input>
            </div>
            <div class="vpc-form-control">
              <vlocity-input
                type="text"
                label="${translations.translate("PCDisplayName")}"
                class="vpc-input vpc-adjustment-override-name vpc-required-field vpc-promotion-field"
                name="vpc-adjustment-override-name"
                required="true"
              ></vlocity-input>
            </div>
            <div class="vpc-form-control">
              <vlocity-textarea
                class="vpc-pricing-form-text-area vpc-promotion-description"
                name="vpc-display-text"
                label="${translations.translate("PCDescription")}"
                noresize
              ></vlocity-textarea>
            </div>
            <div>
              <vlocity-input
                type="text"
                class="vpc-input vpc-promo-code vpc-required-field vpc-promotion-field"
                label="${translations.translate("PCPromoCode")}"
                name="vpc-promo-code"
                required="true"
              ></vlocity-input>
            </div>
            <button
              class="vpc-create-promotion-button slds-button slds-button_neutral vpc-table-button"
              @click="${e=>this.createPromotion(e)}"
              disabled
            >
              ${translations.translate("PCCreatePromotion")}
            </button>
          </vlocity-form>
        </div>
      </div>
    `;}connectedCallback(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.translations=VlocitySDK.translation.getInstance();render(this.template(),this);this.addEventListener("onvaluechange",e=>{if(!e.detail.value()){this.addErrorState(e);}else{e.target.removeAttribute("errormessage");this.enableDoneButton();}});pubsub.fire("vpcgetproductid","result",{});this.initEventHandlers();}initEventHandlers(){pubsub.register("vpccontextchange",{result:this.contextChangeHandler.bind(this)});pubsub.register("vpcenableajustmentoverridebutton",{result:this.enableAdjustmentOverrideHandler.bind(this)});pubsub.register("vpcpricelistchange",{result:this.priceListChangeHandler.bind(this)});pubsub.register("vpcproductid",{result:this.setProductIdHandler.bind(this)});pubsub.register("vpcshowpromotionform",{result:this.showPromotionForm.bind(this)});pubsub.register("vpcshowpriceform",{result:this.showPriceForm.bind(this)});pubsub.register("vpcshownewpromotionform",{result:this.showNewPromotionForm.bind(this)});pubsub.register("vpcgetstructuredisplaynametext",{result:this.fireDisplayNameTextHandler.bind(this)});}fireDisplayNameTextHandler(){pubsub.fire("vpcsetstructuredisplaynametext","result",{adjustmentOverrideName:this.querySelector(".vpc-adjustment-override-name")});}showNewPromotionForm(){this.classList.add("vpc-hide-side-bar-item");this.querySelector(".vpc-new-promotion-container").classList.add("vpc-show-side-bar-item");}showPriceForm(){this.classList.add("vpc-hide-side-bar-item");}showPromotionForm(){this.classList.remove("vpc-hide-side-bar-item");}setProductIdHandler(e){this.productId=e.productId;}priceListChangeHandler(e){this.priceListId=e.priceListId;}enableAdjustmentOverrideHandler(){if("adjustmentContext"===this.context||"overrideContext"===this.context){if(this.isPromotionFormValid()){this.querySelector(".vpc-create-promotion-button").removeAttribute("disabled");return;}}}contextChangeHandler(contextEvent){this.context=contextEvent.context;}addErrorState(e){if(e){e.target.setAttribute("errormessage","This field is required");pubsub.fire("vpcenabledonebutton","result",{});this.querySelector(".vpc-create-promotion-button").setAttribute("disabled","");}}enableDoneButton(){if(this.isPromotionFormValid()){this.querySelector(".vpc-create-promotion-button").removeAttribute("disabled");}}isPromotionFormValid(){return this.querySelector(".vpc-display-name").value&&this.priceListId&&this.querySelector(".vpc-promo-code").value&&this.querySelector(".vpc-adjustment-override-name").value;}setCreateButtonWaitState(){// Show spinner in the button
const createButton=this.querySelector(".vpc-create-promotion-button");createButton.classList.add("vpc-create-button-wait-state");const spinner=html`
      <div class="vpc-spinner-container">
        <div
          role="status"
          class="slds-spinner slds-spinner_small slds-spinner_brand slds-align_absolute-center"
        >
          <span class="slds-assistive-text">Loading</span>
          <div class="slds-spinner__dot-a"></div>
          <div class="slds-spinner__dot-b"></div>
        </div>
      </div>
    `;render(spinner,createButton);pubsub.fire("vpcdisablecancelbutton","result",{disable:!0});}createPromotion(e){if(e){e.preventDefault();}const form=this.querySelector(".vpc-promo-form"),promotionName=this.querySelector(".vpc-display-name"),promoCode=this.querySelector(".vpc-promo-code"),promotion={name:promotionName.value,promoCode:promoCode.value,priceListId:this.priceListId,isActive:!0};if(promotion.name&&promotion.promoCode&&promotion.priceListId){this.setCreateButtonWaitState();const input=this.productConsole.createPromotionInput(promotion);this.productConsole.createPromotion(input).then(result=>{this.promotionId=result.result.Id;const description=this.querySelector(".vpc-promotion-description");promotionName.setAttribute("disabled","true");pubsub.fire("vpcenablepricelistcombobox","result",{enable:!1});promoCode.setAttribute("disabled","true");this.querySelector(".vpc-adjustment-override-name").setAttribute("disabled","true");const productOverrideSDK=VlocitySDK.productconsole.getInstance().getProductOverrideSdk(),input=productOverrideSDK.createGetProductHierarchyPath();input.productId=this.productId;input.offerId=this.rootProductId;productOverrideSDK.getProductHierarchyPath(input).then(response=>{const item={promotionId:this.promotionId,actionType:"Add/Update",cardinalityCheckScope:"Cart Scope",contextEntityFilterId:"",contextProductId:"",description:description?description.value:"",effectiveFromDate:"",effectiveUntilDate:"",isActive:!0,isUndoable:!1,maxQuantity:1e3,minQuantity:1,quantity:1,hierarchyPath:response.result||"",offerId:this.rootProductId===this.productId?"":this.rootProductId,productId:this.productId,undoableMessage:"",updateScope:"Update Item Only"};this.executeCreatePromotionItem(item,description);});});}}executeCreatePromotionItem(item,description){this.productConsole.createPromotionItem(this.createNewPromotionItemInput(item)).then(result=>{this.promotionItemId=result.result.Id;description.setAttribute("disabled","true");pubsub.fire("vpcdisablecancelbutton","result",{disable:!1});const createPromotionButton=this.querySelector(".vpc-create-promotion-button");this.classList.add("vpc-promotions-border-bottom");createPromotionButton.classList.remove("vpc-create-button-wait-state");createPromotionButton.innerText=this.translations.translate("PCPromotionCreated");createPromotionButton.setAttribute("disabled","");pubsub.fire("vpcshowpricingdetailsform","result",{promotionId:this.promotionId,promotionItemId:this.promotionItemId});});}createNewPromotionItemInput(item){return this.productConsole.createPromotionItemInput(item);}resetForm(){const vlocityInputs=this.querySelectorAll("vlocity-input");for(let vlocityInput of vlocityInputs){const input=vlocityInput.querySelector("input");vlocityInput.removeAttribute("disabled");vlocityInput.removeAttribute("errormessage");vlocityInput.value="";input.value="";}const textarea=this.querySelector("textarea");textarea.removeAttribute("disabled");textarea.value="";this.querySelector(".vpc-create-promotion-button").innerText=this.translations.translate("PCCreatePromotion");this.querySelector("vlocity-form").model="";this.priceListId="";this.classList.remove("vpc-promotions-border-bottom");this.querySelector(".vpc-adjustment-override-name").setAttribute("disabled","");}disconnectedCallback(){this.contextChangeHandlerObj={result:this.contextChangeHandler.bind(this)};this.enableAdjustmentOverrideHandlerObj={result:this.enableAdjustmentOverrideHandler.bind(this)};this.priceListChangeHandlerObj={result:this.priceListChangeHandler.bind(this)};this.showPromotionFormHandler={result:this.showPromotionForm.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.showNewPromotionFormHandler={result:this.showNewPromotionForm.bind(this)};this.fireDisplayNameTextHandlerObj={result:this.fireDisplayNameTextHandler.bind(this)};pubsub.unregister("vpccontextchange",this.contextChangeHandlerObj);pubsub.unregister("vpcenableajustmentoverridebutton",this.enableAdjustmentOverrideHandler);pubsub.unregister("vpcpricelistchange",this.priceListChangeHandlerObj);pubsub.unregister("vpcshowpromotionform",this.showPromotionFormHandler);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showNewPromotionFormHandler);pubsub.unregister("vpcgetstructuredisplaynametext",this.fireDisplayNameTextHandlerObj);}get productId(){return this.getAttribute("productId");}set productId(value){return this.setAttribute("productId",value);}get rootProductId(){return this.getAttribute("rootProductId");}}window.customElements.define(VlocityPcPromotionForm.is,VlocityPcPromotionForm);const PCPricingLabels=["PCDisplayText","PCPriceList","PCPrices","PCContextRulesSubHeaderAdjustmentsOverrides","PCContextRulesSubHeaderPriceCost","PCCancelButton","PCDoneButton","PCNewPrice","PCAddPrice","PCContextRules","PCSelectARuleSet","PCVirtual","PCBase","PCQuickAddSearchPlaceholder","PCQuickAddTitle","PCPromotionRules","PCQuickAddsSubHeading","PCCosts","PCNewCost","PCNoPriceListEntries","PCNoCostListEntries","PCPricingDetails","PCCharge","PCOneTime","PCSelectPricingVariable","PCBackToQuickAdds","PCSelectPriceList","PCAdjust","PCOverride","PCAvailability","PCPromoCode","PCAddPromotion","PCDescription","PCDisplayName","PCAddCost","PCStartDate","PCEndDate","PCFixed","PCNewAdjustment","PCNewOverride","CPQAdjustment","PCDeleteTitle","PCStartingOn","PCFor","PCUntil","PCAddDelay","PCDelay","PCAmount","PCCurrency","PCAdjustmentMethod","RecurringFrequency","PCUsageUOM","PCPricingVariable","PCUpdate","PCEditPrice","PCEditPromotion","PCEditCost","PCVirtualPrice","PCSearchPriceListEntries","PCChooseExistingOrCreatePromotion","PCShowActiveOnly","PCPromotionName","PCCreatePromotion","PCPromotionCreated","PCChooseExistingOffer","PCChooseExistingPromotion","PCOffer","PCPromotion","PCCreateAdjustmentExistingPromotion","PCCreateOverrideExistingPromotion","Name","PCPromotionsAndOffers","PCActive","PCCreateItemExistingPromotion","CPQMore","PCPTS","PCDropRulesHere","PCDropPromotionHere","Rules","PCNoItemsToShow","Edit","PCCurrencyCodeMissing","PCPricingElementProblem","PCToastErrorTitle","PCDisplayNameCharacterLimit","PCComboboxNone","PCSearchCostEntries","PCSearchAdjustmentsOverrides","PCOfferBaseAdjustment","PCOfferBaseOverride","PCCreate","PCPromotionOffer","PCEditAdjustment","PCEditOverride","PCRowDeletedSuccessfully","PCToastSuccessTitle","PCConfirmMessage","Entries","Showing","to","of","PCAll","Actions","PCType","PCUntilCamelCase","PCStarting","PCAllFieldsRequired","PCAddTiming","PCRemoveTiming","PCProductWithNoPriceList","PCPriceListEntry","PCCostListEntry","PCWasDeleted","PCEntry","CPQAdjustmentOverride","PCSunday","PCMonday","PCTuesday","PCWednesday","PCThursday","PCFriday","PCSaturday","PCJan","PCFeb","PCMar","PCApr","PCMay","PCJun","PCJul","PCAug","PCSep","PCOct","PCNov","PCDec","PCToday","PCHours","PCMinutes","PCAm","PCPm","PCPickAYear","PCRemoveDelay","PCSelectUsageUOM","PCAvailabilityDateRange","PCStartingOnDateValue","PCUntilDateValue","PCAmountDisplayWithoutUOM","PCAmountDisplayWithUOM","Done"];var vlocityPcPricing_labels={PCPricingLabels:PCPricingLabels};class VlocityPcPricing extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-pricing";}template(translations){return html`
      <style>
        vlocity-pc-pricing {
          --vpc-primary-color: #b9b8b6;
          --vpc-secondary-color: black;

          --vpc-primary-text-color: #6b6b6b;

          --vpc-primary-button-text-color: #59a6f3;
          --vpc-secondary-button-text-color: black;

          --vpc-primary-bg-color: #fafafa;
          --vpc-secondary-bg-color: white;

          --vpc-primary-button-bg-color: #1389ee;
          --vpc-secondary-button-bg-color: #e7f0f7;

          --vpc-primary-disabled-button-color: #aeadaa;

          --vpc-primary-border-color: #eaeae9;
          --vpc-secondary-border-color: #eaeaea;

          --vpc-primary-input-border-color: lightgray;

          --vpc-primary-pill-bg-color: #f4f6fe;

          --vpc-primary-status-border-color: #47e6b1;
          --vpc-secondary-status-border-color: red;

          --vpc-secondary-status-border-color: red;

          --vpc-primary-page-navigation-color: #ffffff;

          --vpc-primary-page-navigation-bg-color: #0070d2;

          --vpc-primary-offer-color: #e9696e;
        }

        .vpc-pc-pricing {
          display: grid;
          grid-template-columns: 2fr 1fr;
          border: 1px solid var(--vpc-primary-border-color);
        }

        .vpc-quick-adds-close {
          position: relative;
          right: 50px;
        }

        .vpc-table-container {
          display: grid;
          grid-template-rows: min-content min-content min-content;
          background: var(--vpc-primary-bg-color);
          min-height: 100vh;
        }

        .vpc-title-caps {
          margin: 20px 0;
          font-weight: bold;
          font-size: 18px;
        }

        .vpc-table-button {
          color: var(--vpc-primary-button-text-color);
          justify-self: end;
          padding: 7px 10px;
          background-color: var(--vpc-secondary-bg-color);
          border-radius: 4px;
          font-size: 12px;
        }

        .vpc-pricing-form-wrapper {
          display: none;
          right: 0;
          width: 100%;
          box-sizing: border-box;
        }

        .vpc-side-bar-container {
          position: relative;
          display: grid;
          height: 100%;
          min-width: 430px;
          align-content: start;
          border-left: 1px solid var(--vpc-primary-border-color);
          overflow: scroll;
          background: #ffffff;
        }

        .vpc-pc-pricing .vpc-tables-empty-state {
          height: 100%;
        }

        .vpc-pricing-forms-button-container,
        .vpc-back-to-quickadds-button-container {
          position: absolute;
          bottom: 0;
          width: 100%;
          padding: 20px 30px 20px;
          border-top: 1px solid var(--vpc-secondary-border-color);
          border-left: 1px solid var(--vpc-secondary-border-color);
          border-bottom: 1px solid var(--vpc-secondary-border-color);
          background: var(--vpc-secondary-bg-color);
          z-index: 3;
        }

        .vpc-form-container {
          display: none;
        }

        .vpc-pc-pricing vlocity-pc-quick-add .vpc-quick-add ul {
          height: auto;
        }

        .vpc-pricing-forms-button-container .vpc-promo-done {
          border: none;
          background: var(--vpc-primary-button-bg-color);
          color: var(--vpc-secondary-bg-color);
          padding: 1px 23px;
        }

        .vpc-pricing-forms-button-container .vpc-promo-done:hover {
          background: var(--vpc-primary-button-text-color);
          color: var(--vpc-secondary-bg-color);
        }

        .vpc-pricing-forms-button-container .vpc-promo-done:active {
          background: var(--vpc-primary-border-color);
        }

        .vpc-pricing-forms-button-container .vpc-promo-done[disabled] {
          background: var(--vpc-primary-border-color);
          color: var(--vpc-primary-disabled-button-color);
        }

        .vpc-back-to-quickadds-button-container {
          justify-content: flex-start;
        }

        .vpc-pc-pricing
          .vpc-pricing-forms-button-container
          .vpc-spinner-container {
          position: absolute;
          left: 68px;
          bottom: 36px;
        }

        .vpc-pc-pricing .vpc-done-button-wait-state {
          background: lightgray;
          height: 32px;
          width: 78px;
        }

        vlocity-pc-pricing-quick-add .vpc-quick-add-close {
          display: none;
        }

        .vpc-pc-pricing .vpc-show-side-bar-item {
          display: grid;
        }

        .vpc-pc-pricing .vpc-hide-side-bar-item {
          display: none;
        }

        @media (max-width: 1100px) {
          .vpc-pc-pricing {
            grid-template-columns: 1fr 0fr;
          }

          .vpc-side-bar-container {
            display: none;
            position: fixed;
            top: 0;
            ${vlocityPcConfig._isLanguageRTL?`left: 0;`:`right: 0;`};
            width: 46%;
            background: #ffffff;
          }

          vlocity-pc-pricing .vpc-show-quick-adds,
          vlocity-pc-prices-table
            .vpc-pc-prices-table
            .vpc-table-button-container
            .vpc-quick-add-button,
          vlocity-pc-pricing-quick-add .vpc-quick-add-close {
            display: block;
          }

          vlocity-pc-prices-table
            .vpc-pc-prices-table
            .vpc-table-button-container
            .vpc-quick-add-button,
            vlocity-pc-promotions-table
            .vpc-pc-promotions-table .vpc-quick-add-button {
            visibility: visible;
          }

          .vpc-pc-pricing-edit-mode {
            grid-template-columns: 0 1fr;
          }

          .vpc-show-price-form {
            display: grid;
            position: relative;
            width: auto;
          }

          vlocity-pc-promotions-table
          .vpc-pc-promotions-table .vpc-hide-side-bar-item {
            display: none;
          }
        }

        @media (max-width: 1450px) {
          .vpc-last-priority {
            display: none;
          }
        }

        @media (max-width: 1280px) {
          .vpc-mini-table-column {
            display: none;
          }

          .vpc-pc-prices-table .vpc-long-column .vpc-mini-table-data,
          .vpc-pc-promotions-table .vpc-long-column .vpc-mini-table-data {
            display: block;
          }
        }

        #vpc-quick-add_list-item-extra {
          cursor: move;
          padding: 5px;
          min-width: 100px;
          border: 1px solid #c2c0bf;
          background: #ededed;
          position: absolute;
        }
        .vpc-pricing-dragged-text{
          font-size: 13px;
        }

        .vpc-drag-container {
          display: grid;
          grid-template-columns: 20px 10% 80%;
          align-items: center;
          width: 25%;
          word-break: break-word;
          overflow-wrap: break-word;
        }
        .vpc-drag-container svg {
            height: 18px;
        }
      </style>
      ${this.showPricingPage?html`
            <div class="vpc-pc-pricing">
              <div class="vpc-table-container">
                <vlocity-pc-prices-table
                  productId="${this.productId}"
                  context="priceContext"
                  lastPriorityColumn="Price List"
                  class="vpc-price-tab-table"
                ></vlocity-pc-prices-table>
                <vlocity-pc-promotions-table
                  productId="${this.productId}"
                  lastPriorityColumn="Price List, Type"
                  class="vpc-price-tab-table"
                ></vlocity-pc-promotions-table>
                <vlocity-pc-prices-table
                  productId="${this.productId}"
                  context="costContext"
                  lastPriorityColumn="Price List"
                  class="vpc-price-tab-table"
                ></vlocity-pc-prices-table>
              </div>
              <div class="vpc-side-bar-container vpc-tables-empty-state">
                <vlocity-pc-pricing-quick-add
                  productid="${this.productId}"
                ></vlocity-pc-pricing-quick-add>
                <div class="vpc-pricing-form-wrapper">
                  <div
                    class="vpc-pricing-tab-form-container vpc-form-container"
                  >
                    <vlocity-pc-existing-promotion-offer-form
                      productId="${this.productId}"
                    ></vlocity-pc-existing-promotion-offer-form>
                    <vlocity-pc-price-list-header></vlocity-pc-price-list-header>
                    <vlocity-pc-price-form></vlocity-pc-price-form>
                    <vlocity-pc-promotion-form></vlocity-pc-promotion-form>
                    <vlocity-pc-pricing-details-form></vlocity-pc-pricing-details-form>
                  </div>
                  <div class="vpc-context-rules-container">
                    <vlocity-pc-choose-context-rules-form></vlocity-pc-choose-context-rules-form>
                  </div>
                  <div class="vpc-pricing-forms-button-container">
                    <button
                      class="vpc-table-button vpc-promo-done slds-button slds-button_neutral"
                      @click="${()=>VlocityPCFormsService.donePricingFormButtonHandler(this)}"
                    >
                      ${translations.translate("PCDoneButton")}
                    </button>
                    <div class="vpc-spinner-container vpc-hide-side-bar-item">
                      <div
                        role="status"
                        class="slds-spinner slds-spinner_small slds-spinner_brand slds-align_absolute-center"
                      >
                        <span class="slds-assistive-text">Loading</span>
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                      </div>
                    </div>
                    <button
                      class="vpc-promo-cancel slds-button slds-button_neutral vpc-table-button"
                      @click="${e=>VlocityPCFormsService.cancelPricingFormButtonHandler(this)}"
                    >
                      ${translations.translate("PCCancelButton")}
                    </button>
                  </div>
                  <div
                    class="vpc-back-to-quickadds-button-container vpc-form-container"
                  >
                    <button
                      class="vpc-table-button vpc-back-to-quickadds-button slds-button slds-button_neutral"
                      @click="${()=>VlocityPCFormsService.cancelPricingFormButtonHandler(this)}"
                    >
                      ${translations.translate("PCBackToQuickAdds")}
                    </button>
                  </div>
                </div>
              </div>

              <!-- Delete Confirmation Prompt -->
              <vlocity-prompt
                titletext="${translations.translate("PCDeleteTitle")}"
                helptext="${translations.translate("PCConfirmMessage")}"
                confirmtext="${translations.translate("PCDeleteTitle")}"
                canceltext="${translations.translate("PCCancelButton")}"
                id="confirmationPrompt"
              >
              </vlocity-prompt>
            </div>
          `:""}
    `;}connectedCallback(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();VlocityPCUtils.getLabels(PCPricingLabels,vlocityPcConfig.userLocale).then(()=>{this.translations=VlocitySDK.translation.getInstance();this.initEventHandlers();this.refreshPricingPage();});}refreshPricingPage(){this.showPricingPage=!1;this.initComponent();setTimeout(()=>{this.showPricingPage=!0;this.initComponent();},0);}initComponent(){render(this.template(this.translations),this);}initEventHandlers(){this.editModeStateHandler={result:this.setEditModeState.bind(this)};this.getProductIdEventHandler={result:this.getProductIdEvent.bind(this)};this.enableDoneButtonHandler={result:this.enableDoneButton.bind(this)};this.resetAllFormsHandler={result:this.resetAllForms.bind(this)};this.expandFormHandlerObj={result:this.expandFormHandler.bind(this)};this.setDoneButtonWaitStateHandler={result:this.setDoneButtonWaitState.bind(this)};this.removeButtonWaitStateHandler={result:this.removeButtonWaitState.bind(this)};this.openDeletePromptHandler={deleteConfirm:this.openDeletePrompt.bind(this)};this.showPriceFormHandler={result:this.showPriceForm.bind(this)};this.cancelFormHandler={result:this.cancelPricingFormButtonHandler.bind(this)};this.showQuickAddPanelHandler={result:this.showQuickAddPanel.bind(this)};this.itemDraggedHandler={result:this.itemDragged.bind(this)};this.setEmptyTableStateHandler={result:this.setEmptyTableState.bind(this)};this.itemDragEndHandler={result:this.onDragEnd.bind(this)};pubsub.register("vpceditmodeon",this.editModeStateHandler);pubsub.register("vpcgetproductid",this.getProductIdEventHandler);pubsub.register("vpcenabledonebutton",this.enableDoneButtonHandler);pubsub.register("vpcresetallforms",this.resetAllFormsHandler);pubsub.register("vpcexpandform",this.expandFormHandlerObj);pubsub.register("vpcsetbuttonwaitstate",this.setDoneButtonWaitStateHandler);pubsub.register("vpcremovebuttonwaitstate",this.removeButtonWaitStateHandler);pubsub.register("vpcpricingdeleteconfirmation",this.openDeletePromptHandler);pubsub.register("vpcshowpriceform",this.showPriceFormHandler);pubsub.register("vpcshownewpromotionform",this.showPriceFormHandler);pubsub.register("vpccancelform",this.cancelFormHandler);pubsub.register("vpcshowquickaddpanel",this.showQuickAddPanelHandler);pubsub.register("vpcitemdragged",this.itemDraggedHandler);pubsub.register("vpcitemdragended",this.itemDragEndHandler);pubsub.register("vpctablepopulated",this.setEmptyTableStateHandler);}setEmptyTableState(){const tables=this.querySelectorAll(".vpc-price-tab-table");for(let table of tables){if(table.records&&table.records.length){this.querySelector(".vpc-side-bar-container").classList.remove("vpc-tables-empty-state");return;}}this.querySelector(".vpc-side-bar-container").classList.add("vpc-tables-empty-state");}itemDragged(e){this.appendGhostElementForDrag(e.detail.dragEvent,e.detail.item);setTimeout(()=>{this.showQuickAddPanel({show:!1});},100);}appendGhostElementForDrag(event,item){const draggedItem=item?JSON.parse(item):null,isGhostElementExists=document.body.querySelector("#vpc-quick-add_list-item-extra");if(draggedItem&&!isGhostElementExists){let ghostElement=document.createElement("div");ghostElement.id="vpc-quick-add_list-item-extra";ghostElement.classList.add("vpc-drag-container");ghostElement.innerHTML=`<svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="#dedcdb"
        id="drag_and_drop"
        width="100%"
        height="100%"
      >
        <path
          d="M9.2 1.8c1 0 1.9.9 1.9 1.9s-.9 1.8-1.9 1.8-1.8-.8-1.8-1.8.8-1.9 1.8-1.9zm5.6 0c1 0 1.8.9 1.8 1.9s-.8 1.8-1.8 1.8-1.9-.8-1.9-1.8.9-1.9 1.9-1.9zM9.2 7.4c1 0 1.9.8 1.9 1.8s-.9 1.9-1.9 1.9-1.8-.9-1.8-1.9.8-1.8 1.8-1.8zm5.6 0c1 0 1.8.8 1.8 1.8s-.8 1.9-1.8 1.9-1.9-.9-1.9-1.9.9-1.8 1.9-1.8zm-5.6 5.5c1 0 1.9.9 1.9 1.9s-.9 1.8-1.9 1.8-1.8-.8-1.8-1.8.8-1.9 1.8-1.9zm5.6 0c1 0 1.8.9 1.8 1.9s-.8 1.8-1.8 1.8-1.9-.8-1.9-1.8.9-1.9 1.9-1.9zm-5.6 5.6c1 0 1.9.8 1.9 1.8s-.9 1.9-1.9 1.9-1.8-.9-1.8-1.9.8-1.8 1.8-1.8zm5.6 0c1 0 1.8.8 1.8 1.8s-.8 1.9-1.8 1.9-1.9-.9-1.9-1.9.9-1.8 1.9-1.8z"
        ></path>
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="#1389ee"
        width="100%"
        height="100%">
        <path
          d="M23.1 11.7L19.4 8c-.2-.2-.5-.2-.7 0l-.7.7c-.2.2-.2.5 0 .7l1.2 1.1c.1.2 0 .6-.3.6H8.7L14.8 5c.2-.2.6 0 .6.3v1.6c0 .3.2.5.4.5h1c.3 0 .5-.2.5-.5V1.6c0-.3-.2-.5-.5-.5h-5.3c-.2 0-.4.2-.4.5v.9c0 .3.2.5.4.5h1.7c.3 0 .4.3.2.6L6 11H1.4c-.3 0-.5.3-.5.5v1c0 .3.3.5.5.5H6l7.5 7.4c.2.2 0 .6-.3.6h-1.6c-.3 0-.5.2-.5.5v.9c0 .2.2.4.5.5h5.2c.3 0 .5-.2.5-.5v-5.3c0-.3-.2-.4-.5-.4h-.9c-.3 0-.5.1-.5.4v1.7c0 .3-.3.4-.5.2l-6.1-6H19c.2 0 .4.4.2.6L18 14.7c-.2.2-.2.5 0 .7l.7.7c.2.2.5.2.7 0l3.7-3.7c.2-.2.2-.5 0-.7z"
        ></path></svg>
        <span class="vpc-pricing-dragged-text">${draggedItem.Name}</span>`;document.body.appendChild(ghostElement);event.dataTransfer.setDragImage(ghostElement,0,0);}}onDragEnd(){if(document.getElementById("vpc-quick-add_list-item-extra")){document.body.removeChild(document.getElementById("vpc-quick-add_list-item-extra"));}}showQuickAddPanel(e){if(e.show){this.querySelector(".vpc-side-bar-container").classList.add("vpc-show-quick-adds");}else{this.querySelector(".vpc-side-bar-container").classList.remove("vpc-show-quick-adds");}}removeButtonWaitState(){VlocityPCFormsService.removeButtonWaitState(this);}cancelPricingFormButtonHandler(){VlocityPCFormsService.cancelPricingFormButtonHandler(this);}setDoneButtonWaitState(){VlocityPCFormsService.setDoneButtonWaitState(this);}showPriceForm(){this.querySelector(".vpc-pricing-form-wrapper").classList.add("vpc-show-side-bar-item");this.querySelector(".vpc-pricing-tab-form-container").classList.add("vpc-show-side-bar-item");this.querySelector(".vpc-side-bar-container").classList.add("vpc-show-price-form");}openDeletePrompt(details){let confirmation=this.querySelector("#confirmationPrompt");confirmation.show().then(()=>{pubsub.fire("vpcpricingdelete","deleteConfirm",{eventDetails:details.deleteConfirm});});}expandFormHandler(){this.querySelector(".vpc-pc-pricing").classList.add("vpc-pc-pricing-edit-mode");}enableDoneButton(e){this.pricingDetailsFormReady=e.enable;}getProductIdEvent(){pubsub.fire("vpcproductid","result",{productId:this.productId});}setEditModeState(editMode){this.isEditMode=editMode.isOn;if(this.isEditMode){this.editModePriceListEntryId=editMode.priceListEntryId;this.querySelector(".vpc-pc-pricing").classList.add("vpc-pc-pricing-edit-mode");}else{this.querySelector(".vpc-pc-pricing").classList.remove("vpc-pc-pricing-edit-mode");}}createPriceListEntry(){this.productConsole.createPriceListEntry(this.getCreatePriceListInput()).then(response=>{// Dispatch event to let the tables that a new Price List Entry has been created
this.fireAddPriceListEntryEvent(response.result.Id);this.querySelector(".vpc-promo-done").classList.remove("vpc-done-button-wait-state");this.showContextRules(response.result.Id);});}fireAddPriceListEntryEvent(priceListEntryId){pubsub.fire("vpcaddpricelistentry","result",{context:this.querySelector("vlocity-pc-pricing-details-form").context,priceListEntryId});}showContextRules(id){// After the Price List Entry is created, the Context Rules
// form should show including the "Back to Quickadds" button
this.resetAllForms();this.querySelector(".vpc-back-to-quickadds-button-container").classList.add("vpc-show-side-bar-item");this.querySelector(".vpc-pricing-tab-form-container").classList.remove("vpc-show-side-bar-item");this.querySelector(".vpc-pricing-forms-button-container").classList.add("vpc-hide-side-bar-item");const contextRulesForm=this.querySelector("vlocity-pc-choose-context-rules-form");contextRulesForm.classList.add("vpc-show-side-bar-item");contextRulesForm.classList.remove("vpc-hide-side-bar-item");contextRulesForm.setAttribute("priceListEntryId",id);}getCreatePriceListInput(){switch(this.querySelector("vlocity-pc-pricing-details-form").context){case"priceContext":return this.createPriceCostPriceListEntryInput();case"costContext":return this.createPriceCostPriceListEntryInput();case"adjustmentContext":return this.createAjustmentOverridePriceListEntryInput();case"overrideContext":return this.createAjustmentOverridePriceListEntryInput();}}createPriceCostPriceListEntryInput(){if(this.isEditMode){return this.productConsole.createEditPriceListEntryInput(this.getPriceListEntryObject());}return this.productConsole.createPriceListEntryInput(this.getPriceListEntryObject());}createAjustmentOverridePriceListEntryInput(){if(this.isEditMode){return this.productConsole.createEditPromotionOfferPriceListEntryInput(this.getPriceListEntryObject());}return this.productConsole.createPromotionOfferPriceListEntryInput(this.getPriceListEntryObject());}getPriceListEntryObject(){const pricingDetailsForm=this.querySelector("vlocity-pc-pricing-details-form"),pricingVariableCombo=pricingDetailsForm.querySelector(".vpc-pricing-variable"),datesForm=this.querySelector("vlocity-pc-effective-dates-form");if(pricingVariableCombo){this.pricingVariableId=pricingVariableCombo.value;}const startDateEle=datesForm.querySelector(".vpc-start-date"),endDateEle=datesForm.querySelector(".vpc-end-date"),startDate=startDateEle&&startDateEle.value?VlocityPCUtils.getUTCTimeStamp(startDateEle.value,"datetime"):null,endDate=endDateEle&&endDateEle.value?VlocityPCUtils.getUTCTimeStamp(endDateEle.value,"datetime"):null;if("priceContext"===pricingDetailsForm.context||"costContext"===pricingDetailsForm.context){const priceListEntryObject={productId:this.productId,pricingElementId:this.querySelector("vlocity-pc-pricing-details-form").getAttribute("pricingElementId"),isBasePrice:!this.querySelector(".vpc-price-type-checkbox").querySelector("input").checked,displayText:this.querySelector(".vpc-pricing-form-text-area").value,isActive:this.querySelector(".vpc-adjustment-override-switch").value,startDate:isNaN(startDate)?null:startDate,endDate:isNaN(endDate)?null:endDate};if(this.isEditMode){priceListEntryObject.priceListEntryId=this.editModePriceListEntryId;return priceListEntryObject;}priceListEntryObject.priceListId=this.querySelector(".vpc-price-list-combobox").value;return priceListEntryObject;}const priceListEntryObject={pricingVariableId:pricingDetailsForm.pricingVariableId,promotionId:pricingDetailsForm.existingPromotion||pricingDetailsForm.promotionId||"",promotionItemId:pricingDetailsForm.promotionItemId,pricingElementId:pricingDetailsForm.pricingElementId,isBasePrice:!0,isOverride:"overrideContext"===pricingDetailsForm.context?!0:!1,productId:this.productId,displayText:pricingDetailsForm.existingPromotion||pricingDetailsForm.existingOffer||pricingDetailsForm.offerId?this.querySelector(".vpc-header-display-name").value:this.querySelector(".vpc-adjustment-override-name").value,offerId:pricingDetailsForm.existingOffer||pricingDetailsForm.offerId||"",timePlanId:pricingDetailsForm.timePlanId||"",timePolicyId:pricingDetailsForm.timePolicyId||"",isActive:this.querySelector(".vpc-adjustment-override-switch").value,startDate:isNaN(startDate)?null:startDate,endDate:isNaN(endDate)?null:endDate};if(this.isEditMode){priceListEntryObject.priceListEntryId=this.editModePriceListEntryId;return priceListEntryObject;}priceListEntryObject.priceListId=this.querySelector(".vpc-price-list-combobox").value;return priceListEntryObject;}resetAllForms(){this.querySelector("vlocity-pc-pricing-details-form").resetForm();this.querySelector("vlocity-pc-price-list-header").resetForm();this.querySelector("vlocity-pc-price-form").resetForm();this.querySelector("vlocity-pc-effective-dates-form").resetForm();this.querySelector("vlocity-pc-promotion-form").resetForm();VlocityPCFormsService.resetDoneButton(this);this.querySelector("vlocity-pc-pricing-quick-add").getQuickAddPricingProperties();this.isEditMode=!1;this.pricingDetailsFormReady=!1;}resetContextRules(){const contextRulesContainer=this.querySelector(".vpc-context-rules-container");render(html``,contextRulesContainer);// Re-render the form from scratch
const form=html`
      <vlocity-pc-choose-context-rules-form></vlocity-pc-choose-context-rules-form>
    `;render(form,contextRulesContainer);}toggleForm(){const addOrRemoveClass=VlocityPCUtils.addOrRemoveClassQuerySelector;// Hides the main form wrapper and hides the "Back to Quickadds" button
addOrRemoveClass([".vpc-pricing-form-wrapper",".vpc-back-to-quickadds-button-container"],"vpc-show-side-bar-item","remove","querySelector",this);// Shows Quick Adds and hides the form "Done" and "Cancel" buttons
addOrRemoveClass(["vlocity-pc-pricing-quick-add",".vpc-pricing-forms-button-container"],"vpc-hide-side-bar-item","remove","querySelector",this);this.querySelector(".vpc-pc-pricing").classList.remove("vpc-pc-pricing-edit-mode");}disconnectedCallback(){pubsub.unregister("vpceditmodeon",this.editModeStateHandler);pubsub.unregister("vpcgetproductid",this.getProductIdEventHandler);pubsub.unregister("vpcenabledonebutton",this.enableDoneButtonHandler);pubsub.unregister("vpcresetallforms",this.resetAllFormsHandler);pubsub.unregister("vpcexpandform",this.expandFormHandlerObj);pubsub.unregister("vpcsetbuttonwaitstate",this.setDoneButtonWaitStateHandler);pubsub.unregister("vpcremovebuttonwaitstate",this.removeButtonWaitStateHandler);pubsub.unregister("vpcpricingdeleteconfirmation",this.openDeletePromptHandler);pubsub.unregister("vpcshowpriceform",this.showPriceFormHandler);pubsub.unregister("vpcshownewpromotionform",this.showPriceFormHandler);pubsub.unregister("vpccancelform",this.cancelFormHandler);pubsub.unregister("vpcshowquickaddpanel",this.showQuickAddPanelHandler);pubsub.unregister("vpcitemdragged",this.itemDraggedHandler);pubsub.unregister("vpcitemdragended",this.itemDragEndHandler);pubsub.unregister("vpctablepopulated",this.setEmptyTableStateHandler);}static get observedAttributes(){return["productId"];}attributeChangedCallback(name,oldValue,newValue){switch(name){case"productId":this._productId=newValue;break;}}get productId(){return this.getAttribute("productId");}set productId(value){this.setAttribute("productId",value);}get sessionId(){return this.getAttribute("sessionId");}set sessionId(value){this.setAttribute("sessionId",value);}get sfUrl(){return this.getAttribute("sfUrl");}set sfUrl(value){this.setAttribute("sfUrl",value);}}window.customElements.define(VlocityPcPricing.is,VlocityPcPricing);class VlocityPcProductPropertyValue extends HTMLElement{static get is(){return"vlocity-pc-product-property-value";}constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.debounceRender=VlocityPCUtils.debounce(this.render,300,this);}connectedCallback(){this.render();}template(){switch(this.dataType.toUpperCase()){case"TEXT":case"STRING":return this.getTextHtml();case"DATE":return this.getDateHTML();case"DATETIME":return this.getDateTimeHTML();case"BOOLEAN":case"CHECKBOX":return this.getCheckboxHTML();case"PICKLIST":return this.getPicklistHTML();case"MULTI PICKLIST":return this.getPicklistHTML(!0);case"TEXTAREA":return this.getTextareaHTML();case"NUMBER":case"PERCENTAGE":case"PERCENT":case"CURRENCY":return this.getNumberHTML();case"REFERENCE":return this.getLookupHTML();}}get value(){const dataTypeUpperCase=this.dataType.toUpperCase(),val=this.getAttribute("value");if("CHECKBOX"===dataTypeUpperCase||"BOOLEAN"===dataTypeUpperCase){return"true"===val;}else{return val;}}set value(propValue){this.setAttribute("value",propValue);}get dataType(){return this.getAttribute("datatype");}get propertyType(){return this.getAttribute("propertytype");}get picklistItems(){return this._picklistItems;}get picklistId(){return this.getAttribute("picklistid");}get lookupObjectName(){return this.getAttribute("lookupobjectname");}set picklistItems(options){this._picklistItems=options;this.render();}get attributeId(){return this.getAttribute("attributeid");}get fieldApiName(){return this.getAttribute("fieldapiname");}get isRequired(){return this.hasAttribute("required");}get requiredErrorMessage(){return this.getAttribute("requirederrormessage");}getTextHtml(){return html`
      <vlocity-input type="text" value=${this.value||""}></vlocity-input>
      <div class="slds-text-color_error vpc-hidden vpc-req-error">
        ${this.requiredErrorMessage}
      </div>
    `;}getNumberHTML(){return html`
      <vlocity-input type="number" value=${this.value||""}></vlocity-input>
      <div class="slds-text-color_error vpc-hidden vpc-req-error">
        ${this.requiredErrorMessage}
      </div>
    `;}getDateHTML(){return html`
      <vlocity-datepicker value=${this.value||""} format="MM/dd/yyyy">
      </vlocity-datepicker>
      <div class="slds-text-color_error vpc-hidden vpc-req-error">
        ${this.requiredErrorMessage}
      </div>
    `;}getDateTimeHTML(){return html`
      <vlocity-datepicker
        value=${this.value||""}
        format="MM/dd/yyyy hh:mm 12h"
        showTimePicker
        showAMPM
      >
      </vlocity-datepicker>
      <div class="slds-text-color_error vpc-hidden vpc-req-error">
        ${this.requiredErrorMessage}
      </div>
    `;}getCheckboxHTML(){return html`
      <vlocity-checkbox checked=${this.value}></vlocity-checkbox>
    `;}getPicklistHTML(isMultipicklist){if("attribute"===this.propertyType){return html`
        <vlocity-pc-details-picklist
          .options=${this.picklistItems}
          attributeid=${this.attributeId}
          ?multipicklist=${isMultipicklist}
          selectedoption=${this.value||""}
        >
        </vlocity-pc-details-picklist>

        <div class="slds-text-color_error vpc-hidden vpc-req-error">
          ${this.requiredErrorMessage}
        </div>
      `;}else{return html`
        <vlocity-combobox
          options="${this.picklistItems?JSON.stringify(this.picklistItems):"[]"}"
          iconbaseurl="/_slds/icons/"
          value=${this.value}
        ></vlocity-combobox>
        <div class="slds-text-color_error vpc-hidden vpc-req-error">
          ${this.requiredErrorMessage}
        </div>
      `;}}getTextareaHTML(){return html`
      <vlocity-textarea value="${this.value||""}"></vlocity-textarea>
      <div class="slds-text-color_error vpc-hidden vpc-req-error">
        ${this.requiredErrorMessage}
      </div>
    `;}getLookupHTML(){return html`
      <vlocity-pc-lookup-field
        .value="${JSON.parse(this.value)}"
        objectname="${this.lookupObjectName}"
      >
      </vlocity-pc-lookup-field>
    `;}render(){render(this.template(),this);this.setupChangeEvents();}setupChangeEvents(){const input=this.querySelector("vlocity-input")||this.querySelector("vlocity-datepicker")||this.querySelector("vlocity-combobox")||this.querySelector("vlocity-textarea"),checkbox=this.querySelector("vlocity-checkbox"),attrPicklist=this.querySelector("vlocity-pc-details-picklist"),lookupField=this.querySelector("vlocity-pc-lookup-field");if(input){input.addEventListener("onvaluechange",evt=>{this.value="VLOCITY-DATEPICKER"===evt.target.nodeName?evt.target.value:evt.detail.value();this.validateRequired();});}else if(checkbox){checkbox.addEventListener("onvaluechange",()=>{this.value=checkbox.checked;this.validateRequired();});}else if(attrPicklist){attrPicklist.addEventListener("onvaluechange",evt=>{this.value=evt.detail.value;this.validateRequired();});}else if(lookupField){lookupField.addEventListener("onvaluechange",evt=>{if(evt.detail&&evt.detail.value){this.value=JSON.stringify(evt.detail.value);this.validateRequired();}});}}validateRequired(){const value=this.value,errorMessageDiv=this.querySelector(".vpc-req-error");if(this.isRequired&&(null===value||value===void 0||""===value)){if(errorMessageDiv){errorMessageDiv.classList.remove("vpc-hidden");}}else{if(errorMessageDiv){errorMessageDiv.classList.add("vpc-hidden");}}}hasRequiredError(){const value=this.value;return this.isRequired&&(null===value||value===void 0||""===value);}static get observedAttributes(){return["attributeid","datatype","value"];}attributeChangedCallback(name){if("value"===name){//In case of value, this can be triggered by user typing into the input field.
// To avoid too many renders, we need to debounce that.
this.debounceRender();}else{setTimeout(()=>{this.render();});}}}window.customElements.define(VlocityPcProductPropertyValue.is,VlocityPcProductPropertyValue);var vlocityPcProductPropertyValue={VlocityPcProductPropertyValue:VlocityPcProductPropertyValue};class VlocityPcProductAttributes extends HTMLElement{static get is(){return"vlocity-pc-product-attributes";}constructor(){super();this.translations=VlocitySDK.translation.getInstance();this._attrCategoryMap=[];}get attrCategoryMap(){return this._attrCategoryMap;}set attrCategoryMap(value){this._attrCategoryMap=value;if(this.componentMounted){this.render();}}get productId(){return this.getAttribute("productid");}connectedCallback(){this.style.display="block";this.render();this.componentMounted=!0;}render(){render(this.template(),this);}template(){const attrCategories=Object.keys(this.attrCategoryMap);return html`
      <style>
        .vpc-attribute-category_item-selected {
          border-left: 4px solid var(--vpc-primary-color);
          background-color: var(--vpc-selected-item-color);
        }
        .via-slds .vpc-attribute_action-icon {
          height: 18px;
          width: 18px;
        }
        .via-slds .vpc-attribute_action-icon_active {
          fill: var(--vpc-primary-color);
        }
        .vpc-attribute-category_heading {
          text-transform: uppercase;
          color: var(--vpc-primary-text-color);
        }

        .vpc-attribute-category_item {
          display: grid;
          grid-template-columns: 25% 38% 37%;
          margin-bottom: 5px;
          padding: 5px;
        }
      </style>
      ${0<attrCategories.length?html`
            <div>
              ${attrCategories.map(categoryName=>{return html`
                  <div
                    class="vpc-attribute-category_heading slds-m-top_medium slds-m-bottom_medium"
                  >
                    ${categoryName}
                  </div>

                  ${this.attrCategoryMap[categoryName].map((attribute,idx)=>{const attrAssignment=attribute.attributeAssignment,attributeObj=attribute.attribute,isConfigurable=attrAssignment?attrAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")]:!1,isHidden=attrAssignment?attrAssignment[VlocityPCUtils.getCustomFieldName("IsHidden")]:!1,isReadonly=attrAssignment?attrAssignment[VlocityPCUtils.getCustomFieldName("IsReadOnly")]:!1;return html`
                      <div
                        class="vpc-attribute-category_item ${this.isRowSelected(categoryName,idx)?"vpc-attribute-category_item-selected":""}"
                      >
                        <div class="vpc-attribute_link">
                          ${null!==attrAssignment&&attrAssignment[VlocityPCUtils.getCustomFieldName("IsRequired")]?html`
                                <span
                                  title="Required"
                                  class="vpc-attribute_required"
                                  >*</span
                                >
                              `:""}
                          <a
                            href="javascript:void(0)"
                            @click=${()=>{this.handleAttributeClick(attribute,categoryName,idx);}}
                            >${attributeObj.Name}</a
                          >
                        </div>

                        <div>
                          <vlocity-pc-product-property-value
                            datatype="${attrAssignment[VlocityPCUtils.getCustomFieldName("ValueDataType")]}"
                            propertyType="attribute"
                            attributeid="${attributeObj.Id}"
                            ?required=${null!==attrAssignment&&attrAssignment[VlocityPCUtils.getCustomFieldName("IsRequired")]}
                            requirederrormessage="${this.translations.translate("RequiredField")}"
                            attributeassignmentid="${null!==attrAssignment?attrAssignment.Id:""}"
                            .picklistItems=${attribute.picklistItems}
                            value="${this.getAttributeValue(attrAssignment)}"
                            picklistId=${attrAssignment[VlocityPCUtils.getCustomFieldName("PicklistId")]}
                          >
                          </vlocity-pc-product-property-value>
                        </div>

                        <div>
                          <span
                            class="vpc-attribute_action-icons slds-float_right"
                          >
                            <span
                              class="slds-text-link_reset slds-m-right_x-small"
                              @click=${()=>this.toggleSetting("isVisible",attributeObj.Id,idx,categoryName)}
                            >
                              <vlocity-tooltip
                                iconbaseurl="/_slds/icons/"
                                icon="utility:preview"
                                tooltiptype="iconlink"
                                nubbinposition="bottom"
                                iconsize="x-small"
                                iconclass="vpc-attribute_action-icon ${isHidden?"slds-icon-text-default":"vpc-attribute_action-icon_active"}"
                                value="${this.translations.translate("PCVisibleIcon")}"
                              >
                              </vlocity-tooltip>
                            </span>

                            <span
                              class="slds-text-link_reset slds-m-right_x-small"
                            >
                              <vlocity-tooltip
                                iconbaseurl="/_slds/icons/"
                                tooltiptype="iconlink"
                                nubbinposition="bottom"
                                iconsize="x-small"
                                value="${this.translations.translate("PCConfigurableIcon")}"
                                iconclass="vpc-attribute_action-icon ${isConfigurable?"vpc-attribute_action-icon_active":"slds-icon-text-default"}"
                                icon="utility:setup"
                              >
                              </vlocity-tooltip>
                            </span>
                            <span
                              class="slds-text-link_reset"
                              @click=${()=>this.toggleSetting("isReadonly",attributeObj.Id,idx,categoryName)}
                            >
                              <vlocity-tooltip
                                iconbaseurl="/_slds/icons/"
                                icon="utility:lock"
                                tooltiptype="iconlink"
                                nubbinposition="bottom"
                                iconsize="x-small"
                                value="${this.translations.translate("PCReadOnlyIcon")}"
                                icon="utility:setup"
                                iconclass="vpc-attribute_action-icon ${isReadonly?"vpc-attribute_action-icon_active":"slds-icon-text-default"}"
                              >
                              </vlocity-tooltip>
                            </span>
                          </span>
                        </div>
                      </div>
                    `;})}
                `;})}
            </div>
          `:html`
            <div class="slds-m-top_medium slds-align_absolute-center">
              ${this.translations.translate("PCNoAttrsToShow")}
            </div>
          `}
    `;}getAttributeValue(attrAssignment){const valueFieldName=VlocityPCUtils.getCustomFieldName("Value");return attrAssignment&&attrAssignment[valueFieldName]?attrAssignment[valueFieldName]:"";}toggleSetting(settingName,attrId,index,categoryName){const sdk=VlocitySDK.productconsole.getInstance(),input=sdk.createUpdateSingleAttributeInput();input.productId=this.productId;input.attributeId=attrId;const attrAssignment=this.attrCategoryMap[categoryName][index].attributeAssignment;if(attrAssignment){input.isVisible=!attrAssignment[VlocityPCUtils.getCustomFieldName("IsHidden")];input.isConfigurable=attrAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")];input.isReadonly=attrAssignment[VlocityPCUtils.getCustomFieldName("IsReadOnly")];}else{input.isVisible=!0;input.isConfigurable=!1;input.isReadonly=!1;}input[settingName]=!input[settingName];VlocityPCUtils.showSpinner();sdk.updateSingleAttribute(input).then(response=>{if("INVOKE-200"!==response.errorCode){VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),response.error,"error");}else{if(!attrAssignment){this.attrCategoryMap[categoryName][index].attributeAssignment=response.result;}else{const readOnlyFieldName=VlocityPCUtils.getCustomFieldName("IsReadOnly"),hiddenFieldName=VlocityPCUtils.getCustomFieldName("IsHidden"),configurableFieldName=VlocityPCUtils.getCustomFieldName("IsConfigurable"),result=response.result;attrAssignment[readOnlyFieldName]=result[readOnlyFieldName];attrAssignment[hiddenFieldName]=result[hiddenFieldName];attrAssignment[configurableFieldName]=result[configurableFieldName];}this.render();this.dispatchEvent(new CustomEvent("vpcattributesettingchanged",{detail:{settingName:settingName,settingValue:input[settingName]}}));}}).catch(err=>{VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),err,"error");}).finally(()=>{VlocityPCUtils.hideSpinner();});}handleAttributeClick(attribute,categoryName,idx){this.selectedCategoryName=categoryName;this.selectedAttrIndex=idx;this.dispatchEvent(new CustomEvent("vpcdetailsattributeclicked",{detail:{attribute:attribute,categoryName:categoryName,attrIndex:idx}}));this.render();}isRowSelected(categoryName,idx){return this.selectedCategoryName===categoryName&&idx===this.selectedAttrIndex;}clearSelection(){this.selectedCategoryName=null;this.selectedAttrIndex=null;this.render();}}window.customElements.define(VlocityPcProductAttributes.is,VlocityPcProductAttributes);class VlocityPcProductFields extends HTMLElement{constructor(){super();this.translation=VlocitySDK.translation.getInstance();}static get is(){return"vlocity-pc-product-fields";}set fields(value){this._fields=value;if(this.componentMounted){setTimeout(()=>{this.render();});}}set fieldValues(value){this._fieldValues=value;}get fields(){return this._fields;}get fieldValues(){return this._fieldValues;}set fieldPicklists(value){this._fieldPicklists=value;}get fieldPicklists(){return this._fieldPicklists;}get describeObject(){return this._objectDescription;}set describeObject(value){this._objectDescription=value;}render(){render(this.template(),this);}template(){return html`
      <style>
        .vpc-product-fields_row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-gap: 10px;
        }
      </style>
      ${0<this.fields.length?html`
            <div class="vpc-product-fields_row">
              ${this.fields.map(field=>{const picklistKey=field.objectFieldAttribute[VlocityPCUtils.getCustomFieldName("FieldApiName")];return html`
                  <div>
                    <div>${field.field.label}</div>
                    <div>
                      <vlocity-pc-product-property-value
                        datatype="${field.field.type}"
                        propertyType="field"
                        .picklistItems=${this.fieldPicklists[picklistKey]}
                        fieldapiname=${this.getFieldApiName(field)}
                        value=${this.getFieldValue(field)}
                        lookupobjectname=${this.getLookupObjectName(field)}
                      ></vlocity-pc-product-property-value>
                    </div>
                  </div>
                `;})}
            </div>
          `:html`
      <div class="slds-m-top_medium slds-align_absolute-center">
          ${this.translation.translate("PCNoFieldsToShow")}
      </div>
    </div>`}
    `;}connectedCallback(){this.style.display="block";this.render();this.componentMounted=!0;}getFieldValue(field){const fieldApiName=this.getFieldApiName(field);if("REFERENCE"===field.field.type.toUpperCase()){const refFieldName=fieldApiName.slice(0,fieldApiName.length-1)+"r";return JSON.stringify(this.fieldValues[refFieldName]||{});}return this.fieldValues[fieldApiName]||"";}getFieldApiName(field){const fieldApiNameKey=VlocityPCUtils.getCustomFieldName("FieldApiName");return field.objectFieldAttribute[fieldApiNameKey];}getLookupObjectName(field){if("REFERENCE"===field.field.type){const fieldApiName=this.getFieldApiName(field),fieldDescriptor=this.describeObject.fields.find(field=>field.name===fieldApiName);if(fieldDescriptor&&"reference"===fieldDescriptor.type){return fieldDescriptor.referenceTo[0];}else{return"";}}else{return"";}}}window.customElements.define(VlocityPcProductFields.is,VlocityPcProductFields);class VlocityPcProductDetails extends HTMLElement{static get is(){return"vlocity-pc-product-details";}constructor(){super();this.showAttributes=!0;this.showFields=!1;this.translations=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance().config.datasource;this.selectedAttribute=null;this.images=[];}template(){return html`
      <style>
        .vpc-product-details {
          background-color: var(--vpc-primary-bg-color);
        }

        .vpc-product-details-grid {
          display: grid;
          grid-template-columns: 65% 35%;
        }

        .vpc-product-details vlocity-pc-field-layout {
          overflow-x: hidden;
          border-radius: 4px;
          margin-bottom: 20px;
        }

        .vpc-product-details_right {
          background-color: var(--vpc-secondary-bg-color);
        }

        .vpc-product-images {
          background-color: var(--vpc-secondary-bg-color);
          padding: 20px 20px 50px;
        }
        .via-slds .vpc-product-details .vpc-refresh-icon {
          fill: #8e8e8d;
        }
        .vpc-product-details_left,
        .vpc-product-details_right {
          height: 100vh;
          overflow-y: scroll;
        }
        .disable-pointer-events {
          pointer-events: none;
          opacity: 0.6;
        }
      </style>
      <div
        class="vpc-product-details slds-border_top slds-border_bottom slds-border_left slds-border_right vpc-product-details-grid"
      >
        <div class="slds-p-around_large vpc-product-details_left">
          <vlocity-pc-field-layout
            objectId="${this.productId}"
            objectName="Product2"
            enableblockstyles
          ></vlocity-pc-field-layout>
        </div>
        ${this.selectedAttributeId?html`
              <div class="vpc-product-details_right slds-border_left">
                <vlocity-pc-edit-attribute
                  attributeid=${this.selectedAttributeId}
                  objectid=${this.productId}
                ></vlocity-pc-edit-attribute>
              </div>
            `:html`
              <div class="vpc-product-images">
                <div class="slds-clearfix">
                  <div class="slds-float_right slds-m-right_x-small">
                    <vlocity-tooltip
                      tooltiptype="iconlink"
                      iconbaseurl="/_slds/icons/"
                      nubbinposition="top"
                      icon="utility:refresh"
                      iconclass="vpc-refresh-icon"
                      iconsize="small"
                      value="${this.translations.translate("Refresh")}"
                      @click="${()=>{this.getImages().then(response=>{this.onGetImages(response);});}}"
                    ></vlocity-tooltip>
                  </div>
                </div>
                ${this.images&&0<this.images.length?html`
                      <vlocity-pc-attachments-preview
                        nomodal
                      ></vlocity-pc-attachments-preview>
                    `:html`
                      <div class="slds-align_absolute-center">
                        <vlocity-icon
                          baseurl="/_slds/icons/"
                          icon="utility:image"
                          extraclass="slds-m-top_medium slds-m-bottom_medium vpc-img-placeholder-icon slds-icon-text-light"
                        >
                        </vlocity-icon>
                      </div>
                      <div
                        class="slds-align_absolute-center slds-text-color_weak"
                      >
                        ${this.translations.translate("PCPreviewAttachmentsPlaceholder")}
                      </div>
                    `}
              </div>
            `}
      </div>
    `;}connectedCallback(){this.productConsole=VlocitySDK.productconsole.getInstance();this.style.display="block";const newProductTabId=window.sessionStorage.getItem("newProductTabId");if(newProductTabId){window.sessionStorage.removeItem("newProductTabId");}else{this.getImages().then(response=>{this.onGetImages(response);});}VlocityPCUtils.getLabels(PCProductDetailsLabels,vlocityPcConfig.userLocale).then(()=>{this.render();this.setupSubscriptions();});}render(){render(this.template(),this);}get productId(){return this.getAttribute("productId");}publishProduct(){const input=this.productConsole.createPublishProductInput();input.productId=this.productId;return this.productConsole.publishProduct(input).then(response=>{if(response.result&&"OK"!==response.result.error){VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),response.result.error,"error");}}).catch(err=>{VlocityPCUtils.openToast(this.translations.translate("PCToastErrorTitle"),err.message,"error");});}refreshSalesforceTab(){sforce.console.getFocusedPrimaryTabId(result=>{sforce.console.refreshPrimaryTabById(result.id,!0,null,!0);});}getImages(){const sdk=VlocitySDK.productconsole.getInstance(),input=sdk.createGetVlocityAttachmentsInput();input.productId=this.productId;input.sortObject.sortBy=VlocityPCUtils.getCustomFieldName("SequenceNumber")+" NULLS LAST,CreatedDate";return sdk.getVlocityAttachments(input);}showImages(images){if(images&&0<images.length){setTimeout(()=>{const preview=this.querySelector("vlocity-pc-attachments-preview");if(preview){preview.showPreview(images,0);}});}}onGetImages(response){this.images=[];response.records.forEach(image=>{const contentType=image[VlocityPCUtils.getCustomFieldName("ContentType")],isSafariVideo=VlocityPCUtils.isSafariBrowser()&&"Video"===contentType&&!VlocityPCUtils.isAbsoluteUrl(image[VlocityPCUtils.getCustomFieldName("UrlLong")]);if(contentType&&"File"!==contentType&&!isSafariVideo){this.images.push(image);}});this.render();this.showImages(this.images);}refresh(){this.selectedAttributeId=null;this.render();const fieldLayout=this.querySelector("vlocity-pc-field-layout");fieldLayout&&fieldLayout.refresh();this.getImages().then(response=>{this.onGetImages(response);});}showSaveChanges(){const categories=Object.keys(this.attrCategoryMap);return this.fields&&0<this.fields.length||categories&&0<categories.length;}setupSubscriptions(){this.sectionElementHandler={settings:evt=>{this.selectedAttributeId=evt.attributeId;this.selectedAttributeElement=evt.target;this.toggleAttributeListPanelAvailability();this.highlightSelectedAttribute();this.render();}};pubsub.register("vpcsectionelement",this.sectionElementHandler);this.editAttrHandler={done:evt=>{this.publishProduct();this.selectedAttributeId=null;this.render();this.selectedAttributeElement.sectionElement.value=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("Value")];let validValues=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("ValidValuesData")];if(validValues){validValues=JSON.parse(validValues).map(item=>{return{label:item.displayText,value:item.value};});this.selectedAttributeElement.sectionElement.options=validValues;}this.selectedAttributeElement.sectionElement.isRequired=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("IsRequired")];this.selectedAttributeElement.sectionElement.isRuntimeConfigurable=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("IsConfigurable")];this.selectedAttributeElement.sectionElement.isRuntimeReadOnly=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("IsReadOnly")];this.selectedAttributeElement.sectionElement.isRuntimeHidden=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("IsHidden")];this.selectedAttributeElement.sectionElement.hasRule=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("HasRule")];this.selectedAttributeElement.sectionElement.isActiveAssignment=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("IsActiveAssignment")];this.selectedAttributeElement.setFormattedDate(this.selectedAttributeElement.sectionElement);this.selectedAttributeElement.sectionElement.excludedPicklistValues=evt.attributeAssignment[VlocityPCUtils.getCustomFieldName("ExcludedPicklistValues")];this.selectedAttributeElement.render();pubsub.fire("vpcattributeupdated","result");this.showImages(this.images);this.highlightSelectedAttribute();this.toggleAttributeListPanelAvailability();},cancel:evt=>{this.selectedAttributeId=null;this.showImages(this.images);this.highlightSelectedAttribute();this.toggleAttributeListPanelAvailability();this.render();}};pubsub.register("vpceditattribute",this.editAttrHandler);this.objDetailsHandler={saveSuccess:()=>{this.checkObjectTypeUpdate();},layoutLoaded:()=>{this.layoutLoaded();}};pubsub.register("vpcfieldlayout",this.objDetailsHandler);}highlightSelectedAttribute(){const selectedAttribute=this.querySelector(".vpc-selected-element");if(selectedAttribute){selectedAttribute.classList.remove("vpc-selected-element");}if(this.selectedAttributeId&&this.querySelector("#attribute-"+this.selectedAttributeId)){this.querySelector("#attribute-"+this.selectedAttributeId).classList.add("vpc-selected-element");}}disconnectedCallback(){pubsub.unregister("vpcsectionelement",this.sectionElementHandler);pubsub.unregister("vpceditattribute",this.editAttrHandler);pubsub.unregister("vpcfieldlayout",this.objDetailsHandler);}checkObjectTypeUpdate(){const objType=this.querySelector(`vlocity-pc-layout-section-element[fieldname="${VlocityPCUtils.getCustomFieldName("ObjectTypeId")}"`),originalObjType=objType&&objType.getAttribute("original");if(originalObjType&&objType.sectionElement.value!==originalObjType){const layout=this.querySelector("vlocity-pc-field-layout");layout&&layout.refresh();}else{this.publishProduct();}}/**
     * For new products which were just created, we have to publish them if they are not already published.
     */layoutLoaded(){this.sdk.apexRemote({className:"ProductConsoleControllerV2",methodName:"invokeMethod",paramsArray:["publishProduct",JSON.stringify({productId:this.productId})]}).execute();}toggleAttributeListPanelAvailability(){const attributeListPanel=this.querySelector(".vpc-product-details_left");if(attributeListPanel.classList.contains("disable-pointer-events")){attributeListPanel.classList.remove("disable-pointer-events");}else{attributeListPanel.classList.add("disable-pointer-events");}}}window.customElements.define(VlocityPcProductDetails.is,VlocityPcProductDetails);const PCProductStructureLabels=["Actions","Cardinality","Default","Delete","Edit","EditRelationship","GroupCardinality","HasRule","Hidden","Max","Min","Name","PCInvalidInputValue","PCAttributesSectionTitle","PCBaseCardinalityOverrideMessage","PCCancelButton","PCCardinalityMaxInvalid","PCCardinalityMinInvalid","PCCardinalityOverrideMessage","PCChildren","PCCollapseHierarchy","PCConfirmMessage","PCOpenInNewTab","PCCreateOverride","PCDataInformation","PCDefaultProductsDisplayedHelpText","PCDeleteOverride","PCDisplayName","PCDoneButton","PCEditAttributeSectionTitle","PCEncrypted","PCFlags","PCGroupCardinalityInvalid","PCGroupCardinalityOverrideMessage","PCIsConfigurable","PCLoadingHierarchy","PCNoItemsToShow","PCNoCompatibleProducts","PCNonAssetizable","PCNonOverridableBehavior","PCNonTranslatable","PCOriginal","PCOverridableBehavior","PCOverriddenValue","PCOverride","PCOverrideCreated","PCOverrideDeleted","PCPrimaryInformation","PCProductStructureQuickAddHelpMessage","PCQuickAddProductsHeading","PCQuickAddSearchPlaceholder","PCQuickAddTitle","PCReqFieldMissing","PCSaveButton","PCStructureDecompositionTitle","PCStructureNoChildMessage","PCToastErrorTitle","PCToastSuccessMessage","PCToastSuccessTitle","PCWarningTitle","PCValue","PCValueDataType","PCValueDropdownPlaceholder","PCSpecificationType","PCProductSpec","PCVersionName","PCVirtualItem","PCZoomActionsTitle","ProductName","Quantity2","ReadOnly","RelationshipType","Required","RequiredField","SearchResults","PCChooseExistingOrCreatePromotion","PCPromotion","PCOffer","PCPriceList","PCDisplayNameCharacterLimit","PCVirtualPrice","PCDescription","PCPromoCode","PCPricingDetails","PCStartDate","PCEndDate","PCSelectPriceList","PCCreatePromotion","PCChooseExistingPromotion","PCChooseExistingOffer","PCCreateAdjustmentExistingPromotion","PCCreateOverrideExistingPromotion","PCCharge","PCPromotionName","PCOneTime","PCBackToQuickAdds","PCAdjust","PCFor","PCComboboxNone","PCStartingOn","PCAddDelay","PCDelay","PCFixed","PCUntil","PCSelectPricingVariable","PCContextRules","PCContextRulesSubHeaderAdjustmentsOverrides","PCContextRulesSubHeaderPriceCost","PCSelectARuleSet","PCAddPromotion","PCPromotionCreated","PCOfferBaseAdjustment","PCOfferBaseOverride","PCOverride","CPQAdjustment","PCCreate","PCAddAdjustment","PCAddOverride","PCPTS","Entries","Showing","to","of","PCAll","PCActive","PCAllFieldsRequired","PCAddTiming","PCRemoveTiming","PCProductWithNoPriceList","CPQAdjustmentOverride","PCSunday","PCMonday","PCTuesday","PCWednesday","PCThursday","PCFriday","PCSaturday","PCJan","PCFeb","PCMar","PCApr","PCMay","PCJun","PCJul","PCAug","PCSep","PCOct","PCNov","PCDec","PCToday","PCHours","PCMinutes","PCAm","PCPm","PCPickAYear","PCNewAdjustmentOrOverride","PCTypeOfAdjustmentOrOverride","PCSelectAdjustmentOrOverride","PCAdjustmentExistingPromotion","PCAdjustmentNewPromotion","PCAdjustmentOnOffer","PCOverrideExistingPromotion","PCOverrideNewPromotion","PCOverrideOnOffer","CPQAdjustmentOverride","PCPricingAdjustmentsOverrides","PCNameAmountPeriodPlaceholder","PCShowAll","PCShowFewer","PCRemoveDelay","PCStarting","PCDeleteTitle","PCAvailabilityDateRange","PCStartingOnDateValue","PCUntilDateValue","PCAmountDisplayWithoutUOM","PCAmountDisplayWithUOM","PCAmountWithDates","Done","PCType","PCAmount","PCCurrency","PCAdjustmentMethod","RecurringFrequency","PCUsageUOM","PCPricingVariable"];var vlocityPcStructure_labels={PCProductStructureLabels:PCProductStructureLabels};class VlocityPcStructurePricingSection extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-structure-pricing-section";}template(){const translations=this.translations;return html`
      <style>
        .vpc-structure-pricing-section {
          border-bottom: 1px solid #e5e5e5;
          padding: 0 0 35px 0;
        }

        .vpc-pricing-section-header {
          display: grid;
          grid-template-columns: 1fr 0.3fr 0.1fr;
          justify-items: end;
        }

        .vpc-pricing-section-header-text {
          justify-self: start;
          font-size: 13px;
          letter-spacing: 1px;
        }

        vlocity-pc-structure-pricing-section vlocity-pc-quick-add {
          display: block;
        }

        .item-container {
          display: grid;
          grid-template-columns: 1fr 30px 30px;
          align-items: center;
        }

        .vpc-item-wrapper {
          display: grid;
          grid-template-rows: 1fr 1fr;
          font-size: 12px;
          color: #706e6b;
        }

        .vpc-type {
          font-weight: 600;
        }

        .vpc-main-text {
          font-size: 14px;
          color: #2b2826;
        }

        .vpc-structure-pricing-section .item-container .vpc-edit,
        .vpc-structure-pricing-section .item-container .vpc-delete {
          justify-self: end;
        }

        .vpc-structure-pricing-section .item-container .vpc-edit svg,
        .vpc-structure-pricing-section .item-container .vpc-delete svg {
          height: 18px;
          width: 18px;
          fill: #b0adab;
        }

        vlocity-pc-quick-add .vpc-quick-add {
          padding: 0 35px 10px 35px;
        }

        vlocity-pc-quick-add .vpc-quick-add ul {
          height: auto;
          padding-right: 0;
        }

        vlocity-pc-quick-add .vpc-quick-add_list-item {
          background-color: #fafaf9;
          padding: 9px 15px 10px 20px;
          margin: 0 0 8px;
        }

        .vpc-structure-pricing-section
          .vpc-pricing-section-header
          .vpc-section-icon
          .slds-icon-text-default {
          fill: #2b2826;
        }
        vlocity-pc-quick-add
          .vpc-quick-add-search
          .vpc-quick-adds-input::placeholder {
          color: #b0adab;
        }

        .vpc-amount-str {
          align-self: center;
          direction: ltr;
          unicode-bidi: embed;
        }

        .vpc-list-see-all-button {
          padding: 0 35px;
          color: #1589ee;
        }

        .vpc-section-list-container {
          height: auto;
        }

        .vpc-structure-pricing-section
          .vpc-pricing-section-list
          .slds-m-bottom_medium,
        .vpc-structure-pricing-section
          .vpc-pricing-section-list
          .slds-m-top_medium {
          margin: 0;
        }

        vlocity-pc-quick-add .vpc-quickadd-items {
          margin: 11px 0 0;
        }

        .vpc-structure-pricing-section
          .vpc-pricing-section-header
          .vpc-disable-icon
          .slds-icon-text-default {
          fill: #e4e4e4;
        }
      </style>
      <div
        class="vpc-structure-pricing-section slds-p-around_medium slds-p-bottom_x-large"
      >
        <div class="vpc-pricing-section-header">
          <p class="vpc-pricing-section-header-text vpc-title-caps">
            ${translations.translate("PCPricingAdjustmentsOverrides")}
            (${this.items.length})
          </p>
          <vlocity-icon
            baseurl="/_slds/icons/"
            class="vpc-section-icon vpc-section-add-icon"
            icon="utility:add"
            size="xx-small"
            extraclass="slds-icon-text-default"
            @click="${()=>this.showAdjustmentOverrideForm()}"
          ></vlocity-icon>
          <vlocity-icon
            baseurl="/_slds/icons/"
            class="vpc-section-icon vpc-section-chevron-icon"
            icon="utility:chevrondown"
            size="xx-small"
            extraclass="slds-icon-text-default"
            @click="${()=>this.toogleList()}"
          ></vlocity-icon>
        </div>

        <div class="vpc-section-list-container vpc-hide-side-bar-item">
          <vlocity-pc-quick-add
            items="${JSON.stringify(this.fewerItems)}"
            hidetitle="true"
            class="vpc-pricing-section-list"
            searchPlaceholder="${translations.translate("PCNameAmountPeriodPlaceholder")}"
          >
            <slot>
              <div class="item-container" data-value="\${JSON.stringify(item)}">
                <div class="vpc-item-wrapper">
                  <div class="vpc-main-text">
                    <span class="vpc-type">\${item.type}: </span>\${item.name}
                  </div>
                  <div class="vpc-amount-str">\${item.amountStr}</div>
                </div>
                <vlocity-tooltip
                  tooltiptype="iconlink"
                  icon="utility:edit"
                  iconsize="x-small"
                  iconbaseurl="/_slds/icons/"
                  class="vpc-edit"
                  priceListEntryId="\${item.priceListEntryId}"
                  data="\${item.data}"
                  value="${translations.translate("Edit")}"
                  extraclass="slds-input__icon ${vlocityPcConfig.isLanguageRTL?"slds-input__icon_right":"slds-input__icon_left"}"
                >
                </vlocity-tooltip>
                <vlocity-tooltip
                  tooltiptype="iconlink"
                  icon="utility:delete"
                  iconsize="x-small"
                  iconbaseurl="/_slds/icons/"
                  class="vpc-delete"
                  priceListId="\${item.priceListEntryId}"
                  value="${translations.translate("PCDeleteTitle")}"
                  extraclass="slds-input__icon ${vlocityPcConfig.isLanguageRTL?"slds-input__icon_right":"slds-input__icon_left"}"
                >
                </vlocity-tooltip>
              </div>
            </slot>
          </vlocity-pc-quick-add>
          <div
            class="vpc-list-see-all-button"
            @click="${e=>this.displayRecords(e)}"
          >
            ${translations.translate("PCShowAll")}
          </div>
        </div>

        <!-- Delete Confirmation Prompt -->
        <vlocity-prompt
          titletext="${translations.translate("PCDeleteTitle")}"
          helptext="${translations.translate("PCConfirmMessage")}"
          confirmtext="${translations.translate("PCDeleteTitle")}"
          canceltext="${translations.translate("PCCancelButton")}"
          id="confirmationPrompt"
        >
        </vlocity-prompt>
      </div>
    `;}connectedCallback(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.promotionInput=this.productConsole.createAppliedPromotionsInput();this.translations=VlocitySDK.translation.getInstance();this.fewerItemsDisplayLength=4;this.loadForm();pubsub.register("vpcpricingdeleteconfirmation",{deleteConfirm:this.openDeletePrompt.bind(this)});pubsub.register("vpcrecorddeleted",{result:this.loadForm.bind(this)});pubsub.register("vpcproductselected",{result:this.productSelected.bind(this)});pubsub.register("vpcexpandpricingsection",{result:this.expandPricingSection.bind(this)});}expandPricingSection(e){const chevronIcon=this.querySelector(".vpc-section-chevron-icon");if(e.show){this.expandList(chevronIcon);}else{this.collapseList(chevronIcon);}}showAdjustmentOverrideForm(){pubsub.fire("vpcshowadjustmentoverrideform","result",{show:!0,edit:!1});}productSelected(e){if(e.product){const namespacePrefix=vlocityPcConfig.namespacePrefix;this.specType=e.product[`${namespacePrefix}ParentProductId__r`][`${namespacePrefix}SpecificationType__c`];}}openDeletePrompt(details){let confirmation=this.querySelector("#confirmationPrompt");confirmation.show().then(()=>{pubsub.fire("vpcpricingdelete","deleteConfirm",{eventDetails:details.deleteConfirm});});}filterQuickAddItems(event){if("string"===typeof event.detail.searchText){const searchText=event.detail.searchText.toLowerCase(),btnShowAllFewer=this.querySelector(".vpc-list-see-all-button");if(0===searchText.length&&this.items.length>this.fewerItemsDisplayLength){btnShowAllFewer.classList.remove("vpc-hide-side-bar-item");this.displayRecords({target:{innerText:btnShowAllFewer.innerHTML===this.translations.translate("PCShowFewer")?this.translations.translate("PCShowAll"):this.translations.translate("PCShowFewer")}});}else{let filteredItems=this.items.filter(item=>item.name.toLowerCase().includes(searchText)||item.type.toLowerCase().includes(searchText)||item.amountStr.toLowerCase().includes(searchText));this.querySelector("vlocity-pc-quick-add").setAttribute("items",JSON.stringify(filteredItems));btnShowAllFewer.classList.add("vpc-hide-side-bar-item");}this.setListeners();}}displayRecords(e){const translations=this.translations,showAll=translations.translate("PCShowAll");if(e.target.innerText===showAll){this.querySelector(".vpc-pricing-section-list").setAttribute("items",JSON.stringify(this.items));e.target.innerText=translations.translate("PCShowFewer");this.setListeners();}else{this.querySelector(".vpc-pricing-section-list").setAttribute("items",JSON.stringify(this.fewerItems));e.target.innerText=showAll;this.setListeners();}}loadForm(){this.promotionInput.productId=this.getAttribute("productId");this.promotionInput.sortBy=`${vlocityPcConfig.namespacePrefix}PromotionId__r.LastModifiedDate  DESC`;this.productConsole.getAppliedPromotions(this.promotionInput).then(result=>{this.records=VlocityPCTableService.flattenTableData(result.records)||[];const records=this.records;records.sort((a,b)=>new Date(b.LastModifiedDate.value)-new Date(a.LastModifiedDate.value));this.items=[];for(let record of records){const isOverride=record[`${vlocityPcConfig.namespacePrefix}IsOverride__c`].value;this.items.push({name:record.Name,type:isOverride?`${this.translations.translate("PCOverride")}`:`${this.translations.translate("CPQAdjustment")}`,amountStr:`${VlocityPCUtils.formatTokenizedCustomLabels(this.translations.translate("PCAmountWithDates"),VlocityPCTableService.getAmountString(record),VlocityPCTableService.getDateString(record))}`,priceListEntryId:record.Id.value,data:JSON.stringify(record)});}this.fewerItems=this.items.slice(0,this.fewerItemsDisplayLength);// pubsub.fire("vpcquickaddlistchange", "result", {});
render(this.template(),this);const btnShowAllFewer=this.querySelector(".vpc-list-see-all-button");if(btnShowAllFewer&&btnShowAllFewer.innerHTML===this.translations.translate("PCShowFewer")){const pricingSectionList=this.querySelector(".vpc-pricing-section-list");if(pricingSectionList){pricingSectionList.setAttribute("items",JSON.stringify(this.items));}}let quickAddList=this.querySelector("vlocity-pc-quick-add");quickAddList.addEventListener("quickAddItemSearch",event=>{this.filterQuickAddItems(event);});this.displayShowAllButton();pubsub.fire("vpcquickaddlistchange","result",{});setTimeout(()=>{this.setListeners();},0);}).catch(error=>{console.log(error);});}setListeners(){const deleteIcons=this.querySelectorAll(".vpc-delete");for(let deleteIcon of deleteIcons){deleteIcon.addEventListener("click",e=>{let target=e.target;while(!target.classList.contains("vpc-delete")){target=target.parentElement;}VlocityPCTableService.deleteConfirmationHandler(target,{priceListEntryId:target.getAttribute("priceListId"),context:this});});}const editIcons=this.querySelectorAll(".vpc-edit");for(let editIcon of editIcons){editIcon.addEventListener("click",e=>{let target=e.target;while(!target.classList.contains("vpc-edit")){target=target.parentElement;}this.editPriceListEntryHandler(e,{priceListEntryId:target.getAttribute("priceListEntryId"),data:target.getAttribute("data")});});}}displayShowAllButton(){const itemsLength=this.items.length;if(!itemsLength||itemsLength<=this.fewerItemsDisplayLength){this.querySelector(".vpc-list-see-all-button").classList.add("vpc-hide-side-bar-item");}else{this.querySelector(".vpc-list-see-all-button").classList.remove("vpc-hide-side-bar-item");}}toogleList(){const chevronIcon=this.querySelector(".vpc-section-chevron-icon");if("utility:chevrondown"===chevronIcon.icon){this.expandList(chevronIcon);}else{this.collapseList(chevronIcon);}}expandList(chevronIcon){this.querySelector(".vpc-section-list-container").classList.remove("vpc-hide-side-bar-item");chevronIcon.setAttribute("icon","utility:chevronup");}collapseList(chevronIcon){this.querySelector(".vpc-section-list-container").classList.add("vpc-hide-side-bar-item");chevronIcon.setAttribute("icon","utility:chevrondown");}findRecord(priceListEntryId){const records=this.records;return records.filter(record=>record.priceListEntryId===priceListEntryId);}editPriceListEntryHandler(e,eventData){// 1. Get All Data
const namespacePrefix=vlocityPcConfig.namespacePrefix,priceListEntryToEdit=JSON.parse(eventData.data);// 2. Open Relavant Forms
this.showEditModeForm(priceListEntryToEdit);// 3. Populate Data
const offerId=priceListEntryToEdit[`${namespacePrefix}OfferId__c`],promotionId=priceListEntryToEdit[`${namespacePrefix}PromotionId__c`];pubsub.fire("vpcshoweditpricelistentryview","result",{priceListEntryToEdit});if(!promotionId&&offerId){pubsub.fire("vpc-show-edit-offer-only-view","result",{priceListEntryToEdit});}// 4. Create a Edit Context, button should run editPriceListEntry
pubsub.fire("vpceditmodeon","result",{priceListEntryId:eventData.priceListEntryId,isOn:!0});pubsub.fire("vpcshowadjustmentoverrideform","result",{show:!0});}showEditModeForm(priceListEntryToEdit){this.showNewPromotionForm(priceListEntryToEdit[`${vlocityPcConfig.namespacePrefix}IsOverride__c`].value?"overrideContext":"adjustmentContext");pubsub.fire("vpcshowpromotioneditview","result",{priceListEntryToEdit});}showNewPromotionForm(context){pubsub.fire("vpcresetallforms","result",{});pubsub.fire("vpccontextchange","result",{context});pubsub.fire("vpcexpandform","result",{});pubsub.fire("vpcshownewpromotionform","result",{});}disconnectedCallback(){this.openDeletePromptHandler={deleteConfirm:this.openDeletePrompt.bind(this)};this.loadFormHandler={result:this.loadForm.bind(this)};this.productSelectedHandler={result:this.productSelected.bind(this)};this.expandPricingSectionHandler={result:this.productSelected.bind(this)};pubsub.unregister("vpcpricingdeleteconfirmation",this.openDeletePromptHandler);pubsub.unregister("vpcrecorddeleted",this.loadFormHandler);pubsub.unregister("vpcupdateproduct",this.productSelectedHandler);pubsub.unregister("vpcexpandpricingsection",this.expandPricingSectionHandler);}}window.customElements.define(VlocityPcStructurePricingSection.is,VlocityPcStructurePricingSection);class VlocityPcStructureTree extends HTMLElement{constructor(){super();this.structureSdk=VlocitySDK.productconsole.getInstance().getProductStructureSdk();this.translationSdk=VlocitySDK.translation.getInstance();}/**
     * Creates data required for rendering D3 tree chart
     * @param {this.product} input
     * @returns {treeInputData} which is used for rendering the tree chart
     */makeTreeStructureData(input){let children=[];function processObj(arr,parent){arr.forEach(function(item){pushItem(item,parent);});}function pushItem(item,parent){if(item.childProducts.records){item.children=[];processObj(item.childProducts.records,item);}else{delete item.childProducts;}if(parent){parent.children.push(item);delete parent.childProducts;}else{children.push(item);}}let output=Object.assign({},input.records[0]);if(output.childProducts.records){processObj(output.childProducts.records);delete output.childProducts;output.children=children;}else{delete output.childProducts;output.children=[];}return output;}/**
     * Wrapper for D3 functions used to render tree chart
     * @param {treeData} input
     */buildTreeStructure(treeData){let _this=this;// let showDecomposition = this.checkbox.checked;
// Set the dimensions and margins of the diagram
const margin={top:70,right:20,bottom:0,left:20},width=_this.clientWidth||.67*window.innerWidth,height=_this.clientHeight||1.12*window.innerHeight,zoomParameter={min:.25,max:2,factor:.1};// Set the zoom parameters
let pan=d3.zoom().scaleExtent([zoomParameter.min,zoomParameter.max])// .translateExtent([[-100, -100], [width + 90, height + 100]])
.on("zoom",panned);// append the svg object to the body of the page
// appends a 'group' element to 'svg'
// moves the 'group' element to the top left margin
const svg=d3.select("vlocity-pc-structure-tree").append("svg").attr("class","shadow").attr("width",width).attr("height",height).call(pan).append("g").attr("transform","translate("+margin.left+","+margin.top+")");let i=0,duration=750,rectW=200,rectH=65,iconProductDesc="/_slds/icons/standard-sprite/svg/symbols.svg#product",iconExpand="/_slds/icons/utility-sprite/svg/symbols.svg#chevronright",iconCollapse="/_slds/icons/utility-sprite/svg/symbols.svg#dash",iconDelete="/_slds/icons/utility-sprite/svg/symbols.svg#delete",iconNewWindow="/_slds/icons/utility-sprite/svg/symbols.svg#new_window",iconSize=10,root,dragging=0,selected=null,selectedNode,draggingNode,dragstartedOnNode=!1,treemap=d3.tree().size([height,width]);// declares a tree layout and assigns the size
// Assigns parent, children, height, depth
root=d3.hierarchy(treeData,function(d){return d.children;});root.x0=height/2;root.y0=0;// Collapse after the second level
if(root.children){root.children.forEach(collapse);}root.expanded=!0;// zoom in and zoom out
d3.selectAll("button[data-zoom]").on("click",resetted);update(root);// Collapse the node and all it's children
function collapse(d){if(d.children){d.expanded=!1;d._children=d.children;d._children.forEach(collapse);d.children=null;}}// zoom action buttons
const zoomOutButton=_this.querySelector(".vpc-structure__zoom-btn").children[0],zoomInButton=_this.querySelector(".vpc-structure__zoom-btn").children[1];let k=d3.zoomTransform(svg).k;function panned(){k=d3.event.transform.k;if(k<=zoomParameter.min){zoomInButton.disabled=!1;zoomOutButton.disabled=!0;}else if(k>=zoomParameter.max){zoomInButton.disabled=!0;zoomOutButton.disabled=!1;}else{zoomInButton.disabled=!1;zoomOutButton.disabled=!1;}svg.attr("transform",d3.event.transform);}function resetted(){const zoomDirection=+this.getAttribute("data-zoom");let zoomLevel;if(1===zoomDirection){zoomLevel=1+zoomParameter.factor;k+=zoomParameter.factor;}else{zoomLevel=1-zoomParameter.factor;k-=zoomParameter.factor;}svg.transition().duration(750).call(pan.scaleBy,zoomLevel);}function update(source){// Assigns the x and y position for the nodes
let treeData=treemap(root.sort(function(a,b){// Sort nodes at a level based on Sequence value
return parseInt(a.data.Sequence.value)-parseInt(b.data.Sequence.value);})),nodes=treeData.descendants(),links=treeData.descendants().slice(1);// Compute the new tree layout.
// Normalize for fixed-depth.
nodes.forEach(function(d){//iterate through the nodes
if(d.parent){//if the node has a parent
for(let i=0;i<d.parent.children.length;i++){//check parent children
if(d.parent.children[i].data.ID.value===d.data.ID.value){//find current node
d.yOffset=d.parent.yOffset+i;//index is how far node must be moved down
}}d.parentYoffset=d.parent.yOffset;//must also account for parent downset
}if(d.yOffset===void 0){d.yOffset=0;}if(d.parentYoffset===void 0){d.parentYoffset=0;}d.x=100*d.yOffset;d.y=300*d.depth;});// ****************** Nodes section ***************************
// Update the nodes...
let node=svg.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i);}),nodeEnter=node.enter().append("g").attr("class","node").attr("transform",function(d){return"translate("+source.y0+","+source.x0+")";}).attr("id",function(d){return d.data.ID.value;}).attr("name",function(d){return d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId;}).on("drop",d=>{const dropTarget=d.data.ID.value,event=d3.event,childrenArr=d.expanded?d.data.children:d._children,name=d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId;dragging=0;updateNodeState(d,"node-deselected");// sequence for the newly added PCI
// computed value = MAX(sequence of all children) + 1
const nextSequence=d.data.children&&d.data.children.length?Math.max.apply(Math,childrenArr.map(function(child){if(child.Sequence){return child.Sequence.value;}else if(child.data.Sequence){return child.data.Sequence.value;}}))+1:1,result=_this.handleProductDrop(event,nextSequence.toString(),dropTarget);result.then(response=>{if("INVOKE-200"!==response.errorCode){throw response.error;}d.data.isLeaf=!1;expandNode(d,response.result.Id);nodeEnter.filter(function(d){const name=d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId;return!d.data.isLeaf&&!_this.querySelector("[name='"+name+"'] > circle");}).append("circle").attr("cx",rectW).attr("cy",rectH/2).attr("r",7.5).attr("fill","#0089f6").attr("cursor","pointer").on("click",click);nodeEnter.filter(function(d){const name=d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId;return!d.data.isLeaf&&!_this.querySelector("[name='"+name+"'] > use.actionIcon");}).append("use").attr("class","actionIcon").attr("xlink:href",function(d){return d.expanded?iconExpand:iconCollapse;}).attr("height",iconSize).attr("width",iconSize).attr("x",rectW-5).attr("y",rectH/2-5);}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}).on("dragover",()=>{_this.allowDrop(d3.event);d3.event.stopPropagation();d3.event.preventDefault();}).on("dragenter",d=>{dragging++;updateNodeState(d,"node-hovered");d3.event.stopPropagation();d3.event.preventDefault();}).on("dragleave",d=>{dragging--;if(0===dragging){updateNodeState(d,"node-deselected");}d3.event.stopPropagation();d3.event.preventDefault();});// Enter any new modes at the parent's previous position.
// Add Rect for the nodes
nodeEnter.append("rect").attr("width",rectW).attr("height",rectH).attr("rx",5).attr("ry",5).attr("class","node-deselected").attr("cursor","pointer").on("click",function(d){showEditRelationshipForm(d);updateNodeState(d,"node-selected");setTimeout(()=>{pubsub.fire("vpcstructureproductclicked","result",{parentChildItemId:d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId,productName:d.data.Name,productId:d.data.ID.value,isLeaf:d.data.isLeaf,parentProductId:d.data.ParentProductId?d.data.ParentProductId.value:null});},0);// @TODO: this dispatchEvent must be replaced with the pubsub event above.
// Keeping both for now since the code requires both until the structure tab is decoupled.
_this.dispatchEvent(new CustomEvent("vpcstructureproductclicked",{detail:{parentChildItemId:d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId,productName:d.data.Name,productId:d.data.ID.value,isLeaf:d.data.isLeaf,parentProductId:d.data.ParentProductId?d.data.ParentProductId.value:null}}));}).append("title").text(_this.translationSdk.translate("EditRelationship"));let iconX=10,iconNewWindowX=rectW-25,iconY=10,textX=rectW/5,textY=rectH/3,loadingTextX=45,loadingTextY=35;if(vlocityPcConfig.isLanguageRTL){iconX=rectW-25-10;textX=rectW-25-15;loadingTextX=rectW-45;iconNewWindowX=15;}// Add rect which will be the background for SVG icon
nodeEnter.append("rect").attr("width",26).attr("height",26).attr("x",iconX).attr("y",iconY).attr("rx",2).attr("ry",2).attr("fill","#b780d3");// Add SVG icon for product
nodeEnter.append("use").attr("xlink:href",iconProductDesc).attr("height",25).attr("width",25).attr("x",iconX).attr("y",iconY).attr("fill","#fff");// Add labels for the nodes
nodeEnter.append("text").attr("x",textX).attr("y",textY).attr("dy",".35em").text(function(d){return wrap(d.data.Name,rectW/10);}).on("click",function(d){//Opens a new primary tab
sforce.console.openPrimaryTab(null,"/"+d.data.ID.value,!0,d.data.Name,result=>{},d.data.Name);}).append("title").text(function(d){return d.data.Name;});// Add icon for open in a new tab
nodeEnter.filter(function(d){return d.data.ParentProductId;}).append("rect").attr("width",13).attr("height",13).attr("x",iconNewWindowX).attr("y",iconY+3).attr("cursor","pointer").attr("fill-opacity","0").on("click",function(d){//Opens a new primary tab
sforce.console.openPrimaryTab(null,"/"+d.data.ID.value,!0,d.data.Name,()=>{},d.data.Name);}).append("title").text(_this.translationSdk.translate("PCOpenInNewTab"));nodeEnter.filter(function(d){return d.data.ParentProductId;}).append("use").attr("xlink:href",iconNewWindow).attr("height",13).attr("width",13).attr("x",iconNewWindowX).attr("y",iconY+3).attr("fill","#0089f6");// Add icons for node collapse and node expand
nodeEnter.filter(function(d){return!d.data.isLeaf;}).append("circle").attr("cx",rectW).attr("cy",rectH/2).attr("r",7.5).attr("fill","#0089f6").attr("cursor","pointer").on("click",click);nodeEnter.filter(function(d){return!d.data.isLeaf;}).append("use").attr("class","actionIcon").attr("xlink:href",function(d){return d.expanded?iconExpand:iconCollapse;}).attr("height",iconSize).attr("width",iconSize).attr("x",rectW-5).attr("y",rectH/2-5);nodeEnter.append("rect").attr("width",rectW).attr("display","none").attr("class","loadingRect").attr("height",rectH).attr("opacity",.5);nodeEnter.append("text").attr("display","none").attr("class","loadingText").attr("x",loadingTextX).attr("y",loadingTextY).attr("fill","#fff").attr("dy",".35em").text(function(){return _this.translationSdk.translate("PCLoadingHierarchy");});// Add icon for delete
nodeEnter.filter(function(d){return d.data.ParentProductId;}).append("use").attr("class","removeNode").attr("cursor","pointer").attr("xlink:href",iconDelete).attr("height",15).attr("width",15).attr("x",rectW-25).attr("y",rectH/1.5).attr("fill","#5d5c5c").on("click",function(d){const result=_this.deleteNode(d.data.ProductChildItemId.value);result.then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){throw result.error;}removeNode(d);VlocityPCUtils.toastSuccess();VlocityPCUtils.hideSpinner();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}).append("title").text(_this.translationSdk.translate("Delete"));// UPDATE
let nodeUpdate=nodeEnter.merge(node);// Transition to the proper position for the node
nodeUpdate.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";});// Update the node attributes and style
nodeUpdate.select("rect").attr("width",rectW).attr("height",rectH).attr("rx",5).attr("ry",5).attr("class","node-deselected");// Update action icons
nodeUpdate.filter(function(d){return d.data.isLeaf;}).select("circle").remove().select(".actionIcon").remove();nodeUpdate.select(".actionIcon").attr("xlink:href",function(d){let icon="";if(!d.data.isLeaf){icon=!d.expanded?iconExpand:iconCollapse;}return icon;}).attr("cursor","pointer").attr("height",iconSize).attr("width",iconSize).attr("x",rectW-5).attr("y",rectH/2-5);nodeUpdate.select("text").style("fill-opacity",1);// Remove any exiting nodes
let nodeExit=node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")";}).remove();// On exit reduce the node rectangles size to 0
nodeExit.select("rect").attr("width",0).attr("height",0);// On exit reduce the opacity of text labels
nodeExit.select("text").style("fill-opacity",1e-6);// ****************** links section ***************************
// Update the links...
let link=svg.selectAll("path.link").data(links,function(d){return d.id;}),linkEnter=link.enter().insert("path","g").attr("class","link").attr("stroke-dasharray",function(d){if("decomposition"===d.data.relation)return"8,5";else return"";}).attr("d",function(d){let o={x:source.x0,y:source.y0};return diagonal(o,o);}),linkUpdate=linkEnter.merge(link);// Enter any new links at the parent's previous position.
// Transition back to the parent element position
linkUpdate.transition().duration(duration).attr("d",function(d){return diagonal(d,d.parent);});// Remove any exiting links
let linkExit=link.exit().transition().duration(duration).attr("d",function(d){let o={x:source.x,y:source.y};return diagonal(o,o);}).remove();// Store the old positions for transition.
nodes.forEach(function(d){d.x0=d.x;d.y0=d.y;});svg.selectAll(".node").call(d3.drag().on("start",dragstarted).on("drag",dragged).on("end",dragended));function dragstarted(nodeDragged){if(nodeDragged!=root&&1<nodeDragged.parent.children.length){dragstartedOnNode=!0;}}function dragged(node){const nodes=node.parent.children;if(node!=root&&1<nodes.length){const dragIndex=nodes.indexOf(node),tempNodes=[],placeHolders=[],lastIndex=nodes.length-1;if(dragstartedOnNode){const spacingDiff=nodes[1].x0-nodes[0].x0,spacing=spacingDiff/1.5;let nodeTemp;for(let i=0;i<lastIndex;i++){tempNodes.push(i);}tempNodes.forEach(index=>{if(0===dragIndex){nodeTemp={id:index+1,x0:nodes[index+1].x0+spacing,y0:nodes[index+1].y0,x:nodes[index+1].x0+spacing,y:nodes[index+1].y0};placeHolders.push(nodeTemp);}else if(dragIndex===lastIndex){nodeTemp={id:index,x0:nodes[index].x0-spacing/2,y0:nodes[index].y0,x:nodes[index].x0-spacing/2,y:nodes[index].y0};placeHolders.push(nodeTemp);}else{if(index<dragIndex){nodeTemp={id:index,x0:nodes[index].x0-spacing/2,y0:nodes[index].y0,x:nodes[index].x0-spacing/2,y:nodes[index].y0};placeHolders.push(nodeTemp);}else if(index>dragIndex){nodeTemp={id:index,x0:nodes[index].x0+spacing,y0:nodes[index].y0,x:nodes[index].x0+spacing,y:nodes[index].y0};placeHolders.push(nodeTemp);}else{nodeTemp={id:lastIndex,x0:nodes[lastIndex].x0+spacing,y0:nodes[lastIndex].y0,x:nodes[lastIndex].x0+spacing,y:nodes[lastIndex].y0};placeHolders.push(nodeTemp);}}});d3.select(this).raise().classed("active",!0);svg.selectAll("g.tempnode").data(placeHolders,d=>d.id).enter().append("g").attr("class","tempnode").attr("transform",function(d,i){return"translate("+d.y0+","+d.x0+")";}).attr("pointer-events","mouseover").on("mouseover",function(node){overPlaceHolder(node);}).on("mouseout",function(node){outPlaceHolder(node);});svg.selectAll("g.tempnode").append("rect").attr("width",rectW).attr("height",spacing/3).attr("rx",5).attr("ry",5).attr("x","0").attr("y","0").style("fill","#b0def2").style("opacity","0.5").attr("cursor","pointer");}dragstartedOnNode=!1;node.x0+=d3.event.dy;node.y0+=d3.event.dx;let nodeT=d3.select(this);nodeT.attr("transform","translate("+node.y0+","+node.x0+")");draggingNode=node;}}function overPlaceHolder(d){selectedNode=d;updateTempConnector(draggingNode.parent,selectedNode);}function outPlaceHolder(d){selectedNode=null;svg.selectAll("path.templink").remove();}function dragended(d){if(d!=root){d3.select(this).classed("active",!1);svg.selectAll("path.templink").remove();svg.selectAll("g.tempnode").remove();if(selectedNode){let draggedNodeTemp=d;const promiseArray=[];d.parent.children.splice(d.parent.children.indexOf(d),1);d.parent.children.splice(selectedNode.id,0,draggedNodeTemp);d.parent.children.forEach((child,index)=>{child.data.Sequence.value=(index+1).toString();promiseArray.push(_this.updateSequence(child.data.ProductChildItemId.value,child.data.ParentProductId.value,child.data.ID.value,child.data.Sequence.value));Promise.all(promiseArray).then(responses=>{responses.forEach(response=>{if(response.errorCode&&"INVOKE-200"!==response.errorCode){throw response.error;}});}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>VlocityPCUtils.hideSpinner());});update(d.parent);}else{update(d);}selectedNode=null;}}function updateTempConnector(draggingNode,selectedNode){let data=[];if(null!==draggingNode&&null!==selectedNode){// flip the source coordinates since we did this for the existing connectors on the original tree
data=[{source:{x:selectedNode.y0,y:selectedNode.x0},target:{x:draggingNode.y0,y:draggingNode.x0}}];}let link=svg.selectAll(".templink").data(data);link.enter().append("path").attr("class","templink").attr("d",diagonal(selectedNode,draggingNode,20)).attr("pointer-events","none");link.attr("d",diagonal(selectedNode,draggingNode,20));link.exit().remove();}// Creates a curved (diagonal) path from parent to the child nodes
function diagonal(s,d){let path=`M ${s.y} ${s.x+rectH/2}
                    C ${(s.y+d.y)/2+rectW/2} ${s.x+rectH/2},
                    ${(s.y+d.y)/2+rectW/2} ${d.x+rectH/2},
                    ${d.y+rectW} ${d.x+rectH/2}`;return path;}// Toggle children on click.
function click(d){toggleNode(d);}function showEditRelationshipForm(d){_this.classList.add("disable-pointer-events");_this.dispatchEvent(new CustomEvent("vpcstructureproductclicked",{detail:{parentChildItemId:d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId,productName:d.data.Name,productId:d.data.ID.value,isLeaf:d.data.isLeaf,parentProductId:d.data.ParentProductId?d.data.ParentProductId.value:null}}));}function updateNodeState(d,state){const name=d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId,node=_this.querySelector("[name='"+name+"'] > rect");node.classList=[];node.classList.add(state);}function toggleNode(d){if(!d.expanded){expandNode(d);}else{//  toggle node expanded state
collapseNode(d);}}function expandNode(d,productChildItemId){let name=d.data.ParentProductId?d.data.ProductChildItemId.value:d.data.ProductChildItemId,node=_this.querySelector("[name='"+name+"']"),loadingRect=node.querySelector(".loadingRect"),loadingText=node.querySelector(".loadingText");loadingRect.style.display="block";loadingText.style.display="block";d.expanded=!0;_this.getProductDetails(d.data.ID.value,!0).then(response=>{if(response.messages&&response.messages.length){throw response.messages[0].message;}if(d.parent){d.parent.children.forEach(function(element){if(d!==element&&element.expanded){collapse(element);}});}addSubTree(response,d,productChildItemId);checkWidth(d);update(d);if(productChildItemId){setTimeout(()=>{const node=_this.querySelector("[name='"+productChildItemId+"'] > rect");node.classList=[];node.classList.add("node-selected");},500);}}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>{loadingRect.style.display="none";loadingText.style.display="none";});}function collapseNode(d){//  toggle node expanded state
d.expanded=!1;if(d.children){d._children=d.children;d.children=null;}else{d.children=d._children;d._children=null;}if(d.parent){d.parent.children.forEach(function(element){if(d!==element){collapse(element);}});}checkWidth(d);update(d);}function addNode(d,droppedItem){selected=d;//creates New OBJECT
const newNodeObj=droppedItem,newNode=d3.hierarchy(newNodeObj);//Creates new Node
newNode.depth=selected.depth+1;newNode.height=selected.height-1;newNode.parent=selected;if(!selected._children){selected.children=selected.children||[];selected.data.children=selected.data.children||[];}else{selected.children=selected._children;}selected.children.push(newNode);selected.data.children.push(newNode.data);//update(selected);
}function addSubTree(response,target,productChildItemId){if(target.data.children&&0<target.data.children.length){target.data.children=[];target._children=[];}const treeData=_this.makeTreeStructureData(response);treeData.children.forEach(child=>{addNode(target,child);});if(target.children&&0<target.children.length){target.children.forEach(elem=>{collapse(elem);});}if(productChildItemId){let childData={data:target.data.children.filter(child=>child.ProductChildItemId.value===productChildItemId)[0]};showEditRelationshipForm(childData);}}function removeNode(d){selected=d;let parentNode=null,children=[],parentId=selected.parent.id,childId=selected.id;parentNode=getParentNodeDetails(parentId);for(let i=0,j=parentNode.children.length;i<j;i++){if(parentNode.children[i].id!=childId){children.push(parentNode.children[i]);}}if(children.length){parentNode.children=children;parentNode.data.children=children;parentNode._children=children;}else{delete parentNode.children;delete parentNode.data.children;parentNode.data.isLeaf=!0;const name=parentNode.data.ParentProductId?parentNode.data.ProductChildItemId.value:parentNode.data.ProductChildItemId,nodeActionIcon=_this.querySelector("[name='"+name+"'] > use.actionIcon"),nodeActionIconCircle=_this.querySelector("[name='"+name+"'] > circle");nodeActionIcon.parentNode.removeChild(nodeActionIcon);nodeActionIconCircle.parentNode.removeChild(nodeActionIconCircle);if(parentNode._children){delete parentNode._children;}}if(parentNode.parent){update(parentNode);}else{if(children.length){root.children=children;}else{delete root.children;if(root._children){delete root._children;}}root.data.children=children.length?children:[];update(root);}}function getParentNodeDetails(parentId){let tree=Object.assign({},root),output;function processObj(arr){arr.forEach(function(item){evaluateParent(item);});}function evaluateParent(input){if(input.id==parentId){output=input;return;}else if(input.children){processObj(input.children);}}evaluateParent(tree);return output;}function checkWidth(d){let currentCanvas=d3.select("vlocity-pc-structure-tree>svg>g"),currentWidth=currentCanvas._groups[0][0].getBBox().width,adjustedWidth=parseInt(d3.select("vlocity-pc-structure-tree>svg").attr("width"),10)-20;setTimeout(function(){let newCanvas=d3.select("vlocity-pc-structure-tree>svg>g"),newWidth=newCanvas._groups[0][0].getBBox().width,correctX=newCanvas._groups[0][0].getBBox().x,boundingClientRect=newCanvas._groups[0][0].getClientRects(),newY=boundingClientRect[0].y;if(newWidth>adjustedWidth){currentCanvas.transition().duration(duration).attr("transform","translate(-"+(newWidth-adjustedWidth)+","+newY+")");}else{currentCanvas.transition().duration(duration).attr("transform","translate("+(-correctX+margin.left/2)+","+newY+")");}},duration);}// SVG Wrapping long texts
function wrap(text,width){if(text.length<=width){return text;}else{return text.substring(0,width-3)+"...";}}}}static get is(){return"vlocity-pc-structure-tree";}template(){let decompositionSwitch=html`
      <style>
        .vpc-structure__decomposition {
          float: left;
          margin: var(--vpc-structure-space-lg);
        }

        .vpc-structure__decomposition > span {
          position: relative;
          top: -0.4em;
          margin-right: 0.7em;
        }

        /* The switch - the box around the slider */
        .vpc-structure__decomposition-switch {
          position: relative;
          display: inline-block;
          width: 50px;
          height: 24px;
        }

        /* Hide default HTML checkbox */
        .vpc-structure__decomposition-switch input {
          display: none;
        }

        /* The slider */
        .vpc-structure__decomposition-switch-slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          transition: 0.4s;
        }

        .vpc-structure__decomposition-switch-slider:before {
          position: absolute;
          content: "";
          height: 20px;
          width: 20px;
          left: 2px;
          bottom: 2px;
          background-color: white;
          transition: 0.4s;
        }

        .vpc-structure__decomposition-switch
          input:checked
          + .vpc-structure__decomposition-switch-slider {
          background-color: #2196f3;
        }

        .vpc-structure__decomposition-switch
          input:checked
          + .vpc-structure__decomposition-switch-slider:before {
          transform: translateX(26px);
        }

        /* Rounded sliders */
        .vpc-structure__decomposition-switch-slider.vpc-structure__decomposition-switch-round {
          border-radius: 34px;
        }

        .vpc-structure__decomposition-switch-slider.vpc-structure__decomposition-switch-round:before {
          border-radius: 50%;
        }
      </style>
      <div class="vpc-structure__decomposition">
        <span
          >${this.translationSdk.translate("PCStructureDecompositionTitle")}</span
        >
        <label class="vpc-structure__decomposition-switch">
          <input
            type="checkbox"
            name="decomposition-switch"
            @click="${()=>{this.toggleDecomposition();}}"
          />
          <span
            class="vpc-structure__decomposition-switch-slider vpc-structure__decomposition-switch-round"
          ></span>
        </label>
      </div>
    `,zoomActions=html`
      <style>
        /* Button Group */
        .vpc-structure__zoom {
          float: right;
          margin: var(--vpc-structure-space-lg);
          position: absolute;
          top: 0;
          right: 0;
          padding: 5px;
          z-index: 5;
          background: white;
          border: 1px solid var(--vpc-secondary-border-color);
          border-radius: 2px;
        }

        .vpc-structure__zoom span {
          line-height: var(--vpc-structure-space-xxl);
        }

        .vpc-structure__zoom-btn {
          float: right;
        }

        .vpc-structure__zoom-btn button {
          border: 1px solid var(--vpc-secondary-border-color);
          padding: 0px 15px;
          font-size: 20px;
          cursor: pointer;
          float: left;
          outline: none;
        }

        .vpc-structure__zoom-btn button:first-child {
          border-radius: 5px 0 0 5px;
        }

        .vpc-structure__zoom-btn button:last-child {
          border-radius: 0 5px 5px 0;
        }

        .vpc-structure__zoom-btn button:not(:last-child) {
          border-right: none; /* Prevent double borders */
        }

        .vpc-structure__zoom-btn button:hover {
          background-color: #f1f1f1;
        }

        .vpc-structure__zoom-btn button:disabled {
          background-color: #cccccc;
          cursor: not-allowed;
        }
      </style>
      <div class="vpc-structure__zoom">
        <span class="slds-m-right_small"
          >${this.translationSdk.translate("PCZoomActionsTitle")}</span
        >
        <div class="vpc-structure__zoom-btn">
          <button data-zoom="-1">&#8722;</button>
          <button data-zoom="1">&#43;</button>
        </div>
      </div>
    `,pcStructureActions=html`
      ${zoomActions}
    `,confirmPrompt=html`
      <vlocity-prompt
        titletext="${this.translationSdk.translate("Delete")}"
        helptext="${this.translationSdk.translate("PCConfirmMessage")}"
        confirmtext="${this.translationSdk.translate("Delete")}"
        canceltext="${this.translationSdk.translate("PCCancelButton")}"
        id="confirmationPrompt"
      >
      </vlocity-prompt>
    `,tree=html`
      <style>
        vlocity-pc-structure-tree svg {
          position: absolute;
          z-index: 1;
        }

        vlocity-pc-structure-tree {
          position: relative;
          background-color: #f6f6f6;
        }

        .disable-pointer-events {
          pointer-events: none;
          opacity: 0.6;
        }

        .node text {
          font: 12px sans-serif;
          font-weight: bold;
        }

        .link,
        .templink {
          fill: none;
          stroke: #c2c0bf;
          stroke-width: 5px;
        }

        .shadow {
          filter: drop-shadow(5px 5px 4px #e5e4e3);
        }

        text:hover {
          text-decoration: underline;
          cursor: pointer;
        }

        .node-selected {
          fill: #ccc;
        }

        .node-deselected {
          fill: #fff;
        }

        .node-hovered {
          fill: #9fd488;
        }

        .actionIcon {
          fill: #fff;
        }

        /* Hiding mouse pointer for orchestration links. Will be removing this piece, once we get related data from API */
        a text {
          cursor: none;
        }
      </style>
      ${pcStructureActions} ${confirmPrompt}
    `;return tree;}connectedCallback(){this.getProductDetails(this.getAttribute("productid"));}getProductDetails(productId,isIncrementalLoad){const input=this.structureSdk.createGetProductDetailsInput();input.productId=productId;input.fields=["Name","ID"];if(isIncrementalLoad){return this.structureSdk.getProductDetails(input);}else{this.structureSdk.getProductDetails(input).then(result=>{this.product=result;if(result.messages&&result.messages.length){VlocityPCUtils.toastError(result.messages[0].message);}else{this.treeInputData=this.makeTreeStructureData(this.product);this.render();this.buildTreeStructure(this.treeInputData);}});}}createChildProduct(parentProductId,childProductId,relationshipType,sequence){const input=this.structureSdk.createCreateChildProductInput();input.parentProductId=parentProductId;input.childProductId=childProductId;input.relationshipType=relationshipType;input.sequence=sequence;VlocityPCUtils.showSpinner();return this.structureSdk.createChildProduct(input);}deleteNode(parentChildItemId){let resolvePromise,rejectPromise,promise=new Promise((resolve,reject)=>{resolvePromise=resolve;rejectPromise=reject;}),confirmation=this.querySelector("#confirmationPrompt");confirmation.show().then(()=>{const input=this.structureSdk.createParentChildItemInput();input.parentChildItemId=parentChildItemId;VlocityPCUtils.showSpinner();this.structureSdk.deleteParentChildItem(input).then(result=>{if(result.messages&&result.messages.length){throw result.messages[0].message;}resolvePromise(result);}).catch(error=>{rejectPromise(error);});},()=>{rejectPromise();});return promise;}updateSequence(productChildItemId,parentId,childId,sequence){const input=this.structureSdk.createParentChildItemInput();input.parentChildItemId=productChildItemId;const seqObj={};seqObj[vlocityPcConfig.namespacePrefix+"ChildLineNumber__c"]=sequence;seqObj[vlocityPcConfig.namespacePrefix+"ParentProductId__c"]=parentId;seqObj[vlocityPcConfig.namespacePrefix+"ChildProductId__c"]=childId;seqObj[vlocityPcConfig.namespacePrefix+"IsRootProductChildItem__c"]=!1;input.reqBody=JSON.stringify(seqObj);VlocityPCUtils.showSpinner();return this.structureSdk.updateProductChildItem(input);}allowDrop(ev){ev.preventDefault();}handleProductDrop(ev,sequence,dropTarget){ev.preventDefault();const droppedElement=JSON.parse(ev.dataTransfer.getData("text/quickadditem"));return this.createChildProduct(dropTarget,droppedElement.Id,"Child",sequence);}toggleDecomposition(){this.clearTree();this.buildTreeStructure(this.treeInputData);}clearTree(){// Removes svg from component
let element=this.querySelector("svg");element.parentNode.removeChild(element);}handleResize(){this.clearTree();this.buildTreeStructure(this.treeInputData);}render(){render(this.template(),this);window.addEventListener("resize",VlocityPCUtils.debounce(this.handleResize,300,this));this.checkbox=this.querySelector("input[name=\"decomposition-switch\"]");}}window.customElements.define(VlocityPcStructureTree.is,VlocityPcStructureTree);class VlocityPcStructureQuickAdd extends HTMLElement{constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.productConsole=VlocitySDK.productconsole.getInstance();this.productStructureSdk=this.productConsole.getProductStructureSdk();}static get is(){return"vlocity-pc-structure-quick-add";}template(){return html`
      <style>
        vlocity-pc-quick-add {
          display: block;
        }
        .vlocity-pc-product-icon {
          background-color: #b781d3;
          margin-right: 5px;
          border-radius: 2px;
        }
      </style>
      <div>
        <vlocity-pc-quick-add
          items="${JSON.stringify(this.quickAddItems)}"
          quickaddheading="${this.translationSdk.translate("PCQuickAddProductsHeading")}"
          quickaddhelptext="${this.translationSdk.translate("PCProductStructureQuickAddHelpMessage")}"
          searchplaceholder=${this.translationSdk.translate("PCQuickAddSearchPlaceholder")}
          additionalhelptext=${this.translationSdk.translate("PCDefaultProductsDisplayedHelpText")}
          noitemstodisplaylabel=${this.translationSdk.translate("PCNoCompatibleProducts")}
        >
          <slot class="slds-hide">
            <div data-value="\${JSON.stringify(item)}">
              <vlocity-icon
                baseurl="/_slds/icons/"
                icon="utility:drag_and_drop"
                size="small"
                label="Drag"
                extraclass="vpc-light-icon"
              ></vlocity-icon>
              <vlocity-icon
                baseurl="/_slds/icons/"
                icon="standard:product"
                size="medium"
                extraclass="vlocity-pc-product-icon"
              ></vlocity-icon>
              <span>\${item.Name}</span>
              <span
                class="slds-float_right slds-p-right--small slds-p-top--x-small"
              >
                \${item.versionLabel}
              </span>
            </div>
          </slot>
        </vlocity-pc-quick-add>
      </div>
    `;}render(){render(this.template(),this);}connectedCallback(){this.getQuickAddProducts();this.searchProductsDebounced=VlocityPCUtils.debounce(this.getQuickAddProducts,600,this);}getQuickAddProducts(){const quickAddList=this.querySelector("vlocity-pc-quick-add");if(quickAddList){quickAddList.showSpinner();}const input=this.productStructureSdk.createGetRelatedProductsInput();input.productId=this.productId;input.searchString=this.searchText||null;this.productStructureSdk.getRelatedProducts(input).then(response=>{if("INVOKE-200"!==response.errorCode){throw response.error;}this.quickAddItems=response.result.products||[];this.quickAddItems.forEach(item=>{item.versionLabel=item[VlocityPCUtils.getCustomFieldName("VersionLabel")]||"";});this.populateQuickaddList();}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>{if(quickAddList){quickAddList.hideSpinner();}});}populateQuickaddList(){const quickAddList=this.querySelector("vlocity-pc-quick-add");if(quickAddList){quickAddList.setAttribute("items",JSON.stringify(this.quickAddItems));this.render();}else{this.render();const quickAddList=this.querySelector("vlocity-pc-quick-add");quickAddList.addEventListener("quickAddItemSearch",event=>{this.searchText=event.detail.searchText;this.searchProductsDebounced();});}}get productId(){return this.getAttribute("productid");}}window.customElements.define(VlocityPcStructureQuickAdd.is,VlocityPcStructureQuickAdd);class VlocityPcStructureEditAttribute extends HTMLElement{constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.productOverrideSdk=VlocitySDK.productconsole.getInstance().getProductOverrideSdk();}static get is(){return"vlocity-pc-structure-edit-attribute";}template(){return html`
      <style>
        .vpc-edit-attribute {
          background-color: var(--vpc-secondary-bg-color);
          overflow: auto;
          position: relative;
        }
        .vpc-form-buttons {
          width: 100%;
        }
      </style>
      <!-- Edit Attribute Form -->
      <div class="vpc-edit-attribute">
        <vlocity-form model="${JSON.stringify(this.sObject)}">
          <div class="slds-p-around_medium slds-p-bottom_none">
            <span class="slds-text-heading_small vpc-title-caps">
              ${this.translationSdk.translate("PCEditAttributeSectionTitle")}
            </span>
          </div>

          <!-- Primary Information -->
          <div class="slds-p-around_medium slds-border_bottom">
            <div class="vpc-title-caps slds-m-bottom_xx-small">
              ${this.translationSdk.translate("PCPrimaryInformation")}
            </div>
            <vlocity-input
              name="${VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride")}"
              value="${this.sObject[VlocityPCUtils.getCustomFieldName("AttributeDisplayNameOverride")]||""}"
              label="${this.translationSdk.translate("PCDisplayName")}"
              type="text"
              class="via-slds"
              placeholder="${this.translationSdk.translate("PCDisplayName")}"
            >
            </vlocity-input>
          </div>

          <!-- Data Information -->
          <div class="slds-p-around_medium slds-border_bottom">
            <div class="vpc-title-caps slds-m-bottom_xx-small">
              ${this.translationSdk.translate("PCDataInformation")}
            </div>

            <label class="slds-form-element__label">
              ${this.translationSdk.translate("PCValue")}
            </label>
            <vlocity-pc-product-property-value
              datatype="${this.sObject[this.namespacePrefix+"ValueDataType__c"]}"
              propertyType="attribute"
              attributeid="${this.sObject.Id}"
              ?required="true"
              requirederrormessage="${this.translationSdk.translate("RequiredField")}"
              .picklistItems=${this.attrPicklistItems}
              value="${this.sObject[this.namespacePrefix+"Value__c"]||""}"
            >
            </vlocity-pc-product-property-value>
          </div>

          <!-- Overridable Behaviors -->
          <div class="slds-p-around_medium slds-border_bottom">
            <div class="vpc-title-caps slds-m-bottom_xx-small">
              ${this.translationSdk.translate("PCOverridableBehavior")}
            </div>
            <div class="vpc-two-columns">
              ${repeat(this.behaviorItems,item=>item.name,item=>html`
                  <div>
                    <div>
                      <div class="slds-checkbox">
                        <input
                          class="vpc-checkbox-input"
                          type="checkbox"
                          name="${item.name}"
                          id="${item.name}"
                          ?checked="${this.sObject[item.name]}"
                        />
                        <label class="slds-checkbox__label" for="${item.name}">
                          <span class="slds-checkbox_faux"></span>
                          <span
                            class="slds-form-element__label slds-p-left_x-small"
                            >${item.displayLabel}</span
                          >
                        </label>
                      </div>
                    </div>
                  </div>
                `)}
            </div>
          </div>

          <!-- Non-Overridable Behaviors -->
          <div class="slds-p-around_medium">
            <div class="vpc-title-caps slds-m-bottom_xx-small">
              ${this.translationSdk.translate("PCNonOverridableBehavior")}
            </div>
            <div class="vpc-two-columns">
              ${repeat(this.nonOverridableBehaviorItems,item=>item.name,(item,index)=>html`
                  <div>
                    <div>
                      <div class="slds-checkbox">
                        <input
                          class="vpc-checkbox-input"
                          type="checkbox"
                          name="${item.name}"
                          id="${item.name}"
                          ?checked="${this.sObject[item.name]}"
                          disabled
                        />
                        <label class="slds-checkbox__label" for="${item.name}">
                          <span class="slds-checkbox_faux"></span>
                          <span
                            class="slds-form-element__label slds-p-left_x-small"
                            >${item.displayLabel}</span
                          >
                        </label>
                      </div>
                    </div>
                  </div>
                `)}
            </div>
          </div>

          <!-- Buttons -->
          <div class="slds-p-around_medium slds-border_top">
            <vlocity-button
              styleType="brand"
              type="button"
              label="${this.translationSdk.translate("PCDoneButton")}"
              @click="${()=>this.saveOverride()}"
            >
            </vlocity-button>
            <vlocity-button
              styleType="neutral"
              label="${this.translationSdk.translate("PCCancelButton")}"
              @click="${()=>this.hideOverrideForm()}"
            >
            </vlocity-button>
          </div>
        </vlocity-form>
      </div>
    `;}getAttributeOverride(){const input=this.productOverrideSdk.createGetOverrideInput();input.type="Attribute";input.contextId=this.rootProductId;input.overriddenObjectId=this.attributeAssignmentId;input.overriddenPCIId=this.parentChildItemId;input.promotionItemId=null;input.promotionId=null;input.hierarchyPath=this.hierarchyPath;VlocityPCUtils.showSpinner();this.productOverrideSdk.getOverride(input).then(response=>{if(response.messages&&"INVOKE-200"!==response.messages[0].code){throw response.messages[0].message;}this.attributeAssignment=JSON.parse(response.result);this.setupOverrideForm();}).catch(error=>VlocityPCUtils.toastError(error)).finally(()=>VlocityPCUtils.hideSpinner());}saveAttributeOverride(){const input=this.productOverrideSdk.createSaveOverrideInput();input.type="Attribute";input.contextId=this.rootProductId;input.sObject=JSON.stringify(this.sObject);input.hierarchyPath=this.hierarchyPath;VlocityPCUtils.showSpinner();this.productOverrideSdk.saveOverride(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){throw result.error;}VlocityPCUtils.toastSuccess();this.hideOverrideForm();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}saveOverride(){const formModel=this.querySelector("vlocity-form").model,propertyValue=this.querySelector("vlocity-pc-product-property-value").getAttribute("value");formModel[VlocityPCUtils.getCustomFieldName("Value")]=propertyValue;const datatype=formModel[VlocityPCUtils.getCustomFieldName("ValueDataType")].toUpperCase(),isValueValid="DATE"===datatype&&propertyValue?VlocityPCUtils.validateYearInDate(propertyValue):!0,checkboxes=this.querySelectorAll(".vpc-checkbox-input");checkboxes.forEach(checkbox=>{formModel[checkbox.getAttribute("name")]=checkbox.checked;});delete formModel[null];this.sObject=formModel;if(isValueValid){this.saveAttributeOverride();}else{VlocityPCUtils.toastError(this.translationSdk.translate("PCInvalidInputValue"));}}hideOverrideForm(){this.dispatchEvent(new CustomEvent("vpceditattributedone",{detail:{}}));}setupOverrideForm(){const item=this.attributeAssignment;this.sObject=item.SObject;this.attrPicklistItems=item.PicklistItems;this.behaviorItems=[{name:this.namespacePrefix+"HasRule__c",displayLabel:this.translationSdk.translate("HasRule")},{name:this.namespacePrefix+"IsHidden__c",displayLabel:this.translationSdk.translate("Hidden")},{name:this.namespacePrefix+"IsReadOnly__c",displayLabel:this.translationSdk.translate("ReadOnly")},{name:this.namespacePrefix+"IsRequired__c",displayLabel:this.translationSdk.translate("Required")}];this.nonOverridableBehaviorItems=[{name:this.namespacePrefix+"IsConfigurable__c",displayLabel:this.translationSdk.translate("PCIsConfigurable")},{name:this.namespacePrefix+"IsEncrypted__c",displayLabel:this.translationSdk.translate("PCEncrypted")},{name:this.namespacePrefix+"IsNotAssetizable__c",displayLabel:this.translationSdk.translate("PCNonAssetizable")},{name:this.namespacePrefix+"IsNotTranslatable__c",displayLabel:this.translationSdk.translate("PCNonTranslatable")}];this.render();}render(){render(this.template(),this);}static get observedAttributes(){return["attributeassignmentid"];}connectedCallback(){this.namespacePrefix=vlocityPcConfig.namespacePrefix;if(this.attributeAssignmentId){this.getAttributeOverride();}}get rootProductId(){return this.getAttribute("rootproductid");}get hierarchyPath(){return this.getAttribute("hierarchyPath");}get attributeAssignmentId(){return"null"===this.getAttribute("attributeassignmentid")?null:this.getAttribute("attributeassignmentid");}get parentChildItemId(){return this.getAttribute("parentchilditemid");}}window.customElements.define(VlocityPcStructureEditAttribute.is,VlocityPcStructureEditAttribute);class VlocityPcStructurePciDetails extends HTMLElement{constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();this.productStructureSdk=this.sdk.getProductStructureSdk();this.productOverrideSdk=this.sdk.getProductOverrideSdk();this.disableBaseCardinality=!1;this.disableGroupCardinality=!1;}static get is(){return"vlocity-pc-structure-pci-details";}template(){let confirmPrompt=html`
      <vlocity-prompt
        titletext="${this.translationSdk.translate("Delete")}"
        helptext="${this.translationSdk.translate("PCConfirmMessage")}"
        confirmtext="${this.translationSdk.translate("Delete")}"
        canceltext="${this.translationSdk.translate("PCCancelButton")}"
        id="deleteConfirmationPrompt"
      >
      </vlocity-prompt>
    `;return html`
      <style>
        .vpc-cardinality {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr;
          grid-column-gap: 10px;
        }
        .vpc-group-cardinality,
        .vpc-grid-two-columns {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-column-gap: 10px;
        }
        .vpc-cardinality-warning-label {
          color: #737373;
          font-size: 11px;
        }
        .vpc-cardinality-override-icon,
        .vpc-cardinality-delete-icon,
        .vpc-group-cardinality-override-icon,
        .vpc-group-cardinality-delete-icon {
          float: right;
          cursor: pointer;
        }
        .vpc-cardinality vlocity-input .slds-form-element__label {
          width: 100%;
        }
      </style>

      <vlocity-form model="${JSON.stringify(this.parentChildItem)}">
        <div>
          ${this.showDetailsSection?html`
                <div class="slds-p-around_medium">
                  <!-- Product Name -->
                  <vlocity-input
                    name="label"
                    disabled="true"
                    label="${this.translationSdk.translate("ProductName")}"
                    type="text"
                    class="via-slds"
                    extraclass="slds-m-bottom_small"
                    value="${this.productName}"
                    placeholder="${this.translationSdk.translate("ProductName")}"
                  >
                  </vlocity-input>

                  <!-- Relationship Type -->
                  <vlocity-combobox
                    name="${this.namespacePrefix}RelationshipType__c"
                    placeholder="${this.translationSdk.translate("PCValueDropdownPlaceholder")}"
                    label="${this.translationSdk.translate("RelationshipType")}"
                    disabled="true"
                    value="${this.parentChildItem[this.namespacePrefix+"RelationshipType__c"]}"
                    options="${JSON.stringify(this.picklistValues[this.namespacePrefix+"RelationshipType__c"])}"
                    iconbaseurl="/_slds/icons/"
                  >
                  </vlocity-combobox>

                  <div class="vpc-grid-two-columns">
                    <!-- Product Spec -->
                    ${this.specificationType&&"Offer"===this.specificationType&&this.productSpec?html`
                          <vlocity-input
                            name="label"
                            disabled="true"
                            label="${this.translationSdk.translate("PCProductSpec")}"
                            type="text"
                            class="via-slds"
                            extraclass="slds-m-top_small slds-m-bottom_small"
                            value="${this.productSpec}"
                            placeholder="${this.translationSdk.translate("PCProductSpec")}"
                          >
                          </vlocity-input>
                        `:``}

                    <!-- Version Label -->
                    ${this.versionLabel?html`
                          <vlocity-input
                            name="label"
                            disabled="true"
                            label="${this.translationSdk.translate("PCVersionName")}"
                            type="text"
                            class="via-slds"
                            extraclass="slds-m-top_small slds-m-bottom_small"
                            value="${this.versionLabel}"
                            placeholder="${this.translationSdk.translate("PCVersionName")}"
                          >
                          </vlocity-input>
                        `:``}
                  </div>
                </div>
              `:""}
        </div>

        <div>
          ${this.showFlagsSection?html`
                <!-- Flags on product in a bundle -->
                <div
                  class="slds-p-around_medium slds-p-top_none slds-border_bottom"
                >
                  <div class="vpc-two-columns">
                    ${repeat(this.flagItems,item=>item.name,(item,index)=>html`
                        <div>
                          <div>
                            <div class="slds-checkbox">
                              <input
                                class="vpc-checkbox-input"
                                type="checkbox"
                                name="${item.name}"
                                id="${item.name}"
                                ?checked="${this.parentChildItem[item.name]}"
                              />
                              <label
                                class="slds-checkbox__label"
                                for="${item.name}"
                              >
                                <span class="slds-checkbox_faux"></span>
                                <span
                                  class="slds-form-element__label slds-p-left_x-small"
                                  >${item.displayLabel}</span
                                >
                              </label>
                            </div>
                          </div>
                        </div>
                      `)}
                  </div>
                </div>
              `:""}
        </div>

        <div>
          ${this.showCardinalitySection?html`
                <!-- Cardinality -->
                <div class="slds-p-around_medium slds-border_bottom">
                  ${this.cardinalityOverrideMessage?html`
                        <vlocity-icon
                          baseurl="/_slds/icons/"
                          icon="utility:warning"
                          size="xx-small"
                          extraclass="slds-icon-text-default"
                        ></vlocity-icon>
                        <span class="vpc-cardinality-warning-label">
                          ${this.translationSdk.translate("PCCardinalityOverrideMessage")}
                        </span>
                      `:""}
                  <div class="slds-p-bottom_medium">
                    <span class="vpc-title-caps">
                      ${this.translationSdk.translate("Cardinality")}
                    </span>
                    ${!this.disableBaseCardinality?html`
                          ${this.allowCardinalityOverride?html`
                                <span class="vpc-cardinality-override-icon">
                                  <vlocity-tooltip
                                    tooltiptype="iconlink"
                                    iconbaseurl="/_slds/icons/"
                                    nubbinposition="right"
                                    icon="utility:record_create"
                                    iconclass="slds-icon-text-default"
                                    iconsize="x-small"
                                    value="${this.translationSdk.translate("PCCreateOverride")}"
                                  ></vlocity-tooltip>
                                </span>
                              `:""}
                        `:""}
                  </div>
                  <div class="vpc-cardinality">
                    <vlocity-input
                      disabled="${this.disableBaseCardinality}"
                      name="${this.namespacePrefix}MinQuantity__c"
                      allownegative="false"
                      allowdecimal="false"
                      required="true"
                      value="${this.parentChildItem[this.namespacePrefix+"MinQuantity__c"]}"
                      label="${this.translationSdk.translate("Min")} ${this.translationSdk.translate("Quantity2")}"
                      type="number"
                      class="via-slds"
                    >
                    </vlocity-input>
                    <vlocity-input
                      disabled="${this.disableBaseCardinality}"
                      name="${this.namespacePrefix}MaxQuantity__c"
                      allownegative="false"
                      allowdecimal="false"
                      required="true"
                      value="${this.parentChildItem[this.namespacePrefix+"MaxQuantity__c"]}"
                      label="${this.translationSdk.translate("Max")} ${this.translationSdk.translate("Quantity2")}"
                      type="number"
                      class="via-slds"
                    >
                    </vlocity-input>
                    <vlocity-input
                      disabled="${this.disableBaseCardinality}"
                      name="${this.namespacePrefix}Quantity__c"
                      allownegative="false"
                      allowdecimal="false"
                      required="true"
                      value="${this.parentChildItem[this.namespacePrefix+"Quantity__c"]}"
                      label="${this.translationSdk.translate("Default")} ${this.translationSdk.translate("Quantity2")}"
                      type="number"
                      class="via-slds"
                    >
                    </vlocity-input>
                  </div>
                  ${this.baseCardinalityOverrideMessage?html`
                        <vlocity-icon
                          baseurl="/_slds/icons/"
                          icon="utility:info"
                          size="xx-small"
                          extraclass="slds-icon-text-default"
                        ></vlocity-icon>
                        <span class="vpc-cardinality-warning-label">
                          ${this.translationSdk.translate("PCBaseCardinalityOverrideMessage")}
                        </span>
                      `:""}
                  ${this.disableBaseCardinality?html`
                        <div class="slds-m-top_medium slds-m-bottom_x-small">
                          <span class="vpc-sub-title">
                            ${this.translationSdk.translate("PCOverriddenValue")}
                          </span>
                          <span class="vpc-cardinality-delete-icon">
                            <vlocity-tooltip
                              tooltiptype="iconlink"
                              iconbaseurl="/_slds/icons/"
                              nubbinposition="right"
                              icon="utility:delete"
                              iconclass="slds-icon-text-default"
                              iconsize="x-small"
                              value="${this.translationSdk.translate("PCDeleteOverride")}"
                            ></vlocity-tooltip>
                          </span>
                        </div>
                        <div class="vpc-cardinality">
                          <vlocity-input
                            name="MinQuantity__c"
                            allownegative="false"
                            allowdecimal="false"
                            required="true"
                            value="${this.cardinalityMetadata.SObject[this.namespacePrefix+"MinQuantity__c"]}"
                            label="${this.translationSdk.translate("Min")} ${this.translationSdk.translate("Quantity2")}"
                            type="number"
                            class="via-slds"
                          ></vlocity-input>
                          <vlocity-input
                            name="MaxQuantity__c"
                            allownegative="false"
                            allowdecimal="false"
                            required="true"
                            value="${this.cardinalityMetadata.SObject[this.namespacePrefix+"MaxQuantity__c"]}"
                            label="${this.translationSdk.translate("Max")} ${this.translationSdk.translate("Quantity2")}"
                            type="number"
                            class="via-slds"
                          ></vlocity-input>
                          <vlocity-input
                            name="Quantity__c"
                            allownegative="false"
                            allowdecimal="false"
                            required="true"
                            value="${this.cardinalityMetadata.SObject[this.namespacePrefix+"Quantity__c"]}"
                            label="${this.translationSdk.translate("Default")} ${this.translationSdk.translate("Quantity2")}"
                            type="number"
                            class="via-slds"
                          ></vlocity-input>
                        </div>
                      `:""}
                  <span class="vpc-invalid-label vpc-min-invalid-label"> </span>
                  <span class="vpc-invalid-label vpc-max-invalid-label"> </span>
                </div>
              `:""}
        </div>

        <div>
          ${this.showGroupCardinalitySection?html`
                <!-- Group Cardinality -->
                <div class="slds-p-around_medium slds-border_bottom">
                  <div class="slds-p-bottom_medium">
                    <span class="vpc-title-caps">
                      ${this.translationSdk.translate("GroupCardinality")}
                    </span>
                    ${!this.disableGroupCardinality?html`
                          ${this.allowGroupCardinalityOverride?html`
                                <span
                                  class="vpc-group-cardinality-override-icon"
                                >
                                  <vlocity-tooltip
                                    tooltiptype="iconlink"
                                    iconbaseurl="/_slds/icons/"
                                    nubbinposition="right"
                                    icon="utility:record_create"
                                    iconclass="slds-icon-text-default"
                                    iconsize="x-small"
                                    value="${this.translationSdk.translate("PCCreateOverride")}"
                                  ></vlocity-tooltip>
                                </span>
                              `:""}
                        `:""}
                  </div>
                  <div class="vpc-group-cardinality">
                    <vlocity-input
                      name="${this.namespacePrefix}MinimumChildItemQuantity__c"
                      disabled="${this.disableGroupCardinality}"
                      allownegative="false"
                      allowdecimal="false"
                      required="true"
                      value="${this.parentChildItem[this.namespacePrefix+"MinimumChildItemQuantity__c"]}"
                      label="${this.translationSdk.translate("Min")} 
                ${this.translationSdk.translate("PCChildren")} 
                ${this.translationSdk.translate("Quantity2")}"
                      type="number"
                      class="via-slds"
                    >
                    </vlocity-input>
                    <vlocity-input
                      name="${this.namespacePrefix}MaximumChildItemQuantity__c"
                      disabled="${this.disableGroupCardinality}"
                      allownegative="false"
                      allowdecimal="false"
                      required="true"
                      value="${this.parentChildItem[this.namespacePrefix+"MaximumChildItemQuantity__c"]}"
                      label="${this.translationSdk.translate("Max")} 
                ${this.translationSdk.translate("PCChildren")} 
                ${this.translationSdk.translate("Quantity2")}"
                      type="number"
                      class="via-slds"
                    >
                    </vlocity-input>
                  </div>
                  ${this.groupCardinalityOverrideMessage?html`
                        <vlocity-icon
                          baseurl="/_slds/icons/"
                          icon="utility:info"
                          size="xx-small"
                          extraclass="slds-icon-text-default"
                        ></vlocity-icon>
                        <span class="vpc-cardinality-warning-label">
                          ${this.translationSdk.translate("PCGroupCardinalityOverrideMessage")}
                        </span>
                      `:""}
                  ${this.disableGroupCardinality?html`
                        <div class="slds-m-top_medium slds-m-bottom_x-small">
                          <span class="vpc-sub-title">
                            ${this.translationSdk.translate("PCOverriddenValue")}
                          </span>
                          <span class="vpc-group-cardinality-delete-icon">
                            <vlocity-tooltip
                              tooltiptype="iconlink"
                              iconbaseurl="/_slds/icons/"
                              nubbinposition="right"
                              icon="utility:delete"
                              iconclass="slds-icon-text-default"
                              iconsize="x-small"
                              value="${this.translationSdk.translate("PCDeleteOverride")}"
                            ></vlocity-tooltip>
                          </span>
                        </div>
                        <div class="vpc-group-cardinality">
                          <vlocity-input
                            name="MinimumChildItemQuantity__c"
                            allownegative="false"
                            allowdecimal="false"
                            required="true"
                            value="${this.cardinalityMetadata.SObject[this.namespacePrefix+"MinimumChildItemQuantity__c"]}"
                            label="${this.translationSdk.translate("Min")} 
                    ${this.translationSdk.translate("PCChildren")} 
                    ${this.translationSdk.translate("Quantity2")}"
                            type="number"
                            class="via-slds"
                          ></vlocity-input>
                          <vlocity-input
                            name="MaximumChildItemQuantity__c"
                            allownegative="false"
                            allowdecimal="false"
                            required="true"
                            value="${this.cardinalityMetadata.SObject[this.namespacePrefix+"MaximumChildItemQuantity__c"]}"
                            label="${this.translationSdk.translate("Max")} 
                    ${this.translationSdk.translate("PCChildren")} 
                    ${this.translationSdk.translate("Quantity2")}"
                            type="number"
                            class="via-slds"
                          ></vlocity-input>
                        </div>
                      `:""}
                  <span
                    class="vpc-invalid-label vpc-group-cardinality-invalid-label"
                  ></span>
                </div>
              `:""}
        </div>
      </vlocity-form>
      ${confirmPrompt}
    `;}getRelationshipDetails(){const input=this.productStructureSdk.createParentChildItemInput();input.parentChildItemId=this.parentChildItemId;VlocityPCUtils.showSpinner();this.productStructureSdk.getProductChildItem(input).then(response=>{if("INVOKE-200"!==response.errorCode){throw response.error;}this.parentChildItem=response.result;this.initialState=response.result;pubsub.fire("vpcproductselected","result",{product:response.result});this.render();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}getDropdownItems(){const input=this.sdk.createGetObjectPicklistsInput();input.objectName=this.namespacePrefix+"ProductChildItem__c";this.sdk.getObjectPicklistsByName(input).then(response=>{if(response.errorCode&&"INVOKE-200"!==response.errorCode){throw response.error;}this.picklistValues=response.result;}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}setupDOMSections(){this.flagItems=[{name:this.namespacePrefix+"IsVirtualItem__c",displayLabel:this.translationSdk.translate("PCVirtualItem")},{name:this.namespacePrefix+"CollapseHierarchy__c",displayLabel:this.translationSdk.translate("PCCollapseHierarchy")}];this.showDetailsSection=!0;this.showFlagsSection=!0;this.showCardinalitySection=!0;this.allowCardinalityOverride=!0;this.showGroupCardinalitySection=!0;this.allowGroupCardinalityOverride=!0;this.groupCardinalityOverrideMessage=!0;if(this.rootProductId===this.productId){// Root Product
this.showDetailsSection=!1;this.showFlagsSection=!1;this.cardinalityOverrideMessage=!0;this.groupCardinalityOverrideMessage=!1;if(this.isLeaf){// Not a Bundled Product
this.showGroupCardinalitySection=!1;this.cardinalityOverrideMessage=!1;this.allowCardinalityOverride=!1;}}else if(this.parentProductId===this.rootProductId){// Simple product or Bundle added as Child to the root product
this.allowCardinalityOverride=!1;if(this.isLeaf){// Not a Bundled Product
this.showGroupCardinalitySection=!1;}}else if(this.parentProductId&&this.parentProductId!=this.rootProductId){// Simple product or Bundle added as Grand-Child in context of the root product
this.baseCardinalityOverrideMessage=!0;this.cardinalityOverrideMessage=!0;if(this.isLeaf){// Not a Bundled Product
this.showGroupCardinalitySection=!1;this.cardinalityOverrideMessage=!1;}}}setupValidationEvents(){const cardinality=[...this.querySelectorAll(".vpc-cardinality vlocity-input")],groupCardinality=[...this.querySelectorAll(".vpc-group-cardinality vlocity-input")],inputElements=cardinality.concat(groupCardinality);inputElements.forEach(ele=>{const element=ele.children[0].childNodes[5].children[0],isListening=element.hasAttribute("isListening");if(!isListening){element.setAttribute("isListening",!0);element.addEventListener("input",event=>{this.checkValidation();});}});}checkValidation(){const formModel=this.querySelector("vlocity-form").model,minQty=parseInt(formModel[this.namespacePrefix+"MinQuantity__c"]),maxQty=parseInt(formModel[this.namespacePrefix+"MaxQuantity__c"]),defaultQty=parseInt(formModel[this.namespacePrefix+"Quantity__c"]),minimunQty=parseInt(formModel[this.namespacePrefix+"MinimumChildItemQuantity__c"]),maximunQty=parseInt(formModel[this.namespacePrefix+"MaximumChildItemQuantity__c"]),minInvalid=this.querySelector(".vpc-min-invalid-label"),maxInvalid=this.querySelector(".vpc-max-invalid-label"),groupCardinalityInvalid=this.querySelector(".vpc-group-cardinality-invalid-label");if(isNaN(minQty)||isNaN(maxQty)||isNaN(defaultQty)){minInvalid.innerText=this.translationSdk.translate("PCReqFieldMissing");return this.setButtonDisabled(!0);}if(isNaN(minimunQty)||isNaN(maximunQty)){groupCardinalityInvalid.innerText=this.translationSdk.translate("PCReqFieldMissing");return this.setButtonDisabled(!0);}if(this.showCardinalitySection){if(minQty>defaultQty){minInvalid.innerText=this.translationSdk.translate("PCCardinalityMinInvalid");return this.setButtonDisabled(!0);}else if(defaultQty>maxQty){maxInvalid.innerText=this.translationSdk.translate("PCCardinalityMaxInvalid");return this.setButtonDisabled(!0);}else{minInvalid.innerText="";maxInvalid.innerText="";this.setButtonDisabled(!1);}}if(this.showGroupCardinalitySection){if(minimunQty>maximunQty){groupCardinalityInvalid.innerText=this.translationSdk.translate("PCGroupCardinalityInvalid");return this.setButtonDisabled(!0);}else{groupCardinalityInvalid.innerText="";this.setButtonDisabled(!1);}}if(this.disableBaseCardinality&&this.showCardinalitySection){let minQuantity=+this.querySelector("[name=\"MinQuantity__c\"]").getAttribute("value"),maxQuantity=+this.querySelector("[name=\"MaxQuantity__c\"]").getAttribute("value"),defaultQuantity=+this.querySelector("[name=\"Quantity__c\"]").getAttribute("value");if(isNaN(minQuantity)||isNaN(maxQuantity)||isNaN(defaultQuantity)){minInvalid.innerText=this.translationSdk.translate("PCReqFieldMissing");return this.setButtonDisabled(!0);}if(minQuantity>defaultQuantity){minInvalid.innerText=this.translationSdk.translate("PCCardinalityMinInvalid");return this.setButtonDisabled(!0);}else if(defaultQuantity>maxQuantity){maxInvalid.innerText=this.translationSdk.translate("PCCardinalityMaxInvalid");return this.setButtonDisabled(!0);}else{minInvalid.innerText="";maxInvalid.innerText="";this.setButtonDisabled(!1);}}if(this.disableGroupCardinality&&this.showGroupCardinalitySection){let minimumQuantity=+this.querySelector("[name=\"MinimumChildItemQuantity__c\"]").getAttribute("value"),maximumQuantity=+this.querySelector("[name=\"MaximumChildItemQuantity__c\"]").getAttribute("value");if(isNaN(minimumQuantity)||isNaN(maximumQuantity)){groupCardinalityInvalid.innerText=this.translationSdk.translate("PCReqFieldMissing");return this.setButtonDisabled(!0);}if(minimumQuantity>maximumQuantity){groupCardinalityInvalid.innerText=this.translationSdk.translate("PCGroupCardinalityInvalid");return this.setButtonDisabled(!0);}else{groupCardinalityInvalid.innerText="";this.setButtonDisabled(!1);}}}updateRelationshipDetails(){const input=this.productStructureSdk.createParentChildItemInput();input.parentChildItemId=this.getAttribute("parentchilditemid");const formModel=this.querySelector("vlocity-form").model,checkboxes=this.querySelectorAll(".vpc-checkbox-input");checkboxes.forEach(checkbox=>{formModel[checkbox.getAttribute("name")]=checkbox.checked;});let closeEditPanel=!0;// deleting fields which cannot be updated due to restrictions
delete formModel.Id;delete formModel.parentChildItem;delete formModel.LastModifiedDate;delete formModel[this.namespacePrefix+"MinMaxDefaultQty__c"];delete formModel[this.namespacePrefix+"SeqNumber__c"];delete formModel.CreatedById;delete formModel.IsDeleted;delete formModel.SystemModstamp;delete formModel.CreatedDate;delete formModel.LastModifiedById;delete formModel.MinQuantity__c;delete formModel.MaxQuantity__c;delete formModel.Quantity__c;delete formModel.MaximumChildItemQuantity__c;delete formModel.MinimumChildItemQuantity__c;input.reqBody=JSON.stringify(formModel);if(this.disableBaseCardinality||this.disableGroupCardinality){closeEditPanel=!1;this.saveProductOverride();}this.finalState=formModel;if(!VlocityPCUtils.isStateEqual(this.initialState,this.finalState)){VlocityPCUtils.showSpinner();this.productStructureSdk.updateProductChildItem(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){throw result.error;}if(!(this.disableBaseCardinality||this.disableGroupCardinality)){VlocityPCUtils.toastSuccess();if(closeEditPanel){this.closeEditRelationship();}}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}else{if(closeEditPanel){this.closeEditRelationship();}}}closeEditRelationship(){this.deselectNode();this.dispatchEvent(new CustomEvent("vpceditrelationshipcancelled",{detail:{},bubbles:!0}));}deselectNode(){let tree=document.querySelector("vlocity-pc-structure-tree");tree.classList.remove("disable-pointer-events");let node=document.querySelector("[name='"+this.parentChildItemId+"'] > rect");node.classList=[];node.classList.add("node-deselected");}setButtonDisabled(value){this.dispatchEvent(new CustomEvent("vpceditrelationshipdisabled",{detail:{disabled:value}}));}getProductOverride(attributeAssignmentId){const input=this.productOverrideSdk.createGetOverrideInput();input.type="Product Definition";input.contextId=this.rootProductId;input.overriddenObjectId=attributeAssignmentId;input.overriddenPCIId=this.parentChildItemId;input.promotionItemId=null;input.promotionId=null;input.hierarchyPath=this.hierarchyPath;return this.productOverrideSdk.getOverride(input).then(result=>{if("INVOKE-200"!==result.errorCode){throw result.error;}if(result.result){this.cardinalityMetadata=JSON.parse(result.result);this.initialSObject=JSON.parse(result.result).SObject;if(this.rootProductId===this.productId){// Root Product
this.disableBaseCardinality=!0;this.disableGroupCardinality=!0;}else if(this.parentProductId===this.rootProductId){// Simple product or Bundle added as Child to the root product
this.disableGroupCardinality=!0;}else if(this.parentProductId&&this.parentProductId!=this.rootProductId){// Simple product or Bundle added as Grand-Child in context of the root product
this.disableBaseCardinality=!0;this.disableGroupCardinality=!0;}this.render();}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}createProductOverride(attributeAssignmentId){const input=this.productOverrideSdk.createCreateOverrideInput();input.type="Product Definition";input.contextId=this.rootProductId;input.overriddenObjectId=attributeAssignmentId;input.overriddenPCIId=this.parentChildItemId;input.promotionItemId=null;input.promotionId=null;input.hierarchyPath=this.hierarchyPath;input.productId=this.productId;VlocityPCUtils.showSpinner();this.productOverrideSdk.createOverride(input).then(result=>{if("INVOKE-200"!==result.errorCode){throw result.error;}this.cardinalityMetadata=JSON.parse(result.result);if(this.rootProductId===this.productId){// Root Product
this.disableGroupCardinality=!0;}else if(this.parentProductId===this.rootProductId){// Simple product or Bundle added as Child to the root product
this.disableGroupCardinality=!0;}else if(this.parentProductId&&this.parentProductId!=this.rootProductId){// Simple product or Bundle added as Grand-Child in context of the root product
this.disableBaseCardinality=!0;this.disableGroupCardinality=!0;}this.render();VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCOverrideCreated"));}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}saveProductOverride(){if(this.disableBaseCardinality&&this.showCardinalitySection){let minQuantity=this.querySelector("[name=\"MinQuantity__c\"]").getAttribute("value"),maxQuantity=this.querySelector("[name=\"MaxQuantity__c\"]").getAttribute("value"),quantity=this.querySelector("[name=\"Quantity__c\"]").getAttribute("value");this.cardinalityMetadata.SObject[VlocityPCUtils.getCustomFieldName("MinQuantity")]=+minQuantity;this.cardinalityMetadata.SObject[VlocityPCUtils.getCustomFieldName("MaxQuantity")]=+maxQuantity;this.cardinalityMetadata.SObject[VlocityPCUtils.getCustomFieldName("Quantity")]=+quantity;}if(this.disableGroupCardinality&&this.showGroupCardinalitySection){let minimumChildItemQuantity=this.querySelector("[name=\"MinimumChildItemQuantity__c\"]").getAttribute("value"),maximumChildItemQuantity=this.querySelector("[name=\"MaximumChildItemQuantity__c\"]").getAttribute("value");this.cardinalityMetadata.SObject[VlocityPCUtils.getCustomFieldName("MinimumChildItemQuantity")]=+minimumChildItemQuantity;this.cardinalityMetadata.SObject[VlocityPCUtils.getCustomFieldName("MaximumChildItemQuantity")]=+maximumChildItemQuantity;}const input=this.productOverrideSdk.createValidateAndSaveOverrideInput();input.type="Product Definition";input.contextId=this.rootProductId;input.sObject=JSON.stringify(this.cardinalityMetadata.SObject);input.hierarchyPath=this.hierarchyPath;this.finalSObject=this.cardinalityMetadata.SObject;if(!VlocityPCUtils.isStateEqual(this.initialSObject,this.finalSObject)){VlocityPCUtils.showSpinner();this.productOverrideSdk.validateAndSaveOverride(input).then(response=>{if(response.errorCode&&"INVOKE-200"!==response.errorCode){throw response.error;}else if(response.messages&&response.messages.length&&"INVOKE-200"!==response.messages[0].messageId){throw response.messages[0].message;}else if(response.result&&response.result.warningMessages&&response.result.warningMessages.length){throw response.result.warningMessages[0];}else{VlocityPCUtils.toastSuccess();this.closeEditRelationship();}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}else{this.closeEditRelationship();}}deleteProductOverride(attributeAssignmentId,overrideDefinitionId,type){let confirmation=this.querySelector("#deleteConfirmationPrompt");confirmation.show().then(()=>{const input=this.productOverrideSdk.createDeleteOverrideInput();input.type="Product Definition";input.contextId=this.rootProductId;input.overridingObjectId=attributeAssignmentId;input.overrideDefinitionId=overrideDefinitionId;VlocityPCUtils.showSpinner();this.productOverrideSdk.deleteOverride(input).then(result=>{if("INVOKE-200"!==result.errorCode){throw result.error;}VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCOverrideDeleted"));"Cardinality"===type?this.toggleCardinalityOverride():this.toggleGroupCardinalityOverride();this.checkValidation();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});});}setupIconEvents(){const createCardinalityIcon=this.querySelector(".vpc-cardinality-override-icon");if(createCardinalityIcon){const isListening=createCardinalityIcon.hasAttribute("isListening");if(!isListening){createCardinalityIcon.setAttribute("isListening",!0);createCardinalityIcon.addEventListener("click",()=>{this.createProductOverride(this.parentChildItemId);this.toggleCardinalityOverride();});}}const deleteCardinalityIcon=this.querySelector(".vpc-cardinality-delete-icon");if(deleteCardinalityIcon){const isListening=deleteCardinalityIcon.hasAttribute("isListening");if(!isListening){deleteCardinalityIcon.setAttribute("isListening",!0);deleteCardinalityIcon.addEventListener("click",()=>{this.deleteProductOverride(this.parentChildItemId,this.cardinalityMetadata.OverrideDefinition__c.Id,"Cardinality");});}}const createGroupCardinalityIcon=this.querySelector(".vpc-group-cardinality-override-icon");if(createGroupCardinalityIcon){const isListening=createGroupCardinalityIcon.hasAttribute("isListening");if(!isListening){createGroupCardinalityIcon.setAttribute("isListening",!0);createGroupCardinalityIcon.addEventListener("click",()=>{this.createProductOverride(this.parentChildItemId);this.toggleGroupCardinalityOverride();});}}const deleteGroupCardinalityIcon=this.querySelector(".vpc-group-cardinality-delete-icon");if(deleteGroupCardinalityIcon){const isListening=deleteGroupCardinalityIcon.hasAttribute("isListening");if(!isListening){deleteGroupCardinalityIcon.setAttribute("isListening",!0);deleteGroupCardinalityIcon.addEventListener("click",()=>{this.deleteProductOverride(this.parentChildItemId,this.cardinalityMetadata.OverrideDefinition__c.Id,"Group Cardinality");});}}}toggleCardinalityOverride(){this.disableBaseCardinality=!this.disableBaseCardinality;if(this.parentProductId&&this.parentProductId!=this.rootProductId){this.disableGroupCardinality=!this.disableGroupCardinality;}if(!this.disableBaseCardinality){this.render();}}toggleGroupCardinalityOverride(){this.disableGroupCardinality=!this.disableGroupCardinality;if(this.parentProductId&&this.parentProductId!=this.rootProductId){this.disableBaseCardinality=!this.disableBaseCardinality;}if(!this.disableGroupCardinality){this.render();}}render(){if(this.picklistValues&&this.parentChildItem){render(this.template(),this);setTimeout(()=>{this.setupIconEvents();this.setupValidationEvents();},1e3);}}connectedCallback(){this.namespacePrefix=vlocityPcConfig.namespacePrefix;this.setupDOMSections();this.getDropdownItems();this.getRelationshipDetails();this.getProductOverride(this.parentChildItemId);}get productName(){return this.getAttribute("productname");}get productId(){return this.getAttribute("productid");}get parentChildItemId(){return this.getAttribute("parentchilditemid");}get rootProductId(){return this.getAttribute("rootproductid");}get parentProductId(){return this.getAttribute("parentProductId");}get hierarchyPath(){return this.getAttribute("hierarchyPath");}get productSpec(){const productSpec=" "===this.getAttribute("productSpec")?!1:this.getAttribute("productSpec");return productSpec;}get specificationType(){const specificationType=" "===this.getAttribute("specificationType")?!1:this.getAttribute("specificationType");return specificationType;}get versionLabel(){const label=" "===this.getAttribute("versionLabel")?!1:this.getAttribute("versionLabel");return label;}get isLeaf(){return this.hasAttribute("isleaf");}}window.customElements.define(VlocityPcStructurePciDetails.is,VlocityPcStructurePciDetails);class VlocityPcStructurePciAttributes extends HTMLElement{constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();this.productOverrideSdk=this.sdk.getProductOverrideSdk();}static get is(){return"vlocity-pc-structure-pci-attributes";}template(){let confirmPrompt=html`
      <vlocity-prompt
        titletext="${this.translationSdk.translate("Delete")}"
        helptext="${this.translationSdk.translate("PCConfirmMessage")}"
        confirmtext="${this.translationSdk.translate("Delete")}"
        canceltext="${this.translationSdk.translate("PCCancelButton")}"
        id="deleteConfirmationPrompt"
      >
      </vlocity-prompt>
    `;return html`
      <style>
        .vpc-attribute_list-item {
          background-color: var(--vpc-primary-bg-color);
          padding: 10px;
          margin-top: 10px;
          line-height: 2.5;
          display: grid;
          grid-template-columns: 85% 15%;
          grid-column-gap: 10px;
        }
        .vpc-attributes_show-all-or-fewer {
          display: inline-block;
          margin-top: 10px;
          color: #1489ee;
          cursor: pointer;
        }
        .vpc-attribute_list-item .vpc-attribute-action-icons {
          float: right;
          cursor: pointer;
        }
        .vpc-attribute-desc {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr;
          grid-column-gap: 5px;
        }
        .vpc-attribute-override-name {
          display: block;
          color: #737373;
          font-size: 11px;
          margin-top: -15px;
        }
        .vpc-text-overflow {
          display: inline-block;
          max-width: 110px;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          margin-right: 5px;
        }
        .vpc-title-caps .slds-text-heading_small .vpc-chevron-icon {
          fill: #2b2826;
        }
        .vpc-editOverride-icon {
          margin-right: 12px;
        }
        .vpc-disable-icon-actions {
          opacity: 0.5;
          pointer-events: none;
        }
      </style>
      <!-- Attributes -->
      <div class="slds-p-around_medium slds-p-bottom_x-large">
        <div class="vpc-title-caps">
          <span
            class="slds-text-heading_small slds-float_right"
            @click=${()=>{this.minimizeAttributes=!this.minimizeAttributes;this.render();}}
          >
            <vlocity-icon
              baseurl="/_slds/icons/"
              icon="${this.minimizeAttributes?"utility:chevrondown":"utility:chevronup"}"
              size="xx-small"
              extraclass="vpc-chevron-icon"
            ></vlocity-icon>
          </span>
          ${this.translationSdk.translate("PCAttributesSectionTitle")}
          (${this.attributeListItems.length})
        </div>
        <div class="${this.minimizeAttributes?"vpc-hidden":""}">
          ${0<this.attributeListItems.length?html`
                  <span
                    class="vpc-attribute_list-item vpc-font-bold"
                  >
                    <span class="vpc-attribute-desc">
                      <span
                        >${this.translationSdk.translate("Name")}</span
                      >
                      <span
                        >${this.translationSdk.translate("PCOriginal")}</span
                      >
                      <span
                        >${this.translationSdk.translate("PCOverride")}</span
                      >
                    </span>
                    <span
                      >${this.translationSdk.translate("Actions")}</span
                    >
                  </span>
                  <ul>
                    ${this.attributeListItems.slice(0,this.showAllAttributes?this.attributeListItems.length:4).map(item=>{return html`
                          <li class="vpc-attribute_list-item">
                            <span class="vpc-attribute-desc">
                              <span
                                class="${item.Override?"vpc-font-italic":""} vpc-font-bold vpc-text-overflow"
                              >
                                <vlocity-tooltip
                                  linktext="${item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("AttributeName")]}"
                                  nubbinposition="bottom"
                                  value="${item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("AttributeName")]}"
                                >
                                </vlocity-tooltip>
                              </span>
                              <span
                                class="${item.Override?"vpc-font-line-through":""} vpc-text-overflow"
                              >
                                <vlocity-tooltip
                                  linktext="${this.getLabelByValue(item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("ValidValuesData")],item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("ValueDataType")],item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("Value")])}"
                                  nubbinposition="bottom"
                                  value="${this.getLabelByValue(item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("ValidValuesData")],item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("ValueDataType")],item.AttributeAssignment[VlocityPCUtils.getCustomFieldName("Value")])}"
                                >
                                </vlocity-tooltip>
                              </span>
                              <span class="vpc-text-overflow">
                                ${item.Override?html`
                                      <vlocity-tooltip
                                        linktext="${this.getLabelByValue(item.Override[VlocityPCUtils.getCustomFieldName("ValidValuesData")],item.Override[VlocityPCUtils.getCustomFieldName("ValueDataType")],item.Override[VlocityPCUtils.getCustomFieldName("Value")])}"
                                        nubbinposition="bottom"
                                        value="${this.getLabelByValue(item.Override[VlocityPCUtils.getCustomFieldName("ValidValuesData")],item.Override[VlocityPCUtils.getCustomFieldName("ValueDataType")],item.Override[VlocityPCUtils.getCustomFieldName("Value")])}"
                                      >
                                      </vlocity-tooltip>
                                    `:""}
                              </span>
                            </span>
                            <span
                              class="vpc-attribute-action-icons"
                              id="${item.AttributeAssignment.Id}"
                            >
                              ${!item.Override?html`
                                    <span
                                      class="vpc-attribute-action-icons slds-m-right_small"
                                      id="${item.AttributeAssignment.Id}"
                                    >
                                      <span class="vpc-createOverride-icon">
                                        <vlocity-tooltip
                                          tooltiptype="iconlink"
                                          iconbaseurl="/_slds/icons/"
                                          nubbinposition="right"
                                          icon="utility:record_create"
                                          iconclass="slds-icon-text-default"
                                          iconsize="x-small"
                                          value="${this.translationSdk.translate("PCCreateOverride")}"
                                        >
                                        </vlocity-tooltip>
                                      </span>
                                    </span>
                                  `:html`
                                    <span class="vpc-editOverride-icon">
                                      <vlocity-tooltip
                                        tooltiptype="iconlink"
                                        iconbaseurl="/_slds/icons/"
                                        nubbinposition="right"
                                        icon="utility:edit"
                                        iconclass="slds-icon-text-default"
                                        iconsize="x-small"
                                        value="${this.translationSdk.translate("Edit")}"
                                      >
                                      </vlocity-tooltip>
                                    </span>
                                    <span
                                      class="vpc-deleteOverride-icon"
                                      id="${item.OverrideDefinitionId}"
                                    >
                                      <vlocity-tooltip
                                        tooltiptype="iconlink"
                                        iconbaseurl="/_slds/icons/"
                                        nubbinposition="right"
                                        icon="utility:delete"
                                        iconclass="slds-icon-text-default"
                                        iconsize="x-small"
                                        value="${this.translationSdk.translate("Delete")}"
                                      ></vlocity-tooltip>
                                    </span>
                                  `}
                            </span>
                          </li>
                        `;})}
                  </ul>
                  ${4<this.attributeListItems.length?html`
                          <span
                            class="vpc-attributes_show-all-or-fewer"
                            @click=${()=>this.toggleListItems()}
                            >${this.showAllAttributes?this.translationSdk.translate("PCShowFewer"):this.translationSdk.translate("PCShowAll")}</span
                          >
                        `:``}
                </div>
                `:html`
                <div
                  class="slds-text-title slds-text-align_center slds-m-top_large"
                >
                  ${this.translationSdk.translate("PCNoItemsToShow")}
                </div>
              `}
        </div>
      </div>
      ${confirmPrompt}
    `;}getAttributeAssignments(){const input=this.sdk.createGetProductAttributeAssignmentsInput();input.productId=this.productId;VlocityPCUtils.showSpinner();return this.sdk.getProductAttributeAssignments(input).then(response=>{if(response.errorCode&&"INVOKE-200"!==response.errorCode){throw response.error;}const attributes=response.result,attributeAssignmentIds=[];attributes.forEach(item=>{attributeAssignmentIds.push(item.attributeAssignment.Id);});if(0<attributeAssignmentIds.length){this.getAttributeOverrideList(attributeAssignmentIds);}else{this.attributeListItems=[];this.render();}}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}getAttributeOverrideList(attributeAssignmentIds){const input=this.productOverrideSdk.createGetAttributeOverrideListInput();input.type="Attribute";input.contextId=this.rootProductId;input.overriddenObjectIds=attributeAssignmentIds;input.overriddenPCIId=this.parentChildItemId;input.promotionItemId=null;input.promotionId=null;input.hierarchyPath=this.hierarchyPath;VlocityPCUtils.showSpinner();this.productOverrideSdk.getAttributeOverrideList(input).then(response=>{if(response.errorCode&&"INVOKE-200"!==response.errorCode){throw response.error;}const result=JSON.parse(response.result);this.attributeListItems=Object.keys(result.AttributeAssignments).map(function(key){return result.AttributeAssignments[key];});this.attributeListItems.sort((a,b)=>{return+a.AttributeAssignment[VlocityPCUtils.getCustomFieldName("AttributeDisplaySequence")]>+b.AttributeAssignment[VlocityPCUtils.getCustomFieldName("AttributeDisplaySequence")]?1:-1;});this.toggleListItems();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}toggleListItems(){this.showAllAttributes=!this.showAllAttributes;this.render();}createAttributeOverride(attributeAssignmentId){const input=this.productOverrideSdk.createCreateOverrideInput();input.type="Attribute";input.contextId=this.rootProductId;input.overriddenObjectId=attributeAssignmentId;input.overriddenPCIId=this.parentChildItemId;input.promotionItemId=null;input.promotionId=null;input.hierarchyPath=this.hierarchyPath;input.productId=this.productId;VlocityPCUtils.showSpinner();const icon=this.querySelector(`#${attributeAssignmentId} > .vpc-createOverride-icon`);icon.classList.add("vpc-disable-icon-actions");this.productOverrideSdk.createOverride(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){throw result.error;}this.getAttributeAssignments();VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCOverrideCreated"));}).catch(error=>{VlocityPCUtils.toastError(error);icon.classList.remove("vpc-disable-icon-actions");}).finally(()=>{VlocityPCUtils.hideSpinner();});}deleteAttributeOverride(attributeAssignmentId,overrideDefinitionId){let confirmation=this.querySelector("#deleteConfirmationPrompt");confirmation.show().then(()=>{const input=this.productOverrideSdk.createDeleteOverrideInput();input.type="Attribute";input.contextId=this.rootProductId;input.overridingObjectId=attributeAssignmentId;input.overrideDefinitionId=overrideDefinitionId;VlocityPCUtils.showSpinner();const icons=this.querySelectorAll(`#${attributeAssignmentId} > span`);icons.forEach(icon=>icon.classList.add("vpc-disable-icon-actions"));this.productOverrideSdk.deleteOverride(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){VlocityPCUtils.toastError(result.error);icons.forEach(icon=>icon.classList.add("vpc-disable-icon-actions"));}else{this.getAttributeAssignments();VlocityPCUtils.toastSuccess(this.translationSdk.translate("PCOverrideDeleted"));}}).catch(error=>{VlocityPCUtils.toastError(error);icons.forEach(icon=>icon.classList.add("vpc-disable-icon-actions"));}).finally(()=>{VlocityPCUtils.hideSpinner();});});}setupIconEvents(){const createItems=this.querySelectorAll(".vpc-createOverride-icon");if(createItems){createItems.forEach(item=>{const isListening=item.hasAttribute("isListening");if(!isListening){item.setAttribute("isListening",!0);item.addEventListener("click",event=>{this.createAttributeOverride(event.currentTarget.parentElement.id);});}});}const editItems=this.querySelectorAll(".vpc-editOverride-icon");if(editItems){editItems.forEach(item=>{const isListening=item.hasAttribute("isListening");if(!isListening){item.setAttribute("isListening",!0);item.addEventListener("click",event=>{this.showOverrideForm(event.currentTarget.parentElement.id);});}});}const deleteItems=this.querySelectorAll(".vpc-deleteOverride-icon");if(deleteItems){deleteItems.forEach(item=>{const isListening=item.hasAttribute("isListening");if(!isListening){item.setAttribute("isListening",!0);item.addEventListener("click",event=>{this.deleteAttributeOverride(event.currentTarget.parentElement.id,event.currentTarget.id);});}});}}showOverrideForm(attributeAssignmentId){this.attributeAssignmentId=attributeAssignmentId;this.attributeAssignment=this.attributeListItems.find(item=>item.AttributeAssignment.Id===attributeAssignmentId);this.dispatchEvent(new CustomEvent("vpcattributeeditclicked",{detail:{attributeAssignmentId:this.attributeAssignmentId}}));}getLabelByValue(validValues,datatype,value){if(!value){return"";}if("PICKLIST"===datatype.toUpperCase()){const data=JSON.parse(validValues);return data.find(item=>{return item.value===value;}).displayText;}else if("MULTI PICKLIST"===datatype.toUpperCase()){const searchText=value.split(";"),result=[],data=JSON.parse(validValues);searchText.forEach(input=>{const record=data.find(item=>{return item.value===input;});if(record){result.push(record.displayText);}});return result.join(", ");}else{return value;}}render(){render(this.template(),this);setTimeout(()=>{this.setupIconEvents();},0);}connectedCallback(){this.namespacePrefix=vlocityPcConfig.namespacePrefix;this.minimizeAttributes="true"===this.getAttribute("minimizeattributes");this.showAllAttributes=!0;this.getAttributeAssignments();}get productId(){return this.getAttribute("productid");}get rootProductId(){return this.getAttribute("rootproductid");}get hierarchyPath(){return this.getAttribute("hierarchyPath");}get parentChildItemId(){return this.getAttribute("parentchilditemid");}}window.customElements.define(VlocityPcStructurePciAttributes.is,VlocityPcStructurePciAttributes);class VlocityPcStructureEditRelationship extends HTMLElement{constructor(){super();this.translationSdk=VlocitySDK.translation.getInstance();this.sdk=VlocitySDK.productconsole.getInstance();this.productStructureSdk=this.sdk.getProductStructureSdk();this.productOverrideSdk=this.sdk.getProductOverrideSdk();this.showAttributeOverrideForm=!1;this.minimizeAttributes=!0;this.attributeAssignmentId=null;}static get is(){return"vlocity-pc-structure-edit-relationship";}template(){return html`
      <style>
        .vpc-edit-relationship {
          background-color: var(--vpc-secondary-bg-color);
          overflow: auto;
          position: relative;
        }
        .vpc-two-columns {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-column-gap: 10px;
        }
        .via-slds vlocity-tooltip span a,
        .via-slds vlocity-tooltip span a:hover,
        .via-slds vlocity-tooltip span a:focus {
          color: black;
          text-decoration: none;
        }
        .vpc-edit-relationship > div > vlocity-tooltip {
          float: right;
        }
      </style>

      ${this.showAttributeOverrideForm?html`
            <div>
              <vlocity-pc-structure-edit-attribute
                rootproductid="${this.rootProductId}"
                hierarchypath="${this.hierarchyPath}"
                attributeassignmentid="${this.attributeAssignmentId}"
                parentchilditemid="${this.parentChildItemId}"
              >
              </vlocity-pc-structure-edit-attribute>
            </div>
          `:``}
      <div
        class="${!this.showAttributeOverrideForm?"slds-show":"slds-hide"}"
      >
        <!-- Edit Product Property -->
        <div class="vpc-edit-relationship">
          <div class="slds-p-horizontal_medium slds-m-top_x-large">
            <span class="slds-text-heading_small vpc-title-caps">
              ${this.translationSdk.translate("EditRelationship")}
            </span>
            ${this.specDetails&&this.specDetails.specificationType?html`
                  <vlocity-tooltip
                    tooltiptype="iconlink"
                    iconbaseurl="/_slds/icons/"
                    nubbinposition="right"
                    icon="utility:info"
                    iconclass="slds-icon-text-default"
                    iconsize="x-small"
                    value="${this.translationSdk.translate("PCSpecificationType")}: 
                          ${this.specDetails.specificationType}"
                  >
                  </vlocity-tooltip>
                `:``}
          </div>
          <vlocity-pc-structure-pci-details
            productname="${this.productName}"
            productid="${this.productId}"
            rootproductid="${this.rootProductId}"
            parentproductid="${this.parentProductId}"
            parentchilditemid="${this.parentChildItemId}"
            hierarchypath="${this.hierarchyPath}"
            specificationType="${this.specDetails&&this.specDetails.specificationType?this.specDetails.specificationType:" "}"
            productSpec="${this.specDetails&&this.specDetails.name?this.specDetails.name:" "}"
            versionLabel="${this.specDetails&&this.specDetails.versionLabel?this.specDetails.versionLabel:" "}"
            ?isleaf=${this.isLeaf}
          ></vlocity-pc-structure-pci-details>

          ${!["Resource","Service"].includes(this.specDetails.specificationType)?html`
                <vlocity-pc-structure-pricing-section
                  productId="${this.productId}"
                ></vlocity-pc-structure-pricing-section>
              `:``}

          <div class="slds-m-bottom_xx-large">
            ${this.showAttributesSection?html`
                  <vlocity-pc-structure-pci-attributes
                    productid="${this.productId}"
                    rootproductid="${this.rootProductId}"
                    hierarchypath="${this.hierarchyPath}"
                    parentchilditemid="${this.parentChildItemId}"
                    minimizeattributes="${this.minimizeAttributes}"
                  ></vlocity-pc-structure-pci-attributes>
                `:""}
          </div>
          <!-- Buttons -->
          <vlocity-pc-done-cancel></vlocity-pc-done-cancel>
        </div>
      </div>
    `;}updateRelationshipDetails(){const pciDetails=this.querySelector("vlocity-pc-structure-pci-details");if(pciDetails){pciDetails.updateRelationshipDetails();}}closeEditRelationship(){const pciDetails=this.querySelector("vlocity-pc-structure-pci-details");if(pciDetails){pciDetails.closeEditRelationship();}}getHierarchyPath(){const input=this.productOverrideSdk.createGetProductHierarchyPath();input.offerId=this.rootProductId;input.productId=this.productId;VlocityPCUtils.showSpinner();this.productOverrideSdk.getProductHierarchyPath(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){throw result.error;}this.hierarchyPath=result.result?result.result:this.rootProductId;}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}getSpecDetails(){const input=this.productStructureSdk.createParentChildItemInput();input.parentChildItemId=this.productId;VlocityPCUtils.showSpinner();this.productStructureSdk.getProductChildItem(input).then(result=>{if(result.errorCode&&"INVOKE-200"!==result.errorCode){throw result.error;}const specificationDetails=result.result,nsp=vlocityPcConfig.namespacePrefix||"";this.specDetails={name:specificationDetails[nsp+"ProductSpecId"+"__r"]&&specificationDetails[nsp+"ProductSpecId"+"__r"].Name,specificationType:specificationDetails[VlocityPCUtils.getCustomFieldName("SpecificationType")],versionLabel:specificationDetails[VlocityPCUtils.getCustomFieldName("VersionLabel")]};this.render();}).catch(error=>{VlocityPCUtils.toastError(error);}).finally(()=>{VlocityPCUtils.hideSpinner();});}showOverrideForm(event){this.attributeAssignmentId=event.detail.attributeAssignmentId;this.showAttributeOverrideForm=!0;this.render();}hideOverrideForm(){this.showAttributeOverrideForm=!1;this.attributeAssignmentId=null;this.render();const pciAttibutes=this.querySelector("vlocity-pc-structure-pci-attributes");if(pciAttibutes){pciAttibutes.connectedCallback();}}setupEditAttributeEvents(){const editAttribute=this.querySelector("vlocity-pc-structure-edit-attribute");if(editAttribute){const isListening=editAttribute.hasAttribute("isListening");if(!isListening){editAttribute.setAttribute("isListening",!0);editAttribute.addEventListener("vpceditattributedone",event=>{this.hideOverrideForm();});}}}setupPciAttributeEvents(){const pciAttibutes=this.querySelector("vlocity-pc-structure-pci-attributes");if(pciAttibutes){const isListening=pciAttibutes.hasAttribute("isListening");if(!isListening){pciAttibutes.setAttribute("isListening",!0);pciAttibutes.addEventListener("vpcattributeeditclicked",event=>{this.showOverrideForm(event);this.minimizeAttributes=!1;});}}}setupPciDetailsEvents(){const pciDetails=this.querySelector("vlocity-pc-structure-pci-details");if(pciDetails){const isListening=pciDetails.hasAttribute("isListening");if(!isListening){pciDetails.setAttribute("isListening",!0);pciDetails.addEventListener("vpceditrelationshipdisabled",event=>{this.querySelector("vlocity-button[type='button']").setAttribute("disabled",event.detail.disabled);});}}}render(){this.showAttributesSection=!(this.rootProductId===this.productId);render(this.template(),this);setTimeout(()=>{this.setupEditAttributeEvents();this.setupPciDetailsEvents();this.setupPciAttributeEvents();},500);}connectedCallback(){this.namespacePrefix=vlocityPcConfig.namespacePrefix;this.getHierarchyPath();this.getSpecDetails();pubsub.register("vpcshowstructurequickadds",{result:this.closeEditRelationship.bind(this)});this.registerEvents();}registerEvents(){this.doneAndCancelHandler={done:this.updateRelationshipDetails.bind(this),cancel:this.closeEditRelationship.bind(this)};pubsub.register("ondone",this.doneAndCancelHandler);pubsub.register("oncancel",this.doneAndCancelHandler);}disconnectedCallback(){pubsub.unregister("vpcshowstructurequickadds",{result:this.closeEditRelationship.bind(this)});pubsub.unregister("ondone",this.doneAndCancelHandler);pubsub.unregister("oncancel",this.doneAndCancelHandler);}get productName(){return this.getAttribute("productname");}get productId(){return this.getAttribute("productid");}get parentChildItemId(){return this.getAttribute("parentchilditemid");}get rootProductId(){return this.getAttribute("rootproductid");}get isLeaf(){return this.hasAttribute("isleaf");}get parentProductId(){return this.getAttribute("parentProductId");}}window.customElements.define(VlocityPcStructureEditRelationship.is,VlocityPcStructureEditRelationship);class VlocityPcStructureAdjustmentForm extends HTMLElement{constructor(){super();}static get is(){return"vlocity-pc-structure-adjustment-form";}template(){return html`
      <style>
        vlocity-pc-structure-adjustment-form {
            --vpc-primary-color: #b9b8b6;
            --vpc-secondary-color: black;
    
            --vpc-primary-text-color: #6b6b6b;
    
            --vpc-primary-button-text-color: #59a6f3;
            --vpc-secondary-button-text-color: black;
    
            --vpc-primary-bg-color: #fafafa;
            --vpc-secondary-bg-color: white;
    
            --vpc-primary-button-bg-color: #1389ee;
            --vpc-secondary-button-bg-color: #e7f0f7;
    
            --vpc-primary-disabled-button-color: #aeadaa;
    
            --vpc-primary-border-color: #eaeae9;
            --vpc-secondary-border-color: #eaeaea;
    
            --vpc-primary-input-border-color: lightgray;
    
            --vpc-primary-pill-bg-color: #f4f6fe;
    
            --vpc-primary-status-border-color: #47e6b1;
            --vpc-secondary-status-border-color: red;
    
            --vpc-secondary-status-border-color: red;
    
            --vpc-primary-page-navigation-color: #ffffff;
    
            --vpc-primary-page-navigation-bg-color: #0070d2;

            position: relative;
            display: grid;
            height: 100vh;
            align-content: start;
            border-left: 1px solid var(--vpc-primary-border-color);
            overflow: scroll;
        }

        .vpc-pricing-details-container .vpc-title-caps {
            margin: 20px 0;
            font-weight: bold;
            font-size: 14px;
          }

          vlocity-pc-quick-add {
            display: none;
          }

          .vpc-adjustment-form-container .vpc-done-button-wait-state {
            background: lightgray;
            height: 32px;
            width: 78px;
          }
  
          .vpc-pricing-forms-button-container,
          .vpc-back-to-quickadds-button-container {
            position: fixed;
            bottom: 0;
            width: 100%;
            padding: 20px 30px 20px;
            border-top: 1px solid var(--vpc-secondary-border-color);
            border-left: 1px solid var(--vpc-secondary-border-color);
            border-bottom: 1px solid var(--vpc-secondary-border-color);
            background: var(--vpc-secondary-bg-color);
            z-index: 3;
          }
  
          .vpc-pricing-forms-button-container .vpc-promo-done,  .vpc-back-to-quickadds-button-container .vpc-back-to-quickadds-button {
            border: none;
            background: var(--vpc-primary-button-bg-color);
            color: var(--vpc-secondary-bg-color);
            padding: 1px 23px;
          }
  
          .vpc-pricing-forms-button-container .vpc-promo-done:hover, .vpc-back-to-quickadds-button-container .vpc-back-to-quickadds-button:hover {
            background: var(--vpc-primary-button-text-color);
            color: var(--vpc-secondary-bg-color);
          }
  
          .vpc-pricing-forms-button-container .vpc-promo-done:active {
            background: var(--vpc-primary-border-color);
          }
  
          .vpc-pricing-forms-button-container .vpc-promo-done[disabled] {
            background: var(--vpc-primary-border-color);
            color: var(--vpc-primary-disabled-button-color);
          }
  
          .vpc-back-to-quickadds-button-container {
            justify-content: flex-start;
          }
  
          .vpc-form-container {
            display: none;
          }
  
          .vpc-pc-existing-promotion-offer-form .vpc-title-caps {
            margin: 20px 0;
            font-weight: bold;
            font-size: 18px;
          }
  
          .vpc-pricing-details-container .vpc-title-caps {
            margin: 20px 0;
            font-weight: bold;
            font-size: 14px;
          }
  
          .vpc-pricing-forms-button-container
            .vpc-spinner-container {
            position: absolute;
            left: 68px;
            bottom: 36px;
          }

          .vpc-adjustment-form-container .vpc-hide-side-bar-item {
              display: none;
          }
      </style>

      <div class="vpc-adjustment-form-container">
        <div class="vpc-pricing-tab-form-container vpc-form-container">
            <vlocity-pc-existing-promotion-offer-form
            productId="${this.productId}"
            rootProductId="${this.rootProductId}"
            ></vlocity-pc-existing-promotion-offer-form>
            <vlocity-pc-price-list-header
            productId="${this.productId}"
            rootProductId="${this.rootProductId}"
            ></vlocity-pc-price-list-header>
            <vlocity-pc-price-form></vlocity-pc-price-form>
            <vlocity-pc-promotion-form productId="${this.productId}"
            rootProductId="${this.rootProductId}"></vlocity-pc-promotion-form>
            <vlocity-pc-pricing-details-form></vlocity-pc-pricing-details-form>
        </div>
        <div class="vpc-context-rules-container">
            <vlocity-pc-choose-context-rules-form></vlocity-pc-choose-context-rules-form>
        </div>

        <div class="vpc-pricing-forms-button-container">
            <button
            class="vpc-table-button vpc-promo-done slds-button slds-button_neutral"
            @click="${()=>VlocityPCFormsService.donePricingFormButtonHandler(this)}">
            ${this.translations.translate("PCDoneButton")}
            </button>
            <div class="vpc-spinner-container vpc-hide-side-bar-item">
              <div
                  role="status"
                  class="slds-spinner slds-spinner_small slds-spinner_brand slds-align_absolute-center"
              >
                  <span class="slds-assistive-text">Loading</span>
                  <div class="slds-spinner__dot-a"></div>
                  <div class="slds-spinner__dot-b"></div>
              </div>
            </div>
            <button
            class="vpc-promo-cancel slds-button slds-button_neutral vpc-table-button"
            @click="${()=>this.cancelPricingFormButtonHandler(this)}"
            >
            ${this.translations.translate("PCCancelButton")}
            </button>
        </div>
        <div class="vpc-back-to-quickadds-button-container vpc-form-container">
            <button
            class="vpc-table-button vpc-back-to-quickadds-button slds-button slds-button_neutral"
            @click="${()=>this.cancelPricingFormButtonHandler(this)}"
            >
            ${this.translations.translate("PCDoneButton")}
            </button>
            </div>
        </div>
        </div>
    `;}connectedCallback(){this.productConsole=VlocitySDK.productconsole.getInstance().getProductPricingSdk();this.translations=VlocitySDK.translation.getInstance();this.initEventHandlers();pubsub.fire("vpcgetrootproduct","result",{});this.isOnInitialForm=!0;}initEventHandlers(){pubsub.register("vpcgetproductid",{result:this.getProductIdEvent.bind(this)});pubsub.register("vpcenabledonebutton",{result:this.enableDoneButton.bind(this)});pubsub.register("vpcsetrootproduct",{result:this.setRootProductId.bind(this)});pubsub.register("vpcenablebuttoncontainer",{result:this.enableButtonContainer.bind(this)});pubsub.register("vpcsetbuttonwaitstate",{result:this.setDoneButtonWaitState.bind(this)});pubsub.register("vpcremovebuttonwaitstate",{result:this.removeButtonWaitState.bind(this)});pubsub.register("vpcrulesetadded",{result:this.refreshAppliedPromotions.bind(this)});pubsub.register("vpcdisablecancelbutton",{result:this.disableCancelButton.bind(this)});pubsub.register("vpcisoninitialform",{result:this.setIntialFormState.bind(this)});pubsub.register("vpceditmodeon",{result:this.setEditModeState.bind(this)});pubsub.register("vpcresetallforms",{result:this.resetAllForms.bind(this)});pubsub.register("vpcresetadjustmentoverrideform",{result:this.cancelPricingFormButtonHandler.bind(this)});}setIntialFormState(e){this.isOnInitialForm=this.isEditMode?!1:e.isOnInitialForm;}removeButtonWaitState(){VlocityPCFormsService.removeButtonWaitState(this);}setDoneButtonWaitState(){VlocityPCFormsService.setDoneButtonWaitState(this);}disableCancelButton(e){if(e.disable){this.querySelector(".vpc-promo-cancel").setAttribute("disabled","");}else{this.querySelector(".vpc-promo-cancel").removeAttribute("disabled");}}enableButtonContainer(){this.querySelector(".vpc-pricing-forms-button-container").classList.remove("vpc-hide-side-bar-item");}setRootProductId(e){this.rootProductId=e.rootProductId;this.productId=e.productId;render(this.template(),this);setTimeout(()=>{this.loadChooseExistingForm();pubsub.fire("vpccontextchange","result",{context:"adjustmentContext"});},0);}loadChooseExistingForm(){this.querySelector("vlocity-pc-existing-promotion-offer-form").classList.remove("vpc-hide-side-bar-item");this.querySelector(".vpc-pricing-tab-form-container").classList.add("vpc-show-side-bar-item");this.querySelector("vlocity-pc-promotion-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-price-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-pricing-details-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-price-list-header").classList.add("vpc-hide-side-bar-item");}enableDoneButton(e){this.pricingDetailsFormReady=e.enable;}resetContextRules(){const contextRulesContainer=this.querySelector(".vpc-context-rules-container");render(html``,contextRulesContainer);// Re-render the form from scratch
const form=html`
      <vlocity-pc-choose-context-rules-form></vlocity-pc-choose-context-rules-form>
    `;render(form,contextRulesContainer);}getCreatePriceListInput(){switch(this.querySelector("vlocity-pc-pricing-details-form").context){case"priceContext":return this.createPriceCostPriceListEntryInput();case"costContext":return this.createPriceCostPriceListEntryInput();case"adjustmentContext":return this.createAjustmentOverridePriceListEntryInput();case"overrideContext":return this.createAjustmentOverridePriceListEntryInput();}}createPriceCostPriceListEntryInput(){if(this.isEditMode){return this.productConsole.createEditPriceListEntryInput(this.getPriceListEntryObject());}return this.productConsole.createPriceListEntryInput(this.getPriceListEntryObject());}createAjustmentOverridePriceListEntryInput(){if(this.isEditMode){return this.productConsole.createEditPromotionOfferPriceListEntryInput(this.getPriceListEntryObject());}return this.productConsole.createPromotionOfferPriceListEntryInput(this.getPriceListEntryObject());}getPriceListEntryObject(){const pricingDetailsForm=this.querySelector("vlocity-pc-pricing-details-form"),pricingVariableCombo=pricingDetailsForm.querySelector(".vpc-pricing-variable"),datesForm=this.querySelector("vlocity-pc-effective-dates-form");if(pricingVariableCombo){this.pricingVariableId=pricingVariableCombo.value;}const startDateEle=datesForm.querySelector(".vpc-start-date"),endDateEle=datesForm.querySelector(".vpc-end-date"),startDate=startDateEle&&startDateEle.value?VlocityPCUtils.getUTCTimeStamp(startDateEle.value,"datetime"):null,endDate=endDateEle&&endDateEle.value?VlocityPCUtils.getUTCTimeStamp(endDateEle.value,"datetime"):null;if("priceContext"===pricingDetailsForm.context||"costContext"===pricingDetailsForm.context){const priceListEntryObject={productId:this.productId,pricingElementId:this.querySelector("vlocity-pc-pricing-details-form").getAttribute("pricingElementId"),isBasePrice:!this.querySelector(".vpc-price-type-checkbox").querySelector("input").checked,displayText:this.querySelector(".vpc-pricing-form-text-area").value,isActive:this.querySelector(".vpc-adjustment-override-switch").value,startDate:isNaN(startDate)?null:startDate,endDate:isNaN(endDate)?null:endDate};if(this.isEditMode){priceListEntryObject.priceListEntryId=this.editModePriceListEntryId;return priceListEntryObject;}priceListEntryObject.priceListId=this.querySelector(".vpc-price-list-combobox").value;return priceListEntryObject;}let displayText="";if(this.isEditMode){}else{}const priceListEntryObject={pricingVariableId:pricingDetailsForm.pricingVariableId,promotionId:pricingDetailsForm.existingPromotion||pricingDetailsForm.promotionId||"",promotionItemId:pricingDetailsForm.promotionItemId||"",pricingElementId:pricingDetailsForm.pricingElementId,isBasePrice:!0,isOverride:"overrideContext"===pricingDetailsForm.context?!0:!1,productId:this.productId,displayText:(pricingDetailsForm.existingPromotion||pricingDetailsForm.offerBased)&&!pricingDetailsForm.newPromotion?this.querySelector(".vpc-header-display-name").value:this.querySelector(".vpc-adjustment-override-name").value,offerId:this.rootProductId||"",timePlanId:pricingDetailsForm.timePlanId||"",timePolicyId:pricingDetailsForm.timePolicyId||"",isActive:this.querySelector(".vpc-adjustment-override-switch").value,startDate:isNaN(startDate)?null:startDate,endDate:isNaN(endDate)?null:endDate};if(this.isEditMode){priceListEntryObject.priceListEntryId=this.editModePriceListEntryId;priceListEntryObject.displayText=pricingDetailsForm.existingPromotion||pricingDetailsForm.existingOffer||pricingDetailsForm.offerId?this.querySelector(".vpc-header-display-name").value:this.querySelector(".vpc-adjustment-override-name").value;return priceListEntryObject;}priceListEntryObject.priceListId=this.querySelector(".vpc-price-list-combobox").value;return priceListEntryObject;}createPriceListEntry(){this.productConsole.createPriceListEntry(this.createAjustmentOverridePriceListEntryInput()).then(response=>{// Dispatch event to let the tables that a new Price List Entry has been created
//this.fireAddPriceListEntryEvent(response.id);
const doneButton=this.querySelector(".vpc-promo-done");doneButton.classList.remove("vpc-done-button-wait-state");if(this.isEditMode){pubsub.fire("vpcshowadjustmentoverrideform","result",{show:!1});}this.showContextRules(response.result.Id);});}createAjustmentOverridePriceListEntryInput(){if(this.isEditMode){return this.productConsole.createEditPromotionOfferPriceListEntryInput(this.getPriceListEntryObject());}return this.productConsole.createPromotionOfferPriceListEntryInput(this.getPriceListEntryObject());}setEditModeState(editMode){this.isEditMode=editMode.isOn;if(this.isEditMode){this.editModePriceListEntryId=editMode.priceListEntryId;}}getProductIdEvent(){pubsub.fire("vpcproductid","result",{productId:this.productId});}cancelPricingFormButtonHandler(){pubsub.fire("vpcshowadjustmentoverrideform","result",{show:!1});pubsub.fire("vpcexpandpricingsection","result",{show:!0});this.resetContextRules();this.resetAllForms();this.loadChooseExistingForm();}showContextRules(id){// After the Price List Entry is created, the Context Rules
// form should show including the "Back to Quickadds" button
this.resetAllForms();this.querySelector(".vpc-back-to-quickadds-button-container").classList.add("vpc-show-side-bar-item");this.querySelector(".vpc-pricing-tab-form-container").classList.remove("vpc-show-side-bar-item");this.querySelector(".vpc-pricing-forms-button-container").classList.add("vpc-hide-side-bar-item");const contextRulesForm=this.querySelector("vlocity-pc-choose-context-rules-form");this.refreshAppliedPromotions();contextRulesForm.classList.add("vpc-show-side-bar-item");contextRulesForm.classList.remove("vpc-hide-side-bar-item");contextRulesForm.setAttribute("priceListEntryId",id);pubsub.fire("vpcisoninitialform","result",{isOnInitialForm:!1});}resetAllForms(){this.querySelector("vlocity-pc-pricing-details-form").resetForm();this.querySelector("vlocity-pc-price-list-header").resetForm();this.querySelector("vlocity-pc-price-form").resetForm();this.querySelector("vlocity-pc-existing-promotion-offer-form").resetForm();this.querySelector("vlocity-pc-effective-dates-form").resetForm();this.querySelector("vlocity-pc-promotion-form").resetForm();VlocityPCFormsService.resetDoneButton(this);this.isEditMode=!1;this.pricingDetailsFormReady=!1;}refreshAppliedPromotions(){this.promotionInput=this.productConsole.createAppliedPromotionsInput();this.promotionInput.productId=this.productId;this.productConsole.getAppliedPromotions(this.promotionInput).then(result=>{this.querySelector("vlocity-pc-choose-context-rules-form").promotions=VlocityPCTableService.flattenTableData(result.records)||[];}).catch(error=>{console.log(error);});}disconnectedCallback(){this.getProductIdEventHandler={result:this.getProductIdEvent.bind(this)};this.enableDoneButtonHandler={result:this.enableDoneButton.bind(this)};this.setRootProductIdHandler={result:this.setRootProductId.bind(this)};this.enableButtonContainerHandler={result:this.enableButtonContainer.bind(this)};this.setDoneButtonWaitStateHandler={result:this.setDoneButtonWaitState.bind(this)};this.removeButtonWaitStateHandler={result:this.removeButtonWaitState.bind(this)};this.refreshAppliedPromotionsHandler={result:this.refreshAppliedPromotions.bind(this)};this.setIntialFormStateHandler={result:this.setIntialFormState.bind(this)};this.setEditModeStateHandler={result:this.setEditModeState.bind(this)};this.resetAllFormsHandler={result:this.resetAllForms.bind(this)};pubsub.unregister("vpcgetproductid",this.getProductIdEventHandler);pubsub.unregister("vpcenabledonebutton",this.enableDoneButtonHandler);pubsub.unregister("vpcsetrootproduct",this.setRootProductIdHandler);pubsub.unregister("vpcenablebuttoncontainer",this.enableButtonContainerHandler);pubsub.unregister("vpcsetbuttonwaitstate",this.setDoneButtonWaitStateHandler);pubsub.unregister("vpcremovebuttonwaitstate",this.removeButtonWaitStateHandler);pubsub.unregister("vpcrulesetadded",this.refreshAppliedPromotionsHandler);pubsub.unregister("vpcisoninitialform",this.setIntialFormStateHandler);pubsub.unregister("vpceditmodeon",this.setEditModeStateHandler);pubsub.unregister("vpcresetallforms",this.resetAllFormsHandler);pubsub.unregister("vpcresetadjustmentoverrideform",this.resetAllFormsHandler);}}window.customElements.define(VlocityPcStructureAdjustmentForm.is,VlocityPcStructureAdjustmentForm);class VlocityPcProductStructure extends HTMLElement{constructor(){super();this.selectedProduct=null;}static get is(){return"vlocity-pc-product-structure";}template(){const translations=VlocitySDK.translation.getInstance();return html`
      <style>
        vlocity-pc-product-structure {
          --vpc-structure-space-xs: 5px;
          --vpc-structure-space-sm: 10px;
          --vpc-structure-space-md: 15px;
          --vpc-structure-space-lg: 20px;
          --vpc-structure-space-xl: 25px;
          --vpc-structure-space-xxl: 30px;
        }
        .vpc-product-structure_grid {
          display: grid;
          grid-template-columns: 67% 33%;
          grid-template-rows: 100%;
          height: 100%;
          border: 1px solid #d2d2d2;
        }
        vlocity-pc-structure-tree {
          overflow: hidden;
        }
        vlocity-pc-structure-edit-relationship {
          display: block;
          overflow: auto;
          height: 100%;
        }
        vlocity-pc-structure-quick-add {
          height: 100%;
        }
        vlocity-pc-structure-quick-add div:nth-child(2) {
          height: 93%;
        }
        vlocity-pc-structure-quick-add div:nth-child(3) {
          height: 7%;
        }
        vlocity-tabs {
          height: 100%;
          overflow: auto;
        }
      </style>
      ${!this.isStructureReloading?html`
            <div class="vpc-product-structure_grid">
              <vlocity-pc-structure-tree
                productid=${this.getAttribute("productid")}
              >
              </vlocity-pc-structure-tree>
              ${null===this.selectedProduct?html`
                    <!-- Quick Add Section -->
                    <vlocity-pc-structure-quick-add
                      productid=${this.getAttribute("productid")}
                    >
                    </vlocity-pc-structure-quick-add>
                  `:html`
                    <div class="vpc-structure-sections">
                      <!-- Edit Relationship Section -->
                      <vlocity-pc-structure-edit-relationship
                        productname=${this.selectedProduct.productName}
                        parentchilditemid=${this.selectedProduct.parentChildItemId}
                        productid=${this.selectedProduct.productId}
                        rootproductid=${this.getAttribute("productid")}
                        ?isleaf=${this.selectedProduct.isLeaf}
                        parentproductid=${this.selectedProduct.parentProductId}
                      >
                      </vlocity-pc-structure-edit-relationship>
                    </div>

                    <vlocity-pc-structure-adjustment-form
                      class="vpc-hide-side-bar-item"
                      productid=${this.productId}
                      rootproductid=${this.getAttribute("rootProductId")}
                    >
                    </vlocity-pc-structure-adjustment-form>
                  `}
            </div>
          `:""}
    `;}connectedCallback(){VlocityPCUtils.getLabels(PCProductStructureLabels,vlocityPcConfig.userLocale).then(()=>{this.render();this.setupStructureTreeEvents();});pubsub.register("vpcgetrootproduct",{result:this.fireSetRootProductEvent.bind(this)});pubsub.fire("vpceditmodeon","result",{priceListEntryId:null,isOn:!1});pubsub.register("vpcshowadjustmentoverrideform",{result:this.showAdjustmentOverrideForm.bind(this)});}showAdjustmentOverrideForm(e){if(e.show){if(!1===e.edit){this.querySelector("vlocity-pc-existing-promotion-offer-form").classList.remove("vpc-hide-side-bar-item");this.querySelector(".vpc-pricing-tab-form-container").classList.add("vpc-show-side-bar-item");this.querySelector("vlocity-pc-promotion-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-price-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-pricing-details-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-price-list-header").classList.add("vpc-hide-side-bar-item");}this.querySelector(".vpc-structure-sections").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-structure-adjustment-form").classList.remove("vpc-hide-side-bar-item");}else{this.querySelector(".vpc-structure-sections").classList.remove("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-structure-adjustment-form").classList.add("vpc-hide-side-bar-item");this.querySelector("vlocity-pc-structure-pricing-section").loadForm({});}}openDeletePrompt(details){let confirmation=this.querySelector("#confirmationPrompt");confirmation.show().then(()=>{pubsub.fire("vpcpricingdelete","deleteConfirm",{eventDetails:details.deleteConfirm});});}fireSetRootProductEvent(){pubsub.fire("vpcsetrootproduct","result",{rootProductId:this.getAttribute("productid"),productId:this.selectedProduct.productId});}reloadProduct(){this.isStructureReloading=!this.isStructureReloading;this.render();this.selectedProduct=null;setTimeout(()=>{this.isStructureReloading=!this.isStructureReloading;this.render();this.setupStructureTreeEvents();});}render(){render(this.template(),this);}setupStructureTreeEvents(){const structureTree=this.querySelector("vlocity-pc-structure-tree");structureTree.addEventListener("vpcstructureproductclicked",event=>{this.selectedProduct=event.detail;this.render();setTimeout(()=>{pubsub.fire("vpcupdateproduct","result",{productName:this.selectedProduct.productName,parentChildItemId:this.selectedProduct.parentChildItemId,productId:this.selectedProduct.productId,isleaf:this.selectedProduct.isLeaf,parentProductId:this.selectedProduct.parentProductId,rootProductId:this.getAttribute("productid")});},0);setTimeout(()=>{this.setupEditRelationshipEvents();},500);});}setupEditRelationshipEvents(){const editRelationship=this.querySelector("vlocity-pc-structure-edit-relationship");if(editRelationship){editRelationship.addEventListener("vpceditrelationshipcancelled",event=>{this.selectedProduct=null;this.render();});}}disconnectedCallback(){this.fireSetRootProductEventHandler={result:this.fireSetRootProductEvent.bind(this)};this.showAdjustmentOverrideFormHandler={result:this.showAdjustmentOverrideForm.bind(this)};pubsub.unregister("vpcgetrootproduct",this.fireSetRootProductEventHandler);pubsub.unregister("vpcshowadjustmentoverrideform",this.showAdjustmentOverrideFormHandler);}}window.customElements.define(VlocityPcProductStructure.is,VlocityPcProductStructure);class VlocityProductConsole extends HTMLElement{static get is(){return"vlocity-product-console";}template(){return html`
      <style>
        body {
          margin: 0;
          font-family: "Salesforce Sans", Arial, sans-serif;
          line-height: 1.5;
          height: 100vh;
          background-color: #ffffff;
          -ms-overflow-style: -ms-autohiding-scrollbar;
        }

        .vpc {
          --vpc-primary-color: #4285f4;
          --vpc-secondary-color: black;

          --vpc-primary-text-color: #313131;
          --vpc-secondary-text-color: #686868;

          --vpc-primary-bg-color: #f6f6f6;
          --vpc-secondary-bg-color: #ffffff;

          --vpc-primary-border-color: #ebebea;
          --vpc-secondary-border-color: #c2c0bf;

          --vpc-primary-status-border-color: #47e6b1;
          --vpc-secondary-status-border-color: #ff0000c4;

          --vpc-primary-slds-border-color: #dddbda;

          --vpc-active-dropzone-color: #e6f2ff;

          --vpc-selected-item-color: rgba(21, 137, 238, 0.1);

          --vpc-icon-light: #d2d1cf;
          --vpc-icon-dark: #000;

          --vpc-primary-button-bg-color: #1389ee;
          height: 100%;
        }

        .vpc-required::before {
          content: "*";
        }

        .vpc-attribute_required {
          color: red;
        }

        .vpc-title-caps {
          text-transform: uppercase;
          font-weight: bold;
          letter-spacing: 1px;
          color: #2b2826;
        }

        .vpc-sub-title {
          font-weight: bold;
          letter-spacing: 1px;
          color: #2b2826;
        }

        .vpc-invalid-label {
          color: red;
          display: inline-block;
        }

        .vpc .vpc-light-icon {
          fill: var(--vpc-icon-light);
        }

        .via-slds .vpc-dark-icon {
          fill: var(--vpc-icon-dark);
        }

        .via-slds .vpc-primary-icon {
          fill: var(--vpc-primary-color);
        }

        .vpc-toast-container {
          position: fixed;
          z-index: 99999;
        }

        .vpc-toast-container_bottom-left {
          top: 0;
          right: 0;
        }

        .vpc-toast-container .slds-notify_container .slds-notify__content {
          width: 100%;
        }

        .vpc-hidden {
          display: none;
        }

        .vpc-font-italic {
          font-style: italic;
        }

        .vpc-font-bold {
          font-weight: bold;
        }

        .vpc-font-line-through {
          text-decoration: line-through;
        }
        .vpc-hide-side-bar-item {
          display: none;
        }

        .via-slds .slds-has-error .slds-input {
          border-color: rgb(194, 57, 52) !important;
        }
        .via-slds .slds-has-error .slds-input:active,
        .via-slds .slds-has-error .slds-input:focus {
          box-shadow: #c23934 0 0 0 1px inset, 0 0 3px #0070d2 !important;
        }
      </style>

      <div class="vpc"></div>

      <div class="vpc-spinner slds-hide">
        <div
          role="status"
          class="slds-spinner slds-spinner_medium slds-spinner_brand slds-align_absolute-center"
        >
          <span class="slds-assistive-text">Loading</span>
          <div class="slds-spinner__dot-a"></div>
          <div class="slds-spinner__dot-b"></div>
        </div>
      </div>

      <div
        id="vpcToastContainer"
        class="vpc-toast-container vpc-toast-container_bottom-left"
      ></div>
    `;}connectedCallback(){const tmpl=this.querySelector("template#vpcMainContent");render(this.template(),this);const appRoot=this.querySelector(".vpc");this._createAppConfig();this._createSDKs();appRoot.appendChild(tmpl.content.cloneNode(!0));pubsub.register("vpccheckforerrors",{result:this.displayErrors.bind(this)});}_createAppConfig(){vlocityPcConfig.namespacePrefix=this.getAttribute("namespaceprefix")||"";vlocityPcConfig.sessionId=this.getAttribute("sessionid");vlocityPcConfig.sfInstanceUrl=this.getAttribute("sfinstanceurl");vlocityPcConfig.userLocale=this.getAttribute("userlocale");vlocityPcConfig.isLanguageRTL="true"===this.getAttribute("islanguageRTL");vlocityPcConfig.sfContentInstanceUrl=this.getAttribute("sfcontentinstanceurl");vlocityPcConfig.timeZone=this.getAttribute("timezone");vlocityPcConfig.timeZoneOffset=parseInt(this.getAttribute("timezoneoffset"));}_createSDKs(){vlocityPcConfig.dataSourceService=new VlocitySDK.datasource({url:vlocityPcConfig.sfInstanceUrl,sessionId:vlocityPcConfig.sessionId});VlocitySDK.translation.getInstance({datasource:vlocityPcConfig.dataSourceService});VlocitySDK.productconsole.getInstance({datasource:vlocityPcConfig.dataSourceService});}displayErrors(e){const toastContainer=this.querySelector(".vpc-toast-container"),response=e.response;if(response.errorCode&&!toastContainer.childElementCount){VlocityPCUtils.openToast(response.errorCode,response.error,"error");return;}}disconnectedCallback(){this.displayErrorsHandler={result:this.displayErrors.bind(this)};pubsub.unregister("vpccheckforerrors",this.displayErrorsHandler);}}window.customElements.define(VlocityProductConsole.is,VlocityProductConsole);export{defaultTemplateProcessor$1 as $defaultTemplateProcessor,directive$1 as $directive,dom as $dom,litHtml as $litHtml,part as $part,parts as $parts,render$1 as $render,repeat$1 as $repeat,template as $template,templateFactory$1 as $templateFactory,templateInstance as $templateInstance,templateResult as $templateResult,vlocityPcAttachmentUploadbox as $vlocityPcAttachmentUploadbox,vlocityPcAttachments_labels as $vlocityPcAttachmentsLabels,vlocityPcAttributesLabels as $vlocityPcAttributesLabels,vlocityPcButtonGroup as $vlocityPcButtonGroup,vlocityPcConfig$1 as $vlocityPcConfig,vlocityPcConfig as $vlocityPcConfigDefault,vlocityPcDetailsPicklist as $vlocityPcDetailsPicklist,vlocityPcEditAttribute as $vlocityPcEditAttribute,vlocityPcFieldLayout as $vlocityPcFieldLayout,vlocityPcFieldLayout_tmpl as $vlocityPcFieldLayoutTmpl,vlocityPcFormService as $vlocityPcFormService,vlocityPcLayoutSection as $vlocityPcLayoutSection,vlocityPcLayoutSectionElement as $vlocityPcLayoutSectionElement,vlocityPcLayoutSectionElement_tmpl as $vlocityPcLayoutSectionElementTmpl,vlocityPcLayoutSection_tmpl as $vlocityPcLayoutSectionTmpl,vlocityPcNewProduct as $vlocityPcNewProduct,vlocityPcNewVersion as $vlocityPcNewVersion,vlocityPcObjectDetail as $vlocityPcObjectDetail,vlocityPcObjectLabels as $vlocityPcObjectLabels,vlocityPcObjectTypes as $vlocityPcObjectTypes,vlocityPcPageHeader as $vlocityPcPageHeader,vlocityPcPicklist as $vlocityPcPicklist,vlocityPcPicklistDetail as $vlocityPcPicklistDetail,vlocityPcPicklistLabels as $vlocityPcPicklistLabels,vlocityPcPicklistValues as $vlocityPcPicklistValues,vlocityPcPricing_labels as $vlocityPcPricingLabels,vlocityPcProductDetails_labels as $vlocityPcProductDetailsLabels,vlocityPcProductPropertyValue as $vlocityPcProductPropertyValue,vlocityPcPubsubUtils as $vlocityPcPubsubUtils,pubsub as $vlocityPcPubsubUtilsDefault,vlocityPcSdkService as $vlocityPcSdkService,sdkService as $vlocityPcSdkServiceDefault,vlocityPcStructure_labels as $vlocityPcStructureLabels,vlocityPcTableService as $vlocityPcTableService,vlocityPcUtils as $vlocityPcUtils,AttributeCommitter,AttributeCommitter as AttributeCommitter$1,AttributePart,AttributePart as AttributePart$1,BooleanAttributePart,BooleanAttributePart as BooleanAttributePart$1,DefaultTemplateProcessor,DefaultTemplateProcessor as DefaultTemplateProcessor$1,EventPart,EventPart as EventPart$1,NodePart,NodePart as NodePart$1,PCPricingLabels,PCProductDetailsLabels,PCProductStructureLabels,PropertyCommitter,PropertyCommitter as PropertyCommitter$1,PropertyPart,PropertyPart as PropertyPart$1,SVGTemplateResult,SVGTemplateResult as SVGTemplateResult$1,Template,Template as Template$1,TemplateInstance,TemplateInstance as TemplateInstance$1,TemplateResult,TemplateResult as TemplateResult$1,VlocityPCAttachmentLables,VlocityPCAttributesLables,VlocityPCButtonGroup,VlocityPCDetailsPicklist,VlocityPCEditAttribute,VlocityPCFieldLayout,VlocityPCFormsService,VlocityPCNewProduct,VlocityPCNewVersion,VlocityPCObjectDetail,VlocityPCObjectLables,VlocityPCObjectSection,VlocityPCObjectTypes,VlocityPCPageHeader,VlocityPCPicklist,VlocityPCPicklistDetail,VlocityPCPicklistLabels,VlocityPCPicklistValues,VlocityPCSectionElement,VlocityPCTableService,VlocityPCUtils,VlocityPcAttachmentUploadbox,VlocityPcProductPropertyValue,createMarker,createMarker as createMarker$1,defaultTemplateProcessor,defaultTemplateProcessor as defaultTemplateProcessor$1,directive,html,isCEPolyfill,isCEPolyfill as isCEPolyfill$1,isDirective,isPrimitive,isPrimitive as isPrimitive$1,isTemplatePartActive,isTemplatePartActive as isTemplatePartActive$1,lastAttributeNameRegex,lastAttributeNameRegex as lastAttributeNameRegex$1,marker,marker as marker$1,markerRegex,markerRegex as markerRegex$1,noChange,noChange as noChange$1,nodeMarker,nodeMarker as nodeMarker$1,parts$1 as parts,removeNodes,removeNodes as removeNodes$1,render,reparentNodes,reparentNodes as reparentNodes$1,repeat,rewritesStyleAttribute,rewritesStyleAttribute as rewritesStyleAttribute$1,svg,template$3 as template,template$1,template$2,templateCaches,templateCaches as templateCaches$1,templateFactory,templateFactory as templateFactory$1};
